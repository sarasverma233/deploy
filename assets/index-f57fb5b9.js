var np=Object.defineProperty;var rp=(o,s,a)=>s in o?np(o,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):o[s]=a;var Qr=(o,s,a)=>(rp(o,typeof s!="symbol"?s+"":s,a),a),Fo=(o,s,a)=>{if(!s.has(o))throw TypeError("Cannot "+a)};var ir=(o,s,a)=>(Fo(o,s,"read from private field"),a?a.call(o):s.get(o)),Pr=(o,s,a)=>{if(s.has(o))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(o):s.set(o,a)},Ur=(o,s,a,et)=>(Fo(o,s,"write to private field"),et?et.call(o,a):s.set(o,a),a),Mo=(o,s,a,et)=>({set _(at){Ur(o,s,at,a)},get _(){return ir(o,s,et)}}),Fr=(o,s,a)=>(Fo(o,s,"access private method"),a);function _mergeNamespaces(o,s){for(var a=0;a<s.length;a++){const et=s[a];if(typeof et!="string"&&!Array.isArray(et)){for(const at in et)if(at!=="default"&&!(at in o)){const lt=Object.getOwnPropertyDescriptor(et,at);lt&&Object.defineProperty(o,at,lt.get?lt:{enumerable:!0,get:()=>et[at]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const at of document.querySelectorAll('link[rel="modulepreload"]'))et(at);new MutationObserver(at=>{for(const lt of at)if(lt.type==="childList")for(const ht of lt.addedNodes)ht.tagName==="LINK"&&ht.rel==="modulepreload"&&et(ht)}).observe(document,{childList:!0,subtree:!0});function a(at){const lt={};return at.integrity&&(lt.integrity=at.integrity),at.referrerPolicy&&(lt.referrerPolicy=at.referrerPolicy),at.crossOrigin==="use-credentials"?lt.credentials="include":at.crossOrigin==="anonymous"?lt.credentials="omit":lt.credentials="same-origin",lt}function et(at){if(at.ep)return;at.ep=!0;const lt=a(at);fetch(at.href,lt)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var s=o.default;if(typeof s=="function"){var a=function et(){if(this instanceof et){var at=[null];at.push.apply(at,arguments);var lt=Function.bind.apply(s,at);return new lt}return s.apply(this,arguments)};a.prototype=s.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(o).forEach(function(et){var at=Object.getOwnPropertyDescriptor(o,et);Object.defineProperty(a,et,at.get?at:{enumerable:!0,get:function(){return o[et]}})}),a}var jsxRuntimeExports={},jsxRuntime={get exports(){return jsxRuntimeExports},set exports(o){jsxRuntimeExports=o}},reactJsxRuntime_production_min={},reactExports={},react={get exports(){return reactExports},set exports(o){reactExports=o}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$3=Symbol.for("react.portal"),p$6=Symbol.for("react.fragment"),q$7=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$3=Symbol.for("react.provider"),u$2=Symbol.for("react.context"),v$7=Symbol.for("react.forward_ref"),w$3=Symbol.for("react.suspense"),x$4=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$6=Symbol.iterator;function A$5(o){return o===null||typeof o!="object"?null:(o=z$6&&o[z$6]||o["@@iterator"],typeof o=="function"?o:null)}var B$5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$4=Object.assign,D$3={};function E$4(o,s,a){this.props=o,this.context=s,this.refs=D$3,this.updater=a||B$5}E$4.prototype.isReactComponent={};E$4.prototype.setState=function(o,s){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,s,"setState")};E$4.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F$3(){}F$3.prototype=E$4.prototype;function G$4(o,s,a){this.props=o,this.context=s,this.refs=D$3,this.updater=a||B$5}var H$5=G$4.prototype=new F$3;H$5.constructor=G$4;C$4(H$5,E$4.prototype);H$5.isPureReactComponent=!0;var I$4=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$4={current:null},L$5={key:!0,ref:!0,__self:!0,__source:!0};function M$4(o,s,a){var et,at={},lt=null,ht=null;if(s!=null)for(et in s.ref!==void 0&&(ht=s.ref),s.key!==void 0&&(lt=""+s.key),s)J$2.call(s,et)&&!L$5.hasOwnProperty(et)&&(at[et]=s[et]);var dt=arguments.length-2;if(dt===1)at.children=a;else if(1<dt){for(var ft=Array(dt),vt=0;vt<dt;vt++)ft[vt]=arguments[vt+2];at.children=ft}if(o&&o.defaultProps)for(et in dt=o.defaultProps,dt)at[et]===void 0&&(at[et]=dt[et]);return{$$typeof:l$4,type:o,key:lt,ref:ht,props:at,_owner:K$4.current}}function N$5(o,s){return{$$typeof:l$4,type:o.type,key:s,ref:o.ref,props:o.props,_owner:o._owner}}function O$4(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$4}function escape$1(o){var s={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(a){return s[a]})}var P$5=/\/+/g;function Q$5(o,s){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):s.toString(36)}function R$3(o,s,a,et,at){var lt=typeof o;(lt==="undefined"||lt==="boolean")&&(o=null);var ht=!1;if(o===null)ht=!0;else switch(lt){case"string":case"number":ht=!0;break;case"object":switch(o.$$typeof){case l$4:case n$3:ht=!0}}if(ht)return ht=o,at=at(ht),o=et===""?"."+Q$5(ht,0):et,I$4(at)?(a="",o!=null&&(a=o.replace(P$5,"$&/")+"/"),R$3(at,s,a,"",function(vt){return vt})):at!=null&&(O$4(at)&&(at=N$5(at,a+(!at.key||ht&&ht.key===at.key?"":(""+at.key).replace(P$5,"$&/")+"/")+o)),s.push(at)),1;if(ht=0,et=et===""?".":et+":",I$4(o))for(var dt=0;dt<o.length;dt++){lt=o[dt];var ft=et+Q$5(lt,dt);ht+=R$3(lt,s,a,ft,at)}else if(ft=A$5(o),typeof ft=="function")for(o=ft.call(o),dt=0;!(lt=o.next()).done;)lt=lt.value,ft=et+Q$5(lt,dt++),ht+=R$3(lt,s,a,ft,at);else if(lt==="object")throw s=String(o),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return ht}function S$5(o,s,a){if(o==null)return o;var et=[],at=0;return R$3(o,et,"","",function(lt){return s.call(a,lt,at++)}),et}function T$4(o){if(o._status===-1){var s=o._result;s=s(),s.then(function(a){(o._status===0||o._status===-1)&&(o._status=1,o._result=a)},function(a){(o._status===0||o._status===-1)&&(o._status=2,o._result=a)}),o._status===-1&&(o._status=0,o._result=s)}if(o._status===1)return o._result.default;throw o._result}var U$4={current:null},V$4={transition:null},W$4={ReactCurrentDispatcher:U$4,ReactCurrentBatchConfig:V$4,ReactCurrentOwner:K$4};react_production_min.Children={map:S$5,forEach:function(o,s,a){S$5(o,function(){s.apply(this,arguments)},a)},count:function(o){var s=0;return S$5(o,function(){s++}),s},toArray:function(o){return S$5(o,function(s){return s})||[]},only:function(o){if(!O$4(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$4;react_production_min.Fragment=p$6;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$4;react_production_min.StrictMode=q$7;react_production_min.Suspense=w$3;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$4;react_production_min.cloneElement=function(o,s,a){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var et=C$4({},o.props),at=o.key,lt=o.ref,ht=o._owner;if(s!=null){if(s.ref!==void 0&&(lt=s.ref,ht=K$4.current),s.key!==void 0&&(at=""+s.key),o.type&&o.type.defaultProps)var dt=o.type.defaultProps;for(ft in s)J$2.call(s,ft)&&!L$5.hasOwnProperty(ft)&&(et[ft]=s[ft]===void 0&&dt!==void 0?dt[ft]:s[ft])}var ft=arguments.length-2;if(ft===1)et.children=a;else if(1<ft){dt=Array(ft);for(var vt=0;vt<ft;vt++)dt[vt]=arguments[vt+2];et.children=dt}return{$$typeof:l$4,type:o.type,key:at,ref:lt,props:et,_owner:ht}};react_production_min.createContext=function(o){return o={$$typeof:u$2,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$3,_context:o},o.Consumer=o};react_production_min.createElement=M$4;react_production_min.createFactory=function(o){var s=M$4.bind(null,o);return s.type=o,s};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$7,render:o}};react_production_min.isValidElement=O$4;react_production_min.lazy=function(o){return{$$typeof:y$3,_payload:{_status:-1,_result:o},_init:T$4}};react_production_min.memo=function(o,s){return{$$typeof:x$4,type:o,compare:s===void 0?null:s}};react_production_min.startTransition=function(o){var s=V$4.transition;V$4.transition={};try{o()}finally{V$4.transition=s}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(o,s){return U$4.current.useCallback(o,s)};react_production_min.useContext=function(o){return U$4.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$4.current.useDeferredValue(o)};react_production_min.useEffect=function(o,s){return U$4.current.useEffect(o,s)};react_production_min.useId=function(){return U$4.current.useId()};react_production_min.useImperativeHandle=function(o,s,a){return U$4.current.useImperativeHandle(o,s,a)};react_production_min.useInsertionEffect=function(o,s){return U$4.current.useInsertionEffect(o,s)};react_production_min.useLayoutEffect=function(o,s){return U$4.current.useLayoutEffect(o,s)};react_production_min.useMemo=function(o,s){return U$4.current.useMemo(o,s)};react_production_min.useReducer=function(o,s,a){return U$4.current.useReducer(o,s,a)};react_production_min.useRef=function(o){return U$4.current.useRef(o)};react_production_min.useState=function(o){return U$4.current.useState(o)};react_production_min.useSyncExternalStore=function(o,s,a){return U$4.current.useSyncExternalStore(o,s,a)};react_production_min.useTransition=function(){return U$4.current.useTransition()};react_production_min.version="18.2.0";(function(o){o.exports=react_production_min})(react);const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$6=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$2=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$6(o,s,a){var et,at={},lt=null,ht=null;a!==void 0&&(lt=""+a),s.key!==void 0&&(lt=""+s.key),s.ref!==void 0&&(ht=s.ref);for(et in s)m$4.call(s,et)&&!p$5.hasOwnProperty(et)&&(at[et]=s[et]);if(o&&o.defaultProps)for(et in s=o.defaultProps,s)at[et]===void 0&&(at[et]=s[et]);return{$$typeof:k$6,type:o,key:lt,ref:ht,props:at,_owner:n$2.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$6;reactJsxRuntime_production_min.jsxs=q$6;(function(o){o.exports=reactJsxRuntime_production_min})(jsxRuntime);const Fragment=jsxRuntimeExports.Fragment,jsx=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs;var client={},reactDomExports={},reactDom={get exports(){return reactDomExports},set exports(o){reactDomExports=o}},reactDom_production_min={},schedulerExports={},scheduler={get exports(){return schedulerExports},set exports(o){schedulerExports=o}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function s(sr,wr){var $r=sr.length;sr.push(wr);e:for(;0<$r;){var Sr=$r-1>>>1,en=sr[Sr];if(0<at(en,wr))sr[Sr]=wr,sr[$r]=en,$r=Sr;else break e}}function a(sr){return sr.length===0?null:sr[0]}function et(sr){if(sr.length===0)return null;var wr=sr[0],$r=sr.pop();if($r!==wr){sr[0]=$r;e:for(var Sr=0,en=sr.length,Kt=en>>>1;Sr<Kt;){var Gt=2*(Sr+1)-1,mn=sr[Gt],Jt=Gt+1,rr=sr[Jt];if(0>at(mn,$r))Jt<en&&0>at(rr,mn)?(sr[Sr]=rr,sr[Jt]=$r,Sr=Jt):(sr[Sr]=mn,sr[Gt]=$r,Sr=Gt);else if(Jt<en&&0>at(rr,$r))sr[Sr]=rr,sr[Jt]=$r,Sr=Jt;else break e}}return wr}function at(sr,wr){var $r=sr.sortIndex-wr.sortIndex;return $r!==0?$r:sr.id-wr.id}if(typeof performance=="object"&&typeof performance.now=="function"){var lt=performance;o.unstable_now=function(){return lt.now()}}else{var ht=Date,dt=ht.now();o.unstable_now=function(){return ht.now()-dt}}var ft=[],vt=[],wt=1,Ct=null,xt=3,Pt=!1,Rt=!1,_t=!1,St=typeof setTimeout=="function"?setTimeout:null,bt=typeof clearTimeout=="function"?clearTimeout:null,Nt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function kt(sr){for(var wr=a(vt);wr!==null;){if(wr.callback===null)et(vt);else if(wr.startTime<=sr)et(vt),wr.sortIndex=wr.expirationTime,s(ft,wr);else break;wr=a(vt)}}function Dt(sr){if(_t=!1,kt(sr),!Rt)if(a(ft)!==null)Rt=!0,mr(jt);else{var wr=a(vt);wr!==null&&cr(Dt,wr.startTime-sr)}}function jt(sr,wr){Rt=!1,_t&&(_t=!1,bt(Bt),Bt=-1),Pt=!0;var $r=xt;try{for(kt(wr),Ct=a(ft);Ct!==null&&(!(Ct.expirationTime>wr)||sr&&!nn());){var Sr=Ct.callback;if(typeof Sr=="function"){Ct.callback=null,xt=Ct.priorityLevel;var en=Sr(Ct.expirationTime<=wr);wr=o.unstable_now(),typeof en=="function"?Ct.callback=en:Ct===a(ft)&&et(ft),kt(wr)}else et(ft);Ct=a(ft)}if(Ct!==null)var Kt=!0;else{var Gt=a(vt);Gt!==null&&cr(Dt,Gt.startTime-wr),Kt=!1}return Kt}finally{Ct=null,xt=$r,Pt=!1}}var Wt=!1,Yt=null,Bt=-1,zt=5,qt=-1;function nn(){return!(o.unstable_now()-qt<zt)}function Fn(){if(Yt!==null){var sr=o.unstable_now();qt=sr;var wr=!0;try{wr=Yt(!0,sr)}finally{wr?dr():(Wt=!1,Yt=null)}}else Wt=!1}var dr;if(typeof Nt=="function")dr=function(){Nt(Fn)};else if(typeof MessageChannel<"u"){var ar=new MessageChannel,pr=ar.port2;ar.port1.onmessage=Fn,dr=function(){pr.postMessage(null)}}else dr=function(){St(Fn,0)};function mr(sr){Yt=sr,Wt||(Wt=!0,dr())}function cr(sr,wr){Bt=St(function(){sr(o.unstable_now())},wr)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(sr){sr.callback=null},o.unstable_continueExecution=function(){Rt||Pt||(Rt=!0,mr(jt))},o.unstable_forceFrameRate=function(sr){0>sr||125<sr?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):zt=0<sr?Math.floor(1e3/sr):5},o.unstable_getCurrentPriorityLevel=function(){return xt},o.unstable_getFirstCallbackNode=function(){return a(ft)},o.unstable_next=function(sr){switch(xt){case 1:case 2:case 3:var wr=3;break;default:wr=xt}var $r=xt;xt=wr;try{return sr()}finally{xt=$r}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(sr,wr){switch(sr){case 1:case 2:case 3:case 4:case 5:break;default:sr=3}var $r=xt;xt=sr;try{return wr()}finally{xt=$r}},o.unstable_scheduleCallback=function(sr,wr,$r){var Sr=o.unstable_now();switch(typeof $r=="object"&&$r!==null?($r=$r.delay,$r=typeof $r=="number"&&0<$r?Sr+$r:Sr):$r=Sr,sr){case 1:var en=-1;break;case 2:en=250;break;case 5:en=1073741823;break;case 4:en=1e4;break;default:en=5e3}return en=$r+en,sr={id:wt++,callback:wr,priorityLevel:sr,startTime:$r,expirationTime:en,sortIndex:-1},$r>Sr?(sr.sortIndex=$r,s(vt,sr),a(ft)===null&&sr===a(vt)&&(_t?(bt(Bt),Bt=-1):_t=!0,cr(Dt,$r-Sr))):(sr.sortIndex=en,s(ft,sr),Rt||Pt||(Rt=!0,mr(jt))),sr},o.unstable_shouldYield=nn,o.unstable_wrapCallback=function(sr){var wr=xt;return function(){var $r=xt;xt=wr;try{return sr.apply(this,arguments)}finally{xt=$r}}}})(scheduler_production_min);(function(o){o.exports=scheduler_production_min})(scheduler);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$2=reactExports,ca$1=schedulerExports;function p$4(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,a=1;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$2(o,s){ha$2(o,s),ha$2(o+"Capture",s)}function ha$2(o,s){for(ea$1[o]=s,o=0;o<s.length;o++)da$1.add(s[o])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja$2=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la$1={},ma$1={};function oa$1(o){return ja$2.call(ma$1,o)?!0:ja$2.call(la$1,o)?!1:ka.test(o)?ma$1[o]=!0:(la$1[o]=!0,!1)}function pa$1(o,s,a,et){if(a!==null&&a.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return et?!1:a!==null?!a.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa$1(o,s,a,et){if(s===null||typeof s>"u"||pa$1(o,s,a,et))return!0;if(et)return!1;if(a!==null)switch(a.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function v$6(o,s,a,et,at,lt,ht){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=et,this.attributeNamespace=at,this.mustUseProperty=a,this.propertyName=o,this.type=s,this.sanitizeURL=lt,this.removeEmptyString=ht}var z$5={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z$5[o]=new v$6(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];z$5[s]=new v$6(s,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z$5[o]=new v$6(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z$5[o]=new v$6(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z$5[o]=new v$6(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z$5[o]=new v$6(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z$5[o]=new v$6(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z$5[o]=new v$6(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z$5[o]=new v$6(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(ra$1,sa$1);z$5[s]=new v$6(s,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(ra$1,sa$1);z$5[s]=new v$6(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(ra$1,sa$1);z$5[s]=new v$6(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z$5[o]=new v$6(o,1,!1,o.toLowerCase(),null,!1,!1)});z$5.xlinkHref=new v$6("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z$5[o]=new v$6(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta$1(o,s,a,et){var at=z$5.hasOwnProperty(s)?z$5[s]:null;(at!==null?at.type!==0:et||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(qa$1(s,a,at,et)&&(a=null),et||at===null?oa$1(s)&&(a===null?o.removeAttribute(s):o.setAttribute(s,""+a)):at.mustUseProperty?o[at.propertyName]=a===null?at.type===3?!1:"":a:(s=at.attributeName,et=at.attributeNamespace,a===null?o.removeAttribute(s):(at=at.type,a=at===3||at===4&&a===!0?"":""+a,et?o.setAttributeNS(et,s,a):o.setAttribute(s,a))))}var ua$1=aa$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$2=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$2=Symbol.for("react.strict_mode"),Aa$2=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$2=Symbol.for("react.suspense"),Fa$2=Symbol.for("react.suspense_list"),Ga$2=Symbol.for("react.memo"),Ha$2=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka$2(o){return o===null||typeof o!="object"?null:(o=Ja$1&&o[Ja$1]||o["@@iterator"],typeof o=="function"?o:null)}var A$4=Object.assign,La$1;function Ma$1(o){if(La$1===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);La$1=s&&s[1]||""}return`
`+La$1+o}var Na$1=!1;function Oa$1(o,s){if(!o||Na$1)return"";Na$1=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(vt){var et=vt}Reflect.construct(o,[],s)}else{try{s.call()}catch(vt){et=vt}o.call(s.prototype)}else{try{throw Error()}catch(vt){et=vt}o()}}catch(vt){if(vt&&et&&typeof vt.stack=="string"){for(var at=vt.stack.split(`
`),lt=et.stack.split(`
`),ht=at.length-1,dt=lt.length-1;1<=ht&&0<=dt&&at[ht]!==lt[dt];)dt--;for(;1<=ht&&0<=dt;ht--,dt--)if(at[ht]!==lt[dt]){if(ht!==1||dt!==1)do if(ht--,dt--,0>dt||at[ht]!==lt[dt]){var ft=`
`+at[ht].replace(" at new "," at ");return o.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",o.displayName)),ft}while(1<=ht&&0<=dt);break}}}finally{Na$1=!1,Error.prepareStackTrace=a}return(o=o?o.displayName||o.name:"")?Ma$1(o):""}function Pa$1(o){switch(o.tag){case 5:return Ma$1(o.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return o=Oa$1(o.type,!1),o;case 11:return o=Oa$1(o.type.render,!1),o;case 1:return o=Oa$1(o.type,!0),o;default:return""}}function Qa$2(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$2:return"Profiler";case za$2:return"StrictMode";case Ea$2:return"Suspense";case Fa$2:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca:return(o.displayName||"Context")+".Consumer";case Ba$1:return(o._context.displayName||"Context")+".Provider";case Da$1:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga$2:return s=o.displayName||null,s!==null?s:Qa$2(o.type)||"Memo";case Ha$2:s=o._payload,o=o._init;try{return Qa$2(o(s))}catch{}}return null}function Ra$2(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$2(s);case 8:return s===za$2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Sa$1(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta$2(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ua$1(o){var s=Ta$2(o)?"checked":"value",a=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),et=""+o[s];if(!o.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var at=a.get,lt=a.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return at.call(this)},set:function(ht){et=""+ht,lt.call(this,ht)}}),Object.defineProperty(o,s,{enumerable:a.enumerable}),{getValue:function(){return et},setValue:function(ht){et=""+ht},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Va$1(o){o._valueTracker||(o._valueTracker=Ua$1(o))}function Wa$2(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var a=s.getValue(),et="";return o&&(et=Ta$2(o)?o.checked?"true":"false":o.value),o=et,o!==a?(s.setValue(o),!0):!1}function Xa$2(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya$2(o,s){var a=s.checked;return A$4({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??o._wrapperState.initialChecked})}function Za$1(o,s){var a=s.defaultValue==null?"":s.defaultValue,et=s.checked!=null?s.checked:s.defaultChecked;a=Sa$1(s.value!=null?s.value:a),o._wrapperState={initialChecked:et,initialValue:a,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ab$1(o,s){s=s.checked,s!=null&&ta$1(o,"checked",s,!1)}function bb$1(o,s){ab$1(o,s);var a=Sa$1(s.value),et=s.type;if(a!=null)et==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+a):o.value!==""+a&&(o.value=""+a);else if(et==="submit"||et==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?cb$1(o,s.type,a):s.hasOwnProperty("defaultValue")&&cb$1(o,s.type,Sa$1(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function db$2(o,s,a){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var et=s.type;if(!(et!=="submit"&&et!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,a||s===o.value||(o.value=s),o.defaultValue=s}a=o.name,a!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,a!==""&&(o.name=a)}function cb$1(o,s,a){(s!=="number"||Xa$2(o.ownerDocument)!==o)&&(a==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+a&&(o.defaultValue=""+a))}var eb$1=Array.isArray;function fb$1(o,s,a,et){if(o=o.options,s){s={};for(var at=0;at<a.length;at++)s["$"+a[at]]=!0;for(a=0;a<o.length;a++)at=s.hasOwnProperty("$"+o[a].value),o[a].selected!==at&&(o[a].selected=at),at&&et&&(o[a].defaultSelected=!0)}else{for(a=""+Sa$1(a),s=null,at=0;at<o.length;at++){if(o[at].value===a){o[at].selected=!0,et&&(o[at].defaultSelected=!0);return}s!==null||o[at].disabled||(s=o[at])}s!==null&&(s.selected=!0)}}function gb$1(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(p$4(91));return A$4({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb$1(o,s){var a=s.value;if(a==null){if(a=s.children,s=s.defaultValue,a!=null){if(s!=null)throw Error(p$4(92));if(eb$1(a)){if(1<a.length)throw Error(p$4(93));a=a[0]}s=a}s==null&&(s=""),a=s}o._wrapperState={initialValue:Sa$1(a)}}function ib$1(o,s){var a=Sa$1(s.value),et=Sa$1(s.defaultValue);a!=null&&(a=""+a,a!==o.value&&(o.value=a),s.defaultValue==null&&o.defaultValue!==a&&(o.defaultValue=a)),et!=null&&(o.defaultValue=""+et)}function jb$1(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function kb$1(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?kb$1(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb$1,nb$1=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,a,et,at){MSApp.execUnsafeLocalFunction(function(){return o(s,a,et,at)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=mb$1.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function ob$1(o,s){if(s){var a=o.firstChild;if(a&&a===o.lastChild&&a.nodeType===3){a.nodeValue=s;return}}o.textContent=s}var pb$2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$2).forEach(function(o){qb$1.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),pb$2[s]=pb$2[o]})});function rb$1(o,s,a){return s==null||typeof s=="boolean"||s===""?"":a||typeof s!="number"||s===0||pb$2.hasOwnProperty(o)&&pb$2[o]?(""+s).trim():s+"px"}function sb$1(o,s){o=o.style;for(var a in s)if(s.hasOwnProperty(a)){var et=a.indexOf("--")===0,at=rb$1(a,s[a],et);a==="float"&&(a="cssFloat"),et?o.setProperty(a,at):o[a]=at}}var tb=A$4({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(o,s){if(s){if(tb[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(p$4(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(p$4(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(p$4(61))}if(s.style!=null&&typeof s.style!="object")throw Error(p$4(62))}}function vb$1(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(o){if(o=Cb$1(o)){if(typeof yb$1!="function")throw Error(p$4(280));var s=o.stateNode;s&&(s=Db$1(s),yb$1(o.stateNode,o.type,s))}}function Eb$1(o){zb$1?Ab$1?Ab$1.push(o):Ab$1=[o]:zb$1=o}function Fb$1(){if(zb$1){var o=zb$1,s=Ab$1;if(Ab$1=zb$1=null,Bb$1(o),s)for(o=0;o<s.length;o++)Bb$1(s[o])}}function Gb$1(o,s){return o(s)}function Hb$1(){}var Ib$1=!1;function Jb$1(o,s,a){if(Ib$1)return o(s,a);Ib$1=!0;try{return Gb$1(o,s,a)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(o,s){var a=o.stateNode;if(a===null)return null;var et=Db$1(a);if(et===null)return null;a=et[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(et=!et.disabled)||(o=o.type,et=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!et;break e;default:o=!1}if(o)return null;if(a&&typeof a!="function")throw Error(p$4(231,s,typeof a));return a}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(o,s,a,et,at,lt,ht,dt,ft){var vt=Array.prototype.slice.call(arguments,3);try{s.apply(a,vt)}catch(wt){this.onError(wt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(o){Ob$1=!0,Pb$1=o}};function Tb$1(o,s,a,et,at,lt,ht,dt,ft){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(o,s,a,et,at,lt,ht,dt,ft){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var vt=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$4(198));Qb$1||(Qb$1=!0,Rb$1=vt)}}function Vb$1(o){var s=o,a=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,s.flags&4098&&(a=s.return),o=s.return;while(o)}return s.tag===3?a:null}function Wb$1(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function Xb$1(o){if(Vb$1(o)!==o)throw Error(p$4(188))}function Yb$1(o){var s=o.alternate;if(!s){if(s=Vb$1(o),s===null)throw Error(p$4(188));return s!==o?null:o}for(var a=o,et=s;;){var at=a.return;if(at===null)break;var lt=at.alternate;if(lt===null){if(et=at.return,et!==null){a=et;continue}break}if(at.child===lt.child){for(lt=at.child;lt;){if(lt===a)return Xb$1(at),o;if(lt===et)return Xb$1(at),s;lt=lt.sibling}throw Error(p$4(188))}if(a.return!==et.return)a=at,et=lt;else{for(var ht=!1,dt=at.child;dt;){if(dt===a){ht=!0,a=at,et=lt;break}if(dt===et){ht=!0,et=at,a=lt;break}dt=dt.sibling}if(!ht){for(dt=lt.child;dt;){if(dt===a){ht=!0,a=lt,et=at;break}if(dt===et){ht=!0,et=lt,a=at;break}dt=dt.sibling}if(!ht)throw Error(p$4(189))}}if(a.alternate!==et)throw Error(p$4(190))}if(a.tag!==3)throw Error(p$4(188));return a.stateNode.current===a?o:s}function Zb$1(o){return o=Yb$1(o),o!==null?$b$1(o):null}function $b$1(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=$b$1(o);if(s!==null)return s;o=o.sibling}return null}var ac$2=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$2=ca$1.unstable_shouldYield,dc$2=ca$1.unstable_requestPaint,B$4=ca$1.unstable_now,ec$2=ca$1.unstable_getCurrentPriorityLevel,fc$2=ca$1.unstable_ImmediatePriority,gc$2=ca$1.unstable_UserBlockingPriority,hc$2=ca$1.unstable_NormalPriority,ic$2=ca$1.unstable_LowPriority,jc$2=ca$1.unstable_IdlePriority,kc$2=null,lc$2=null;function mc$2(o){if(lc$2&&typeof lc$2.onCommitFiberRoot=="function")try{lc$2.onCommitFiberRoot(kc$2,o,void 0,(o.current.flags&128)===128)}catch{}}var oc$2=Math.clz32?Math.clz32:nc$2,pc$2=Math.log,qc$2=Math.LN2;function nc$2(o){return o>>>=0,o===0?32:31-(pc$2(o)/qc$2|0)|0}var rc$2=64,sc$2=4194304;function tc$2(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc$2(o,s){var a=o.pendingLanes;if(a===0)return 0;var et=0,at=o.suspendedLanes,lt=o.pingedLanes,ht=a&268435455;if(ht!==0){var dt=ht&~at;dt!==0?et=tc$2(dt):(lt&=ht,lt!==0&&(et=tc$2(lt)))}else ht=a&~at,ht!==0?et=tc$2(ht):lt!==0&&(et=tc$2(lt));if(et===0)return 0;if(s!==0&&s!==et&&!(s&at)&&(at=et&-et,lt=s&-s,at>=lt||at===16&&(lt&4194240)!==0))return s;if(et&4&&(et|=a&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=et;0<s;)a=31-oc$2(s),at=1<<a,et|=o[a],s&=~at;return et}function vc$1(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$2(o,s){for(var a=o.suspendedLanes,et=o.pingedLanes,at=o.expirationTimes,lt=o.pendingLanes;0<lt;){var ht=31-oc$2(lt),dt=1<<ht,ft=at[ht];ft===-1?(!(dt&a)||dt&et)&&(at[ht]=vc$1(dt,s)):ft<=s&&(o.expiredLanes|=dt),lt&=~dt}}function xc$2(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc$2(){var o=rc$2;return rc$2<<=1,!(rc$2&4194240)&&(rc$2=64),o}function zc$2(o){for(var s=[],a=0;31>a;a++)s.push(o);return s}function Ac$2(o,s,a){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-oc$2(s),o[s]=a}function Bc$2(o,s){var a=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var et=o.eventTimes;for(o=o.expirationTimes;0<a;){var at=31-oc$2(a),lt=1<<at;s[at]=0,et[at]=-1,o[at]=-1,a&=~lt}}function Cc$2(o,s){var a=o.entangledLanes|=s;for(o=o.entanglements;a;){var et=31-oc$2(a),at=1<<et;at&s|o[et]&s&&(o[et]|=s),a&=~at}}var C$3=0;function Dc$2(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec$2,Fc$2,Gc$2,Hc$2,Ic$2,Jc$2=!1,Kc$1=[],Lc$2=null,Mc$2=null,Nc$2=null,Oc$2=new Map,Pc$1=new Map,Qc$2=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$2(o,s){switch(o){case"focusin":case"focusout":Lc$2=null;break;case"dragenter":case"dragleave":Mc$2=null;break;case"mouseover":case"mouseout":Nc$2=null;break;case"pointerover":case"pointerout":Oc$2.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(s.pointerId)}}function Tc$2(o,s,a,et,at,lt){return o===null||o.nativeEvent!==lt?(o={blockedOn:s,domEventName:a,eventSystemFlags:et,nativeEvent:lt,targetContainers:[at]},s!==null&&(s=Cb$1(s),s!==null&&Fc$2(s)),o):(o.eventSystemFlags|=et,s=o.targetContainers,at!==null&&s.indexOf(at)===-1&&s.push(at),o)}function Uc$2(o,s,a,et,at){switch(s){case"focusin":return Lc$2=Tc$2(Lc$2,o,s,a,et,at),!0;case"dragenter":return Mc$2=Tc$2(Mc$2,o,s,a,et,at),!0;case"mouseover":return Nc$2=Tc$2(Nc$2,o,s,a,et,at),!0;case"pointerover":var lt=at.pointerId;return Oc$2.set(lt,Tc$2(Oc$2.get(lt)||null,o,s,a,et,at)),!0;case"gotpointercapture":return lt=at.pointerId,Pc$1.set(lt,Tc$2(Pc$1.get(lt)||null,o,s,a,et,at)),!0}return!1}function Vc$2(o){var s=Wc$2(o.target);if(s!==null){var a=Vb$1(s);if(a!==null){if(s=a.tag,s===13){if(s=Wb$1(a),s!==null){o.blockedOn=s,Ic$2(o.priority,function(){Gc$2(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){o.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc$2(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var a=Yc$2(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(a===null){a=o.nativeEvent;var et=new a.constructor(a.type,a);wb$1=et,a.target.dispatchEvent(et),wb$1=null}else return s=Cb$1(a),s!==null&&Fc$2(s),o.blockedOn=a,!1;s.shift()}return!0}function Zc$2(o,s,a){Xc$2(o)&&a.delete(s)}function $c$2(){Jc$2=!1,Lc$2!==null&&Xc$2(Lc$2)&&(Lc$2=null),Mc$2!==null&&Xc$2(Mc$2)&&(Mc$2=null),Nc$2!==null&&Xc$2(Nc$2)&&(Nc$2=null),Oc$2.forEach(Zc$2),Pc$1.forEach(Zc$2)}function ad$1(o,s){o.blockedOn===s&&(o.blockedOn=null,Jc$2||(Jc$2=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$2)))}function bd$1(o){function s(at){return ad$1(at,o)}if(0<Kc$1.length){ad$1(Kc$1[0],o);for(var a=1;a<Kc$1.length;a++){var et=Kc$1[a];et.blockedOn===o&&(et.blockedOn=null)}}for(Lc$2!==null&&ad$1(Lc$2,o),Mc$2!==null&&ad$1(Mc$2,o),Nc$2!==null&&ad$1(Nc$2,o),Oc$2.forEach(s),Pc$1.forEach(s),a=0;a<Qc$2.length;a++)et=Qc$2[a],et.blockedOn===o&&(et.blockedOn=null);for(;0<Qc$2.length&&(a=Qc$2[0],a.blockedOn===null);)Vc$2(a),a.blockedOn===null&&Qc$2.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(o,s,a,et){var at=C$3,lt=cd$1.transition;cd$1.transition=null;try{C$3=1,fd$1(o,s,a,et)}finally{C$3=at,cd$1.transition=lt}}function gd$1(o,s,a,et){var at=C$3,lt=cd$1.transition;cd$1.transition=null;try{C$3=4,fd$1(o,s,a,et)}finally{C$3=at,cd$1.transition=lt}}function fd$1(o,s,a,et){if(dd$1){var at=Yc$2(o,s,a,et);if(at===null)hd$1(o,s,et,id$1,a),Sc$2(o,et);else if(Uc$2(at,o,s,a,et))et.stopPropagation();else if(Sc$2(o,et),s&4&&-1<Rc$1.indexOf(o)){for(;at!==null;){var lt=Cb$1(at);if(lt!==null&&Ec$2(lt),lt=Yc$2(o,s,a,et),lt===null&&hd$1(o,s,et,id$1,a),lt===at)break;at=lt}at!==null&&et.stopPropagation()}else hd$1(o,s,et,null,a)}}var id$1=null;function Yc$2(o,s,a,et){if(id$1=null,o=xb$1(et),o=Wc$2(o),o!==null)if(s=Vb$1(o),s===null)o=null;else if(a=s.tag,a===13){if(o=Wb$1(s),o!==null)return o;o=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return id$1=o,null}function jd$1(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$2()){case fc$2:return 1;case gc$2:return 4;case hc$2:case ic$2:return 16;case jc$2:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var o,s=ld$1,a=s.length,et,at="value"in kd$1?kd$1.value:kd$1.textContent,lt=at.length;for(o=0;o<a&&s[o]===at[o];o++);var ht=a-o;for(et=1;et<=ht&&s[a-et]===at[lt-et];et++);return md$1=at.slice(o,1<et?1-et:void 0)}function od$1(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(o){function s(a,et,at,lt,ht){this._reactName=a,this._targetInst=at,this.type=et,this.nativeEvent=lt,this.target=ht,this.currentTarget=null;for(var dt in o)o.hasOwnProperty(dt)&&(a=o[dt],this[dt]=a?a(lt):lt[dt]);return this.isDefaultPrevented=(lt.defaultPrevented!=null?lt.defaultPrevented:lt.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$4(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),s}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$4({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$4({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd$1&&(yd$1&&o.type==="mousemove"?(wd$1=o.screenX-yd$1.screenX,xd$1=o.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=o),wd$1)},movementY:function(o){return"movementY"in o?o.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$4({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$4({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$4({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$4({},sd$1,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd=A$4({},sd$1,{data:0}),Ld=rd$1(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Od[o])?!!s[o]:!1}function zd$1(){return Pd}var Qd=A$4({},ud$1,{key:function(o){if(o.key){var s=Md[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=od$1(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(o){return o.type==="keypress"?od$1(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od$1(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd=rd$1(Qd),Sd=A$4({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd$1(Sd),Ud=A$4({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd=rd$1(Ud),Wd=A$4({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd$1(Wd),Yd=A$4({},Ad$1,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd$1(Yd),$d=[9,13,27,32],ae$1=ia$1&&"CompositionEvent"in window,be$2=null;ia$1&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$2,de$1=ia$1&&(!ae$1||be$2&&8<be$2&&11>=be$2),ee$1=String.fromCharCode(32),fe$1=!1;function ge$2(o,s){switch(o){case"keyup":return $d.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie$1=!1;function je$2(o,s){switch(o){case"compositionend":return he$1(s);case"keypress":return s.which!==32?null:(fe$1=!0,ee$1);case"textInput":return o=s.data,o===ee$1&&fe$1?null:o;default:return null}}function ke$2(o,s){if(ie$1)return o==="compositionend"||!ae$1&&ge$2(o,s)?(o=nd$1(),md$1=ld$1=kd$1=null,ie$1=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return de$1&&s.locale!=="ko"?null:s.data;default:return null}}var le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!le[o.type]:s==="textarea"}function ne$1(o,s,a,et){Eb$1(et),s=oe$1(s,"onChange"),0<s.length&&(a=new td$1("onChange","change",null,a,et),o.push({event:a,listeners:s}))}var pe$2=null,qe$2=null;function re$1(o){se$1(o,0)}function te$1(o){var s=ue$1(o);if(Wa$2(s))return o}function ve$1(o,s){if(o==="change")return s}var we$2=!1;if(ia$1){var xe$2;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze$2=document.createElement("div");ze$2.setAttribute("oninput","return;"),ye$1=typeof ze$2.oninput=="function"}xe$2=ye$1}else xe$2=!1;we$2=xe$2&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$2&&(pe$2.detachEvent("onpropertychange",Be$2),qe$2=pe$2=null)}function Be$2(o){if(o.propertyName==="value"&&te$1(qe$2)){var s=[];ne$1(s,qe$2,o,xb$1(o)),Jb$1(re$1,s)}}function Ce$2(o,s,a){o==="focusin"?(Ae$2(),pe$2=s,qe$2=a,pe$2.attachEvent("onpropertychange",Be$2)):o==="focusout"&&Ae$2()}function De$2(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te$1(qe$2)}function Ee$1(o,s){if(o==="click")return te$1(s)}function Fe$1(o,s){if(o==="input"||o==="change")return te$1(s)}function Ge$2(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var He$2=typeof Object.is=="function"?Object.is:Ge$2;function Ie$1(o,s){if(He$2(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var a=Object.keys(o),et=Object.keys(s);if(a.length!==et.length)return!1;for(et=0;et<a.length;et++){var at=a[et];if(!ja$2.call(s,at)||!He$2(o[at],s[at]))return!1}return!0}function Je$1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke$1(o,s){var a=Je$1(o);o=0;for(var et;a;){if(a.nodeType===3){if(et=o+a.textContent.length,o<=s&&et>=s)return{node:a,offset:s-o};o=et}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Je$1(a)}}function Le$1(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?Le$1(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function Me$1(){for(var o=window,s=Xa$2();s instanceof o.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)o=s.contentWindow;else break;s=Xa$2(o.document)}return s}function Ne$2(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function Oe$1(o){var s=Me$1(),a=o.focusedElem,et=o.selectionRange;if(s!==a&&a&&a.ownerDocument&&Le$1(a.ownerDocument.documentElement,a)){if(et!==null&&Ne$2(a)){if(s=et.start,o=et.end,o===void 0&&(o=s),"selectionStart"in a)a.selectionStart=s,a.selectionEnd=Math.min(o,a.value.length);else if(o=(s=a.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var at=a.textContent.length,lt=Math.min(et.start,at);et=et.end===void 0?lt:Math.min(et.end,at),!o.extend&&lt>et&&(at=et,et=lt,lt=at),at=Ke$1(a,lt);var ht=Ke$1(a,et);at&&ht&&(o.rangeCount!==1||o.anchorNode!==at.node||o.anchorOffset!==at.offset||o.focusNode!==ht.node||o.focusOffset!==ht.offset)&&(s=s.createRange(),s.setStart(at.node,at.offset),o.removeAllRanges(),lt>et?(o.addRange(s),o.extend(ht.node,ht.offset)):(s.setEnd(ht.node,ht.offset),o.addRange(s)))}}for(s=[],o=a;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<s.length;a++)o=s[a],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe$1=null,Re$2=null,Se$2=null,Te$2=!1;function Ue$1(o,s,a){var et=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Te$2||Qe$1==null||Qe$1!==Xa$2(et)||(et=Qe$1,"selectionStart"in et&&Ne$2(et)?et={start:et.selectionStart,end:et.selectionEnd}:(et=(et.ownerDocument&&et.ownerDocument.defaultView||window).getSelection(),et={anchorNode:et.anchorNode,anchorOffset:et.anchorOffset,focusNode:et.focusNode,focusOffset:et.focusOffset}),Se$2&&Ie$1(Se$2,et)||(Se$2=et,et=oe$1(Re$2,"onSelect"),0<et.length&&(s=new td$1("onSelect","select",null,s,a),o.push({event:s,listeners:et}),s.target=Qe$1)))}function Ve$2(o,s){var a={};return a[o.toLowerCase()]=s.toLowerCase(),a["Webkit"+o]="webkit"+s,a["Moz"+o]="moz"+s,a}var We$1={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe={},Ye$2={};ia$1&&(Ye$2=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(o){if(Xe[o])return Xe[o];if(!We$1[o])return o;var s=We$1[o],a;for(a in s)if(s.hasOwnProperty(a)&&a in Ye$2)return Xe[o]=s[a];return o}var $e$1=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,s){df.set(o,s),fa$2(s,[o])}for(var gf=0;gf<ef.length;gf++){var hf$1=ef[gf],jf=hf$1.toLowerCase(),kf=hf$1[0].toUpperCase()+hf$1.slice(1);ff(jf,"on"+kf)}ff($e$1,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$2("onMouseEnter",["mouseout","mouseover"]);ha$2("onMouseLeave",["mouseout","mouseover"]);ha$2("onPointerEnter",["pointerout","pointerover"]);ha$2("onPointerLeave",["pointerout","pointerover"]);fa$2("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$2("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$2("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$2("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$2("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf$1="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf$1));function nf(o,s,a){var et=o.type||"unknown-event";o.currentTarget=a,Ub$1(et,s,void 0,o),o.currentTarget=null}function se$1(o,s){s=(s&4)!==0;for(var a=0;a<o.length;a++){var et=o[a],at=et.event;et=et.listeners;e:{var lt=void 0;if(s)for(var ht=et.length-1;0<=ht;ht--){var dt=et[ht],ft=dt.instance,vt=dt.currentTarget;if(dt=dt.listener,ft!==lt&&at.isPropagationStopped())break e;nf(at,dt,vt),lt=ft}else for(ht=0;ht<et.length;ht++){if(dt=et[ht],ft=dt.instance,vt=dt.currentTarget,dt=dt.listener,ft!==lt&&at.isPropagationStopped())break e;nf(at,dt,vt),lt=ft}}}if(Qb$1)throw o=Rb$1,Qb$1=!1,Rb$1=null,o}function D$2(o,s){var a=s[of];a===void 0&&(a=s[of]=new Set);var et=o+"__bubble";a.has(et)||(pf(s,o,2,!1),a.add(et))}function qf(o,s,a){var et=0;s&&(et|=4),pf(a,o,et,s)}var rf$1="_reactListening"+Math.random().toString(36).slice(2);function sf$1(o){if(!o[rf$1]){o[rf$1]=!0,da$1.forEach(function(a){a!=="selectionchange"&&(mf.has(a)||qf(a,!1,o),qf(a,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[rf$1]||(s[rf$1]=!0,qf("selectionchange",!1,s))}}function pf(o,s,a,et){switch(jd$1(s)){case 1:var at=ed$1;break;case 4:at=gd$1;break;default:at=fd$1}a=at.bind(null,s,a,o),at=void 0,!Lb$1||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(at=!0),et?at!==void 0?o.addEventListener(s,a,{capture:!0,passive:at}):o.addEventListener(s,a,!0):at!==void 0?o.addEventListener(s,a,{passive:at}):o.addEventListener(s,a,!1)}function hd$1(o,s,a,et,at){var lt=et;if(!(s&1)&&!(s&2)&&et!==null)e:for(;;){if(et===null)return;var ht=et.tag;if(ht===3||ht===4){var dt=et.stateNode.containerInfo;if(dt===at||dt.nodeType===8&&dt.parentNode===at)break;if(ht===4)for(ht=et.return;ht!==null;){var ft=ht.tag;if((ft===3||ft===4)&&(ft=ht.stateNode.containerInfo,ft===at||ft.nodeType===8&&ft.parentNode===at))return;ht=ht.return}for(;dt!==null;){if(ht=Wc$2(dt),ht===null)return;if(ft=ht.tag,ft===5||ft===6){et=lt=ht;continue e}dt=dt.parentNode}}et=et.return}Jb$1(function(){var vt=lt,wt=xb$1(a),Ct=[];e:{var xt=df.get(o);if(xt!==void 0){var Pt=td$1,Rt=o;switch(o){case"keypress":if(od$1(a)===0)break e;case"keydown":case"keyup":Pt=Rd;break;case"focusin":Rt="focus",Pt=Fd$1;break;case"focusout":Rt="blur",Pt=Fd$1;break;case"beforeblur":case"afterblur":Pt=Fd$1;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=Vd;break;case $e$1:case af:case bf:Pt=Hd$1;break;case cf:Pt=Xd;break;case"scroll":Pt=vd$1;break;case"wheel":Pt=Zd;break;case"copy":case"cut":case"paste":Pt=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=Td}var _t=(s&4)!==0,St=!_t&&o==="scroll",bt=_t?xt!==null?xt+"Capture":null:xt;_t=[];for(var Nt=vt,kt;Nt!==null;){kt=Nt;var Dt=kt.stateNode;if(kt.tag===5&&Dt!==null&&(kt=Dt,bt!==null&&(Dt=Kb$1(Nt,bt),Dt!=null&&_t.push(tf$1(Nt,Dt,kt)))),St)break;Nt=Nt.return}0<_t.length&&(xt=new Pt(xt,Rt,null,a,wt),Ct.push({event:xt,listeners:_t}))}}if(!(s&7)){e:{if(xt=o==="mouseover"||o==="pointerover",Pt=o==="mouseout"||o==="pointerout",xt&&a!==wb$1&&(Rt=a.relatedTarget||a.fromElement)&&(Wc$2(Rt)||Rt[uf]))break e;if((Pt||xt)&&(xt=wt.window===wt?wt:(xt=wt.ownerDocument)?xt.defaultView||xt.parentWindow:window,Pt?(Rt=a.relatedTarget||a.toElement,Pt=vt,Rt=Rt?Wc$2(Rt):null,Rt!==null&&(St=Vb$1(Rt),Rt!==St||Rt.tag!==5&&Rt.tag!==6)&&(Rt=null)):(Pt=null,Rt=vt),Pt!==Rt)){if(_t=Bd$1,Dt="onMouseLeave",bt="onMouseEnter",Nt="mouse",(o==="pointerout"||o==="pointerover")&&(_t=Td,Dt="onPointerLeave",bt="onPointerEnter",Nt="pointer"),St=Pt==null?xt:ue$1(Pt),kt=Rt==null?xt:ue$1(Rt),xt=new _t(Dt,Nt+"leave",Pt,a,wt),xt.target=St,xt.relatedTarget=kt,Dt=null,Wc$2(wt)===vt&&(_t=new _t(bt,Nt+"enter",Rt,a,wt),_t.target=kt,_t.relatedTarget=St,Dt=_t),St=Dt,Pt&&Rt)t:{for(_t=Pt,bt=Rt,Nt=0,kt=_t;kt;kt=vf(kt))Nt++;for(kt=0,Dt=bt;Dt;Dt=vf(Dt))kt++;for(;0<Nt-kt;)_t=vf(_t),Nt--;for(;0<kt-Nt;)bt=vf(bt),kt--;for(;Nt--;){if(_t===bt||bt!==null&&_t===bt.alternate)break t;_t=vf(_t),bt=vf(bt)}_t=null}else _t=null;Pt!==null&&wf(Ct,xt,Pt,_t,!1),Rt!==null&&St!==null&&wf(Ct,St,Rt,_t,!0)}}e:{if(xt=vt?ue$1(vt):window,Pt=xt.nodeName&&xt.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&xt.type==="file")var jt=ve$1;else if(me$2(xt))if(we$2)jt=Fe$1;else{jt=De$2;var Wt=Ce$2}else(Pt=xt.nodeName)&&Pt.toLowerCase()==="input"&&(xt.type==="checkbox"||xt.type==="radio")&&(jt=Ee$1);if(jt&&(jt=jt(o,vt))){ne$1(Ct,jt,a,wt);break e}Wt&&Wt(o,xt,vt),o==="focusout"&&(Wt=xt._wrapperState)&&Wt.controlled&&xt.type==="number"&&cb$1(xt,"number",xt.value)}switch(Wt=vt?ue$1(vt):window,o){case"focusin":(me$2(Wt)||Wt.contentEditable==="true")&&(Qe$1=Wt,Re$2=vt,Se$2=null);break;case"focusout":Se$2=Re$2=Qe$1=null;break;case"mousedown":Te$2=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$2=!1,Ue$1(Ct,a,wt);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue$1(Ct,a,wt)}var Yt;if(ae$1)e:{switch(o){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ie$1?ge$2(o,a)&&(Bt="onCompositionEnd"):o==="keydown"&&a.keyCode===229&&(Bt="onCompositionStart");Bt&&(de$1&&a.locale!=="ko"&&(ie$1||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ie$1&&(Yt=nd$1()):(kd$1=wt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie$1=!0)),Wt=oe$1(vt,Bt),0<Wt.length&&(Bt=new Ld(Bt,o,null,a,wt),Ct.push({event:Bt,listeners:Wt}),Yt?Bt.data=Yt:(Yt=he$1(a),Yt!==null&&(Bt.data=Yt)))),(Yt=ce$1?je$2(o,a):ke$2(o,a))&&(vt=oe$1(vt,"onBeforeInput"),0<vt.length&&(wt=new Ld("onBeforeInput","beforeinput",null,a,wt),Ct.push({event:wt,listeners:vt}),wt.data=Yt))}se$1(Ct,s)})}function tf$1(o,s,a){return{instance:o,listener:s,currentTarget:a}}function oe$1(o,s){for(var a=s+"Capture",et=[];o!==null;){var at=o,lt=at.stateNode;at.tag===5&&lt!==null&&(at=lt,lt=Kb$1(o,a),lt!=null&&et.unshift(tf$1(o,lt,at)),lt=Kb$1(o,s),lt!=null&&et.push(tf$1(o,lt,at))),o=o.return}return et}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,s,a,et,at){for(var lt=s._reactName,ht=[];a!==null&&a!==et;){var dt=a,ft=dt.alternate,vt=dt.stateNode;if(ft!==null&&ft===et)break;dt.tag===5&&vt!==null&&(dt=vt,at?(ft=Kb$1(a,lt),ft!=null&&ht.unshift(tf$1(a,ft,dt))):at||(ft=Kb$1(a,lt),ft!=null&&ht.push(tf$1(a,ft,dt)))),a=a.return}ht.length!==0&&o.push({event:s,listeners:ht})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,s,a){if(s=zf(s),zf(o)!==s&&a)throw Error(p$4(425))}function Bf(){}var Cf=null,Df$1=null;function Ef(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,s){var a=s,et=0;do{var at=a.nextSibling;if(o.removeChild(a),at&&at.nodeType===8)if(a=at.data,a==="/$"){if(et===0){o.removeChild(at),bd$1(s);return}et--}else a!=="$"&&a!=="$?"&&a!=="$!"||et++;a=at}while(a);bd$1(s)}function Lf(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var a=o.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return o;s--}else a==="/$"&&s++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$2(o){var s=o[Of];if(s)return s;for(var a=o.parentNode;a;){if(s=a[uf]||a[Of]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(o=Mf(o);o!==null;){if(a=o[Of])return a;o=Mf(o)}return s}o=a,a=o.parentNode}return null}function Cb$1(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue$1(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$4(33))}function Db$1(o){return o[Pf]||null}var Sf$1=[],Tf=-1;function Uf(o){return{current:o}}function E$3(o){0>Tf||(o.current=Sf$1[Tf],Sf$1[Tf]=null,Tf--)}function G$3(o,s){Tf++,Sf$1[Tf]=o.current,o.current=s}var Vf={},H$4=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,s){var a=o.type.contextTypes;if(!a)return Vf;var et=o.stateNode;if(et&&et.__reactInternalMemoizedUnmaskedChildContext===s)return et.__reactInternalMemoizedMaskedChildContext;var at={},lt;for(lt in a)at[lt]=s[lt];return et&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=at),at}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E$3(Wf),E$3(H$4)}function ag(o,s,a){if(H$4.current!==Vf)throw Error(p$4(168));G$3(H$4,s),G$3(Wf,a)}function bg(o,s,a){var et=o.stateNode;if(s=s.childContextTypes,typeof et.getChildContext!="function")return a;et=et.getChildContext();for(var at in et)if(!(at in s))throw Error(p$4(108,Ra$2(o)||"Unknown",at));return A$4({},a,et)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$4.current,G$3(H$4,o),G$3(Wf,Wf.current),!0}function dg(o,s,a){var et=o.stateNode;if(!et)throw Error(p$4(169));a?(o=bg(o,s,Xf),et.__reactInternalMemoizedMergedChildContext=o,E$3(Wf),E$3(H$4),G$3(H$4,o)):E$3(Wf),G$3(Wf,a)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,s=C$3;try{var a=eg;for(C$3=1;o<a.length;o++){var et=a[o];do et=et(!0);while(et!==null)}eg=null,fg=!1}catch(at){throw eg!==null&&(eg=eg.slice(o+1)),ac$2(fc$2,jg),at}finally{C$3=s,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,s){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=s}function ug(o,s,a){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var et=rg;o=sg;var at=32-oc$2(et)-1;et&=~(1<<at),a+=1;var lt=32-oc$2(s)+at;if(30<lt){var ht=at-at%5;lt=(et&(1<<ht)-1).toString(32),et>>=ht,at-=ht,rg=1<<32-oc$2(s)+at|a<<at|et,sg=lt+o}else rg=1<<lt|a<<at|et,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$3=!1,zg=null;function Ag(o,s){var a=Bg(5,null,null,0);a.elementType="DELETED",a.stateNode=s,a.return=o,s=o.deletions,s===null?(o.deletions=[a],o.flags|=16):s.push(a)}function Cg(o,s){switch(o.tag){case 5:var a=o.type;return s=s.nodeType!==1||a.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,xg=o,yg=Lf(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,xg=o,yg=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(a=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:s,treeContext:a,retryLane:1073741824},a=Bg(18,null,null,0),a.stateNode=s,a.return=o,o.child=a,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I$3){var s=yg;if(s){var a=s;if(!Cg(o,s)){if(Dg(o))throw Error(p$4(418));s=Lf(a.nextSibling);var et=xg;s&&Cg(o,s)?Ag(et,a):(o.flags=o.flags&-4097|2,I$3=!1,xg=o)}}else{if(Dg(o))throw Error(p$4(418));o.flags=o.flags&-4097|2,I$3=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I$3)return Fg(o),I$3=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!Ef(o.type,o.memoizedProps)),s&&(s=yg)){if(Dg(o))throw Hg(),Error(p$4(418));for(;s;)Ag(o,s),s=Lf(s.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$4(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var a=o.data;if(a==="/$"){if(s===0){yg=Lf(o.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I$3=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(o,s){if(o&&o.defaultProps){s=A$4({},s),o=o.defaultProps;for(var a in o)s[a]===void 0&&(s[a]=o[a]);return s}return s}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(o){var s=Mg.current;E$3(Mg),o._currentValue=s}function Sg(o,s,a){for(;o!==null;){var et=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,et!==null&&(et.childLanes|=s)):et!==null&&(et.childLanes&s)!==s&&(et.childLanes|=s),o===a)break;o=o.return}}function Tg(o,s){Ng=o,Pg=Og=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&s&&(Ug=!0),o.firstContext=null)}function Vg(o){var s=o._currentValue;if(Pg!==o)if(o={context:o,memoizedValue:s,next:null},Og===null){if(Ng===null)throw Error(p$4(308));Og=o,Ng.dependencies={lanes:0,firstContext:o}}else Og=Og.next=o;return s}var Wg=null;function Xg(o){Wg===null?Wg=[o]:Wg.push(o)}function Yg(o,s,a,et){var at=s.interleaved;return at===null?(a.next=a,Xg(s)):(a.next=at.next,at.next=a),s.interleaved=a,Zg(o,et)}function Zg(o,s){o.lanes|=s;var a=o.alternate;for(a!==null&&(a.lanes|=s),a=o,o=o.return;o!==null;)o.childLanes|=s,a=o.alternate,a!==null&&(a.childLanes|=s),a=o,o=o.return;return a.tag===3?a.stateNode:null}var $g=!1;function ah(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ch$1(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function dh(o,s,a){var et=o.updateQueue;if(et===null)return null;if(et=et.shared,K$3&2){var at=et.pending;return at===null?s.next=s:(s.next=at.next,at.next=s),et.pending=s,Zg(o,a)}return at=et.interleaved,at===null?(s.next=s,Xg(et)):(s.next=at.next,at.next=s),et.interleaved=s,Zg(o,a)}function eh$1(o,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194240)!==0)){var et=s.lanes;et&=o.pendingLanes,a|=et,s.lanes=a,Cc$2(o,a)}}function fh$1(o,s){var a=o.updateQueue,et=o.alternate;if(et!==null&&(et=et.updateQueue,a===et)){var at=null,lt=null;if(a=a.firstBaseUpdate,a!==null){do{var ht={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};lt===null?at=lt=ht:lt=lt.next=ht,a=a.next}while(a!==null);lt===null?at=lt=s:lt=lt.next=s}else at=lt=s;a={baseState:et.baseState,firstBaseUpdate:at,lastBaseUpdate:lt,shared:et.shared,effects:et.effects},o.updateQueue=a;return}o=a.lastBaseUpdate,o===null?a.firstBaseUpdate=s:o.next=s,a.lastBaseUpdate=s}function gh(o,s,a,et){var at=o.updateQueue;$g=!1;var lt=at.firstBaseUpdate,ht=at.lastBaseUpdate,dt=at.shared.pending;if(dt!==null){at.shared.pending=null;var ft=dt,vt=ft.next;ft.next=null,ht===null?lt=vt:ht.next=vt,ht=ft;var wt=o.alternate;wt!==null&&(wt=wt.updateQueue,dt=wt.lastBaseUpdate,dt!==ht&&(dt===null?wt.firstBaseUpdate=vt:dt.next=vt,wt.lastBaseUpdate=ft))}if(lt!==null){var Ct=at.baseState;ht=0,wt=vt=ft=null,dt=lt;do{var xt=dt.lane,Pt=dt.eventTime;if((et&xt)===xt){wt!==null&&(wt=wt.next={eventTime:Pt,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var Rt=o,_t=dt;switch(xt=s,Pt=a,_t.tag){case 1:if(Rt=_t.payload,typeof Rt=="function"){Ct=Rt.call(Pt,Ct,xt);break e}Ct=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=_t.payload,xt=typeof Rt=="function"?Rt.call(Pt,Ct,xt):Rt,xt==null)break e;Ct=A$4({},Ct,xt);break e;case 2:$g=!0}}dt.callback!==null&&dt.lane!==0&&(o.flags|=64,xt=at.effects,xt===null?at.effects=[dt]:xt.push(dt))}else Pt={eventTime:Pt,lane:xt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},wt===null?(vt=wt=Pt,ft=Ct):wt=wt.next=Pt,ht|=xt;if(dt=dt.next,dt===null){if(dt=at.shared.pending,dt===null)break;xt=dt,dt=xt.next,xt.next=null,at.lastBaseUpdate=xt,at.shared.pending=null}}while(1);if(wt===null&&(ft=Ct),at.baseState=ft,at.firstBaseUpdate=vt,at.lastBaseUpdate=wt,s=at.shared.interleaved,s!==null){at=s;do ht|=at.lane,at=at.next;while(at!==s)}else lt===null&&(at.shared.lanes=0);hh|=ht,o.lanes=ht,o.memoizedState=Ct}}function ih(o,s,a){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var et=o[s],at=et.callback;if(at!==null){if(et.callback=null,et=a,typeof at!="function")throw Error(p$4(191,at));at.call(et)}}}var jh$1=new aa$2.Component().refs;function kh$1(o,s,a,et){s=o.memoizedState,a=a(et,s),a=a==null?s:A$4({},s,a),o.memoizedState=a,o.lanes===0&&(o.updateQueue.baseState=a)}var nh$1={isMounted:function(o){return(o=o._reactInternals)?Vb$1(o)===o:!1},enqueueSetState:function(o,s,a){o=o._reactInternals;var et=L$4(),at=lh(o),lt=ch$1(et,at);lt.payload=s,a!=null&&(lt.callback=a),s=dh(o,lt,at),s!==null&&(mh$1(s,o,at,et),eh$1(s,o,at))},enqueueReplaceState:function(o,s,a){o=o._reactInternals;var et=L$4(),at=lh(o),lt=ch$1(et,at);lt.tag=1,lt.payload=s,a!=null&&(lt.callback=a),s=dh(o,lt,at),s!==null&&(mh$1(s,o,at,et),eh$1(s,o,at))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var a=L$4(),et=lh(o),at=ch$1(a,et);at.tag=2,s!=null&&(at.callback=s),s=dh(o,at,et),s!==null&&(mh$1(s,o,et,a),eh$1(s,o,et))}};function oh(o,s,a,et,at,lt,ht){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(et,lt,ht):s.prototype&&s.prototype.isPureReactComponent?!Ie$1(a,et)||!Ie$1(at,lt):!0}function ph(o,s,a){var et=!1,at=Vf,lt=s.contextType;return typeof lt=="object"&&lt!==null?lt=Vg(lt):(at=Zf(s)?Xf:H$4.current,et=s.contextTypes,lt=(et=et!=null)?Yf(o,at):Vf),s=new s(a,lt),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=nh$1,o.stateNode=s,s._reactInternals=o,et&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=at,o.__reactInternalMemoizedMaskedChildContext=lt),s}function qh$1(o,s,a,et){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,et),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,et),s.state!==o&&nh$1.enqueueReplaceState(s,s.state,null)}function rh$1(o,s,a,et){var at=o.stateNode;at.props=a,at.state=o.memoizedState,at.refs=jh$1,ah(o);var lt=s.contextType;typeof lt=="object"&&lt!==null?at.context=Vg(lt):(lt=Zf(s)?Xf:H$4.current,at.context=Yf(o,lt)),at.state=o.memoizedState,lt=s.getDerivedStateFromProps,typeof lt=="function"&&(kh$1(o,s,lt,a),at.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof at.getSnapshotBeforeUpdate=="function"||typeof at.UNSAFE_componentWillMount!="function"&&typeof at.componentWillMount!="function"||(s=at.state,typeof at.componentWillMount=="function"&&at.componentWillMount(),typeof at.UNSAFE_componentWillMount=="function"&&at.UNSAFE_componentWillMount(),s!==at.state&&nh$1.enqueueReplaceState(at,at.state,null),gh(o,a,at,et),at.state=o.memoizedState),typeof at.componentDidMount=="function"&&(o.flags|=4194308)}function sh$1(o,s,a){if(o=a.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(p$4(309));var et=a.stateNode}if(!et)throw Error(p$4(147,o));var at=et,lt=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===lt?s.ref:(s=function(ht){var dt=at.refs;dt===jh$1&&(dt=at.refs={}),ht===null?delete dt[lt]:dt[lt]=ht},s._stringRef=lt,s)}if(typeof o!="string")throw Error(p$4(284));if(!a._owner)throw Error(p$4(290,o))}return o}function th$1(o,s){throw o=Object.prototype.toString.call(s),Error(p$4(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function uh(o){var s=o._init;return s(o._payload)}function vh(o){function s(bt,Nt){if(o){var kt=bt.deletions;kt===null?(bt.deletions=[Nt],bt.flags|=16):kt.push(Nt)}}function a(bt,Nt){if(!o)return null;for(;Nt!==null;)s(bt,Nt),Nt=Nt.sibling;return null}function et(bt,Nt){for(bt=new Map;Nt!==null;)Nt.key!==null?bt.set(Nt.key,Nt):bt.set(Nt.index,Nt),Nt=Nt.sibling;return bt}function at(bt,Nt){return bt=wh$1(bt,Nt),bt.index=0,bt.sibling=null,bt}function lt(bt,Nt,kt){return bt.index=kt,o?(kt=bt.alternate,kt!==null?(kt=kt.index,kt<Nt?(bt.flags|=2,Nt):kt):(bt.flags|=2,Nt)):(bt.flags|=1048576,Nt)}function ht(bt){return o&&bt.alternate===null&&(bt.flags|=2),bt}function dt(bt,Nt,kt,Dt){return Nt===null||Nt.tag!==6?(Nt=xh(kt,bt.mode,Dt),Nt.return=bt,Nt):(Nt=at(Nt,kt),Nt.return=bt,Nt)}function ft(bt,Nt,kt,Dt){var jt=kt.type;return jt===ya$1?wt(bt,Nt,kt.props.children,Dt,kt.key):Nt!==null&&(Nt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Ha$2&&uh(jt)===Nt.type)?(Dt=at(Nt,kt.props),Dt.ref=sh$1(bt,Nt,kt),Dt.return=bt,Dt):(Dt=yh(kt.type,kt.key,kt.props,null,bt.mode,Dt),Dt.ref=sh$1(bt,Nt,kt),Dt.return=bt,Dt)}function vt(bt,Nt,kt,Dt){return Nt===null||Nt.tag!==4||Nt.stateNode.containerInfo!==kt.containerInfo||Nt.stateNode.implementation!==kt.implementation?(Nt=zh$1(kt,bt.mode,Dt),Nt.return=bt,Nt):(Nt=at(Nt,kt.children||[]),Nt.return=bt,Nt)}function wt(bt,Nt,kt,Dt,jt){return Nt===null||Nt.tag!==7?(Nt=Ah(kt,bt.mode,Dt,jt),Nt.return=bt,Nt):(Nt=at(Nt,kt),Nt.return=bt,Nt)}function Ct(bt,Nt,kt){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Nt=xh(""+Nt,bt.mode,kt),Nt.return=bt,Nt;if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case va$2:return kt=yh(Nt.type,Nt.key,Nt.props,null,bt.mode,kt),kt.ref=sh$1(bt,null,Nt),kt.return=bt,kt;case wa$1:return Nt=zh$1(Nt,bt.mode,kt),Nt.return=bt,Nt;case Ha$2:var Dt=Nt._init;return Ct(bt,Dt(Nt._payload),kt)}if(eb$1(Nt)||Ka$2(Nt))return Nt=Ah(Nt,bt.mode,kt,null),Nt.return=bt,Nt;th$1(bt,Nt)}return null}function xt(bt,Nt,kt,Dt){var jt=Nt!==null?Nt.key:null;if(typeof kt=="string"&&kt!==""||typeof kt=="number")return jt!==null?null:dt(bt,Nt,""+kt,Dt);if(typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case va$2:return kt.key===jt?ft(bt,Nt,kt,Dt):null;case wa$1:return kt.key===jt?vt(bt,Nt,kt,Dt):null;case Ha$2:return jt=kt._init,xt(bt,Nt,jt(kt._payload),Dt)}if(eb$1(kt)||Ka$2(kt))return jt!==null?null:wt(bt,Nt,kt,Dt,null);th$1(bt,kt)}return null}function Pt(bt,Nt,kt,Dt,jt){if(typeof Dt=="string"&&Dt!==""||typeof Dt=="number")return bt=bt.get(kt)||null,dt(Nt,bt,""+Dt,jt);if(typeof Dt=="object"&&Dt!==null){switch(Dt.$$typeof){case va$2:return bt=bt.get(Dt.key===null?kt:Dt.key)||null,ft(Nt,bt,Dt,jt);case wa$1:return bt=bt.get(Dt.key===null?kt:Dt.key)||null,vt(Nt,bt,Dt,jt);case Ha$2:var Wt=Dt._init;return Pt(bt,Nt,kt,Wt(Dt._payload),jt)}if(eb$1(Dt)||Ka$2(Dt))return bt=bt.get(kt)||null,wt(Nt,bt,Dt,jt,null);th$1(Nt,Dt)}return null}function Rt(bt,Nt,kt,Dt){for(var jt=null,Wt=null,Yt=Nt,Bt=Nt=0,zt=null;Yt!==null&&Bt<kt.length;Bt++){Yt.index>Bt?(zt=Yt,Yt=null):zt=Yt.sibling;var qt=xt(bt,Yt,kt[Bt],Dt);if(qt===null){Yt===null&&(Yt=zt);break}o&&Yt&&qt.alternate===null&&s(bt,Yt),Nt=lt(qt,Nt,Bt),Wt===null?jt=qt:Wt.sibling=qt,Wt=qt,Yt=zt}if(Bt===kt.length)return a(bt,Yt),I$3&&tg(bt,Bt),jt;if(Yt===null){for(;Bt<kt.length;Bt++)Yt=Ct(bt,kt[Bt],Dt),Yt!==null&&(Nt=lt(Yt,Nt,Bt),Wt===null?jt=Yt:Wt.sibling=Yt,Wt=Yt);return I$3&&tg(bt,Bt),jt}for(Yt=et(bt,Yt);Bt<kt.length;Bt++)zt=Pt(Yt,bt,Bt,kt[Bt],Dt),zt!==null&&(o&&zt.alternate!==null&&Yt.delete(zt.key===null?Bt:zt.key),Nt=lt(zt,Nt,Bt),Wt===null?jt=zt:Wt.sibling=zt,Wt=zt);return o&&Yt.forEach(function(nn){return s(bt,nn)}),I$3&&tg(bt,Bt),jt}function _t(bt,Nt,kt,Dt){var jt=Ka$2(kt);if(typeof jt!="function")throw Error(p$4(150));if(kt=jt.call(kt),kt==null)throw Error(p$4(151));for(var Wt=jt=null,Yt=Nt,Bt=Nt=0,zt=null,qt=kt.next();Yt!==null&&!qt.done;Bt++,qt=kt.next()){Yt.index>Bt?(zt=Yt,Yt=null):zt=Yt.sibling;var nn=xt(bt,Yt,qt.value,Dt);if(nn===null){Yt===null&&(Yt=zt);break}o&&Yt&&nn.alternate===null&&s(bt,Yt),Nt=lt(nn,Nt,Bt),Wt===null?jt=nn:Wt.sibling=nn,Wt=nn,Yt=zt}if(qt.done)return a(bt,Yt),I$3&&tg(bt,Bt),jt;if(Yt===null){for(;!qt.done;Bt++,qt=kt.next())qt=Ct(bt,qt.value,Dt),qt!==null&&(Nt=lt(qt,Nt,Bt),Wt===null?jt=qt:Wt.sibling=qt,Wt=qt);return I$3&&tg(bt,Bt),jt}for(Yt=et(bt,Yt);!qt.done;Bt++,qt=kt.next())qt=Pt(Yt,bt,Bt,qt.value,Dt),qt!==null&&(o&&qt.alternate!==null&&Yt.delete(qt.key===null?Bt:qt.key),Nt=lt(qt,Nt,Bt),Wt===null?jt=qt:Wt.sibling=qt,Wt=qt);return o&&Yt.forEach(function(Fn){return s(bt,Fn)}),I$3&&tg(bt,Bt),jt}function St(bt,Nt,kt,Dt){if(typeof kt=="object"&&kt!==null&&kt.type===ya$1&&kt.key===null&&(kt=kt.props.children),typeof kt=="object"&&kt!==null){switch(kt.$$typeof){case va$2:e:{for(var jt=kt.key,Wt=Nt;Wt!==null;){if(Wt.key===jt){if(jt=kt.type,jt===ya$1){if(Wt.tag===7){a(bt,Wt.sibling),Nt=at(Wt,kt.props.children),Nt.return=bt,bt=Nt;break e}}else if(Wt.elementType===jt||typeof jt=="object"&&jt!==null&&jt.$$typeof===Ha$2&&uh(jt)===Wt.type){a(bt,Wt.sibling),Nt=at(Wt,kt.props),Nt.ref=sh$1(bt,Wt,kt),Nt.return=bt,bt=Nt;break e}a(bt,Wt);break}else s(bt,Wt);Wt=Wt.sibling}kt.type===ya$1?(Nt=Ah(kt.props.children,bt.mode,Dt,kt.key),Nt.return=bt,bt=Nt):(Dt=yh(kt.type,kt.key,kt.props,null,bt.mode,Dt),Dt.ref=sh$1(bt,Nt,kt),Dt.return=bt,bt=Dt)}return ht(bt);case wa$1:e:{for(Wt=kt.key;Nt!==null;){if(Nt.key===Wt)if(Nt.tag===4&&Nt.stateNode.containerInfo===kt.containerInfo&&Nt.stateNode.implementation===kt.implementation){a(bt,Nt.sibling),Nt=at(Nt,kt.children||[]),Nt.return=bt,bt=Nt;break e}else{a(bt,Nt);break}else s(bt,Nt);Nt=Nt.sibling}Nt=zh$1(kt,bt.mode,Dt),Nt.return=bt,bt=Nt}return ht(bt);case Ha$2:return Wt=kt._init,St(bt,Nt,Wt(kt._payload),Dt)}if(eb$1(kt))return Rt(bt,Nt,kt,Dt);if(Ka$2(kt))return _t(bt,Nt,kt,Dt);th$1(bt,kt)}return typeof kt=="string"&&kt!==""||typeof kt=="number"?(kt=""+kt,Nt!==null&&Nt.tag===6?(a(bt,Nt.sibling),Nt=at(Nt,kt),Nt.return=bt,bt=Nt):(a(bt,Nt),Nt=xh(kt,bt.mode,Dt),Nt.return=bt,bt=Nt),ht(bt)):a(bt,Nt)}return St}var Bh$1=vh(!0),Ch$1=vh(!1),Dh$1={},Eh=Uf(Dh$1),Fh$1=Uf(Dh$1),Gh$1=Uf(Dh$1);function Hh$1(o){if(o===Dh$1)throw Error(p$4(174));return o}function Ih(o,s){switch(G$3(Gh$1,s),G$3(Fh$1,o),G$3(Eh,Dh$1),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:lb$1(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=lb$1(s,o)}E$3(Eh),G$3(Eh,s)}function Jh$1(){E$3(Eh),E$3(Fh$1),E$3(Gh$1)}function Kh$1(o){Hh$1(Gh$1.current);var s=Hh$1(Eh.current),a=lb$1(s,o.type);s!==a&&(G$3(Fh$1,o),G$3(Eh,a))}function Lh$1(o){Fh$1.current===o&&(E$3(Eh),E$3(Fh$1))}var M$3=Uf(0);function Mh$1(o){for(var s=o;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Nh$1=[];function Oh$1(){for(var o=0;o<Nh$1.length;o++)Nh$1[o]._workInProgressVersionPrimary=null;Nh$1.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$4=null,O$3=null,P$4=null,Sh=!1,Th=!1,Uh$1=0,Vh=0;function Q$4(){throw Error(p$4(321))}function Wh(o,s){if(s===null)return!1;for(var a=0;a<s.length&&a<o.length;a++)if(!He$2(o[a],s[a]))return!1;return!0}function Xh$1(o,s,a,et,at,lt){if(Rh=lt,N$4=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Ph.current=o===null||o.memoizedState===null?Yh$1:Zh$1,o=a(et,at),Th){lt=0;do{if(Th=!1,Uh$1=0,25<=lt)throw Error(p$4(301));lt+=1,P$4=O$3=null,s.updateQueue=null,Ph.current=$h$1,o=a(et,at)}while(Th)}if(Ph.current=ai$1,s=O$3!==null&&O$3.next!==null,Rh=0,P$4=O$3=N$4=null,Sh=!1,s)throw Error(p$4(300));return o}function bi$1(){var o=Uh$1!==0;return Uh$1=0,o}function ci$1(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$4===null?N$4.memoizedState=P$4=o:P$4=P$4.next=o,P$4}function di$1(){if(O$3===null){var o=N$4.alternate;o=o!==null?o.memoizedState:null}else o=O$3.next;var s=P$4===null?N$4.memoizedState:P$4.next;if(s!==null)P$4=s,O$3=o;else{if(o===null)throw Error(p$4(310));O$3=o,o={memoizedState:O$3.memoizedState,baseState:O$3.baseState,baseQueue:O$3.baseQueue,queue:O$3.queue,next:null},P$4===null?N$4.memoizedState=P$4=o:P$4=P$4.next=o}return P$4}function ei(o,s){return typeof s=="function"?s(o):s}function fi$1(o){var s=di$1(),a=s.queue;if(a===null)throw Error(p$4(311));a.lastRenderedReducer=o;var et=O$3,at=et.baseQueue,lt=a.pending;if(lt!==null){if(at!==null){var ht=at.next;at.next=lt.next,lt.next=ht}et.baseQueue=at=lt,a.pending=null}if(at!==null){lt=at.next,et=et.baseState;var dt=ht=null,ft=null,vt=lt;do{var wt=vt.lane;if((Rh&wt)===wt)ft!==null&&(ft=ft.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),et=vt.hasEagerState?vt.eagerState:o(et,vt.action);else{var Ct={lane:wt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};ft===null?(dt=ft=Ct,ht=et):ft=ft.next=Ct,N$4.lanes|=wt,hh|=wt}vt=vt.next}while(vt!==null&&vt!==lt);ft===null?ht=et:ft.next=dt,He$2(et,s.memoizedState)||(Ug=!0),s.memoizedState=et,s.baseState=ht,s.baseQueue=ft,a.lastRenderedState=et}if(o=a.interleaved,o!==null){at=o;do lt=at.lane,N$4.lanes|=lt,hh|=lt,at=at.next;while(at!==o)}else at===null&&(a.lanes=0);return[s.memoizedState,a.dispatch]}function gi$1(o){var s=di$1(),a=s.queue;if(a===null)throw Error(p$4(311));a.lastRenderedReducer=o;var et=a.dispatch,at=a.pending,lt=s.memoizedState;if(at!==null){a.pending=null;var ht=at=at.next;do lt=o(lt,ht.action),ht=ht.next;while(ht!==at);He$2(lt,s.memoizedState)||(Ug=!0),s.memoizedState=lt,s.baseQueue===null&&(s.baseState=lt),a.lastRenderedState=lt}return[lt,et]}function hi$1(){}function ii$1(o,s){var a=N$4,et=di$1(),at=s(),lt=!He$2(et.memoizedState,at);if(lt&&(et.memoizedState=at,Ug=!0),et=et.queue,ji$1(ki$1.bind(null,a,et,o),[o]),et.getSnapshot!==s||lt||P$4!==null&&P$4.memoizedState.tag&1){if(a.flags|=2048,li$1(9,mi$1.bind(null,a,et,at,s),void 0,null),R$2===null)throw Error(p$4(349));Rh&30||ni$1(a,s,at)}return at}function ni$1(o,s,a){o.flags|=16384,o={getSnapshot:s,value:a},s=N$4.updateQueue,s===null?(s={lastEffect:null,stores:null},N$4.updateQueue=s,s.stores=[o]):(a=s.stores,a===null?s.stores=[o]:a.push(o))}function mi$1(o,s,a,et){s.value=a,s.getSnapshot=et,oi$1(s)&&pi$1(o)}function ki$1(o,s,a){return a(function(){oi$1(s)&&pi$1(o)})}function oi$1(o){var s=o.getSnapshot;o=o.value;try{var a=s();return!He$2(o,a)}catch{return!0}}function pi$1(o){var s=Zg(o,1);s!==null&&mh$1(s,o,1,-1)}function qi$1(o){var s=ci$1();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:o},s.queue=o,o=o.dispatch=ri$1.bind(null,N$4,o),[s.memoizedState,o]}function li$1(o,s,a,et){return o={tag:o,create:s,destroy:a,deps:et,next:null},s=N$4.updateQueue,s===null?(s={lastEffect:null,stores:null},N$4.updateQueue=s,s.lastEffect=o.next=o):(a=s.lastEffect,a===null?s.lastEffect=o.next=o:(et=a.next,a.next=o,o.next=et,s.lastEffect=o)),o}function si$1(){return di$1().memoizedState}function ti(o,s,a,et){var at=ci$1();N$4.flags|=o,at.memoizedState=li$1(1|s,a,void 0,et===void 0?null:et)}function ui$1(o,s,a,et){var at=di$1();et=et===void 0?null:et;var lt=void 0;if(O$3!==null){var ht=O$3.memoizedState;if(lt=ht.destroy,et!==null&&Wh(et,ht.deps)){at.memoizedState=li$1(s,a,lt,et);return}}N$4.flags|=o,at.memoizedState=li$1(1|s,a,lt,et)}function vi$1(o,s){return ti(8390656,8,o,s)}function ji$1(o,s){return ui$1(2048,8,o,s)}function wi$1(o,s){return ui$1(4,2,o,s)}function xi$1(o,s){return ui$1(4,4,o,s)}function yi$1(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function zi$1(o,s,a){return a=a!=null?a.concat([o]):null,ui$1(4,4,yi$1.bind(null,s,o),a)}function Ai$1(){}function Bi(o,s){var a=di$1();s=s===void 0?null:s;var et=a.memoizedState;return et!==null&&s!==null&&Wh(s,et[1])?et[0]:(a.memoizedState=[o,s],o)}function Ci$1(o,s){var a=di$1();s=s===void 0?null:s;var et=a.memoizedState;return et!==null&&s!==null&&Wh(s,et[1])?et[0]:(o=o(),a.memoizedState=[o,s],o)}function Di$1(o,s,a){return Rh&21?(He$2(a,s)||(a=yc$2(),N$4.lanes|=a,hh|=a,o.baseState=!0),s):(o.baseState&&(o.baseState=!1,Ug=!0),o.memoizedState=a)}function Ei$1(o,s){var a=C$3;C$3=a!==0&&4>a?a:4,o(!0);var et=Qh.transition;Qh.transition={};try{o(!1),s()}finally{C$3=a,Qh.transition=et}}function Fi$1(){return di$1().memoizedState}function Gi$1(o,s,a){var et=lh(o);if(a={lane:et,action:a,hasEagerState:!1,eagerState:null,next:null},Hi$1(o))Ii$1(s,a);else if(a=Yg(o,s,a,et),a!==null){var at=L$4();mh$1(a,o,et,at),Ji$1(a,s,et)}}function ri$1(o,s,a){var et=lh(o),at={lane:et,action:a,hasEagerState:!1,eagerState:null,next:null};if(Hi$1(o))Ii$1(s,at);else{var lt=o.alternate;if(o.lanes===0&&(lt===null||lt.lanes===0)&&(lt=s.lastRenderedReducer,lt!==null))try{var ht=s.lastRenderedState,dt=lt(ht,a);if(at.hasEagerState=!0,at.eagerState=dt,He$2(dt,ht)){var ft=s.interleaved;ft===null?(at.next=at,Xg(s)):(at.next=ft.next,ft.next=at),s.interleaved=at;return}}catch{}finally{}a=Yg(o,s,at,et),a!==null&&(at=L$4(),mh$1(a,o,et,at),Ji$1(a,s,et))}}function Hi$1(o){var s=o.alternate;return o===N$4||s!==null&&s===N$4}function Ii$1(o,s){Th=Sh=!0;var a=o.pending;a===null?s.next=s:(s.next=a.next,a.next=s),o.pending=s}function Ji$1(o,s,a){if(a&4194240){var et=s.lanes;et&=o.pendingLanes,a|=et,s.lanes=a,Cc$2(o,a)}}var ai$1={readContext:Vg,useCallback:Q$4,useContext:Q$4,useEffect:Q$4,useImperativeHandle:Q$4,useInsertionEffect:Q$4,useLayoutEffect:Q$4,useMemo:Q$4,useReducer:Q$4,useRef:Q$4,useState:Q$4,useDebugValue:Q$4,useDeferredValue:Q$4,useTransition:Q$4,useMutableSource:Q$4,useSyncExternalStore:Q$4,useId:Q$4,unstable_isNewReconciler:!1},Yh$1={readContext:Vg,useCallback:function(o,s){return ci$1().memoizedState=[o,s===void 0?null:s],o},useContext:Vg,useEffect:vi$1,useImperativeHandle:function(o,s,a){return a=a!=null?a.concat([o]):null,ti(4194308,4,yi$1.bind(null,s,o),a)},useLayoutEffect:function(o,s){return ti(4194308,4,o,s)},useInsertionEffect:function(o,s){return ti(4,2,o,s)},useMemo:function(o,s){var a=ci$1();return s=s===void 0?null:s,o=o(),a.memoizedState=[o,s],o},useReducer:function(o,s,a){var et=ci$1();return s=a!==void 0?a(s):s,et.memoizedState=et.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},et.queue=o,o=o.dispatch=Gi$1.bind(null,N$4,o),[et.memoizedState,o]},useRef:function(o){var s=ci$1();return o={current:o},s.memoizedState=o},useState:qi$1,useDebugValue:Ai$1,useDeferredValue:function(o){return ci$1().memoizedState=o},useTransition:function(){var o=qi$1(!1),s=o[0];return o=Ei$1.bind(null,o[1]),ci$1().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,a){var et=N$4,at=ci$1();if(I$3){if(a===void 0)throw Error(p$4(407));a=a()}else{if(a=s(),R$2===null)throw Error(p$4(349));Rh&30||ni$1(et,s,a)}at.memoizedState=a;var lt={value:a,getSnapshot:s};return at.queue=lt,vi$1(ki$1.bind(null,et,lt,o),[o]),et.flags|=2048,li$1(9,mi$1.bind(null,et,lt,a,s),void 0,null),a},useId:function(){var o=ci$1(),s=R$2.identifierPrefix;if(I$3){var a=sg,et=rg;a=(et&~(1<<32-oc$2(et)-1)).toString(32)+a,s=":"+s+"R"+a,a=Uh$1++,0<a&&(s+="H"+a.toString(32)),s+=":"}else a=Vh++,s=":"+s+"r"+a.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},Zh$1={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:fi$1,useRef:si$1,useState:function(){return fi$1(ei)},useDebugValue:Ai$1,useDeferredValue:function(o){var s=di$1();return Di$1(s,O$3.memoizedState,o)},useTransition:function(){var o=fi$1(ei)[0],s=di$1().memoizedState;return[o,s]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1},$h$1={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji$1,useImperativeHandle:zi$1,useInsertionEffect:wi$1,useLayoutEffect:xi$1,useMemo:Ci$1,useReducer:gi$1,useRef:si$1,useState:function(){return gi$1(ei)},useDebugValue:Ai$1,useDeferredValue:function(o){var s=di$1();return O$3===null?s.memoizedState=o:Di$1(s,O$3.memoizedState,o)},useTransition:function(){var o=gi$1(ei)[0],s=di$1().memoizedState;return[o,s]},useMutableSource:hi$1,useSyncExternalStore:ii$1,useId:Fi$1,unstable_isNewReconciler:!1};function Ki$1(o,s){try{var a="",et=s;do a+=Pa$1(et),et=et.return;while(et);var at=a}catch(lt){at=`
Error generating stack: `+lt.message+`
`+lt.stack}return{value:o,source:s,stack:at,digest:null}}function Li$1(o,s,a){return{value:o,source:null,stack:a??null,digest:s??null}}function Mi$1(o,s){try{console.error(s.value)}catch(a){setTimeout(function(){throw a})}}var Ni$1=typeof WeakMap=="function"?WeakMap:Map;function Oi(o,s,a){a=ch$1(-1,a),a.tag=3,a.payload={element:null};var et=s.value;return a.callback=function(){Pi$1||(Pi$1=!0,Qi$1=et),Mi$1(o,s)},a}function Ri$1(o,s,a){a=ch$1(-1,a),a.tag=3;var et=o.type.getDerivedStateFromError;if(typeof et=="function"){var at=s.value;a.payload=function(){return et(at)},a.callback=function(){Mi$1(o,s)}}var lt=o.stateNode;return lt!==null&&typeof lt.componentDidCatch=="function"&&(a.callback=function(){Mi$1(o,s),typeof et!="function"&&(Si$1===null?Si$1=new Set([this]):Si$1.add(this));var ht=s.stack;this.componentDidCatch(s.value,{componentStack:ht!==null?ht:""})}),a}function Ti$1(o,s,a){var et=o.pingCache;if(et===null){et=o.pingCache=new Ni$1;var at=new Set;et.set(s,at)}else at=et.get(s),at===void 0&&(at=new Set,et.set(s,at));at.has(a)||(at.add(a),o=Ui$1.bind(null,o,s,a),s.then(o,o))}function Vi$1(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function Wi$1(o,s,a,et,at){return o.mode&1?(o.flags|=65536,o.lanes=at,o):(o===s?o.flags|=65536:(o.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(s=ch$1(-1,1),s.tag=2,dh(a,s,1))),a.lanes|=1),o)}var Xi$1=ua$1.ReactCurrentOwner,Ug=!1;function Yi$1(o,s,a,et){s.child=o===null?Ch$1(s,null,a,et):Bh$1(s,o.child,a,et)}function Zi$1(o,s,a,et,at){a=a.render;var lt=s.ref;return Tg(s,at),et=Xh$1(o,s,a,et,lt,at),a=bi$1(),o!==null&&!Ug?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~at,$i(o,s,at)):(I$3&&a&&vg(s),s.flags|=1,Yi$1(o,s,et,at),s.child)}function aj(o,s,a,et,at){if(o===null){var lt=a.type;return typeof lt=="function"&&!bj(lt)&&lt.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(s.tag=15,s.type=lt,cj(o,s,lt,et,at)):(o=yh(a.type,null,et,s,s.mode,at),o.ref=s.ref,o.return=s,s.child=o)}if(lt=o.child,!(o.lanes&at)){var ht=lt.memoizedProps;if(a=a.compare,a=a!==null?a:Ie$1,a(ht,et)&&o.ref===s.ref)return $i(o,s,at)}return s.flags|=1,o=wh$1(lt,et),o.ref=s.ref,o.return=s,s.child=o}function cj(o,s,a,et,at){if(o!==null){var lt=o.memoizedProps;if(Ie$1(lt,et)&&o.ref===s.ref)if(Ug=!1,s.pendingProps=et=lt,(o.lanes&at)!==0)o.flags&131072&&(Ug=!0);else return s.lanes=o.lanes,$i(o,s,at)}return dj(o,s,a,et,at)}function ej(o,s,a){var et=s.pendingProps,at=et.children,lt=o!==null?o.memoizedState:null;if(et.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$3(fj,gj),gj|=a;else{if(!(a&1073741824))return o=lt!==null?lt.baseLanes|a:a,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,G$3(fj,gj),gj|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},et=lt!==null?lt.baseLanes:a,G$3(fj,gj),gj|=et}else lt!==null?(et=lt.baseLanes|a,s.memoizedState=null):et=a,G$3(fj,gj),gj|=et;return Yi$1(o,s,at,a),s.child}function hj(o,s){var a=s.ref;(o===null&&a!==null||o!==null&&o.ref!==a)&&(s.flags|=512,s.flags|=2097152)}function dj(o,s,a,et,at){var lt=Zf(a)?Xf:H$4.current;return lt=Yf(s,lt),Tg(s,at),a=Xh$1(o,s,a,et,lt,at),et=bi$1(),o!==null&&!Ug?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~at,$i(o,s,at)):(I$3&&et&&vg(s),s.flags|=1,Yi$1(o,s,a,at),s.child)}function ij(o,s,a,et,at){if(Zf(a)){var lt=!0;cg(s)}else lt=!1;if(Tg(s,at),s.stateNode===null)jj(o,s),ph(s,a,et),rh$1(s,a,et,at),et=!0;else if(o===null){var ht=s.stateNode,dt=s.memoizedProps;ht.props=dt;var ft=ht.context,vt=a.contextType;typeof vt=="object"&&vt!==null?vt=Vg(vt):(vt=Zf(a)?Xf:H$4.current,vt=Yf(s,vt));var wt=a.getDerivedStateFromProps,Ct=typeof wt=="function"||typeof ht.getSnapshotBeforeUpdate=="function";Ct||typeof ht.UNSAFE_componentWillReceiveProps!="function"&&typeof ht.componentWillReceiveProps!="function"||(dt!==et||ft!==vt)&&qh$1(s,ht,et,vt),$g=!1;var xt=s.memoizedState;ht.state=xt,gh(s,et,ht,at),ft=s.memoizedState,dt!==et||xt!==ft||Wf.current||$g?(typeof wt=="function"&&(kh$1(s,a,wt,et),ft=s.memoizedState),(dt=$g||oh(s,a,dt,et,xt,ft,vt))?(Ct||typeof ht.UNSAFE_componentWillMount!="function"&&typeof ht.componentWillMount!="function"||(typeof ht.componentWillMount=="function"&&ht.componentWillMount(),typeof ht.UNSAFE_componentWillMount=="function"&&ht.UNSAFE_componentWillMount()),typeof ht.componentDidMount=="function"&&(s.flags|=4194308)):(typeof ht.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=et,s.memoizedState=ft),ht.props=et,ht.state=ft,ht.context=vt,et=dt):(typeof ht.componentDidMount=="function"&&(s.flags|=4194308),et=!1)}else{ht=s.stateNode,bh(o,s),dt=s.memoizedProps,vt=s.type===s.elementType?dt:Lg(s.type,dt),ht.props=vt,Ct=s.pendingProps,xt=ht.context,ft=a.contextType,typeof ft=="object"&&ft!==null?ft=Vg(ft):(ft=Zf(a)?Xf:H$4.current,ft=Yf(s,ft));var Pt=a.getDerivedStateFromProps;(wt=typeof Pt=="function"||typeof ht.getSnapshotBeforeUpdate=="function")||typeof ht.UNSAFE_componentWillReceiveProps!="function"&&typeof ht.componentWillReceiveProps!="function"||(dt!==Ct||xt!==ft)&&qh$1(s,ht,et,ft),$g=!1,xt=s.memoizedState,ht.state=xt,gh(s,et,ht,at);var Rt=s.memoizedState;dt!==Ct||xt!==Rt||Wf.current||$g?(typeof Pt=="function"&&(kh$1(s,a,Pt,et),Rt=s.memoizedState),(vt=$g||oh(s,a,vt,et,xt,Rt,ft)||!1)?(wt||typeof ht.UNSAFE_componentWillUpdate!="function"&&typeof ht.componentWillUpdate!="function"||(typeof ht.componentWillUpdate=="function"&&ht.componentWillUpdate(et,Rt,ft),typeof ht.UNSAFE_componentWillUpdate=="function"&&ht.UNSAFE_componentWillUpdate(et,Rt,ft)),typeof ht.componentDidUpdate=="function"&&(s.flags|=4),typeof ht.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof ht.componentDidUpdate!="function"||dt===o.memoizedProps&&xt===o.memoizedState||(s.flags|=4),typeof ht.getSnapshotBeforeUpdate!="function"||dt===o.memoizedProps&&xt===o.memoizedState||(s.flags|=1024),s.memoizedProps=et,s.memoizedState=Rt),ht.props=et,ht.state=Rt,ht.context=ft,et=vt):(typeof ht.componentDidUpdate!="function"||dt===o.memoizedProps&&xt===o.memoizedState||(s.flags|=4),typeof ht.getSnapshotBeforeUpdate!="function"||dt===o.memoizedProps&&xt===o.memoizedState||(s.flags|=1024),et=!1)}return kj(o,s,a,et,lt,at)}function kj(o,s,a,et,at,lt){hj(o,s);var ht=(s.flags&128)!==0;if(!et&&!ht)return at&&dg(s,a,!1),$i(o,s,lt);et=s.stateNode,Xi$1.current=s;var dt=ht&&typeof a.getDerivedStateFromError!="function"?null:et.render();return s.flags|=1,o!==null&&ht?(s.child=Bh$1(s,o.child,null,lt),s.child=Bh$1(s,null,dt,lt)):Yi$1(o,s,dt,lt),s.memoizedState=et.state,at&&dg(s,a,!0),s.child}function lj(o){var s=o.stateNode;s.pendingContext?ag(o,s.pendingContext,s.pendingContext!==s.context):s.context&&ag(o,s.context,!1),Ih(o,s.containerInfo)}function mj(o,s,a,et,at){return Ig(),Jg(at),s.flags|=256,Yi$1(o,s,a,et),s.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(o){return{baseLanes:o,cachePool:null,transitions:null}}function pj(o,s,a){var et=s.pendingProps,at=M$3.current,lt=!1,ht=(s.flags&128)!==0,dt;if((dt=ht)||(dt=o!==null&&o.memoizedState===null?!1:(at&2)!==0),dt?(lt=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(at|=1),G$3(M$3,at&1),o===null)return Eg(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(s.mode&1?o.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(ht=et.children,o=et.fallback,lt?(et=s.mode,lt=s.child,ht={mode:"hidden",children:ht},!(et&1)&&lt!==null?(lt.childLanes=0,lt.pendingProps=ht):lt=qj(ht,et,0,null),o=Ah(o,et,a,null),lt.return=s,o.return=s,lt.sibling=o,s.child=lt,s.child.memoizedState=oj(a),s.memoizedState=nj,o):rj(s,ht));if(at=o.memoizedState,at!==null&&(dt=at.dehydrated,dt!==null))return sj(o,s,ht,et,dt,at,a);if(lt){lt=et.fallback,ht=s.mode,at=o.child,dt=at.sibling;var ft={mode:"hidden",children:et.children};return!(ht&1)&&s.child!==at?(et=s.child,et.childLanes=0,et.pendingProps=ft,s.deletions=null):(et=wh$1(at,ft),et.subtreeFlags=at.subtreeFlags&14680064),dt!==null?lt=wh$1(dt,lt):(lt=Ah(lt,ht,a,null),lt.flags|=2),lt.return=s,et.return=s,et.sibling=lt,s.child=et,et=lt,lt=s.child,ht=o.child.memoizedState,ht=ht===null?oj(a):{baseLanes:ht.baseLanes|a,cachePool:null,transitions:ht.transitions},lt.memoizedState=ht,lt.childLanes=o.childLanes&~a,s.memoizedState=nj,et}return lt=o.child,o=lt.sibling,et=wh$1(lt,{mode:"visible",children:et.children}),!(s.mode&1)&&(et.lanes=a),et.return=s,et.sibling=null,o!==null&&(a=s.deletions,a===null?(s.deletions=[o],s.flags|=16):a.push(o)),s.child=et,s.memoizedState=null,et}function rj(o,s){return s=qj({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function tj(o,s,a,et){return et!==null&&Jg(et),Bh$1(s,o.child,null,a),o=rj(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function sj(o,s,a,et,at,lt,ht){if(a)return s.flags&256?(s.flags&=-257,et=Li$1(Error(p$4(422))),tj(o,s,ht,et)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(lt=et.fallback,at=s.mode,et=qj({mode:"visible",children:et.children},at,0,null),lt=Ah(lt,at,ht,null),lt.flags|=2,et.return=s,lt.return=s,et.sibling=lt,s.child=et,s.mode&1&&Bh$1(s,o.child,null,ht),s.child.memoizedState=oj(ht),s.memoizedState=nj,lt);if(!(s.mode&1))return tj(o,s,ht,null);if(at.data==="$!"){if(et=at.nextSibling&&at.nextSibling.dataset,et)var dt=et.dgst;return et=dt,lt=Error(p$4(419)),et=Li$1(lt,et,void 0),tj(o,s,ht,et)}if(dt=(ht&o.childLanes)!==0,Ug||dt){if(et=R$2,et!==null){switch(ht&-ht){case 4:at=2;break;case 16:at=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:at=32;break;case 536870912:at=268435456;break;default:at=0}at=at&(et.suspendedLanes|ht)?0:at,at!==0&&at!==lt.retryLane&&(lt.retryLane=at,Zg(o,at),mh$1(et,o,at,-1))}return uj(),et=Li$1(Error(p$4(421))),tj(o,s,ht,et)}return at.data==="$?"?(s.flags|=128,s.child=o.child,s=vj.bind(null,o),at._reactRetry=s,null):(o=lt.treeContext,yg=Lf(at.nextSibling),xg=s,I$3=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=s),s=rj(s,et.children),s.flags|=4096,s)}function wj(o,s,a){o.lanes|=s;var et=o.alternate;et!==null&&(et.lanes|=s),Sg(o.return,s,a)}function xj(o,s,a,et,at){var lt=o.memoizedState;lt===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:et,tail:a,tailMode:at}:(lt.isBackwards=s,lt.rendering=null,lt.renderingStartTime=0,lt.last=et,lt.tail=a,lt.tailMode=at)}function yj(o,s,a){var et=s.pendingProps,at=et.revealOrder,lt=et.tail;if(Yi$1(o,s,et.children,a),et=M$3.current,et&2)et=et&1|2,s.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wj(o,a,s);else if(o.tag===19)wj(o,a,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}et&=1}if(G$3(M$3,et),!(s.mode&1))s.memoizedState=null;else switch(at){case"forwards":for(a=s.child,at=null;a!==null;)o=a.alternate,o!==null&&Mh$1(o)===null&&(at=a),a=a.sibling;a=at,a===null?(at=s.child,s.child=null):(at=a.sibling,a.sibling=null),xj(s,!1,at,a,lt);break;case"backwards":for(a=null,at=s.child,s.child=null;at!==null;){if(o=at.alternate,o!==null&&Mh$1(o)===null){s.child=at;break}o=at.sibling,at.sibling=a,a=at,at=o}xj(s,!0,a,null,lt);break;case"together":xj(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function jj(o,s){!(s.mode&1)&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function $i(o,s,a){if(o!==null&&(s.dependencies=o.dependencies),hh|=s.lanes,!(a&s.childLanes))return null;if(o!==null&&s.child!==o.child)throw Error(p$4(153));if(s.child!==null){for(o=s.child,a=wh$1(o,o.pendingProps),s.child=a,a.return=s;o.sibling!==null;)o=o.sibling,a=a.sibling=wh$1(o,o.pendingProps),a.return=s;a.sibling=null}return s.child}function zj(o,s,a){switch(s.tag){case 3:lj(s),Ig();break;case 5:Kh$1(s);break;case 1:Zf(s.type)&&cg(s);break;case 4:Ih(s,s.stateNode.containerInfo);break;case 10:var et=s.type._context,at=s.memoizedProps.value;G$3(Mg,et._currentValue),et._currentValue=at;break;case 13:if(et=s.memoizedState,et!==null)return et.dehydrated!==null?(G$3(M$3,M$3.current&1),s.flags|=128,null):a&s.child.childLanes?pj(o,s,a):(G$3(M$3,M$3.current&1),o=$i(o,s,a),o!==null?o.sibling:null);G$3(M$3,M$3.current&1);break;case 19:if(et=(a&s.childLanes)!==0,o.flags&128){if(et)return yj(o,s,a);s.flags|=128}if(at=s.memoizedState,at!==null&&(at.rendering=null,at.tail=null,at.lastEffect=null),G$3(M$3,M$3.current),et)break;return null;case 22:case 23:return s.lanes=0,ej(o,s,a)}return $i(o,s,a)}var Aj,Bj,Cj,Dj;Aj=function(o,s){for(var a=s.child;a!==null;){if(a.tag===5||a.tag===6)o.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return;a=a.return}a.sibling.return=a.return,a=a.sibling}};Bj=function(){};Cj=function(o,s,a,et){var at=o.memoizedProps;if(at!==et){o=s.stateNode,Hh$1(Eh.current);var lt=null;switch(a){case"input":at=Ya$2(o,at),et=Ya$2(o,et),lt=[];break;case"select":at=A$4({},at,{value:void 0}),et=A$4({},et,{value:void 0}),lt=[];break;case"textarea":at=gb$1(o,at),et=gb$1(o,et),lt=[];break;default:typeof at.onClick!="function"&&typeof et.onClick=="function"&&(o.onclick=Bf)}ub$1(a,et);var ht;a=null;for(vt in at)if(!et.hasOwnProperty(vt)&&at.hasOwnProperty(vt)&&at[vt]!=null)if(vt==="style"){var dt=at[vt];for(ht in dt)dt.hasOwnProperty(ht)&&(a||(a={}),a[ht]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(ea$1.hasOwnProperty(vt)?lt||(lt=[]):(lt=lt||[]).push(vt,null));for(vt in et){var ft=et[vt];if(dt=at!=null?at[vt]:void 0,et.hasOwnProperty(vt)&&ft!==dt&&(ft!=null||dt!=null))if(vt==="style")if(dt){for(ht in dt)!dt.hasOwnProperty(ht)||ft&&ft.hasOwnProperty(ht)||(a||(a={}),a[ht]="");for(ht in ft)ft.hasOwnProperty(ht)&&dt[ht]!==ft[ht]&&(a||(a={}),a[ht]=ft[ht])}else a||(lt||(lt=[]),lt.push(vt,a)),a=ft;else vt==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,dt=dt?dt.__html:void 0,ft!=null&&dt!==ft&&(lt=lt||[]).push(vt,ft)):vt==="children"?typeof ft!="string"&&typeof ft!="number"||(lt=lt||[]).push(vt,""+ft):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(vt)?(ft!=null&&vt==="onScroll"&&D$2("scroll",o),lt||dt===ft||(lt=[])):(lt=lt||[]).push(vt,ft))}a&&(lt=lt||[]).push("style",a);var vt=lt;(s.updateQueue=vt)&&(s.flags|=4)}};Dj=function(o,s,a,et){a!==et&&(s.flags|=4)};function Ej(o,s){if(!I$3)switch(o.tailMode){case"hidden":s=o.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?o.tail=null:a.sibling=null;break;case"collapsed":a=o.tail;for(var et=null;a!==null;)a.alternate!==null&&(et=a),a=a.sibling;et===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:et.sibling=null}}function S$4(o){var s=o.alternate!==null&&o.alternate.child===o.child,a=0,et=0;if(s)for(var at=o.child;at!==null;)a|=at.lanes|at.childLanes,et|=at.subtreeFlags&14680064,et|=at.flags&14680064,at.return=o,at=at.sibling;else for(at=o.child;at!==null;)a|=at.lanes|at.childLanes,et|=at.subtreeFlags,et|=at.flags,at.return=o,at=at.sibling;return o.subtreeFlags|=et,o.childLanes=a,s}function Fj(o,s,a){var et=s.pendingProps;switch(wg(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$4(s),null;case 1:return Zf(s.type)&&$f(),S$4(s),null;case 3:return et=s.stateNode,Jh$1(),E$3(Wf),E$3(H$4),Oh$1(),et.pendingContext&&(et.context=et.pendingContext,et.pendingContext=null),(o===null||o.child===null)&&(Gg(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(o,s),S$4(s),null;case 5:Lh$1(s);var at=Hh$1(Gh$1.current);if(a=s.type,o!==null&&s.stateNode!=null)Cj(o,s,a,et,at),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!et){if(s.stateNode===null)throw Error(p$4(166));return S$4(s),null}if(o=Hh$1(Eh.current),Gg(s)){et=s.stateNode,a=s.type;var lt=s.memoizedProps;switch(et[Of]=s,et[Pf]=lt,o=(s.mode&1)!==0,a){case"dialog":D$2("cancel",et),D$2("close",et);break;case"iframe":case"object":case"embed":D$2("load",et);break;case"video":case"audio":for(at=0;at<lf$1.length;at++)D$2(lf$1[at],et);break;case"source":D$2("error",et);break;case"img":case"image":case"link":D$2("error",et),D$2("load",et);break;case"details":D$2("toggle",et);break;case"input":Za$1(et,lt),D$2("invalid",et);break;case"select":et._wrapperState={wasMultiple:!!lt.multiple},D$2("invalid",et);break;case"textarea":hb$1(et,lt),D$2("invalid",et)}ub$1(a,lt),at=null;for(var ht in lt)if(lt.hasOwnProperty(ht)){var dt=lt[ht];ht==="children"?typeof dt=="string"?et.textContent!==dt&&(lt.suppressHydrationWarning!==!0&&Af(et.textContent,dt,o),at=["children",dt]):typeof dt=="number"&&et.textContent!==""+dt&&(lt.suppressHydrationWarning!==!0&&Af(et.textContent,dt,o),at=["children",""+dt]):ea$1.hasOwnProperty(ht)&&dt!=null&&ht==="onScroll"&&D$2("scroll",et)}switch(a){case"input":Va$1(et),db$2(et,lt,!0);break;case"textarea":Va$1(et),jb$1(et);break;case"select":case"option":break;default:typeof lt.onClick=="function"&&(et.onclick=Bf)}et=at,s.updateQueue=et,et!==null&&(s.flags|=4)}else{ht=at.nodeType===9?at:at.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb$1(a)),o==="http://www.w3.org/1999/xhtml"?a==="script"?(o=ht.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof et.is=="string"?o=ht.createElement(a,{is:et.is}):(o=ht.createElement(a),a==="select"&&(ht=o,et.multiple?ht.multiple=!0:et.size&&(ht.size=et.size))):o=ht.createElementNS(o,a),o[Of]=s,o[Pf]=et,Aj(o,s,!1,!1),s.stateNode=o;e:{switch(ht=vb$1(a,et),a){case"dialog":D$2("cancel",o),D$2("close",o),at=et;break;case"iframe":case"object":case"embed":D$2("load",o),at=et;break;case"video":case"audio":for(at=0;at<lf$1.length;at++)D$2(lf$1[at],o);at=et;break;case"source":D$2("error",o),at=et;break;case"img":case"image":case"link":D$2("error",o),D$2("load",o),at=et;break;case"details":D$2("toggle",o),at=et;break;case"input":Za$1(o,et),at=Ya$2(o,et),D$2("invalid",o);break;case"option":at=et;break;case"select":o._wrapperState={wasMultiple:!!et.multiple},at=A$4({},et,{value:void 0}),D$2("invalid",o);break;case"textarea":hb$1(o,et),at=gb$1(o,et),D$2("invalid",o);break;default:at=et}ub$1(a,at),dt=at;for(lt in dt)if(dt.hasOwnProperty(lt)){var ft=dt[lt];lt==="style"?sb$1(o,ft):lt==="dangerouslySetInnerHTML"?(ft=ft?ft.__html:void 0,ft!=null&&nb$1(o,ft)):lt==="children"?typeof ft=="string"?(a!=="textarea"||ft!=="")&&ob$1(o,ft):typeof ft=="number"&&ob$1(o,""+ft):lt!=="suppressContentEditableWarning"&&lt!=="suppressHydrationWarning"&&lt!=="autoFocus"&&(ea$1.hasOwnProperty(lt)?ft!=null&&lt==="onScroll"&&D$2("scroll",o):ft!=null&&ta$1(o,lt,ft,ht))}switch(a){case"input":Va$1(o),db$2(o,et,!1);break;case"textarea":Va$1(o),jb$1(o);break;case"option":et.value!=null&&o.setAttribute("value",""+Sa$1(et.value));break;case"select":o.multiple=!!et.multiple,lt=et.value,lt!=null?fb$1(o,!!et.multiple,lt,!1):et.defaultValue!=null&&fb$1(o,!!et.multiple,et.defaultValue,!0);break;default:typeof at.onClick=="function"&&(o.onclick=Bf)}switch(a){case"button":case"input":case"select":case"textarea":et=!!et.autoFocus;break e;case"img":et=!0;break e;default:et=!1}}et&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return S$4(s),null;case 6:if(o&&s.stateNode!=null)Dj(o,s,o.memoizedProps,et);else{if(typeof et!="string"&&s.stateNode===null)throw Error(p$4(166));if(a=Hh$1(Gh$1.current),Hh$1(Eh.current),Gg(s)){if(et=s.stateNode,a=s.memoizedProps,et[Of]=s,(lt=et.nodeValue!==a)&&(o=xg,o!==null))switch(o.tag){case 3:Af(et.nodeValue,a,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(et.nodeValue,a,(o.mode&1)!==0)}lt&&(s.flags|=4)}else et=(a.nodeType===9?a:a.ownerDocument).createTextNode(et),et[Of]=s,s.stateNode=et}return S$4(s),null;case 13:if(E$3(M$3),et=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I$3&&yg!==null&&s.mode&1&&!(s.flags&128))Hg(),Ig(),s.flags|=98560,lt=!1;else if(lt=Gg(s),et!==null&&et.dehydrated!==null){if(o===null){if(!lt)throw Error(p$4(318));if(lt=s.memoizedState,lt=lt!==null?lt.dehydrated:null,!lt)throw Error(p$4(317));lt[Of]=s}else Ig(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;S$4(s),lt=!1}else zg!==null&&(Gj(zg),zg=null),lt=!0;if(!lt)return s.flags&65536?s:null}return s.flags&128?(s.lanes=a,s):(et=et!==null,et!==(o!==null&&o.memoizedState!==null)&&et&&(s.child.flags|=8192,s.mode&1&&(o===null||M$3.current&1?T$3===0&&(T$3=3):uj())),s.updateQueue!==null&&(s.flags|=4),S$4(s),null);case 4:return Jh$1(),Bj(o,s),o===null&&sf$1(s.stateNode.containerInfo),S$4(s),null;case 10:return Rg(s.type._context),S$4(s),null;case 17:return Zf(s.type)&&$f(),S$4(s),null;case 19:if(E$3(M$3),lt=s.memoizedState,lt===null)return S$4(s),null;if(et=(s.flags&128)!==0,ht=lt.rendering,ht===null)if(et)Ej(lt,!1);else{if(T$3!==0||o!==null&&o.flags&128)for(o=s.child;o!==null;){if(ht=Mh$1(o),ht!==null){for(s.flags|=128,Ej(lt,!1),et=ht.updateQueue,et!==null&&(s.updateQueue=et,s.flags|=4),s.subtreeFlags=0,et=a,a=s.child;a!==null;)lt=a,o=et,lt.flags&=14680066,ht=lt.alternate,ht===null?(lt.childLanes=0,lt.lanes=o,lt.child=null,lt.subtreeFlags=0,lt.memoizedProps=null,lt.memoizedState=null,lt.updateQueue=null,lt.dependencies=null,lt.stateNode=null):(lt.childLanes=ht.childLanes,lt.lanes=ht.lanes,lt.child=ht.child,lt.subtreeFlags=0,lt.deletions=null,lt.memoizedProps=ht.memoizedProps,lt.memoizedState=ht.memoizedState,lt.updateQueue=ht.updateQueue,lt.type=ht.type,o=ht.dependencies,lt.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a=a.sibling;return G$3(M$3,M$3.current&1|2),s.child}o=o.sibling}lt.tail!==null&&B$4()>Hj&&(s.flags|=128,et=!0,Ej(lt,!1),s.lanes=4194304)}else{if(!et)if(o=Mh$1(ht),o!==null){if(s.flags|=128,et=!0,a=o.updateQueue,a!==null&&(s.updateQueue=a,s.flags|=4),Ej(lt,!0),lt.tail===null&&lt.tailMode==="hidden"&&!ht.alternate&&!I$3)return S$4(s),null}else 2*B$4()-lt.renderingStartTime>Hj&&a!==1073741824&&(s.flags|=128,et=!0,Ej(lt,!1),s.lanes=4194304);lt.isBackwards?(ht.sibling=s.child,s.child=ht):(a=lt.last,a!==null?a.sibling=ht:s.child=ht,lt.last=ht)}return lt.tail!==null?(s=lt.tail,lt.rendering=s,lt.tail=s.sibling,lt.renderingStartTime=B$4(),s.sibling=null,a=M$3.current,G$3(M$3,et?a&1|2:a&1),s):(S$4(s),null);case 22:case 23:return Ij(),et=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==et&&(s.flags|=8192),et&&s.mode&1?gj&1073741824&&(S$4(s),s.subtreeFlags&6&&(s.flags|=8192)):S$4(s),null;case 24:return null;case 25:return null}throw Error(p$4(156,s.tag))}function Jj(o,s){switch(wg(s),s.tag){case 1:return Zf(s.type)&&$f(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Jh$1(),E$3(Wf),E$3(H$4),Oh$1(),o=s.flags,o&65536&&!(o&128)?(s.flags=o&-65537|128,s):null;case 5:return Lh$1(s),null;case 13:if(E$3(M$3),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(p$4(340));Ig()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return E$3(M$3),null;case 4:return Jh$1(),null;case 10:return Rg(s.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$3=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$3=null;function Mj(o,s){var a=o.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(et){W$3(o,s,et)}else a.current=null}function Nj(o,s,a){try{a()}catch(et){W$3(o,s,et)}}var Oj=!1;function Pj(o,s){if(Cf=dd$1,o=Me$1(),Ne$2(o)){if("selectionStart"in o)var a={start:o.selectionStart,end:o.selectionEnd};else e:{a=(a=o.ownerDocument)&&a.defaultView||window;var et=a.getSelection&&a.getSelection();if(et&&et.rangeCount!==0){a=et.anchorNode;var at=et.anchorOffset,lt=et.focusNode;et=et.focusOffset;try{a.nodeType,lt.nodeType}catch{a=null;break e}var ht=0,dt=-1,ft=-1,vt=0,wt=0,Ct=o,xt=null;t:for(;;){for(var Pt;Ct!==a||at!==0&&Ct.nodeType!==3||(dt=ht+at),Ct!==lt||et!==0&&Ct.nodeType!==3||(ft=ht+et),Ct.nodeType===3&&(ht+=Ct.nodeValue.length),(Pt=Ct.firstChild)!==null;)xt=Ct,Ct=Pt;for(;;){if(Ct===o)break t;if(xt===a&&++vt===at&&(dt=ht),xt===lt&&++wt===et&&(ft=ht),(Pt=Ct.nextSibling)!==null)break;Ct=xt,xt=Ct.parentNode}Ct=Pt}a=dt===-1||ft===-1?null:{start:dt,end:ft}}else a=null}a=a||{start:0,end:0}}else a=null;for(Df$1={focusedElem:o,selectionRange:a},dd$1=!1,V$3=s;V$3!==null;)if(s=V$3,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,V$3=o;else for(;V$3!==null;){s=V$3;try{var Rt=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Rt!==null){var _t=Rt.memoizedProps,St=Rt.memoizedState,bt=s.stateNode,Nt=bt.getSnapshotBeforeUpdate(s.elementType===s.type?_t:Lg(s.type,_t),St);bt.__reactInternalSnapshotBeforeUpdate=Nt}break;case 3:var kt=s.stateNode.containerInfo;kt.nodeType===1?kt.textContent="":kt.nodeType===9&&kt.documentElement&&kt.removeChild(kt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$4(163))}}catch(Dt){W$3(s,s.return,Dt)}if(o=s.sibling,o!==null){o.return=s.return,V$3=o;break}V$3=s.return}return Rt=Oj,Oj=!1,Rt}function Qj(o,s,a){var et=s.updateQueue;if(et=et!==null?et.lastEffect:null,et!==null){var at=et=et.next;do{if((at.tag&o)===o){var lt=at.destroy;at.destroy=void 0,lt!==void 0&&Nj(s,a,lt)}at=at.next}while(at!==et)}}function Rj(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&o)===o){var et=a.create;a.destroy=et()}a=a.next}while(a!==s)}}function Sj(o){var s=o.ref;if(s!==null){var a=o.stateNode;switch(o.tag){case 5:o=a;break;default:o=a}typeof s=="function"?s(o):s.current=o}}function Tj(o){var s=o.alternate;s!==null&&(o.alternate=null,Tj(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Of],delete s[Pf],delete s[of],delete s[Qf],delete s[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Uj(o){return o.tag===5||o.tag===3||o.tag===4}function Vj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Uj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wj(o,s,a){var et=o.tag;if(et===5||et===6)o=o.stateNode,s?a.nodeType===8?a.parentNode.insertBefore(o,s):a.insertBefore(o,s):(a.nodeType===8?(s=a.parentNode,s.insertBefore(o,a)):(s=a,s.appendChild(o)),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Bf));else if(et!==4&&(o=o.child,o!==null))for(Wj(o,s,a),o=o.sibling;o!==null;)Wj(o,s,a),o=o.sibling}function Xj(o,s,a){var et=o.tag;if(et===5||et===6)o=o.stateNode,s?a.insertBefore(o,s):a.appendChild(o);else if(et!==4&&(o=o.child,o!==null))for(Xj(o,s,a),o=o.sibling;o!==null;)Xj(o,s,a),o=o.sibling}var X$3=null,Yj=!1;function Zj(o,s,a){for(a=a.child;a!==null;)ak(o,s,a),a=a.sibling}function ak(o,s,a){if(lc$2&&typeof lc$2.onCommitFiberUnmount=="function")try{lc$2.onCommitFiberUnmount(kc$2,a)}catch{}switch(a.tag){case 5:U$3||Mj(a,s);case 6:var et=X$3,at=Yj;X$3=null,Zj(o,s,a),X$3=et,Yj=at,X$3!==null&&(Yj?(o=X$3,a=a.stateNode,o.nodeType===8?o.parentNode.removeChild(a):o.removeChild(a)):X$3.removeChild(a.stateNode));break;case 18:X$3!==null&&(Yj?(o=X$3,a=a.stateNode,o.nodeType===8?Kf(o.parentNode,a):o.nodeType===1&&Kf(o,a),bd$1(o)):Kf(X$3,a.stateNode));break;case 4:et=X$3,at=Yj,X$3=a.stateNode.containerInfo,Yj=!0,Zj(o,s,a),X$3=et,Yj=at;break;case 0:case 11:case 14:case 15:if(!U$3&&(et=a.updateQueue,et!==null&&(et=et.lastEffect,et!==null))){at=et=et.next;do{var lt=at,ht=lt.destroy;lt=lt.tag,ht!==void 0&&(lt&2||lt&4)&&Nj(a,s,ht),at=at.next}while(at!==et)}Zj(o,s,a);break;case 1:if(!U$3&&(Mj(a,s),et=a.stateNode,typeof et.componentWillUnmount=="function"))try{et.props=a.memoizedProps,et.state=a.memoizedState,et.componentWillUnmount()}catch(dt){W$3(a,s,dt)}Zj(o,s,a);break;case 21:Zj(o,s,a);break;case 22:a.mode&1?(U$3=(et=U$3)||a.memoizedState!==null,Zj(o,s,a),U$3=et):Zj(o,s,a);break;default:Zj(o,s,a)}}function bk(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var a=o.stateNode;a===null&&(a=o.stateNode=new Lj),s.forEach(function(et){var at=ck.bind(null,o,et);a.has(et)||(a.add(et),et.then(at,at))})}}function dk(o,s){var a=s.deletions;if(a!==null)for(var et=0;et<a.length;et++){var at=a[et];try{var lt=o,ht=s,dt=ht;e:for(;dt!==null;){switch(dt.tag){case 5:X$3=dt.stateNode,Yj=!1;break e;case 3:X$3=dt.stateNode.containerInfo,Yj=!0;break e;case 4:X$3=dt.stateNode.containerInfo,Yj=!0;break e}dt=dt.return}if(X$3===null)throw Error(p$4(160));ak(lt,ht,at),X$3=null,Yj=!1;var ft=at.alternate;ft!==null&&(ft.return=null),at.return=null}catch(vt){W$3(at,s,vt)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ek(s,o),s=s.sibling}function ek(o,s){var a=o.alternate,et=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(dk(s,o),fk(o),et&4){try{Qj(3,o,o.return),Rj(3,o)}catch(_t){W$3(o,o.return,_t)}try{Qj(5,o,o.return)}catch(_t){W$3(o,o.return,_t)}}break;case 1:dk(s,o),fk(o),et&512&&a!==null&&Mj(a,a.return);break;case 5:if(dk(s,o),fk(o),et&512&&a!==null&&Mj(a,a.return),o.flags&32){var at=o.stateNode;try{ob$1(at,"")}catch(_t){W$3(o,o.return,_t)}}if(et&4&&(at=o.stateNode,at!=null)){var lt=o.memoizedProps,ht=a!==null?a.memoizedProps:lt,dt=o.type,ft=o.updateQueue;if(o.updateQueue=null,ft!==null)try{dt==="input"&&lt.type==="radio"&&lt.name!=null&&ab$1(at,lt),vb$1(dt,ht);var vt=vb$1(dt,lt);for(ht=0;ht<ft.length;ht+=2){var wt=ft[ht],Ct=ft[ht+1];wt==="style"?sb$1(at,Ct):wt==="dangerouslySetInnerHTML"?nb$1(at,Ct):wt==="children"?ob$1(at,Ct):ta$1(at,wt,Ct,vt)}switch(dt){case"input":bb$1(at,lt);break;case"textarea":ib$1(at,lt);break;case"select":var xt=at._wrapperState.wasMultiple;at._wrapperState.wasMultiple=!!lt.multiple;var Pt=lt.value;Pt!=null?fb$1(at,!!lt.multiple,Pt,!1):xt!==!!lt.multiple&&(lt.defaultValue!=null?fb$1(at,!!lt.multiple,lt.defaultValue,!0):fb$1(at,!!lt.multiple,lt.multiple?[]:"",!1))}at[Pf]=lt}catch(_t){W$3(o,o.return,_t)}}break;case 6:if(dk(s,o),fk(o),et&4){if(o.stateNode===null)throw Error(p$4(162));at=o.stateNode,lt=o.memoizedProps;try{at.nodeValue=lt}catch(_t){W$3(o,o.return,_t)}}break;case 3:if(dk(s,o),fk(o),et&4&&a!==null&&a.memoizedState.isDehydrated)try{bd$1(s.containerInfo)}catch(_t){W$3(o,o.return,_t)}break;case 4:dk(s,o),fk(o);break;case 13:dk(s,o),fk(o),at=o.child,at.flags&8192&&(lt=at.memoizedState!==null,at.stateNode.isHidden=lt,!lt||at.alternate!==null&&at.alternate.memoizedState!==null||(gk=B$4())),et&4&&bk(o);break;case 22:if(wt=a!==null&&a.memoizedState!==null,o.mode&1?(U$3=(vt=U$3)||wt,dk(s,o),U$3=vt):dk(s,o),fk(o),et&8192){if(vt=o.memoizedState!==null,(o.stateNode.isHidden=vt)&&!wt&&o.mode&1)for(V$3=o,wt=o.child;wt!==null;){for(Ct=V$3=wt;V$3!==null;){switch(xt=V$3,Pt=xt.child,xt.tag){case 0:case 11:case 14:case 15:Qj(4,xt,xt.return);break;case 1:Mj(xt,xt.return);var Rt=xt.stateNode;if(typeof Rt.componentWillUnmount=="function"){et=xt,a=xt.return;try{s=et,Rt.props=s.memoizedProps,Rt.state=s.memoizedState,Rt.componentWillUnmount()}catch(_t){W$3(et,a,_t)}}break;case 5:Mj(xt,xt.return);break;case 22:if(xt.memoizedState!==null){hk(Ct);continue}}Pt!==null?(Pt.return=xt,V$3=Pt):hk(Ct)}wt=wt.sibling}e:for(wt=null,Ct=o;;){if(Ct.tag===5){if(wt===null){wt=Ct;try{at=Ct.stateNode,vt?(lt=at.style,typeof lt.setProperty=="function"?lt.setProperty("display","none","important"):lt.display="none"):(dt=Ct.stateNode,ft=Ct.memoizedProps.style,ht=ft!=null&&ft.hasOwnProperty("display")?ft.display:null,dt.style.display=rb$1("display",ht))}catch(_t){W$3(o,o.return,_t)}}}else if(Ct.tag===6){if(wt===null)try{Ct.stateNode.nodeValue=vt?"":Ct.memoizedProps}catch(_t){W$3(o,o.return,_t)}}else if((Ct.tag!==22&&Ct.tag!==23||Ct.memoizedState===null||Ct===o)&&Ct.child!==null){Ct.child.return=Ct,Ct=Ct.child;continue}if(Ct===o)break e;for(;Ct.sibling===null;){if(Ct.return===null||Ct.return===o)break e;wt===Ct&&(wt=null),Ct=Ct.return}wt===Ct&&(wt=null),Ct.sibling.return=Ct.return,Ct=Ct.sibling}}break;case 19:dk(s,o),fk(o),et&4&&bk(o);break;case 21:break;default:dk(s,o),fk(o)}}function fk(o){var s=o.flags;if(s&2){try{e:{for(var a=o.return;a!==null;){if(Uj(a)){var et=a;break e}a=a.return}throw Error(p$4(160))}switch(et.tag){case 5:var at=et.stateNode;et.flags&32&&(ob$1(at,""),et.flags&=-33);var lt=Vj(o);Xj(o,lt,at);break;case 3:case 4:var ht=et.stateNode.containerInfo,dt=Vj(o);Wj(o,dt,ht);break;default:throw Error(p$4(161))}}catch(ft){W$3(o,o.return,ft)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function ik(o,s,a){V$3=o,jk(o)}function jk(o,s,a){for(var et=(o.mode&1)!==0;V$3!==null;){var at=V$3,lt=at.child;if(at.tag===22&&et){var ht=at.memoizedState!==null||Kj;if(!ht){var dt=at.alternate,ft=dt!==null&&dt.memoizedState!==null||U$3;dt=Kj;var vt=U$3;if(Kj=ht,(U$3=ft)&&!vt)for(V$3=at;V$3!==null;)ht=V$3,ft=ht.child,ht.tag===22&&ht.memoizedState!==null?kk(at):ft!==null?(ft.return=ht,V$3=ft):kk(at);for(;lt!==null;)V$3=lt,jk(lt),lt=lt.sibling;V$3=at,Kj=dt,U$3=vt}lk(o)}else at.subtreeFlags&8772&&lt!==null?(lt.return=at,V$3=lt):lk(o)}}function lk(o){for(;V$3!==null;){var s=V$3;if(s.flags&8772){var a=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:U$3||Rj(5,s);break;case 1:var et=s.stateNode;if(s.flags&4&&!U$3)if(a===null)et.componentDidMount();else{var at=s.elementType===s.type?a.memoizedProps:Lg(s.type,a.memoizedProps);et.componentDidUpdate(at,a.memoizedState,et.__reactInternalSnapshotBeforeUpdate)}var lt=s.updateQueue;lt!==null&&ih(s,lt,et);break;case 3:var ht=s.updateQueue;if(ht!==null){if(a=null,s.child!==null)switch(s.child.tag){case 5:a=s.child.stateNode;break;case 1:a=s.child.stateNode}ih(s,ht,a)}break;case 5:var dt=s.stateNode;if(a===null&&s.flags&4){a=dt;var ft=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":ft.autoFocus&&a.focus();break;case"img":ft.src&&(a.src=ft.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var vt=s.alternate;if(vt!==null){var wt=vt.memoizedState;if(wt!==null){var Ct=wt.dehydrated;Ct!==null&&bd$1(Ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$4(163))}U$3||s.flags&512&&Sj(s)}catch(xt){W$3(s,s.return,xt)}}if(s===o){V$3=null;break}if(a=s.sibling,a!==null){a.return=s.return,V$3=a;break}V$3=s.return}}function hk(o){for(;V$3!==null;){var s=V$3;if(s===o){V$3=null;break}var a=s.sibling;if(a!==null){a.return=s.return,V$3=a;break}V$3=s.return}}function kk(o){for(;V$3!==null;){var s=V$3;try{switch(s.tag){case 0:case 11:case 15:var a=s.return;try{Rj(4,s)}catch(ft){W$3(s,a,ft)}break;case 1:var et=s.stateNode;if(typeof et.componentDidMount=="function"){var at=s.return;try{et.componentDidMount()}catch(ft){W$3(s,at,ft)}}var lt=s.return;try{Sj(s)}catch(ft){W$3(s,lt,ft)}break;case 5:var ht=s.return;try{Sj(s)}catch(ft){W$3(s,ht,ft)}}}catch(ft){W$3(s,s.return,ft)}if(s===o){V$3=null;break}var dt=s.sibling;if(dt!==null){dt.return=s.return,V$3=dt;break}V$3=s.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$3=0,R$2=null,Y$3=null,Z$2=0,gj=0,fj=Uf(0),T$3=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi$1=!1,Qi$1=null,Si$1=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$4(){return K$3&6?B$4():Bk!==-1?Bk:Bk=B$4()}function lh(o){return o.mode&1?K$3&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc$2()),Ck):(o=C$3,o!==0||(o=window.event,o=o===void 0?16:jd$1(o.type)),o):1}function mh$1(o,s,a,et){if(50<zk)throw zk=0,Ak=null,Error(p$4(185));Ac$2(o,a,et),(!(K$3&2)||o!==R$2)&&(o===R$2&&(!(K$3&2)&&(rk|=a),T$3===4&&Dk(o,Z$2)),Ek(o,et),a===1&&K$3===0&&!(s.mode&1)&&(Hj=B$4()+500,fg&&jg()))}function Ek(o,s){var a=o.callbackNode;wc$2(o,s);var et=uc$2(o,o===R$2?Z$2:0);if(et===0)a!==null&&bc$1(a),o.callbackNode=null,o.callbackPriority=0;else if(s=et&-et,o.callbackPriority!==s){if(a!=null&&bc$1(a),s===1)o.tag===0?ig(Fk.bind(null,o)):hg(Fk.bind(null,o)),Jf(function(){!(K$3&6)&&jg()}),a=null;else{switch(Dc$2(et)){case 1:a=fc$2;break;case 4:a=gc$2;break;case 16:a=hc$2;break;case 536870912:a=jc$2;break;default:a=hc$2}a=Gk(a,Hk.bind(null,o))}o.callbackPriority=s,o.callbackNode=a}}function Hk(o,s){if(Bk=-1,Ck=0,K$3&6)throw Error(p$4(327));var a=o.callbackNode;if(Ik()&&o.callbackNode!==a)return null;var et=uc$2(o,o===R$2?Z$2:0);if(et===0)return null;if(et&30||et&o.expiredLanes||s)s=Jk(o,et);else{s=et;var at=K$3;K$3|=2;var lt=Kk();(R$2!==o||Z$2!==s)&&(vk=null,Hj=B$4()+500,Lk(o,s));do try{Mk();break}catch(dt){Nk(o,dt)}while(1);Qg(),nk.current=lt,K$3=at,Y$3!==null?s=0:(R$2=null,Z$2=0,s=T$3)}if(s!==0){if(s===2&&(at=xc$2(o),at!==0&&(et=at,s=Ok(o,at))),s===1)throw a=qk,Lk(o,0),Dk(o,et),Ek(o,B$4()),a;if(s===6)Dk(o,et);else{if(at=o.current.alternate,!(et&30)&&!Pk(at)&&(s=Jk(o,et),s===2&&(lt=xc$2(o),lt!==0&&(et=lt,s=Ok(o,lt))),s===1))throw a=qk,Lk(o,0),Dk(o,et),Ek(o,B$4()),a;switch(o.finishedWork=at,o.finishedLanes=et,s){case 0:case 1:throw Error(p$4(345));case 2:Qk(o,uk,vk);break;case 3:if(Dk(o,et),(et&130023424)===et&&(s=gk+500-B$4(),10<s)){if(uc$2(o,0)!==0)break;if(at=o.suspendedLanes,(at&et)!==et){L$4(),o.pingedLanes|=o.suspendedLanes&at;break}o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),s);break}Qk(o,uk,vk);break;case 4:if(Dk(o,et),(et&4194240)===et)break;for(s=o.eventTimes,at=-1;0<et;){var ht=31-oc$2(et);lt=1<<ht,ht=s[ht],ht>at&&(at=ht),et&=~lt}if(et=at,et=B$4()-et,et=(120>et?120:480>et?480:1080>et?1080:1920>et?1920:3e3>et?3e3:4320>et?4320:1960*mk(et/1960))-et,10<et){o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),et);break}Qk(o,uk,vk);break;case 5:Qk(o,uk,vk);break;default:throw Error(p$4(329))}}}return Ek(o,B$4()),o.callbackNode===a?Hk.bind(null,o):null}function Ok(o,s){var a=tk;return o.current.memoizedState.isDehydrated&&(Lk(o,s).flags|=256),o=Jk(o,s),o!==2&&(s=uk,uk=a,s!==null&&Gj(s)),o}function Gj(o){uk===null?uk=o:uk.push.apply(uk,o)}function Pk(o){for(var s=o;;){if(s.flags&16384){var a=s.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var et=0;et<a.length;et++){var at=a[et],lt=at.getSnapshot;at=at.value;try{if(!He$2(lt(),at))return!1}catch{return!1}}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Dk(o,s){for(s&=~sk,s&=~rk,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var a=31-oc$2(s),et=1<<a;o[a]=-1,s&=~et}}function Fk(o){if(K$3&6)throw Error(p$4(327));Ik();var s=uc$2(o,0);if(!(s&1))return Ek(o,B$4()),null;var a=Jk(o,s);if(o.tag!==0&&a===2){var et=xc$2(o);et!==0&&(s=et,a=Ok(o,et))}if(a===1)throw a=qk,Lk(o,0),Dk(o,s),Ek(o,B$4()),a;if(a===6)throw Error(p$4(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Qk(o,uk,vk),Ek(o,B$4()),null}function Rk(o,s){var a=K$3;K$3|=1;try{return o(s)}finally{K$3=a,K$3===0&&(Hj=B$4()+500,fg&&jg())}}function Sk(o){xk!==null&&xk.tag===0&&!(K$3&6)&&Ik();var s=K$3;K$3|=1;var a=pk.transition,et=C$3;try{if(pk.transition=null,C$3=1,o)return o()}finally{C$3=et,pk.transition=a,K$3=s,!(K$3&6)&&jg()}}function Ij(){gj=fj.current,E$3(fj)}function Lk(o,s){o.finishedWork=null,o.finishedLanes=0;var a=o.timeoutHandle;if(a!==-1&&(o.timeoutHandle=-1,Gf(a)),Y$3!==null)for(a=Y$3.return;a!==null;){var et=a;switch(wg(et),et.tag){case 1:et=et.type.childContextTypes,et!=null&&$f();break;case 3:Jh$1(),E$3(Wf),E$3(H$4),Oh$1();break;case 5:Lh$1(et);break;case 4:Jh$1();break;case 13:E$3(M$3);break;case 19:E$3(M$3);break;case 10:Rg(et.type._context);break;case 22:case 23:Ij()}a=a.return}if(R$2=o,Y$3=o=wh$1(o.current,null),Z$2=gj=s,T$3=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(s=0;s<Wg.length;s++)if(a=Wg[s],et=a.interleaved,et!==null){a.interleaved=null;var at=et.next,lt=a.pending;if(lt!==null){var ht=lt.next;lt.next=at,et.next=ht}a.pending=et}Wg=null}return o}function Nk(o,s){do{var a=Y$3;try{if(Qg(),Ph.current=ai$1,Sh){for(var et=N$4.memoizedState;et!==null;){var at=et.queue;at!==null&&(at.pending=null),et=et.next}Sh=!1}if(Rh=0,P$4=O$3=N$4=null,Th=!1,Uh$1=0,ok.current=null,a===null||a.return===null){T$3=1,qk=s,Y$3=null;break}e:{var lt=o,ht=a.return,dt=a,ft=s;if(s=Z$2,dt.flags|=32768,ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var vt=ft,wt=dt,Ct=wt.tag;if(!(wt.mode&1)&&(Ct===0||Ct===11||Ct===15)){var xt=wt.alternate;xt?(wt.updateQueue=xt.updateQueue,wt.memoizedState=xt.memoizedState,wt.lanes=xt.lanes):(wt.updateQueue=null,wt.memoizedState=null)}var Pt=Vi$1(ht);if(Pt!==null){Pt.flags&=-257,Wi$1(Pt,ht,dt,lt,s),Pt.mode&1&&Ti$1(lt,vt,s),s=Pt,ft=vt;var Rt=s.updateQueue;if(Rt===null){var _t=new Set;_t.add(ft),s.updateQueue=_t}else Rt.add(ft);break e}else{if(!(s&1)){Ti$1(lt,vt,s),uj();break e}ft=Error(p$4(426))}}else if(I$3&&dt.mode&1){var St=Vi$1(ht);if(St!==null){!(St.flags&65536)&&(St.flags|=256),Wi$1(St,ht,dt,lt,s),Jg(Ki$1(ft,dt));break e}}lt=ft=Ki$1(ft,dt),T$3!==4&&(T$3=2),tk===null?tk=[lt]:tk.push(lt),lt=ht;do{switch(lt.tag){case 3:lt.flags|=65536,s&=-s,lt.lanes|=s;var bt=Oi(lt,ft,s);fh$1(lt,bt);break e;case 1:dt=ft;var Nt=lt.type,kt=lt.stateNode;if(!(lt.flags&128)&&(typeof Nt.getDerivedStateFromError=="function"||kt!==null&&typeof kt.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(kt)))){lt.flags|=65536,s&=-s,lt.lanes|=s;var Dt=Ri$1(lt,dt,s);fh$1(lt,Dt);break e}}lt=lt.return}while(lt!==null)}Tk(a)}catch(jt){s=jt,Y$3===a&&a!==null&&(Y$3=a=a.return);continue}break}while(1)}function Kk(){var o=nk.current;return nk.current=ai$1,o===null?ai$1:o}function uj(){(T$3===0||T$3===3||T$3===2)&&(T$3=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z$2)}function Jk(o,s){var a=K$3;K$3|=2;var et=Kk();(R$2!==o||Z$2!==s)&&(vk=null,Lk(o,s));do try{Uk();break}catch(at){Nk(o,at)}while(1);if(Qg(),K$3=a,nk.current=et,Y$3!==null)throw Error(p$4(261));return R$2=null,Z$2=0,T$3}function Uk(){for(;Y$3!==null;)Vk(Y$3)}function Mk(){for(;Y$3!==null&&!cc$2();)Vk(Y$3)}function Vk(o){var s=Wk(o.alternate,o,gj);o.memoizedProps=o.pendingProps,s===null?Tk(o):Y$3=s,ok.current=null}function Tk(o){var s=o;do{var a=s.alternate;if(o=s.return,s.flags&32768){if(a=Jj(a,s),a!==null){a.flags&=32767,Y$3=a;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T$3=6,Y$3=null;return}}else if(a=Fj(a,s,gj),a!==null){Y$3=a;return}if(s=s.sibling,s!==null){Y$3=s;return}Y$3=s=o}while(s!==null);T$3===0&&(T$3=5)}function Qk(o,s,a){var et=C$3,at=pk.transition;try{pk.transition=null,C$3=1,Xk(o,s,a,et)}finally{pk.transition=at,C$3=et}return null}function Xk(o,s,a,et){do Ik();while(xk!==null);if(K$3&6)throw Error(p$4(327));a=o.finishedWork;var at=o.finishedLanes;if(a===null)return null;if(o.finishedWork=null,o.finishedLanes=0,a===o.current)throw Error(p$4(177));o.callbackNode=null,o.callbackPriority=0;var lt=a.lanes|a.childLanes;if(Bc$2(o,lt),o===R$2&&(Y$3=R$2=null,Z$2=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||wk||(wk=!0,Gk(hc$2,function(){return Ik(),null})),lt=(a.flags&15990)!==0,a.subtreeFlags&15990||lt){lt=pk.transition,pk.transition=null;var ht=C$3;C$3=1;var dt=K$3;K$3|=4,ok.current=null,Pj(o,a),ek(a,o),Oe$1(Df$1),dd$1=!!Cf,Df$1=Cf=null,o.current=a,ik(a),dc$2(),K$3=dt,C$3=ht,pk.transition=lt}else o.current=a;if(wk&&(wk=!1,xk=o,yk=at),lt=o.pendingLanes,lt===0&&(Si$1=null),mc$2(a.stateNode),Ek(o,B$4()),s!==null)for(et=o.onRecoverableError,a=0;a<s.length;a++)at=s[a],et(at.value,{componentStack:at.stack,digest:at.digest});if(Pi$1)throw Pi$1=!1,o=Qi$1,Qi$1=null,o;return yk&1&&o.tag!==0&&Ik(),lt=o.pendingLanes,lt&1?o===Ak?zk++:(zk=0,Ak=o):zk=0,jg(),null}function Ik(){if(xk!==null){var o=Dc$2(yk),s=pk.transition,a=C$3;try{if(pk.transition=null,C$3=16>o?16:o,xk===null)var et=!1;else{if(o=xk,xk=null,yk=0,K$3&6)throw Error(p$4(331));var at=K$3;for(K$3|=4,V$3=o.current;V$3!==null;){var lt=V$3,ht=lt.child;if(V$3.flags&16){var dt=lt.deletions;if(dt!==null){for(var ft=0;ft<dt.length;ft++){var vt=dt[ft];for(V$3=vt;V$3!==null;){var wt=V$3;switch(wt.tag){case 0:case 11:case 15:Qj(8,wt,lt)}var Ct=wt.child;if(Ct!==null)Ct.return=wt,V$3=Ct;else for(;V$3!==null;){wt=V$3;var xt=wt.sibling,Pt=wt.return;if(Tj(wt),wt===vt){V$3=null;break}if(xt!==null){xt.return=Pt,V$3=xt;break}V$3=Pt}}}var Rt=lt.alternate;if(Rt!==null){var _t=Rt.child;if(_t!==null){Rt.child=null;do{var St=_t.sibling;_t.sibling=null,_t=St}while(_t!==null)}}V$3=lt}}if(lt.subtreeFlags&2064&&ht!==null)ht.return=lt,V$3=ht;else e:for(;V$3!==null;){if(lt=V$3,lt.flags&2048)switch(lt.tag){case 0:case 11:case 15:Qj(9,lt,lt.return)}var bt=lt.sibling;if(bt!==null){bt.return=lt.return,V$3=bt;break e}V$3=lt.return}}var Nt=o.current;for(V$3=Nt;V$3!==null;){ht=V$3;var kt=ht.child;if(ht.subtreeFlags&2064&&kt!==null)kt.return=ht,V$3=kt;else e:for(ht=Nt;V$3!==null;){if(dt=V$3,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Rj(9,dt)}}catch(jt){W$3(dt,dt.return,jt)}if(dt===ht){V$3=null;break e}var Dt=dt.sibling;if(Dt!==null){Dt.return=dt.return,V$3=Dt;break e}V$3=dt.return}}if(K$3=at,jg(),lc$2&&typeof lc$2.onPostCommitFiberRoot=="function")try{lc$2.onPostCommitFiberRoot(kc$2,o)}catch{}et=!0}return et}finally{C$3=a,pk.transition=s}}return!1}function Yk(o,s,a){s=Ki$1(a,s),s=Oi(o,s,1),o=dh(o,s,1),s=L$4(),o!==null&&(Ac$2(o,1,s),Ek(o,s))}function W$3(o,s,a){if(o.tag===3)Yk(o,o,a);else for(;s!==null;){if(s.tag===3){Yk(s,o,a);break}else if(s.tag===1){var et=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof et.componentDidCatch=="function"&&(Si$1===null||!Si$1.has(et))){o=Ki$1(a,o),o=Ri$1(s,o,1),s=dh(s,o,1),o=L$4(),s!==null&&(Ac$2(s,1,o),Ek(s,o));break}}s=s.return}}function Ui$1(o,s,a){var et=o.pingCache;et!==null&&et.delete(s),s=L$4(),o.pingedLanes|=o.suspendedLanes&a,R$2===o&&(Z$2&a)===a&&(T$3===4||T$3===3&&(Z$2&130023424)===Z$2&&500>B$4()-gk?Lk(o,0):sk|=a),Ek(o,s)}function Zk(o,s){s===0&&(o.mode&1?(s=sc$2,sc$2<<=1,!(sc$2&130023424)&&(sc$2=4194304)):s=1);var a=L$4();o=Zg(o,s),o!==null&&(Ac$2(o,s,a),Ek(o,a))}function vj(o){var s=o.memoizedState,a=0;s!==null&&(a=s.retryLane),Zk(o,a)}function ck(o,s){var a=0;switch(o.tag){case 13:var et=o.stateNode,at=o.memoizedState;at!==null&&(a=at.retryLane);break;case 19:et=o.stateNode;break;default:throw Error(p$4(314))}et!==null&&et.delete(s),Zk(o,a)}var Wk;Wk=function(o,s,a){if(o!==null)if(o.memoizedProps!==s.pendingProps||Wf.current)Ug=!0;else{if(!(o.lanes&a)&&!(s.flags&128))return Ug=!1,zj(o,s,a);Ug=!!(o.flags&131072)}else Ug=!1,I$3&&s.flags&1048576&&ug(s,ng,s.index);switch(s.lanes=0,s.tag){case 2:var et=s.type;jj(o,s),o=s.pendingProps;var at=Yf(s,H$4.current);Tg(s,a),at=Xh$1(null,s,et,o,at,a);var lt=bi$1();return s.flags|=1,typeof at=="object"&&at!==null&&typeof at.render=="function"&&at.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Zf(et)?(lt=!0,cg(s)):lt=!1,s.memoizedState=at.state!==null&&at.state!==void 0?at.state:null,ah(s),at.updater=nh$1,s.stateNode=at,at._reactInternals=s,rh$1(s,et,o,a),s=kj(null,s,et,!0,lt,a)):(s.tag=0,I$3&&lt&&vg(s),Yi$1(null,s,at,a),s=s.child),s;case 16:et=s.elementType;e:{switch(jj(o,s),o=s.pendingProps,at=et._init,et=at(et._payload),s.type=et,at=s.tag=$k(et),o=Lg(et,o),at){case 0:s=dj(null,s,et,o,a);break e;case 1:s=ij(null,s,et,o,a);break e;case 11:s=Zi$1(null,s,et,o,a);break e;case 14:s=aj(null,s,et,Lg(et.type,o),a);break e}throw Error(p$4(306,et,""))}return s;case 0:return et=s.type,at=s.pendingProps,at=s.elementType===et?at:Lg(et,at),dj(o,s,et,at,a);case 1:return et=s.type,at=s.pendingProps,at=s.elementType===et?at:Lg(et,at),ij(o,s,et,at,a);case 3:e:{if(lj(s),o===null)throw Error(p$4(387));et=s.pendingProps,lt=s.memoizedState,at=lt.element,bh(o,s),gh(s,et,null,a);var ht=s.memoizedState;if(et=ht.element,lt.isDehydrated)if(lt={element:et,isDehydrated:!1,cache:ht.cache,pendingSuspenseBoundaries:ht.pendingSuspenseBoundaries,transitions:ht.transitions},s.updateQueue.baseState=lt,s.memoizedState=lt,s.flags&256){at=Ki$1(Error(p$4(423)),s),s=mj(o,s,et,a,at);break e}else if(et!==at){at=Ki$1(Error(p$4(424)),s),s=mj(o,s,et,a,at);break e}else for(yg=Lf(s.stateNode.containerInfo.firstChild),xg=s,I$3=!0,zg=null,a=Ch$1(s,null,et,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ig(),et===at){s=$i(o,s,a);break e}Yi$1(o,s,et,a)}s=s.child}return s;case 5:return Kh$1(s),o===null&&Eg(s),et=s.type,at=s.pendingProps,lt=o!==null?o.memoizedProps:null,ht=at.children,Ef(et,at)?ht=null:lt!==null&&Ef(et,lt)&&(s.flags|=32),hj(o,s),Yi$1(o,s,ht,a),s.child;case 6:return o===null&&Eg(s),null;case 13:return pj(o,s,a);case 4:return Ih(s,s.stateNode.containerInfo),et=s.pendingProps,o===null?s.child=Bh$1(s,null,et,a):Yi$1(o,s,et,a),s.child;case 11:return et=s.type,at=s.pendingProps,at=s.elementType===et?at:Lg(et,at),Zi$1(o,s,et,at,a);case 7:return Yi$1(o,s,s.pendingProps,a),s.child;case 8:return Yi$1(o,s,s.pendingProps.children,a),s.child;case 12:return Yi$1(o,s,s.pendingProps.children,a),s.child;case 10:e:{if(et=s.type._context,at=s.pendingProps,lt=s.memoizedProps,ht=at.value,G$3(Mg,et._currentValue),et._currentValue=ht,lt!==null)if(He$2(lt.value,ht)){if(lt.children===at.children&&!Wf.current){s=$i(o,s,a);break e}}else for(lt=s.child,lt!==null&&(lt.return=s);lt!==null;){var dt=lt.dependencies;if(dt!==null){ht=lt.child;for(var ft=dt.firstContext;ft!==null;){if(ft.context===et){if(lt.tag===1){ft=ch$1(-1,a&-a),ft.tag=2;var vt=lt.updateQueue;if(vt!==null){vt=vt.shared;var wt=vt.pending;wt===null?ft.next=ft:(ft.next=wt.next,wt.next=ft),vt.pending=ft}}lt.lanes|=a,ft=lt.alternate,ft!==null&&(ft.lanes|=a),Sg(lt.return,a,s),dt.lanes|=a;break}ft=ft.next}}else if(lt.tag===10)ht=lt.type===s.type?null:lt.child;else if(lt.tag===18){if(ht=lt.return,ht===null)throw Error(p$4(341));ht.lanes|=a,dt=ht.alternate,dt!==null&&(dt.lanes|=a),Sg(ht,a,s),ht=lt.sibling}else ht=lt.child;if(ht!==null)ht.return=lt;else for(ht=lt;ht!==null;){if(ht===s){ht=null;break}if(lt=ht.sibling,lt!==null){lt.return=ht.return,ht=lt;break}ht=ht.return}lt=ht}Yi$1(o,s,at.children,a),s=s.child}return s;case 9:return at=s.type,et=s.pendingProps.children,Tg(s,a),at=Vg(at),et=et(at),s.flags|=1,Yi$1(o,s,et,a),s.child;case 14:return et=s.type,at=Lg(et,s.pendingProps),at=Lg(et.type,at),aj(o,s,et,at,a);case 15:return cj(o,s,s.type,s.pendingProps,a);case 17:return et=s.type,at=s.pendingProps,at=s.elementType===et?at:Lg(et,at),jj(o,s),s.tag=1,Zf(et)?(o=!0,cg(s)):o=!1,Tg(s,a),ph(s,et,at),rh$1(s,et,at,a),kj(null,s,et,!0,o,a);case 19:return yj(o,s,a);case 22:return ej(o,s,a)}throw Error(p$4(156,s.tag))};function Gk(o,s){return ac$2(o,s)}function al$1(o,s,a,et){this.tag=o,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=et,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,s,a,et){return new al$1(o,s,a,et)}function bj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function $k(o){if(typeof o=="function")return bj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da$1)return 11;if(o===Ga$2)return 14}return 2}function wh$1(o,s){var a=o.alternate;return a===null?(a=Bg(o.tag,s,o.key,o.mode),a.elementType=o.elementType,a.type=o.type,a.stateNode=o.stateNode,a.alternate=o,o.alternate=a):(a.pendingProps=s,a.type=o.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=o.flags&14680064,a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,s=o.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=o.sibling,a.index=o.index,a.ref=o.ref,a}function yh(o,s,a,et,at,lt){var ht=2;if(et=o,typeof o=="function")bj(o)&&(ht=1);else if(typeof o=="string")ht=5;else e:switch(o){case ya$1:return Ah(a.children,at,lt,s);case za$2:ht=8,at|=8;break;case Aa$2:return o=Bg(12,a,s,at|2),o.elementType=Aa$2,o.lanes=lt,o;case Ea$2:return o=Bg(13,a,s,at),o.elementType=Ea$2,o.lanes=lt,o;case Fa$2:return o=Bg(19,a,s,at),o.elementType=Fa$2,o.lanes=lt,o;case Ia$1:return qj(a,at,lt,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba$1:ht=10;break e;case Ca:ht=9;break e;case Da$1:ht=11;break e;case Ga$2:ht=14;break e;case Ha$2:ht=16,et=null;break e}throw Error(p$4(130,o==null?o:typeof o,""))}return s=Bg(ht,a,s,at),s.elementType=o,s.type=et,s.lanes=lt,s}function Ah(o,s,a,et){return o=Bg(7,o,et,s),o.lanes=a,o}function qj(o,s,a,et){return o=Bg(22,o,et,s),o.elementType=Ia$1,o.lanes=a,o.stateNode={isHidden:!1},o}function xh(o,s,a){return o=Bg(6,o,null,s),o.lanes=a,o}function zh$1(o,s,a){return s=Bg(4,o.children!==null?o.children:[],o.key,s),s.lanes=a,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function bl(o,s,a,et,at){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$2(0),this.expirationTimes=zc$2(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$2(0),this.identifierPrefix=et,this.onRecoverableError=at,this.mutableSourceEagerHydrationData=null}function cl$1(o,s,a,et,at,lt,ht,dt,ft){return o=new bl(o,s,a,dt,ft),s===1?(s=1,lt===!0&&(s|=8)):s=0,lt=Bg(3,null,null,s),o.current=lt,lt.stateNode=o,lt.memoizedState={element:et,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(lt),o}function dl$1(o,s,a){var et=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:et==null?null:""+et,children:o,containerInfo:s,implementation:a}}function el$1(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb$1(o)!==o||o.tag!==1)throw Error(p$4(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Zf(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(p$4(171))}if(o.tag===1){var a=o.type;if(Zf(a))return bg(o,a,s)}return s}function fl$1(o,s,a,et,at,lt,ht,dt,ft){return o=cl$1(a,et,!0,o,at,lt,ht,dt,ft),o.context=el$1(null),a=o.current,et=L$4(),at=lh(a),lt=ch$1(et,at),lt.callback=s??null,dh(a,lt,at),o.current.lanes=at,Ac$2(o,at,et),Ek(o,et),o}function gl(o,s,a,et){var at=s.current,lt=L$4(),ht=lh(at);return a=el$1(a),s.context===null?s.context=a:s.pendingContext=a,s=ch$1(lt,ht),s.payload={element:o},et=et===void 0?null:et,et!==null&&(s.callback=et),o=dh(at,s,ht),o!==null&&(mh$1(o,at,ht,lt),eh$1(o,at,ht)),ht}function hl$1(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function il$1(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var a=o.retryLane;o.retryLane=a!==0&&a<s?a:s}}function jl$1(o,s){il$1(o,s),(o=o.alternate)&&il$1(o,s)}function kl$1(){return null}var ll$1=typeof reportError=="function"?reportError:function(o){console.error(o)};function ml$1(o){this._internalRoot=o}nl$1.prototype.render=ml$1.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(p$4(409));gl(o,s,null,null)};nl$1.prototype.unmount=ml$1.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Sk(function(){gl(null,o,null,null)}),s[uf]=null}};function nl$1(o){this._internalRoot=o}nl$1.prototype.unstable_scheduleHydration=function(o){if(o){var s=Hc$2();o={blockedOn:null,target:o,priority:s};for(var a=0;a<Qc$2.length&&s!==0&&s<Qc$2[a].priority;a++);Qc$2.splice(a,0,o),a===0&&Vc$2(o)}};function ol$1(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl$1(o,s,a,et,at){if(at){if(typeof et=="function"){var lt=et;et=function(){var vt=hl$1(ht);lt.call(vt)}}var ht=fl$1(s,et,o,0,null,!1,!1,"",ql);return o._reactRootContainer=ht,o[uf]=ht.current,sf$1(o.nodeType===8?o.parentNode:o),Sk(),ht}for(;at=o.lastChild;)o.removeChild(at);if(typeof et=="function"){var dt=et;et=function(){var vt=hl$1(ft);dt.call(vt)}}var ft=cl$1(o,0,!1,null,null,!1,!1,"",ql);return o._reactRootContainer=ft,o[uf]=ft.current,sf$1(o.nodeType===8?o.parentNode:o),Sk(function(){gl(s,ft,a,et)}),ft}function sl$1(o,s,a,et,at){var lt=a._reactRootContainer;if(lt){var ht=lt;if(typeof at=="function"){var dt=at;at=function(){var ft=hl$1(ht);dt.call(ft)}}gl(s,ht,o,at)}else ht=rl$1(a,s,o,at,et);return hl$1(ht)}Ec$2=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var a=tc$2(s.pendingLanes);a!==0&&(Cc$2(s,a|1),Ek(s,B$4()),!(K$3&6)&&(Hj=B$4()+500,jg()))}break;case 13:Sk(function(){var et=Zg(o,1);if(et!==null){var at=L$4();mh$1(et,o,1,at)}}),jl$1(o,1)}};Fc$2=function(o){if(o.tag===13){var s=Zg(o,134217728);if(s!==null){var a=L$4();mh$1(s,o,134217728,a)}jl$1(o,134217728)}};Gc$2=function(o){if(o.tag===13){var s=lh(o),a=Zg(o,s);if(a!==null){var et=L$4();mh$1(a,o,s,et)}jl$1(o,s)}};Hc$2=function(){return C$3};Ic$2=function(o,s){var a=C$3;try{return C$3=o,s()}finally{C$3=a}};yb$1=function(o,s,a){switch(s){case"input":if(bb$1(o,a),s=a.name,a.type==="radio"&&s!=null){for(a=o;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<a.length;s++){var et=a[s];if(et!==o&&et.form===o.form){var at=Db$1(et);if(!at)throw Error(p$4(90));Wa$2(et),bb$1(et,at)}}}break;case"textarea":ib$1(o,a);break;case"select":s=a.value,s!=null&&fb$1(o,!!a.multiple,s,!1)}};Gb$1=Rk;Hb$1=Sk;var tl$1={usingClientEntryPoint:!1,Events:[Cb$1,ue$1,Db$1,Eb$1,Fb$1,Rk]},ul$1={findFiberByHostInstance:Wc$2,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul$1.bundleType,version:ul$1.version,rendererPackageName:ul$1.rendererPackageName,rendererConfig:ul$1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb$1(o),o===null?null:o.stateNode},findFiberByHostInstance:ul$1.findFiberByHostInstance||kl$1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl$1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl$1.isDisabled&&wl$1.supportsFiber)try{kc$2=wl$1.inject(vl),lc$2=wl$1}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl$1;reactDom_production_min.createPortal=function(o,s){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol$1(s))throw Error(p$4(200));return dl$1(o,s,null,a)};reactDom_production_min.createRoot=function(o,s){if(!ol$1(o))throw Error(p$4(299));var a=!1,et="",at=ll$1;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(et=s.identifierPrefix),s.onRecoverableError!==void 0&&(at=s.onRecoverableError)),s=cl$1(o,1,!1,null,null,a,!1,et,at),o[uf]=s.current,sf$1(o.nodeType===8?o.parentNode:o),new ml$1(s)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(p$4(188)):(o=Object.keys(o).join(","),Error(p$4(268,o)));return o=Zb$1(s),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Sk(o)};reactDom_production_min.hydrate=function(o,s,a){if(!pl(s))throw Error(p$4(200));return sl$1(null,o,s,!0,a)};reactDom_production_min.hydrateRoot=function(o,s,a){if(!ol$1(o))throw Error(p$4(405));var et=a!=null&&a.hydratedSources||null,at=!1,lt="",ht=ll$1;if(a!=null&&(a.unstable_strictMode===!0&&(at=!0),a.identifierPrefix!==void 0&&(lt=a.identifierPrefix),a.onRecoverableError!==void 0&&(ht=a.onRecoverableError)),s=fl$1(s,null,o,1,a??null,at,!1,lt,ht),o[uf]=s.current,sf$1(o),et)for(o=0;o<et.length;o++)a=et[o],at=a._getVersion,at=at(a._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[a,at]:s.mutableSourceEagerHydrationData.push(a,at);return new nl$1(s)};reactDom_production_min.render=function(o,s,a){if(!pl(s))throw Error(p$4(200));return sl$1(null,o,s,!1,a)};reactDom_production_min.unmountComponentAtNode=function(o){if(!pl(o))throw Error(p$4(40));return o._reactRootContainer?(Sk(function(){sl$1(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,s,a,et){if(!pl(a))throw Error(p$4(200));if(o==null||o._reactInternals===void 0)throw Error(p$4(38));return sl$1(o,s,a,!1,et)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";(function(o){function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(a){console.error(a)}}s(),o.exports=reactDom_production_min})(reactDom);var m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;const App$1="";/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var et in a)Object.prototype.hasOwnProperty.call(a,et)&&(o[et]=a[et])}return o},_extends$3.apply(this,arguments)}var Action;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(o){o===void 0&&(o={});function s(et,at){let{pathname:lt,search:ht,hash:dt}=et.location;return createLocation("",{pathname:lt,search:ht,hash:dt},at.state&&at.state.usr||null,at.state&&at.state.key||"default")}function a(et,at){return typeof at=="string"?at:createPath(at)}return getUrlBasedHistory(s,a,null,o)}function invariant$1(o,s){if(o===!1||o===null||typeof o>"u")throw new Error(s)}function warning$1(o,s){if(!o){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(o,s){return{usr:o.state,key:o.key,idx:s}}function createLocation(o,s,a,et){return a===void 0&&(a=null),_extends$3({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof s=="string"?parsePath(s):s,{state:a,key:s&&s.key||et||createKey()})}function createPath(o){let{pathname:s="/",search:a="",hash:et=""}=o;return a&&a!=="?"&&(s+=a.charAt(0)==="?"?a:"?"+a),et&&et!=="#"&&(s+=et.charAt(0)==="#"?et:"#"+et),s}function parsePath(o){let s={};if(o){let a=o.indexOf("#");a>=0&&(s.hash=o.substr(a),o=o.substr(0,a));let et=o.indexOf("?");et>=0&&(s.search=o.substr(et),o=o.substr(0,et)),o&&(s.pathname=o)}return s}function getUrlBasedHistory(o,s,a,et){et===void 0&&(et={});let{window:at=document.defaultView,v5Compat:lt=!1}=et,ht=at.history,dt=Action.Pop,ft=null,vt=wt();vt==null&&(vt=0,ht.replaceState(_extends$3({},ht.state,{idx:vt}),""));function wt(){return(ht.state||{idx:null}).idx}function Ct(){dt=Action.Pop;let St=wt(),bt=St==null?null:St-vt;vt=St,ft&&ft({action:dt,location:_t.location,delta:bt})}function xt(St,bt){dt=Action.Push;let Nt=createLocation(_t.location,St,bt);a&&a(Nt,St),vt=wt()+1;let kt=getHistoryState(Nt,vt),Dt=_t.createHref(Nt);try{ht.pushState(kt,"",Dt)}catch{at.location.assign(Dt)}lt&&ft&&ft({action:dt,location:_t.location,delta:1})}function Pt(St,bt){dt=Action.Replace;let Nt=createLocation(_t.location,St,bt);a&&a(Nt,St),vt=wt();let kt=getHistoryState(Nt,vt),Dt=_t.createHref(Nt);ht.replaceState(kt,"",Dt),lt&&ft&&ft({action:dt,location:_t.location,delta:0})}function Rt(St){let bt=at.location.origin!=="null"?at.location.origin:at.location.href,Nt=typeof St=="string"?St:createPath(St);return invariant$1(bt,"No window.location.(origin|href) available to create URL for href: "+Nt),new URL(Nt,bt)}let _t={get action(){return dt},get location(){return o(at,ht)},listen(St){if(ft)throw new Error("A history only accepts one active listener");return at.addEventListener(PopStateEventType,Ct),ft=St,()=>{at.removeEventListener(PopStateEventType,Ct),ft=null}},createHref(St){return s(at,St)},createURL:Rt,encodeLocation(St){let bt=Rt(St);return{pathname:bt.pathname,search:bt.search,hash:bt.hash}},push:xt,replace:Pt,go(St){return ht.go(St)}};return _t}var ResultType;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(ResultType||(ResultType={}));function matchRoutes(o,s,a){a===void 0&&(a="/");let et=typeof s=="string"?parsePath(s):s,at=stripBasename(et.pathname||"/",a);if(at==null)return null;let lt=flattenRoutes(o);rankRouteBranches(lt);let ht=null;for(let dt=0;ht==null&&dt<lt.length;++dt)ht=matchRouteBranch(lt[dt],safelyDecodeURI(at));return ht}function flattenRoutes(o,s,a,et){s===void 0&&(s=[]),a===void 0&&(a=[]),et===void 0&&(et="");let at=(lt,ht,dt)=>{let ft={relativePath:dt===void 0?lt.path||"":dt,caseSensitive:lt.caseSensitive===!0,childrenIndex:ht,route:lt};ft.relativePath.startsWith("/")&&(invariant$1(ft.relativePath.startsWith(et),'Absolute route path "'+ft.relativePath+'" nested under path '+('"'+et+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ft.relativePath=ft.relativePath.slice(et.length));let vt=joinPaths([et,ft.relativePath]),wt=a.concat(ft);lt.children&&lt.children.length>0&&(invariant$1(lt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+vt+'".')),flattenRoutes(lt.children,s,wt,vt)),!(lt.path==null&&!lt.index)&&s.push({path:vt,score:computeScore(vt,lt.index),routesMeta:wt})};return o.forEach((lt,ht)=>{var dt;if(lt.path===""||!((dt=lt.path)!=null&&dt.includes("?")))at(lt,ht);else for(let ft of explodeOptionalSegments(lt.path))at(lt,ht,ft)}),s}function explodeOptionalSegments(o){let s=o.split("/");if(s.length===0)return[];let[a,...et]=s,at=a.endsWith("?"),lt=a.replace(/\?$/,"");if(et.length===0)return at?[lt,""]:[lt];let ht=explodeOptionalSegments(et.join("/")),dt=[];return dt.push(...ht.map(ft=>ft===""?lt:[lt,ft].join("/"))),at&&dt.push(...ht),dt.map(ft=>o.startsWith("/")&&ft===""?"/":ft)}function rankRouteBranches(o){o.sort((s,a)=>s.score!==a.score?a.score-s.score:compareIndexes(s.routesMeta.map(et=>et.childrenIndex),a.routesMeta.map(et=>et.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,s){let a=o.split("/"),et=a.length;return a.some(isSplat)&&(et+=splatPenalty),s&&(et+=indexRouteValue),a.filter(at=>!isSplat(at)).reduce((at,lt)=>at+(paramRe.test(lt)?dynamicSegmentValue:lt===""?emptySegmentValue:staticSegmentValue),et)}function compareIndexes(o,s){return o.length===s.length&&o.slice(0,-1).every((et,at)=>et===s[at])?o[o.length-1]-s[s.length-1]:0}function matchRouteBranch(o,s){let{routesMeta:a}=o,et={},at="/",lt=[];for(let ht=0;ht<a.length;++ht){let dt=a[ht],ft=ht===a.length-1,vt=at==="/"?s:s.slice(at.length)||"/",wt=matchPath({path:dt.relativePath,caseSensitive:dt.caseSensitive,end:ft},vt);if(!wt)return null;Object.assign(et,wt.params);let Ct=dt.route;lt.push({params:et,pathname:joinPaths([at,wt.pathname]),pathnameBase:normalizePathname(joinPaths([at,wt.pathnameBase])),route:Ct}),wt.pathnameBase!=="/"&&(at=joinPaths([at,wt.pathnameBase]))}return lt}function matchPath(o,s){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[a,et]=compilePath(o.path,o.caseSensitive,o.end),at=s.match(a);if(!at)return null;let lt=at[0],ht=lt.replace(/(.)\/+$/,"$1"),dt=at.slice(1);return{params:et.reduce((vt,wt,Ct)=>{if(wt==="*"){let xt=dt[Ct]||"";ht=lt.slice(0,lt.length-xt.length).replace(/(.)\/+$/,"$1")}return vt[wt]=safelyDecodeURIComponent(dt[Ct]||"",wt),vt},{}),pathname:lt,pathnameBase:ht,pattern:o}}function compilePath(o,s,a){s===void 0&&(s=!1),a===void 0&&(a=!0),warning$1(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let et=[],at="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(ht,dt)=>(et.push(dt),"/([^\\/]+)"));return o.endsWith("*")?(et.push("*"),at+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?at+="\\/*$":o!==""&&o!=="/"&&(at+="(?:(?=\\/|$))"),[new RegExp(at,s?void 0:"i"),et]}function safelyDecodeURI(o){try{return decodeURI(o)}catch(s){return warning$1(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),o}}function safelyDecodeURIComponent(o,s){try{return decodeURIComponent(o)}catch(a){return warning$1(!1,'The value for the URL param "'+s+'" will not be decoded because'+(' the string "'+o+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+a+").")),o}}function stripBasename(o,s){if(s==="/")return o;if(!o.toLowerCase().startsWith(s.toLowerCase()))return null;let a=s.endsWith("/")?s.length-1:s.length,et=o.charAt(a);return et&&et!=="/"?null:o.slice(a)||"/"}function resolvePath(o,s){s===void 0&&(s="/");let{pathname:a,search:et="",hash:at=""}=typeof o=="string"?parsePath(o):o;return{pathname:a?a.startsWith("/")?a:resolvePathname(a,s):s,search:normalizeSearch(et),hash:normalizeHash(at)}}function resolvePathname(o,s){let a=s.replace(/\/+$/,"").split("/");return o.split("/").forEach(at=>{at===".."?a.length>1&&a.pop():at!=="."&&a.push(at)}),a.length>1?a.join("/"):"/"}function getInvalidPathError(o,s,a,et){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(et)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(o){return o.filter((s,a)=>a===0||s.route.path&&s.route.path.length>0)}function resolveTo(o,s,a,et){et===void 0&&(et=!1);let at;typeof o=="string"?at=parsePath(o):(at=_extends$3({},o),invariant$1(!at.pathname||!at.pathname.includes("?"),getInvalidPathError("?","pathname","search",at)),invariant$1(!at.pathname||!at.pathname.includes("#"),getInvalidPathError("#","pathname","hash",at)),invariant$1(!at.search||!at.search.includes("#"),getInvalidPathError("#","search","hash",at)));let lt=o===""||at.pathname==="",ht=lt?"/":at.pathname,dt;if(et||ht==null)dt=a;else{let Ct=s.length-1;if(ht.startsWith("..")){let xt=ht.split("/");for(;xt[0]==="..";)xt.shift(),Ct-=1;at.pathname=xt.join("/")}dt=Ct>=0?s[Ct]:"/"}let ft=resolvePath(at,dt),vt=ht&&ht!=="/"&&ht.endsWith("/"),wt=(lt||ht===".")&&a.endsWith("/");return!ft.pathname.endsWith("/")&&(vt||wt)&&(ft.pathname+="/"),ft}const joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function isPolyfill(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}const is$2=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2(o,s,a){const et=s(),[{inst:at},lt]=useState({inst:{value:et,getSnapshot:s}});return useLayoutEffect(()=>{at.value=et,at.getSnapshot=s,checkIfSnapshotChanged(at)&&lt({inst:at})},[o,et,s]),useEffect(()=>(checkIfSnapshotChanged(at)&&lt({inst:at}),o(()=>{checkIfSnapshotChanged(at)&&lt({inst:at})})),[o]),useDebugValue(et),et}function checkIfSnapshotChanged(o){const s=o.getSnapshot,a=o.value;try{const et=s();return!is$2(a,et)}catch{return!0}}function useSyncExternalStore$1(o,s,a){return s()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React$1&&(o=>o.useSyncExternalStore)(React$1);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var et in a)Object.prototype.hasOwnProperty.call(a,et)&&(o[et]=a[et])}return o},_extends$2.apply(this,arguments)}function useHref(o,s){let{relative:a}=s===void 0?{}:s;useInRouterContext()||invariant$1(!1);let{basename:et,navigator:at}=reactExports.useContext(NavigationContext),{hash:lt,pathname:ht,search:dt}=useResolvedPath(o,{relative:a}),ft=ht;return et!=="/"&&(ft=ht==="/"?et:joinPaths([et,ht])),at.createHref({pathname:ft,search:dt,hash:lt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant$1(!1);let{basename:o,navigator:s}=reactExports.useContext(NavigationContext),{matches:a}=reactExports.useContext(RouteContext),{pathname:et}=useLocation(),at=JSON.stringify(getPathContributingMatches(a).map(dt=>dt.pathnameBase)),lt=reactExports.useRef(!1);return reactExports.useEffect(()=>{lt.current=!0}),reactExports.useCallback(function(dt,ft){if(ft===void 0&&(ft={}),!lt.current)return;if(typeof dt=="number"){s.go(dt);return}let vt=resolveTo(dt,JSON.parse(at),et,ft.relative==="path");o!=="/"&&(vt.pathname=vt.pathname==="/"?o:joinPaths([o,vt.pathname])),(ft.replace?s.replace:s.push)(vt,ft.state,ft)},[o,s,at,et])}function useParams(){let{matches:o}=reactExports.useContext(RouteContext),s=o[o.length-1];return s?s.params:{}}function useResolvedPath(o,s){let{relative:a}=s===void 0?{}:s,{matches:et}=reactExports.useContext(RouteContext),{pathname:at}=useLocation(),lt=JSON.stringify(getPathContributingMatches(et).map(ht=>ht.pathnameBase));return reactExports.useMemo(()=>resolveTo(o,JSON.parse(lt),at,a==="path"),[o,lt,at,a])}function useRoutes(o,s){useInRouterContext()||invariant$1(!1);let{navigator:a}=reactExports.useContext(NavigationContext),et=reactExports.useContext(DataRouterStateContext),{matches:at}=reactExports.useContext(RouteContext),lt=at[at.length-1],ht=lt?lt.params:{};lt&&lt.pathname;let dt=lt?lt.pathnameBase:"/";lt&&lt.route;let ft=useLocation(),vt;if(s){var wt;let _t=typeof s=="string"?parsePath(s):s;dt==="/"||(wt=_t.pathname)!=null&&wt.startsWith(dt)||invariant$1(!1),vt=_t}else vt=ft;let Ct=vt.pathname||"/",xt=dt==="/"?Ct:Ct.slice(dt.length)||"/",Pt=matchRoutes(o,{pathname:xt}),Rt=_renderMatches(Pt&&Pt.map(_t=>Object.assign({},_t,{params:Object.assign({},ht,_t.params),pathname:joinPaths([dt,a.encodeLocation?a.encodeLocation(_t.pathname).pathname:_t.pathname]),pathnameBase:_t.pathnameBase==="/"?dt:joinPaths([dt,a.encodeLocation?a.encodeLocation(_t.pathnameBase).pathname:_t.pathnameBase])})),at,et||void 0);return s&&Rt?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$2({pathname:"/",search:"",hash:"",state:null,key:"default"},vt),navigationType:Action.Pop}},Rt):Rt}function DefaultErrorComponent(){let o=useRouteError(),s=isRouteErrorResponse(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),a=o instanceof Error?o.stack:null,at={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},lt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},s),a?reactExports.createElement("pre",{style:at},a):null,lt)}class RenderErrorBoundary extends reactExports.Component{constructor(s){super(s),this.state={location:s.location,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,a){return a.location!==s.location?{error:s.error,location:s.location}:{error:s.error||a.error,location:a.location}}componentDidCatch(s,a){console.error("React Router caught the following error during render",s,a)}render(){return this.state.error?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(o){let{routeContext:s,match:a,children:et}=o,at=reactExports.useContext(DataRouterContext);return at&&at.static&&at.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(at.staticContext._deepestRenderedBoundaryId=a.route.id),reactExports.createElement(RouteContext.Provider,{value:s},et)}function _renderMatches(o,s,a){if(s===void 0&&(s=[]),o==null)if(a!=null&&a.errors)o=a.matches;else return null;let et=o,at=a==null?void 0:a.errors;if(at!=null){let lt=et.findIndex(ht=>ht.route.id&&(at==null?void 0:at[ht.route.id]));lt>=0||invariant$1(!1),et=et.slice(0,Math.min(et.length,lt+1))}return et.reduceRight((lt,ht,dt)=>{let ft=ht.route.id?at==null?void 0:at[ht.route.id]:null,vt=null;a&&(ht.route.ErrorBoundary?vt=reactExports.createElement(ht.route.ErrorBoundary,null):ht.route.errorElement?vt=ht.route.errorElement:vt=reactExports.createElement(DefaultErrorComponent,null));let wt=s.concat(et.slice(0,dt+1)),Ct=()=>{let xt=lt;return ft?xt=vt:ht.route.Component?xt=reactExports.createElement(ht.route.Component,null):ht.route.element&&(xt=ht.route.element),reactExports.createElement(RenderedRoute,{match:ht,routeContext:{outlet:lt,matches:wt},children:xt})};return a&&(ht.route.ErrorBoundary||ht.route.errorElement||dt===0)?reactExports.createElement(RenderErrorBoundary,{location:a.location,component:vt,error:ft,children:Ct(),routeContext:{outlet:null,matches:wt}}):Ct()},null)}var DataRouterHook$1;(function(o){o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(o){o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(o){let s=reactExports.useContext(DataRouterStateContext);return s||invariant$1(!1),s}function useRouteContext(o){let s=reactExports.useContext(RouteContext);return s||invariant$1(!1),s}function useCurrentRouteId(o){let s=useRouteContext(),a=s.matches[s.matches.length-1];return a.route.id||invariant$1(!1),a.route.id}function useRouteError(){var o;let s=reactExports.useContext(RouteErrorContext),a=useDataRouterState(DataRouterStateHook$1.UseRouteError),et=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return s||((o=a.errors)==null?void 0:o[et])}function Navigate(o){let{to:s,replace:a,state:et,relative:at}=o;useInRouterContext()||invariant$1(!1);let lt=reactExports.useContext(DataRouterStateContext),ht=useNavigate();return reactExports.useEffect(()=>{lt&&lt.navigation.state!=="idle"||ht(s,{replace:a,state:et,relative:at})}),null}function Route(o){invariant$1(!1)}function Router(o){let{basename:s="/",children:a=null,location:et,navigationType:at=Action.Pop,navigator:lt,static:ht=!1}=o;useInRouterContext()&&invariant$1(!1);let dt=s.replace(/^\/*/,"/"),ft=reactExports.useMemo(()=>({basename:dt,navigator:lt,static:ht}),[dt,lt,ht]);typeof et=="string"&&(et=parsePath(et));let{pathname:vt="/",search:wt="",hash:Ct="",state:xt=null,key:Pt="default"}=et,Rt=reactExports.useMemo(()=>{let _t=stripBasename(vt,dt);return _t==null?null:{location:{pathname:_t,search:wt,hash:Ct,state:xt,key:Pt},navigationType:at}},[dt,vt,wt,Ct,xt,Pt,at]);return Rt==null?null:reactExports.createElement(NavigationContext.Provider,{value:ft},reactExports.createElement(LocationContext.Provider,{children:a,value:Rt}))}function Routes(o){let{children:s,location:a}=o,et=reactExports.useContext(DataRouterContext),at=et&&!s?et.router.routes:createRoutesFromChildren(s);return useRoutes(at,a)}var AwaitRenderStatus;(function(o){o[o.pending=0]="pending",o[o.success=1]="success",o[o.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(o,s){s===void 0&&(s=[]);let a=[];return reactExports.Children.forEach(o,(et,at)=>{if(!reactExports.isValidElement(et))return;let lt=[...s,at];if(et.type===reactExports.Fragment){a.push.apply(a,createRoutesFromChildren(et.props.children,lt));return}et.type!==Route&&invariant$1(!1),!et.props.index||!et.props.children||invariant$1(!1);let ht={id:et.props.id||lt.join("-"),caseSensitive:et.props.caseSensitive,element:et.props.element,Component:et.props.Component,index:et.props.index,path:et.props.path,loader:et.props.loader,action:et.props.action,errorElement:et.props.errorElement,ErrorBoundary:et.props.ErrorBoundary,hasErrorBoundary:et.props.ErrorBoundary!=null||et.props.errorElement!=null,shouldRevalidate:et.props.shouldRevalidate,handle:et.props.handle,lazy:et.props.lazy};et.props.children&&(ht.children=createRoutesFromChildren(et.props.children,lt)),a.push(ht)}),a}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var et in a)Object.prototype.hasOwnProperty.call(a,et)&&(o[et]=a[et])}return o},_extends$1.apply(this,arguments)}function _objectWithoutPropertiesLoose$1(o,s){if(o==null)return{};var a={},et=Object.keys(o),at,lt;for(lt=0;lt<et.length;lt++)at=et[lt],!(s.indexOf(at)>=0)&&(a[at]=o[at]);return a}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,s){return o.button===0&&(!s||s==="_self")&&!isModifiedEvent(o)}const _excluded$1=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function BrowserRouter(o){let{basename:s,children:a,window:et}=o,at=reactExports.useRef();at.current==null&&(at.current=createBrowserHistory({window:et,v5Compat:!0}));let lt=at.current,[ht,dt]=reactExports.useState({action:lt.action,location:lt.location});return reactExports.useLayoutEffect(()=>lt.listen(dt),[lt]),reactExports.createElement(Router,{basename:s,children:a,location:ht.location,navigationType:ht.action,navigator:lt})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(s,a){let{onClick:et,relative:at,reloadDocument:lt,replace:ht,state:dt,target:ft,to:vt,preventScrollReset:wt}=s,Ct=_objectWithoutPropertiesLoose$1(s,_excluded$1),{basename:xt}=reactExports.useContext(NavigationContext),Pt,Rt=!1;if(typeof vt=="string"&&ABSOLUTE_URL_REGEX.test(vt)&&(Pt=vt,isBrowser$1)){let Nt=new URL(window.location.href),kt=vt.startsWith("//")?new URL(Nt.protocol+vt):new URL(vt),Dt=stripBasename(kt.pathname,xt);kt.origin===Nt.origin&&Dt!=null?vt=Dt+kt.search+kt.hash:Rt=!0}let _t=useHref(vt,{relative:at}),St=useLinkClickHandler(vt,{replace:ht,state:dt,target:ft,preventScrollReset:wt,relative:at});function bt(Nt){et&&et(Nt),Nt.defaultPrevented||St(Nt)}return reactExports.createElement("a",_extends$1({},Ct,{href:Pt||_t,onClick:Rt||lt?et:bt,ref:a,target:ft}))});var DataRouterHook;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmitImpl="useSubmitImpl",o.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(o){o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(o,s){let{target:a,replace:et,state:at,preventScrollReset:lt,relative:ht}=s===void 0?{}:s,dt=useNavigate(),ft=useLocation(),vt=useResolvedPath(o,{relative:ht});return reactExports.useCallback(wt=>{if(shouldProcessLinkClick(wt,a)){wt.preventDefault();let Ct=et!==void 0?et:createPath(ft)===createPath(vt);dt(o,{replace:Ct,state:at,preventScrollReset:lt,relative:ht})}},[ft,dt,vt,et,at,a,o,lt,ht])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(o){const s=[];let a=0;for(let et=0;et<o.length;et++){let at=o.charCodeAt(et);at<128?s[a++]=at:at<2048?(s[a++]=at>>6|192,s[a++]=at&63|128):(at&64512)===55296&&et+1<o.length&&(o.charCodeAt(et+1)&64512)===56320?(at=65536+((at&1023)<<10)+(o.charCodeAt(++et)&1023),s[a++]=at>>18|240,s[a++]=at>>12&63|128,s[a++]=at>>6&63|128,s[a++]=at&63|128):(s[a++]=at>>12|224,s[a++]=at>>6&63|128,s[a++]=at&63|128)}return s},byteArrayToString=function(o){const s=[];let a=0,et=0;for(;a<o.length;){const at=o[a++];if(at<128)s[et++]=String.fromCharCode(at);else if(at>191&&at<224){const lt=o[a++];s[et++]=String.fromCharCode((at&31)<<6|lt&63)}else if(at>239&&at<365){const lt=o[a++],ht=o[a++],dt=o[a++],ft=((at&7)<<18|(lt&63)<<12|(ht&63)<<6|dt&63)-65536;s[et++]=String.fromCharCode(55296+(ft>>10)),s[et++]=String.fromCharCode(56320+(ft&1023))}else{const lt=o[a++],ht=o[a++];s[et++]=String.fromCharCode((at&15)<<12|(lt&63)<<6|ht&63)}}return s.join("")},base64$4={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(o,s){if(!Array.isArray(o))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=s?this.byteToCharMapWebSafe_:this.byteToCharMap_,et=[];for(let at=0;at<o.length;at+=3){const lt=o[at],ht=at+1<o.length,dt=ht?o[at+1]:0,ft=at+2<o.length,vt=ft?o[at+2]:0,wt=lt>>2,Ct=(lt&3)<<4|dt>>4;let xt=(dt&15)<<2|vt>>6,Pt=vt&63;ft||(Pt=64,ht||(xt=64)),et.push(a[wt],a[Ct],a[xt],a[Pt])}return et.join("")},encodeString(o,s){return this.HAS_NATIVE_SUPPORT&&!s?btoa(o):this.encodeByteArray(stringToByteArray$1(o),s)},decodeString(o,s){return this.HAS_NATIVE_SUPPORT&&!s?atob(o):byteArrayToString(this.decodeStringToByteArray(o,s))},decodeStringToByteArray(o,s){this.init_();const a=s?this.charToByteMapWebSafe_:this.charToByteMap_,et=[];for(let at=0;at<o.length;){const lt=a[o.charAt(at++)],dt=at<o.length?a[o.charAt(at)]:0;++at;const vt=at<o.length?a[o.charAt(at)]:64;++at;const Ct=at<o.length?a[o.charAt(at)]:64;if(++at,lt==null||dt==null||vt==null||Ct==null)throw new DecodeBase64StringError;const xt=lt<<2|dt>>4;if(et.push(xt),vt!==64){const Pt=dt<<4&240|vt>>2;if(et.push(Pt),Ct!==64){const Rt=vt<<6&192|Ct;et.push(Rt)}}}return et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let o=0;o<this.ENCODED_VALS.length;o++)this.byteToCharMap_[o]=this.ENCODED_VALS.charAt(o),this.charToByteMap_[this.byteToCharMap_[o]]=o,this.byteToCharMapWebSafe_[o]=this.ENCODED_VALS_WEBSAFE.charAt(o),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[o]]=o,o>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(o)]=o,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(o)]=o)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(o){const s=stringToByteArray$1(o);return base64$4.encodeByteArray(s,!0)},base64urlEncodeWithoutPadding=function(o){return base64Encode(o).replace(/\./g,"")},base64Decode=function(o){try{return base64$4.decodeString(o,!0)}catch(s){console.error("base64Decode failed: ",s)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof process.env>"u")return;const o={}.__FIREBASE_DEFAULTS__;if(o)return JSON.parse(o)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let o;try{o=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const s=o&&base64Decode(o[1]);return s&&JSON.parse(s)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(o){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${o}`);return}},getDefaultEmulatorHost=o=>{var s,a;return(a=(s=getDefaults())===null||s===void 0?void 0:s.emulatorHosts)===null||a===void 0?void 0:a[o]},getDefaultEmulatorHostnameAndPort=o=>{const s=getDefaultEmulatorHost(o);if(!s)return;const a=s.lastIndexOf(":");if(a<=0||a+1===s.length)throw new Error(`Invalid host ${s} with no separate hostname and port!`);const et=parseInt(s.substring(a+1),10);return s[0]==="["?[s.substring(1,a-1),et]:[s.substring(0,a),et]},getDefaultAppConfig=()=>{var o;return(o=getDefaults())===null||o===void 0?void 0:o.config},getExperimentalSetting=o=>{var s;return(s=getDefaults())===null||s===void 0?void 0:s[`_${o}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((s,a)=>{this.resolve=s,this.reject=a})}wrapCallback(s){return(a,et)=>{a?this.reject(a):this.resolve(et),typeof s=="function"&&(this.promise.catch(()=>{}),s.length===1?s(a):s(a,et))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(o,s){if(o.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const a={alg:"none",type:"JWT"},et=s||"demo-project",at=o.iat||0,lt=o.sub||o.user_id;if(!lt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ht=Object.assign({iss:`https://securetoken.google.com/${et}`,aud:et,iat:at,exp:at+3600,auth_time:at,sub:lt,user_id:lt,firebase:{sign_in_provider:"custom",identities:{}}},o),dt="";return[base64urlEncodeWithoutPadding(JSON.stringify(a)),base64urlEncodeWithoutPadding(JSON.stringify(ht)),dt].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode(){var o;const s=(o=getDefaults())===null||o===void 0?void 0:o.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isBrowserExtension(){const o=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof o=="object"&&o.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const o=getUA();return o.indexOf("MSIE ")>=0||o.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((o,s)=>{try{let a=!0;const et="validate-browser-context-for-indexeddb-analytics-module",at=self.indexedDB.open(et);at.onsuccess=()=>{at.result.close(),a||self.indexedDB.deleteDatabase(et),o(!0)},at.onupgradeneeded=()=>{a=!1},at.onerror=()=>{var lt;s(((lt=at.error)===null||lt===void 0?void 0:lt.message)||"")}}catch(a){s(a)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(s,a,et){super(a),this.code=s,this.customData=et,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(s,a,et){this.service=s,this.serviceName=a,this.errors=et}create(s,...a){const et=a[0]||{},at=`${this.service}/${s}`,lt=this.errors[s],ht=lt?replaceTemplate(lt,et):"Error",dt=`${this.serviceName}: ${ht} (${at}).`;return new FirebaseError(at,dt,et)}}function replaceTemplate(o,s){return o.replace(PATTERN,(a,et)=>{const at=s[et];return at!=null?String(at):`<${et}?>`})}const PATTERN=/\{\$([^}]+)}/g;function isEmpty(o){for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s))return!1;return!0}function deepEqual(o,s){if(o===s)return!0;const a=Object.keys(o),et=Object.keys(s);for(const at of a){if(!et.includes(at))return!1;const lt=o[at],ht=s[at];if(isObject(lt)&&isObject(ht)){if(!deepEqual(lt,ht))return!1}else if(lt!==ht)return!1}for(const at of et)if(!a.includes(at))return!1;return!0}function isObject(o){return o!==null&&typeof o=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(o){const s=[];for(const[a,et]of Object.entries(o))Array.isArray(et)?et.forEach(at=>{s.push(encodeURIComponent(a)+"="+encodeURIComponent(at))}):s.push(encodeURIComponent(a)+"="+encodeURIComponent(et));return s.length?"&"+s.join("&"):""}function querystringDecode(o){const s={};return o.replace(/^\?/,"").split("&").forEach(et=>{if(et){const[at,lt]=et.split("=");s[decodeURIComponent(at)]=decodeURIComponent(lt)}}),s}function extractQuerystring(o){const s=o.indexOf("?");if(!s)return"";const a=o.indexOf("#",s);return o.substring(s,a>0?a:void 0)}function createSubscribe(o,s){const a=new ObserverProxy(o,s);return a.subscribe.bind(a)}class ObserverProxy{constructor(s,a){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=a,this.task.then(()=>{s(this)}).catch(et=>{this.error(et)})}next(s){this.forEachObserver(a=>{a.next(s)})}error(s){this.forEachObserver(a=>{a.error(s)}),this.close(s)}complete(){this.forEachObserver(s=>{s.complete()}),this.close()}subscribe(s,a,et){let at;if(s===void 0&&a===void 0&&et===void 0)throw new Error("Missing Observer.");implementsAnyMethods(s,["next","error","complete"])?at=s:at={next:s,error:a,complete:et},at.next===void 0&&(at.next=noop$2),at.error===void 0&&(at.error=noop$2),at.complete===void 0&&(at.complete=noop$2);const lt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?at.error(this.finalError):at.complete()}catch{}}),this.observers.push(at),lt}unsubscribeOne(s){this.observers===void 0||this.observers[s]===void 0||(delete this.observers[s],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(s){if(!this.finalized)for(let a=0;a<this.observers.length;a++)this.sendOne(a,s)}sendOne(s,a){this.task.then(()=>{if(this.observers!==void 0&&this.observers[s]!==void 0)try{a(this.observers[s])}catch(et){typeof console<"u"&&console.error&&console.error(et)}})}close(s){this.finalized||(this.finalized=!0,s!==void 0&&(this.finalError=s),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(o,s){if(typeof o!="object"||o===null)return!1;for(const a of s)if(a in o&&typeof o[a]=="function")return!0;return!1}function noop$2(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_INTERVAL_MILLIS=1e3,DEFAULT_BACKOFF_FACTOR=2,MAX_VALUE_MILLIS=4*60*60*1e3,RANDOM_FACTOR=.5;function calculateBackoffMillis(o,s=DEFAULT_INTERVAL_MILLIS,a=DEFAULT_BACKOFF_FACTOR){const et=s*Math.pow(a,o),at=Math.round(RANDOM_FACTOR*et*(Math.random()-.5)*2);return Math.min(MAX_VALUE_MILLIS,et+at)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(o){return o&&o._delegate?o._delegate:o}class Component{constructor(s,a,et){this.name=s,this.instanceFactory=a,this.type=et,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(s){return this.instantiationMode=s,this}setMultipleInstances(s){return this.multipleInstances=s,this}setServiceProps(s){return this.serviceProps=s,this}setInstanceCreatedCallback(s){return this.onInstanceCreated=s,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(s,a){this.name=s,this.container=a,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(s){const a=this.normalizeInstanceIdentifier(s);if(!this.instancesDeferred.has(a)){const et=new Deferred;if(this.instancesDeferred.set(a,et),this.isInitialized(a)||this.shouldAutoInitialize())try{const at=this.getOrInitializeService({instanceIdentifier:a});at&&et.resolve(at)}catch{}}return this.instancesDeferred.get(a).promise}getImmediate(s){var a;const et=this.normalizeInstanceIdentifier(s==null?void 0:s.identifier),at=(a=s==null?void 0:s.optional)!==null&&a!==void 0?a:!1;if(this.isInitialized(et)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:et})}catch(lt){if(at)return null;throw lt}else{if(at)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(s){if(s.name!==this.name)throw Error(`Mismatching Component ${s.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=s,!!this.shouldAutoInitialize()){if(isComponentEager(s))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[a,et]of this.instancesDeferred.entries()){const at=this.normalizeInstanceIdentifier(a);try{const lt=this.getOrInitializeService({instanceIdentifier:at});et.resolve(lt)}catch{}}}}clearInstance(s=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(s),this.instancesOptions.delete(s),this.instances.delete(s)}async delete(){const s=Array.from(this.instances.values());await Promise.all([...s.filter(a=>"INTERNAL"in a).map(a=>a.INTERNAL.delete()),...s.filter(a=>"_delete"in a).map(a=>a._delete())])}isComponentSet(){return this.component!=null}isInitialized(s=DEFAULT_ENTRY_NAME$1){return this.instances.has(s)}getOptions(s=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(s)||{}}initialize(s={}){const{options:a={}}=s,et=this.normalizeInstanceIdentifier(s.instanceIdentifier);if(this.isInitialized(et))throw Error(`${this.name}(${et}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const at=this.getOrInitializeService({instanceIdentifier:et,options:a});for(const[lt,ht]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(lt);et===dt&&ht.resolve(at)}return at}onInit(s,a){var et;const at=this.normalizeInstanceIdentifier(a),lt=(et=this.onInitCallbacks.get(at))!==null&&et!==void 0?et:new Set;lt.add(s),this.onInitCallbacks.set(at,lt);const ht=this.instances.get(at);return ht&&s(ht,at),()=>{lt.delete(s)}}invokeOnInitCallbacks(s,a){const et=this.onInitCallbacks.get(a);if(et)for(const at of et)try{at(s,a)}catch{}}getOrInitializeService({instanceIdentifier:s,options:a={}}){let et=this.instances.get(s);if(!et&&this.component&&(et=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(s),options:a}),this.instances.set(s,et),this.instancesOptions.set(s,a),this.invokeOnInitCallbacks(et,s),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,s,et)}catch{}return et||null}normalizeInstanceIdentifier(s=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?s:DEFAULT_ENTRY_NAME$1:s}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(o){return o===DEFAULT_ENTRY_NAME$1?void 0:o}function isComponentEager(o){return o.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(s){this.name=s,this.providers=new Map}addComponent(s){const a=this.getProvider(s.name);if(a.isComponentSet())throw new Error(`Component ${s.name} has already been registered with ${this.name}`);a.setComponent(s)}addOrOverwriteComponent(s){this.getProvider(s.name).isComponentSet()&&this.providers.delete(s.name),this.addComponent(s)}getProvider(s){if(this.providers.has(s))return this.providers.get(s);const a=new Provider(s,this);return this.providers.set(s,a),a}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(o,s,...a)=>{if(s<o.logLevel)return;const et=new Date().toISOString(),at=ConsoleMethod[s];if(at)console[at](`[${et}]  ${o.name}:`,...a);else throw new Error(`Attempted to log a message with an invalid logType (value: ${s})`)};class Logger{constructor(s){this.name=s,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(s){if(!(s in LogLevel))throw new TypeError(`Invalid value "${s}" assigned to \`logLevel\``);this._logLevel=s}setLogLevel(s){this._logLevel=typeof s=="string"?levelStringToEnum[s]:s}get logHandler(){return this._logHandler}set logHandler(s){if(typeof s!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=s}get userLogHandler(){return this._userLogHandler}set userLogHandler(s){this._userLogHandler=s}debug(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...s),this._logHandler(this,LogLevel.DEBUG,...s)}log(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...s),this._logHandler(this,LogLevel.VERBOSE,...s)}info(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...s),this._logHandler(this,LogLevel.INFO,...s)}warn(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...s),this._logHandler(this,LogLevel.WARN,...s)}error(...s){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...s),this._logHandler(this,LogLevel.ERROR,...s)}}const instanceOfAny=(o,s)=>s.some(a=>o instanceof a);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(o){const s=new Promise((a,et)=>{const at=()=>{o.removeEventListener("success",lt),o.removeEventListener("error",ht)},lt=()=>{a(wrap(o.result)),at()},ht=()=>{et(o.error),at()};o.addEventListener("success",lt),o.addEventListener("error",ht)});return s.then(a=>{a instanceof IDBCursor&&cursorRequestMap.set(a,o)}).catch(()=>{}),reverseTransformCache.set(s,o),s}function cacheDonePromiseForTransaction(o){if(transactionDoneMap.has(o))return;const s=new Promise((a,et)=>{const at=()=>{o.removeEventListener("complete",lt),o.removeEventListener("error",ht),o.removeEventListener("abort",ht)},lt=()=>{a(),at()},ht=()=>{et(o.error||new DOMException("AbortError","AbortError")),at()};o.addEventListener("complete",lt),o.addEventListener("error",ht),o.addEventListener("abort",ht)});transactionDoneMap.set(o,s)}let idbProxyTraps={get(o,s,a){if(o instanceof IDBTransaction){if(s==="done")return transactionDoneMap.get(o);if(s==="objectStoreNames")return o.objectStoreNames||transactionStoreNamesMap.get(o);if(s==="store")return a.objectStoreNames[1]?void 0:a.objectStore(a.objectStoreNames[0])}return wrap(o[s])},set(o,s,a){return o[s]=a,!0},has(o,s){return o instanceof IDBTransaction&&(s==="done"||s==="store")?!0:s in o}};function replaceTraps(o){idbProxyTraps=o(idbProxyTraps)}function wrapFunction(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(s,...a){const et=o.call(unwrap(this),s,...a);return transactionStoreNamesMap.set(et,s.sort?s.sort():[s]),wrap(et)}:getCursorAdvanceMethods().includes(o)?function(...s){return o.apply(unwrap(this),s),wrap(cursorRequestMap.get(this))}:function(...s){return wrap(o.apply(unwrap(this),s))}}function transformCachableValue(o){return typeof o=="function"?wrapFunction(o):(o instanceof IDBTransaction&&cacheDonePromiseForTransaction(o),instanceOfAny(o,getIdbProxyableTypes())?new Proxy(o,idbProxyTraps):o)}function wrap(o){if(o instanceof IDBRequest)return promisifyRequest(o);if(transformCache.has(o))return transformCache.get(o);const s=transformCachableValue(o);return s!==o&&(transformCache.set(o,s),reverseTransformCache.set(s,o)),s}const unwrap=o=>reverseTransformCache.get(o);function openDB(o,s,{blocked:a,upgrade:et,blocking:at,terminated:lt}={}){const ht=indexedDB.open(o,s),dt=wrap(ht);return et&&ht.addEventListener("upgradeneeded",ft=>{et(wrap(ht.result),ft.oldVersion,ft.newVersion,wrap(ht.transaction))}),a&&ht.addEventListener("blocked",()=>a()),dt.then(ft=>{lt&&ft.addEventListener("close",()=>lt()),at&&ft.addEventListener("versionchange",()=>at())}).catch(()=>{}),dt}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(o,s){if(!(o instanceof IDBDatabase&&!(s in o)&&typeof s=="string"))return;if(cachedMethods.get(s))return cachedMethods.get(s);const a=s.replace(/FromIndex$/,""),et=s!==a,at=writeMethods.includes(a);if(!(a in(et?IDBIndex:IDBObjectStore).prototype)||!(at||readMethods.includes(a)))return;const lt=async function(ht,...dt){const ft=this.transaction(ht,at?"readwrite":"readonly");let vt=ft.store;return et&&(vt=vt.index(dt.shift())),(await Promise.all([vt[a](...dt),at&&ft.done]))[0]};return cachedMethods.set(s,lt),lt}replaceTraps(o=>({...o,get:(s,a,et)=>getMethod(s,a)||o.get(s,a,et),has:(s,a)=>!!getMethod(s,a)||o.has(s,a)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(s){this.container=s}getPlatformInfoString(){return this.container.getProviders().map(a=>{if(isVersionServiceProvider(a)){const et=a.getImmediate();return`${et.library}/${et.version}`}else return null}).filter(a=>a).join(" ")}}function isVersionServiceProvider(o){const s=o.getComponent();return(s==null?void 0:s.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8$1="@firebase/performance",name$7$1="@firebase/performance-compat",name$6$1="@firebase/remote-config",name$5$1="@firebase/remote-config-compat",name$4$1="@firebase/storage",name$3$1="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$6="9.19.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8$1]:"fire-perf",[name$7$1]:"fire-perf-compat",[name$6$1]:"fire-rc",[name$5$1]:"fire-rc-compat",[name$4$1]:"fire-gcs",[name$3$1]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(o,s){try{o.container.addComponent(s)}catch(a){logger$1.debug(`Component ${s.name} failed to register with FirebaseApp ${o.name}`,a)}}function _registerComponent(o){const s=o.name;if(_components.has(s))return logger$1.debug(`There were multiple attempts to register component ${s}.`),!1;_components.set(s,o);for(const a of _apps.values())_addComponent(a,o);return!0}function _getProvider(o,s){const a=o.container.getProvider("heartbeat").getImmediate({optional:!0});return a&&a.triggerHeartbeat(),o.container.getProvider(s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS$1={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS$1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(s,a,et){this._isDeleted=!1,this._options=Object.assign({},s),this._config=Object.assign({},a),this._name=a.name,this._automaticDataCollectionEnabled=a.automaticDataCollectionEnabled,this._container=et,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(s){this.checkDestroyed(),this._automaticDataCollectionEnabled=s}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(s){this._isDeleted=s}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$6;function initializeApp(o,s={}){let a=o;typeof s!="object"&&(s={name:s});const et=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},s),at=et.name;if(typeof at!="string"||!at)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(at)});if(a||(a=getDefaultAppConfig()),!a)throw ERROR_FACTORY$2.create("no-options");const lt=_apps.get(at);if(lt){if(deepEqual(a,lt.options)&&deepEqual(et,lt.config))return lt;throw ERROR_FACTORY$2.create("duplicate-app",{appName:at})}const ht=new ComponentContainer(at);for(const ft of _components.values())ht.addComponent(ft);const dt=new FirebaseAppImpl(a,et,ht);return _apps.set(at,dt),dt}function getApp(o=DEFAULT_ENTRY_NAME){const s=_apps.get(o);if(!s&&o===DEFAULT_ENTRY_NAME)return initializeApp();if(!s)throw ERROR_FACTORY$2.create("no-app",{appName:o});return s}function registerVersion(o,s,a){var et;let at=(et=PLATFORM_LOG_STRING[o])!==null&&et!==void 0?et:o;a&&(at+=`-${a}`);const lt=at.match(/\s|\//),ht=s.match(/\s|\//);if(lt||ht){const dt=[`Unable to register library "${at}" with version "${s}":`];lt&&dt.push(`library name "${at}" contains illegal characters (whitespace or "/")`),lt&&ht&&dt.push("and"),ht&&dt.push(`version name "${s}" contains illegal characters (whitespace or "/")`),logger$1.warn(dt.join(" "));return}_registerComponent(new Component(`${at}-version`,()=>({library:at,version:s}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(o,s)=>{switch(s){case 0:o.createObjectStore(STORE_NAME)}}}).catch(o=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:o.message})})),dbPromise$1}async function readHeartbeatsFromIndexedDB(o){try{return(await getDbPromise$1()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(o))}catch(s){if(s instanceof FirebaseError)logger$1.warn(s.message);else{const a=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:s==null?void 0:s.message});logger$1.warn(a.message)}}}async function writeHeartbeatsToIndexedDB(o,s){try{const et=(await getDbPromise$1()).transaction(STORE_NAME,"readwrite");return await et.objectStore(STORE_NAME).put(s,computeKey(o)),et.done}catch(a){if(a instanceof FirebaseError)logger$1.warn(a.message);else{const et=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:a==null?void 0:a.message});logger$1.warn(et.message)}}}function computeKey(o){return`${o.name}!${o.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(s){this.container=s,this._heartbeatsCache=null;const a=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(a),this._heartbeatsCachePromise=this._storage.read().then(et=>(this._heartbeatsCache=et,et))}async triggerHeartbeat(){const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),et=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===et||this._heartbeatsCache.heartbeats.some(at=>at.date===et)))return this._heartbeatsCache.heartbeats.push({date:et,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(at=>{const lt=new Date(at.date).valueOf();return Date.now()-lt<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const s=getUTCDateString(),{heartbeatsToSend:a,unsentEntries:et}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),at=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=s,et.length>0?(this._heartbeatsCache.heartbeats=et,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),at}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(o,s=MAX_HEADER_BYTES){const a=[];let et=o.slice();for(const at of o){const lt=a.find(ht=>ht.agent===at.agent);if(lt){if(lt.dates.push(at.date),countBytes(a)>s){lt.dates.pop();break}}else if(a.push({agent:at.agent,dates:[at.date]}),countBytes(a)>s){a.pop();break}et=et.slice(1)}return{heartbeatsToSend:a,unsentEntries:et}}class HeartbeatStorageImpl{constructor(s){this.app=s,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(s){var a;if(await this._canUseIndexedDBPromise){const at=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(a=s.lastSentHeartbeatDate)!==null&&a!==void 0?a:at.lastSentHeartbeatDate,heartbeats:s.heartbeats})}else return}async add(s){var a;if(await this._canUseIndexedDBPromise){const at=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(a=s.lastSentHeartbeatDate)!==null&&a!==void 0?a:at.lastSentHeartbeatDate,heartbeats:[...at.heartbeats,...s.heartbeats]})}else return}}function countBytes(o){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(o){_registerComponent(new Component("platform-logger",s=>new PlatformLoggerServiceImpl(s),"PRIVATE")),_registerComponent(new Component("heartbeat",s=>new HeartbeatServiceImpl(s),"PRIVATE")),registerVersion(name$o,version$1$1,o),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k$5,goog=goog||{},l$2=commonjsGlobal||self;function aa$1(){}function ba$1(o){var s=typeof o;return s=s!="object"?s:o?Array.isArray(o)?"array":s:"null",s=="array"||s=="object"&&typeof o.length=="number"}function p$3(o){var s=typeof o;return s=="object"&&o!=null||s=="function"}function ca(o){return Object.prototype.hasOwnProperty.call(o,da)&&o[da]||(o[da]=++ea)}var da="closure_uid_"+(1e9*Math.random()>>>0),ea=0;function fa$1(o,s,a){return o.call.apply(o.bind,arguments)}function ha$1(o,s,a){if(!o)throw Error();if(2<arguments.length){var et=Array.prototype.slice.call(arguments,2);return function(){var at=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(at,et),o.apply(s,at)}}return function(){return o.apply(s,arguments)}}function q$5(o,s,a){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q$5=fa$1:q$5=ha$1,q$5.apply(null,arguments)}function ia(o,s){var a=Array.prototype.slice.call(arguments,1);return function(){var et=a.slice();return et.push.apply(et,arguments),o.apply(this,et)}}function t$2(o,s){function a(){}a.prototype=s.prototype,o.X=s.prototype,o.prototype=new a,o.prototype.constructor=o,o.Wb=function(et,at,lt){for(var ht=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ht[dt-2]=arguments[dt];return s.prototype[at].apply(et,ht)}}function v$5(){this.s=this.s,this.o=this.o}var ja$1=0;v$5.prototype.s=!1;v$5.prototype.na=function(){!this.s&&(this.s=!0,this.M(),ja$1!=0)&&ca(this)};v$5.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const la=Array.prototype.indexOf?function(o,s){return Array.prototype.indexOf.call(o,s,void 0)}:function(o,s){if(typeof o=="string")return typeof s!="string"||s.length!=1?-1:o.indexOf(s,0);for(let a=0;a<o.length;a++)if(a in o&&o[a]===s)return a;return-1};function ma(o){const s=o.length;if(0<s){const a=Array(s);for(let et=0;et<s;et++)a[et]=o[et];return a}return[]}function na(o,s){for(let a=1;a<arguments.length;a++){const et=arguments[a];if(ba$1(et)){const at=o.length||0,lt=et.length||0;o.length=at+lt;for(let ht=0;ht<lt;ht++)o[at+ht]=et[ht]}else o.push(et)}}function w$2(o,s){this.type=o,this.g=this.target=s,this.defaultPrevented=!1}w$2.prototype.h=function(){this.defaultPrevented=!0};var oa=function(){if(!l$2.addEventListener||!Object.defineProperty)return!1;var o=!1,s=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l$2.addEventListener("test",aa$1,s),l$2.removeEventListener("test",aa$1,s)}catch{}return o}();function pa(o){return/^[\s\xa0]*$/.test(o)}var qa=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]};function ra(o,s){return o<s?-1:o>s?1:0}function sa(){var o=l$2.navigator;return o&&(o=o.userAgent)?o:""}function x$3(o){return sa().indexOf(o)!=-1}function ta(o){return ta[" "](o),o}ta[" "]=aa$1;function ua(o){var s=va$1;return Object.prototype.hasOwnProperty.call(s,9)?s[9]:s[9]=o(9)}var wa=x$3("Opera"),y$2=x$3("Trident")||x$3("MSIE"),xa$1=x$3("Edge"),ya=xa$1||y$2,za$1=x$3("Gecko")&&!(sa().toLowerCase().indexOf("webkit")!=-1&&!x$3("Edge"))&&!(x$3("Trident")||x$3("MSIE"))&&!x$3("Edge"),Aa$1=sa().toLowerCase().indexOf("webkit")!=-1&&!x$3("Edge");function Ba(){var o=l$2.document;return o?o.documentMode:void 0}var Ea$1;e:{var Fa$1="",Ga$1=function(){var o=sa();if(za$1)return/rv:([^\);]+)(\)|;)/.exec(o);if(xa$1)return/Edge\/([\d\.]+)/.exec(o);if(y$2)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(Aa$1)return/WebKit\/(\S+)/.exec(o);if(wa)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Ga$1&&(Fa$1=Ga$1?Ga$1[1]:""),y$2){var Ha$1=Ba();if(Ha$1!=null&&Ha$1>parseFloat(Fa$1)){Ea$1=String(Ha$1);break e}}Ea$1=Fa$1}var va$1={};function Ia(){return ua(function(){let o=0;const s=qa(String(Ea$1)).split("."),a=qa("9").split("."),et=Math.max(s.length,a.length);for(let ht=0;o==0&&ht<et;ht++){var at=s[ht]||"",lt=a[ht]||"";do{if(at=/(\d*)(\D*)(.*)/.exec(at)||["","","",""],lt=/(\d*)(\D*)(.*)/.exec(lt)||["","","",""],at[0].length==0&&lt[0].length==0)break;o=ra(at[1].length==0?0:parseInt(at[1],10),lt[1].length==0?0:parseInt(lt[1],10))||ra(at[2].length==0,lt[2].length==0)||ra(at[2],lt[2]),at=at[3],lt=lt[3]}while(o==0)}return 0<=o})}var Ja;if(l$2.document&&y$2){var Ka$1=Ba();Ja=Ka$1||parseInt(Ea$1,10)||void 0}else Ja=void 0;var La=Ja;function z$4(o,s){if(w$2.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var a=this.type=o.type,et=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=s,s=o.relatedTarget){if(za$1){e:{try{ta(s.nodeName);var at=!0;break e}catch{}at=!1}at||(s=null)}}else a=="mouseover"?s=o.fromElement:a=="mouseout"&&(s=o.toElement);this.relatedTarget=s,et?(this.clientX=et.clientX!==void 0?et.clientX:et.pageX,this.clientY=et.clientY!==void 0?et.clientY:et.pageY,this.screenX=et.screenX||0,this.screenY=et.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ma[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&z$4.X.h.call(this)}}t$2(z$4,w$2);var Ma={2:"touch",3:"pen",4:"mouse"};z$4.prototype.h=function(){z$4.X.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var A$3="closure_listenable_"+(1e6*Math.random()|0),Na=0;function Oa(o,s,a,et,at){this.listener=o,this.proxy=null,this.src=s,this.type=a,this.capture=!!et,this.ha=at,this.key=++Na,this.ba=this.ea=!1}function Pa(o){o.ba=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Qa$1(o,s,a){for(const et in o)s.call(a,o[et],et,o)}function Ra$1(o){const s={};for(const a in o)s[a]=o[a];return s}const Sa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ta$1(o,s){let a,et;for(let at=1;at<arguments.length;at++){et=arguments[at];for(a in et)o[a]=et[a];for(let lt=0;lt<Sa.length;lt++)a=Sa[lt],Object.prototype.hasOwnProperty.call(et,a)&&(o[a]=et[a])}}function Ua(o){this.src=o,this.g={},this.h=0}Ua.prototype.add=function(o,s,a,et,at){var lt=o.toString();o=this.g[lt],o||(o=this.g[lt]=[],this.h++);var ht=Va(o,s,et,at);return-1<ht?(s=o[ht],a||(s.ea=!1)):(s=new Oa(s,this.src,lt,!!et,at),s.ea=a,o.push(s)),s};function Wa$1(o,s){var a=s.type;if(a in o.g){var et=o.g[a],at=la(et,s),lt;(lt=0<=at)&&Array.prototype.splice.call(et,at,1),lt&&(Pa(s),o.g[a].length==0&&(delete o.g[a],o.h--))}}function Va(o,s,a,et){for(var at=0;at<o.length;++at){var lt=o[at];if(!lt.ba&&lt.listener==s&&lt.capture==!!a&&lt.ha==et)return at}return-1}var Xa$1="closure_lm_"+(1e6*Math.random()|0),Ya$1={};function $a$1(o,s,a,et,at){if(et&&et.once)return ab(o,s,a,et,at);if(Array.isArray(s)){for(var lt=0;lt<s.length;lt++)$a$1(o,s[lt],a,et,at);return null}return a=bb(a),o&&o[A$3]?o.N(s,a,p$3(et)?!!et.capture:!!et,at):cb(o,s,a,!1,et,at)}function cb(o,s,a,et,at,lt){if(!s)throw Error("Invalid event type");var ht=p$3(at)?!!at.capture:!!at,dt=db$1(o);if(dt||(o[Xa$1]=dt=new Ua(o)),a=dt.add(s,a,et,ht,lt),a.proxy)return a;if(et=eb(),a.proxy=et,et.src=o,et.listener=a,o.addEventListener)oa||(at=ht),at===void 0&&(at=!1),o.addEventListener(s.toString(),et,at);else if(o.attachEvent)o.attachEvent(fb(s.toString()),et);else if(o.addListener&&o.removeListener)o.addListener(et);else throw Error("addEventListener and attachEvent are unavailable.");return a}function eb(){function o(a){return s.call(o.src,o.listener,a)}const s=gb;return o}function ab(o,s,a,et,at){if(Array.isArray(s)){for(var lt=0;lt<s.length;lt++)ab(o,s[lt],a,et,at);return null}return a=bb(a),o&&o[A$3]?o.O(s,a,p$3(et)?!!et.capture:!!et,at):cb(o,s,a,!0,et,at)}function hb(o,s,a,et,at){if(Array.isArray(s))for(var lt=0;lt<s.length;lt++)hb(o,s[lt],a,et,at);else et=p$3(et)?!!et.capture:!!et,a=bb(a),o&&o[A$3]?(o=o.i,s=String(s).toString(),s in o.g&&(lt=o.g[s],a=Va(lt,a,et,at),-1<a&&(Pa(lt[a]),Array.prototype.splice.call(lt,a,1),lt.length==0&&(delete o.g[s],o.h--)))):o&&(o=db$1(o))&&(s=o.g[s.toString()],o=-1,s&&(o=Va(s,a,et,at)),(a=-1<o?s[o]:null)&&ib(a))}function ib(o){if(typeof o!="number"&&o&&!o.ba){var s=o.src;if(s&&s[A$3])Wa$1(s.i,o);else{var a=o.type,et=o.proxy;s.removeEventListener?s.removeEventListener(a,et,o.capture):s.detachEvent?s.detachEvent(fb(a),et):s.addListener&&s.removeListener&&s.removeListener(et),(a=db$1(s))?(Wa$1(a,o),a.h==0&&(a.src=null,s[Xa$1]=null)):Pa(o)}}}function fb(o){return o in Ya$1?Ya$1[o]:Ya$1[o]="on"+o}function gb(o,s){if(o.ba)o=!0;else{s=new z$4(s,this);var a=o.listener,et=o.ha||o.src;o.ea&&ib(o),o=a.call(et,s)}return o}function db$1(o){return o=o[Xa$1],o instanceof Ua?o:null}var jb="__closure_events_fn_"+(1e9*Math.random()>>>0);function bb(o){return typeof o=="function"?o:(o[jb]||(o[jb]=function(s){return o.handleEvent(s)}),o[jb])}function B$3(){v$5.call(this),this.i=new Ua(this),this.P=this,this.I=null}t$2(B$3,v$5);B$3.prototype[A$3]=!0;B$3.prototype.removeEventListener=function(o,s,a,et){hb(this,o,s,a,et)};function C$2(o,s){var a,et=o.I;if(et)for(a=[];et;et=et.I)a.push(et);if(o=o.P,et=s.type||s,typeof s=="string")s=new w$2(s,o);else if(s instanceof w$2)s.target=s.target||o;else{var at=s;s=new w$2(et,o),Ta$1(s,at)}if(at=!0,a)for(var lt=a.length-1;0<=lt;lt--){var ht=s.g=a[lt];at=kb(ht,et,!0,s)&&at}if(ht=s.g=o,at=kb(ht,et,!0,s)&&at,at=kb(ht,et,!1,s)&&at,a)for(lt=0;lt<a.length;lt++)ht=s.g=a[lt],at=kb(ht,et,!1,s)&&at}B$3.prototype.M=function(){if(B$3.X.M.call(this),this.i){var o=this.i,s;for(s in o.g){for(var a=o.g[s],et=0;et<a.length;et++)Pa(a[et]);delete o.g[s],o.h--}}this.I=null};B$3.prototype.N=function(o,s,a,et){return this.i.add(String(o),s,!1,a,et)};B$3.prototype.O=function(o,s,a,et){return this.i.add(String(o),s,!0,a,et)};function kb(o,s,a,et){if(s=o.i.g[String(s)],!s)return!0;s=s.concat();for(var at=!0,lt=0;lt<s.length;++lt){var ht=s[lt];if(ht&&!ht.ba&&ht.capture==a){var dt=ht.listener,ft=ht.ha||ht.src;ht.ea&&Wa$1(o.i,ht),at=dt.call(ft,et)!==!1&&at}}return at&&!et.defaultPrevented}var lb=l$2.JSON.stringify;function mb(){var o=nb;let s=null;return o.g&&(s=o.g,o.g=o.g.next,o.g||(o.h=null),s.next=null),s}class ob{constructor(){this.h=this.g=null}add(s,a){const et=pb$1.get();et.set(s,a),this.h?this.h.next=et:this.g=et,this.h=et}}var pb$1=new class{constructor(o,s){this.i=o,this.j=s,this.h=0,this.g=null}get(){let o;return 0<this.h?(this.h--,o=this.g,this.g=o.next,o.next=null):o=this.i(),o}}(()=>new qb,o=>o.reset());class qb{constructor(){this.next=this.g=this.h=null}set(s,a){this.h=s,this.g=a,this.next=null}reset(){this.next=this.g=this.h=null}}function rb(o){l$2.setTimeout(()=>{throw o},0)}function sb(o,s){ub||vb(),wb||(ub(),wb=!0),nb.add(o,s)}var ub;function vb(){var o=l$2.Promise.resolve(void 0);ub=function(){o.then(xb)}}var wb=!1,nb=new ob;function xb(){for(var o;o=mb();){try{o.h.call(o.g)}catch(a){rb(a)}var s=pb$1;s.j(o),100>s.h&&(s.h++,o.next=s.g,s.g=o)}wb=!1}function yb(o,s){B$3.call(this),this.h=o||1,this.g=s||l$2,this.j=q$5(this.lb,this),this.l=Date.now()}t$2(yb,B$3);k$5=yb.prototype;k$5.ca=!1;k$5.R=null;k$5.lb=function(){if(this.ca){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-o):(this.R&&(this.g.clearTimeout(this.R),this.R=null),C$2(this,"tick"),this.ca&&(zb(this),this.start()))}};k$5.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function zb(o){o.ca=!1,o.R&&(o.g.clearTimeout(o.R),o.R=null)}k$5.M=function(){yb.X.M.call(this),zb(this),delete this.g};function Ab(o,s,a){if(typeof o=="function")a&&(o=q$5(o,a));else if(o&&typeof o.handleEvent=="function")o=q$5(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(s)?-1:l$2.setTimeout(o,s||0)}function Bb(o){o.g=Ab(()=>{o.g=null,o.i&&(o.i=!1,Bb(o))},o.j);const s=o.h;o.h=null,o.m.apply(null,s)}class Cb extends v$5{constructor(s,a){super(),this.m=s,this.j=a,this.h=null,this.i=!1,this.g=null}l(s){this.h=arguments,this.g?this.i=!0:Bb(this)}M(){super.M(),this.g&&(l$2.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function D$1(o){v$5.call(this),this.h=o,this.g={}}t$2(D$1,v$5);var Db=[];function Eb(o,s,a,et){Array.isArray(a)||(a&&(Db[0]=a.toString()),a=Db);for(var at=0;at<a.length;at++){var lt=$a$1(s,a[at],et||o.handleEvent,!1,o.h||o);if(!lt)break;o.g[lt.key]=lt}}function Fb(o){Qa$1(o.g,function(s,a){this.g.hasOwnProperty(a)&&ib(s)},o),o.g={}}D$1.prototype.M=function(){D$1.X.M.call(this),Fb(this)};D$1.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gb(){this.g=!0}Gb.prototype.Aa=function(){this.g=!1};function Hb(o,s,a,et,at,lt){o.info(function(){if(o.g)if(lt)for(var ht="",dt=lt.split("&"),ft=0;ft<dt.length;ft++){var vt=dt[ft].split("=");if(1<vt.length){var wt=vt[0];vt=vt[1];var Ct=wt.split("_");ht=2<=Ct.length&&Ct[1]=="type"?ht+(wt+"="+vt+"&"):ht+(wt+"=redacted&")}}else ht=null;else ht=lt;return"XMLHTTP REQ ("+et+") [attempt "+at+"]: "+s+`
`+a+`
`+ht})}function Ib(o,s,a,et,at,lt,ht){o.info(function(){return"XMLHTTP RESP ("+et+") [ attempt "+at+"]: "+s+`
`+a+`
`+lt+" "+ht})}function E$2(o,s,a,et){o.info(function(){return"XMLHTTP TEXT ("+s+"): "+Jb(o,a)+(et?" "+et:"")})}function Kb(o,s){o.info(function(){return"TIMEOUT: "+s})}Gb.prototype.info=function(){};function Jb(o,s){if(!o.g)return s;if(!s)return null;try{var a=JSON.parse(s);if(a){for(o=0;o<a.length;o++)if(Array.isArray(a[o])){var et=a[o];if(!(2>et.length)){var at=et[1];if(Array.isArray(at)&&!(1>at.length)){var lt=at[0];if(lt!="noop"&&lt!="stop"&&lt!="close")for(var ht=1;ht<at.length;ht++)at[ht]=""}}}}return lb(a)}catch{return s}}var G$2={},Lb=null;function Mb(){return Lb=Lb||new B$3}G$2.Pa="serverreachability";function Nb(o){w$2.call(this,G$2.Pa,o)}t$2(Nb,w$2);function H$3(o){const s=Mb();C$2(s,new Nb(s))}G$2.STAT_EVENT="statevent";function Ob(o,s){w$2.call(this,G$2.STAT_EVENT,o),this.stat=s}t$2(Ob,w$2);function I$2(o){const s=Mb();C$2(s,new Ob(s,o))}G$2.Qa="timingevent";function Pb(o,s){w$2.call(this,G$2.Qa,o),this.size=s}t$2(Pb,w$2);function J$1(o,s){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l$2.setTimeout(function(){o()},s)}var Qb={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Rb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Sb(){}Sb.prototype.h=null;function Tb(o){return o.h||(o.h=o.i())}function Ub(){}var K$2={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Vb(){w$2.call(this,"d")}t$2(Vb,w$2);function Wb(){w$2.call(this,"c")}t$2(Wb,w$2);var Xb;function Yb(){}t$2(Yb,Sb);Yb.prototype.g=function(){return new XMLHttpRequest};Yb.prototype.i=function(){return{}};Xb=new Yb;function L$3(o,s,a,et){this.l=o,this.j=s,this.m=a,this.U=et||1,this.S=new D$1(this),this.O=Zb,o=ya?125:void 0,this.T=new yb(o),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new $b}function $b(){this.i=null,this.g="",this.h=!1}var Zb=45e3,ac$1={},bc={};k$5=L$3.prototype;k$5.setTimeout=function(o){this.O=o};function cc$1(o,s,a){o.K=1,o.v=dc$1(M$2(s)),o.s=a,o.P=!0,ec$1(o,null)}function ec$1(o,s){o.F=Date.now(),N$3(o),o.A=M$2(o.v);var a=o.A,et=o.U;Array.isArray(et)||(et=[String(et)]),fc$1(a.i,"t",et),o.C=0,a=o.l.H,o.h=new $b,o.g=gc$1(o.l,a?s:null,!o.s),0<o.N&&(o.L=new Cb(q$5(o.La,o,o.g),o.N)),Eb(o.S,o.g,"readystatechange",o.ib),s=o.H?Ra$1(o.H):{},o.s?(o.u||(o.u="POST"),s["Content-Type"]="application/x-www-form-urlencoded",o.g.da(o.A,o.u,o.s,s)):(o.u="GET",o.g.da(o.A,o.u,null,s)),H$3(),Hb(o.j,o.u,o.A,o.m,o.U,o.s)}k$5.ib=function(o){o=o.target;const s=this.L;s&&O$2(o)==3?s.l():this.La(o)};k$5.La=function(o){try{if(o==this.g)e:{const wt=O$2(this.g);var s=this.g.Ea();const Ct=this.g.aa();if(!(3>wt)&&(wt!=3||ya||this.g&&(this.h.h||this.g.fa()||hc$1(this.g)))){this.I||wt!=4||s==7||(s==8||0>=Ct?H$3(3):H$3(2)),ic$1(this);var a=this.g.aa();this.Y=a;t:if(jc$1(this)){var et=hc$1(this.g);o="";var at=et.length,lt=O$2(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){P$3(this),Q$3(this);var ht="";break t}this.h.i=new l$2.TextDecoder}for(s=0;s<at;s++)this.h.h=!0,o+=this.h.i.decode(et[s],{stream:lt&&s==at-1});et.splice(0,at),this.h.g+=o,this.C=0,ht=this.h.g}else ht=this.g.fa();if(this.i=a==200,Ib(this.j,this.u,this.A,this.m,this.U,wt,a),this.i){if(this.Z&&!this.J){t:{if(this.g){var dt,ft=this.g;if((dt=ft.g?ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pa(dt)){var vt=dt;break t}}vt=null}if(a=vt)E$2(this.j,this.m,a,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,kc$1(this,a);else{this.i=!1,this.o=3,I$2(12),P$3(this),Q$3(this);break e}}this.P?(lc$1(this,wt,ht),ya&&this.i&&wt==3&&(Eb(this.S,this.T,"tick",this.hb),this.T.start())):(E$2(this.j,this.m,ht,null),kc$1(this,ht)),wt==4&&P$3(this),this.i&&!this.I&&(wt==4?mc$1(this.l,this):(this.i=!1,N$3(this)))}else a==400&&0<ht.indexOf("Unknown SID")?(this.o=3,I$2(12)):(this.o=0,I$2(13)),P$3(this),Q$3(this)}}}catch{}finally{}};function jc$1(o){return o.g?o.u=="GET"&&o.K!=2&&o.l.Da:!1}function lc$1(o,s,a){let et=!0,at;for(;!o.I&&o.C<a.length;)if(at=nc$1(o,a),at==bc){s==4&&(o.o=4,I$2(14),et=!1),E$2(o.j,o.m,null,"[Incomplete Response]");break}else if(at==ac$1){o.o=4,I$2(15),E$2(o.j,o.m,a,"[Invalid Chunk]"),et=!1;break}else E$2(o.j,o.m,at,null),kc$1(o,at);jc$1(o)&&at!=bc&&at!=ac$1&&(o.h.g="",o.C=0),s!=4||a.length!=0||o.h.h||(o.o=1,I$2(16),et=!1),o.i=o.i&&et,et?0<a.length&&!o.$&&(o.$=!0,s=o.l,s.g==o&&s.$&&!s.K&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),oc$1(s),s.K=!0,I$2(11))):(E$2(o.j,o.m,a,"[Invalid Chunked Response]"),P$3(o),Q$3(o))}k$5.hb=function(){if(this.g){var o=O$2(this.g),s=this.g.fa();this.C<s.length&&(ic$1(this),lc$1(this,o,s),this.i&&o!=4&&N$3(this))}};function nc$1(o,s){var a=o.C,et=s.indexOf(`
`,a);return et==-1?bc:(a=Number(s.substring(a,et)),isNaN(a)?ac$1:(et+=1,et+a>s.length?bc:(s=s.substr(et,a),o.C=et+a,s)))}k$5.cancel=function(){this.I=!0,P$3(this)};function N$3(o){o.V=Date.now()+o.O,pc$1(o,o.O)}function pc$1(o,s){if(o.B!=null)throw Error("WatchDog timer not null");o.B=J$1(q$5(o.gb,o),s)}function ic$1(o){o.B&&(l$2.clearTimeout(o.B),o.B=null)}k$5.gb=function(){this.B=null;const o=Date.now();0<=o-this.V?(Kb(this.j,this.A),this.K!=2&&(H$3(),I$2(17)),P$3(this),this.o=2,Q$3(this)):pc$1(this,this.V-o)};function Q$3(o){o.l.G==0||o.I||mc$1(o.l,o)}function P$3(o){ic$1(o);var s=o.L;s&&typeof s.na=="function"&&s.na(),o.L=null,zb(o.T),Fb(o.S),o.g&&(s=o.g,o.g=null,s.abort(),s.na())}function kc$1(o,s){try{var a=o.l;if(a.G!=0&&(a.g==o||qc$1(a.h,o))){if(!o.J&&qc$1(a.h,o)&&a.G==3){try{var et=a.Fa.g.parse(s)}catch{et=null}if(Array.isArray(et)&&et.length==3){var at=et;if(at[0]==0){e:if(!a.u){if(a.g)if(a.g.F+3e3<o.F)rc$1(a),sc$1(a);else break e;tc$1(a),I$2(18)}}else a.Ba=at[1],0<a.Ba-a.T&&37500>at[2]&&a.L&&a.A==0&&!a.v&&(a.v=J$1(q$5(a.cb,a),6e3));if(1>=uc$1(a.h)&&a.ja){try{a.ja()}catch{}a.ja=void 0}}else R$1(a,11)}else if((o.J||a.g==o)&&rc$1(a),!pa(s))for(at=a.Fa.g.parse(s),s=0;s<at.length;s++){let vt=at[s];if(a.T=vt[0],vt=vt[1],a.G==2)if(vt[0]=="c"){a.I=vt[1],a.ka=vt[2];const wt=vt[3];wt!=null&&(a.ma=wt,a.j.info("VER="+a.ma));const Ct=vt[4];Ct!=null&&(a.Ca=Ct,a.j.info("SVER="+a.Ca));const xt=vt[5];xt!=null&&typeof xt=="number"&&0<xt&&(et=1.5*xt,a.J=et,a.j.info("backChannelRequestTimeoutMs_="+et)),et=a;const Pt=o.g;if(Pt){const Rt=Pt.g?Pt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rt){var lt=et.h;lt.g||Rt.indexOf("spdy")==-1&&Rt.indexOf("quic")==-1&&Rt.indexOf("h2")==-1||(lt.j=lt.l,lt.g=new Set,lt.h&&(vc(lt,lt.h),lt.h=null))}if(et.D){const _t=Pt.g?Pt.g.getResponseHeader("X-HTTP-Session-Id"):null;_t&&(et.za=_t,S$3(et.F,et.D,_t))}}a.G=3,a.l&&a.l.xa(),a.$&&(a.P=Date.now()-o.F,a.j.info("Handshake RTT: "+a.P+"ms")),et=a;var ht=o;if(et.sa=wc$1(et,et.H?et.ka:null,et.V),ht.J){xc$1(et.h,ht);var dt=ht,ft=et.J;ft&&dt.setTimeout(ft),dt.B&&(ic$1(dt),N$3(dt)),et.g=ht}else yc$1(et);0<a.i.length&&zc$1(a)}else vt[0]!="stop"&&vt[0]!="close"||R$1(a,7);else a.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?R$1(a,7):Ac$1(a):vt[0]!="noop"&&a.l&&a.l.wa(vt),a.A=0)}}H$3(4)}catch{}}function Bc$1(o){if(o.W&&typeof o.W=="function")return o.W();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(ba$1(o)){for(var s=[],a=o.length,et=0;et<a;et++)s.push(o[et]);return s}s=[],a=0;for(et in o)s[a++]=o[et];return s}function Cc$1(o){if(o.oa&&typeof o.oa=="function")return o.oa();if(!o.W||typeof o.W!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(ba$1(o)||typeof o=="string"){var s=[];o=o.length;for(var a=0;a<o;a++)s.push(a);return s}s=[],a=0;for(const et in o)s[a++]=et;return s}}}function Dc$1(o,s){if(o.forEach&&typeof o.forEach=="function")o.forEach(s,void 0);else if(ba$1(o)||typeof o=="string")Array.prototype.forEach.call(o,s,void 0);else for(var a=Cc$1(o),et=Bc$1(o),at=et.length,lt=0;lt<at;lt++)s.call(void 0,et[lt],a&&a[lt],o)}var Ec$1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fc$1(o,s){if(o){o=o.split("&");for(var a=0;a<o.length;a++){var et=o[a].indexOf("="),at=null;if(0<=et){var lt=o[a].substring(0,et);at=o[a].substring(et+1)}else lt=o[a];s(lt,at?decodeURIComponent(at.replace(/\+/g," ")):"")}}}function T$2(o,s){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,o instanceof T$2){this.h=s!==void 0?s:o.h,Gc$1(this,o.j),this.s=o.s,this.g=o.g,Hc$1(this,o.m),this.l=o.l,s=o.i;var a=new Ic$1;a.i=s.i,s.g&&(a.g=new Map(s.g),a.h=s.h),Jc$1(this,a),this.o=o.o}else o&&(a=String(o).match(Ec$1))?(this.h=!!s,Gc$1(this,a[1]||"",!0),this.s=Kc(a[2]||""),this.g=Kc(a[3]||"",!0),Hc$1(this,a[4]),this.l=Kc(a[5]||"",!0),Jc$1(this,a[6]||"",!0),this.o=Kc(a[7]||"")):(this.h=!!s,this.i=new Ic$1(null,this.h))}T$2.prototype.toString=function(){var o=[],s=this.j;s&&o.push(Lc$1(s,Mc$1,!0),":");var a=this.g;return(a||s=="file")&&(o.push("//"),(s=this.s)&&o.push(Lc$1(s,Mc$1,!0),"@"),o.push(encodeURIComponent(String(a)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a=this.m,a!=null&&o.push(":",String(a))),(a=this.l)&&(this.g&&a.charAt(0)!="/"&&o.push("/"),o.push(Lc$1(a,a.charAt(0)=="/"?Nc$1:Oc$1,!0))),(a=this.i.toString())&&o.push("?",a),(a=this.o)&&o.push("#",Lc$1(a,Pc)),o.join("")};function M$2(o){return new T$2(o)}function Gc$1(o,s,a){o.j=a?Kc(s,!0):s,o.j&&(o.j=o.j.replace(/:$/,""))}function Hc$1(o,s){if(s){if(s=Number(s),isNaN(s)||0>s)throw Error("Bad port number "+s);o.m=s}else o.m=null}function Jc$1(o,s,a){s instanceof Ic$1?(o.i=s,Qc$1(o.i,o.h)):(a||(s=Lc$1(s,Rc)),o.i=new Ic$1(s,o.h))}function S$3(o,s,a){o.i.set(s,a)}function dc$1(o){return S$3(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Kc(o,s){return o?s?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Lc$1(o,s,a){return typeof o=="string"?(o=encodeURI(o).replace(s,Sc$1),a&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Sc$1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Mc$1=/[#\/\?@]/g,Oc$1=/[#\?:]/g,Nc$1=/[#\?]/g,Rc=/[#\?@]/g,Pc=/#/g;function Ic$1(o,s){this.h=this.g=null,this.i=o||null,this.j=!!s}function U$2(o){o.g||(o.g=new Map,o.h=0,o.i&&Fc$1(o.i,function(s,a){o.add(decodeURIComponent(s.replace(/\+/g," ")),a)}))}k$5=Ic$1.prototype;k$5.add=function(o,s){U$2(this),this.i=null,o=V$2(this,o);var a=this.g.get(o);return a||this.g.set(o,a=[]),a.push(s),this.h+=1,this};function Tc$1(o,s){U$2(o),s=V$2(o,s),o.g.has(s)&&(o.i=null,o.h-=o.g.get(s).length,o.g.delete(s))}function Uc$1(o,s){return U$2(o),s=V$2(o,s),o.g.has(s)}k$5.forEach=function(o,s){U$2(this),this.g.forEach(function(a,et){a.forEach(function(at){o.call(s,at,et,this)},this)},this)};k$5.oa=function(){U$2(this);const o=Array.from(this.g.values()),s=Array.from(this.g.keys()),a=[];for(let et=0;et<s.length;et++){const at=o[et];for(let lt=0;lt<at.length;lt++)a.push(s[et])}return a};k$5.W=function(o){U$2(this);let s=[];if(typeof o=="string")Uc$1(this,o)&&(s=s.concat(this.g.get(V$2(this,o))));else{o=Array.from(this.g.values());for(let a=0;a<o.length;a++)s=s.concat(o[a])}return s};k$5.set=function(o,s){return U$2(this),this.i=null,o=V$2(this,o),Uc$1(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[s]),this.h+=1,this};k$5.get=function(o,s){return o?(o=this.W(o),0<o.length?String(o[0]):s):s};function fc$1(o,s,a){Tc$1(o,s),0<a.length&&(o.i=null,o.g.set(V$2(o,s),ma(a)),o.h+=a.length)}k$5.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],s=Array.from(this.g.keys());for(var a=0;a<s.length;a++){var et=s[a];const lt=encodeURIComponent(String(et)),ht=this.W(et);for(et=0;et<ht.length;et++){var at=lt;ht[et]!==""&&(at+="="+encodeURIComponent(String(ht[et]))),o.push(at)}}return this.i=o.join("&")};function V$2(o,s){return s=String(s),o.j&&(s=s.toLowerCase()),s}function Qc$1(o,s){s&&!o.j&&(U$2(o),o.i=null,o.g.forEach(function(a,et){var at=et.toLowerCase();et!=at&&(Tc$1(this,et),fc$1(this,at,a))},o)),o.j=s}var Vc$1=class{constructor(s,a){this.h=s,this.g=a}};function Wc$1(o){this.l=o||Xc$1,l$2.PerformanceNavigationTiming?(o=l$2.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l$2.g&&l$2.g.Ga&&l$2.g.Ga()&&l$2.g.Ga().$b),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Xc$1=10;function Yc$1(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function uc$1(o){return o.h?1:o.g?o.g.size:0}function qc$1(o,s){return o.h?o.h==s:o.g?o.g.has(s):!1}function vc(o,s){o.g?o.g.add(s):o.h=s}function xc$1(o,s){o.h&&o.h==s?o.h=null:o.g&&o.g.has(s)&&o.g.delete(s)}Wc$1.prototype.cancel=function(){if(this.i=Zc$1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Zc$1(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let s=o.i;for(const a of o.g.values())s=s.concat(a.D);return s}return ma(o.i)}function $c$1(){}$c$1.prototype.stringify=function(o){return l$2.JSON.stringify(o,void 0)};$c$1.prototype.parse=function(o){return l$2.JSON.parse(o,void 0)};function ad(){this.g=new $c$1}function bd(o,s,a){const et=a||"";try{Dc$1(o,function(at,lt){let ht=at;p$3(at)&&(ht=lb(at)),s.push(et+lt+"="+encodeURIComponent(ht))})}catch(at){throw s.push(et+"type="+encodeURIComponent("_badmap")),at}}function cd(o,s){const a=new Gb;if(l$2.Image){const et=new Image;et.onload=ia(dd,a,et,"TestLoadImage: loaded",!0,s),et.onerror=ia(dd,a,et,"TestLoadImage: error",!1,s),et.onabort=ia(dd,a,et,"TestLoadImage: abort",!1,s),et.ontimeout=ia(dd,a,et,"TestLoadImage: timeout",!1,s),l$2.setTimeout(function(){et.ontimeout&&et.ontimeout()},1e4),et.src=o}else s(!1)}function dd(o,s,a,et,at){try{s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null,at(et)}catch{}}function ed(o){this.l=o.ac||null,this.j=o.jb||!1}t$2(ed,Sb);ed.prototype.g=function(){return new fd(this.l,this.j)};ed.prototype.i=function(o){return function(){return o}}({});function fd(o,s){B$3.call(this),this.D=o,this.u=s,this.m=void 0,this.readyState=gd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}t$2(fd,B$3);var gd=0;k$5=fd.prototype;k$5.open=function(o,s){if(this.readyState!=gd)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=s,this.readyState=1,hd(this)};k$5.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const s={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(s.body=o),(this.D||l$2).fetch(new Request(this.B,s)).then(this.Wa.bind(this),this.ga.bind(this))};k$5.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,id(this)),this.readyState=gd};k$5.Wa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,hd(this)),this.g&&(this.readyState=3,hd(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof l$2.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jd(this)}else o.text().then(this.Va.bind(this),this.ga.bind(this))};function jd(o){o.j.read().then(o.Ta.bind(o)).catch(o.ga.bind(o))}k$5.Ta=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var s=o.value?o.value:new Uint8Array(0);(s=this.A.decode(s,{stream:!o.done}))&&(this.response=this.responseText+=s)}o.done?id(this):hd(this),this.readyState==3&&jd(this)}};k$5.Va=function(o){this.g&&(this.response=this.responseText=o,id(this))};k$5.Ua=function(o){this.g&&(this.response=o,id(this))};k$5.ga=function(){this.g&&id(this)};function id(o){o.readyState=4,o.l=null,o.j=null,o.A=null,hd(o)}k$5.setRequestHeader=function(o,s){this.v.append(o,s)};k$5.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""};k$5.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],s=this.h.entries();for(var a=s.next();!a.done;)a=a.value,o.push(a[0]+": "+a[1]),a=s.next();return o.join(`\r
`)};function hd(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(fd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});var kd=l$2.JSON.parse;function W$2(o){B$3.call(this),this.headers=new Map,this.u=o||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ld,this.K=this.L=!1}t$2(W$2,B$3);var ld="",md=/^https?$/i,nd=["POST","PUT"];k$5=W$2.prototype;k$5.Ka=function(o){this.L=o};k$5.da=function(o,s,a,et){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+o);s=s?s.toUpperCase():"GET",this.H=o,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Xb.g(),this.C=this.u?Tb(this.u):Tb(Xb),this.g.onreadystatechange=q$5(this.Ha,this);try{this.F=!0,this.g.open(s,String(o),!0),this.F=!1}catch(lt){od(this,lt);return}if(o=a||"",a=new Map(this.headers),et)if(Object.getPrototypeOf(et)===Object.prototype)for(var at in et)a.set(at,et[at]);else if(typeof et.keys=="function"&&typeof et.get=="function")for(const lt of et.keys())a.set(lt,et.get(lt));else throw Error("Unknown input type for opt_headers: "+String(et));et=Array.from(a.keys()).find(lt=>lt.toLowerCase()=="content-type"),at=l$2.FormData&&o instanceof l$2.FormData,!(0<=la(nd,s))||et||at||a.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[lt,ht]of a)this.g.setRequestHeader(lt,ht);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{pd(this),0<this.B&&((this.K=qd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q$5(this.qa,this)):this.A=Ab(this.qa,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(lt){od(this,lt)}};function qd(o){return y$2&&Ia()&&typeof o.timeout=="number"&&o.ontimeout!==void 0}k$5.qa=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C$2(this,"timeout"),this.abort(8))};function od(o,s){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=s,o.m=5,rd(o),sd(o)}function rd(o){o.D||(o.D=!0,C$2(o,"complete"),C$2(o,"error"))}k$5.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,C$2(this,"complete"),C$2(this,"abort"),sd(this))};k$5.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),sd(this,!0)),W$2.X.M.call(this)};k$5.Ha=function(){this.s||(this.F||this.v||this.l?td(this):this.fb())};k$5.fb=function(){td(this)};function td(o){if(o.h&&typeof goog<"u"&&(!o.C[1]||O$2(o)!=4||o.aa()!=2)){if(o.v&&O$2(o)==4)Ab(o.Ha,0,o);else if(C$2(o,"readystatechange"),O$2(o)==4){o.h=!1;try{const dt=o.aa();e:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break e;default:s=!1}var a;if(!(a=s)){var et;if(et=dt===0){var at=String(o.H).match(Ec$1)[1]||null;if(!at&&l$2.self&&l$2.self.location){var lt=l$2.self.location.protocol;at=lt.substr(0,lt.length-1)}et=!md.test(at?at.toLowerCase():"")}a=et}if(a)C$2(o,"complete"),C$2(o,"success");else{o.m=6;try{var ht=2<O$2(o)?o.g.statusText:""}catch{ht=""}o.j=ht+" ["+o.aa()+"]",rd(o)}}finally{sd(o)}}}}function sd(o,s){if(o.g){pd(o);const a=o.g,et=o.C[0]?aa$1:null;o.g=null,o.C=null,s||C$2(o,"ready");try{a.onreadystatechange=et}catch{}}}function pd(o){o.g&&o.K&&(o.g.ontimeout=null),o.A&&(l$2.clearTimeout(o.A),o.A=null)}function O$2(o){return o.g?o.g.readyState:0}k$5.aa=function(){try{return 2<O$2(this)?this.g.status:-1}catch{return-1}};k$5.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};k$5.Sa=function(o){if(this.g){var s=this.g.responseText;return o&&s.indexOf(o)==0&&(s=s.substring(o.length)),kd(s)}};function hc$1(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.J){case ld:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}k$5.Ea=function(){return this.m};k$5.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ud(o){let s="";return Qa$1(o,function(a,et){s+=et,s+=":",s+=a,s+=`\r
`}),s}function vd(o,s,a){e:{for(et in a){var et=!1;break e}et=!0}et||(a=ud(a),typeof o=="string"?a!=null&&encodeURIComponent(String(a)):S$3(o,s,a))}function wd(o,s,a){return a&&a.internalChannelParams&&a.internalChannelParams[o]||s}function xd(o){this.Ca=0,this.i=[],this.j=new Gb,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=wd("failFast",!1,o),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=wd("baseRetryDelayMs",5e3,o),this.bb=wd("retryDelaySeedMs",1e4,o),this.$a=wd("forwardChannelMaxRetries",2,o),this.ta=wd("forwardChannelRequestTimeoutMs",2e4,o),this.ra=o&&o.xmlHttpFactory||void 0,this.Da=o&&o.Zb||!1,this.J=void 0,this.H=o&&o.supportsCrossDomainXhr||!1,this.I="",this.h=new Wc$1(o&&o.concurrentRequestLimit),this.Fa=new ad,this.O=o&&o.fastHandshake||!1,this.N=o&&o.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=o&&o.Xb||!1,o&&o.Aa&&this.j.Aa(),o&&o.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&o&&o.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}k$5=xd.prototype;k$5.ma=8;k$5.G=1;function Ac$1(o){if(yd(o),o.G==3){var s=o.U++,a=M$2(o.F);S$3(a,"SID",o.I),S$3(a,"RID",s),S$3(a,"TYPE","terminate"),zd(o,a),s=new L$3(o,o.j,s,void 0),s.K=2,s.v=dc$1(M$2(a)),a=!1,l$2.navigator&&l$2.navigator.sendBeacon&&(a=l$2.navigator.sendBeacon(s.v.toString(),"")),!a&&l$2.Image&&(new Image().src=s.v,a=!0),a||(s.g=gc$1(s.l,null),s.g.da(s.v)),s.F=Date.now(),N$3(s)}Ad(o)}function sc$1(o){o.g&&(oc$1(o),o.g.cancel(),o.g=null)}function yd(o){sc$1(o),o.u&&(l$2.clearTimeout(o.u),o.u=null),rc$1(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&l$2.clearTimeout(o.m),o.m=null)}function zc$1(o){Yc$1(o.h)||o.m||(o.m=!0,sb(o.Ja,o),o.C=0)}function Bd(o,s){return uc$1(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=s.D.concat(o.i),!0):o.G==1||o.G==2||o.C>=(o.Za?0:o.$a)?!1:(o.m=J$1(q$5(o.Ja,o,s),Cd(o,o.C)),o.C++,!0)}k$5.Ja=function(o){if(this.m)if(this.m=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const at=new L$3(this,this.j,o,void 0);let lt=this.s;if(this.S&&(lt?(lt=Ra$1(lt),Ta$1(lt,this.S)):lt=this.S),this.o!==null||this.N||(at.H=lt,lt=null),this.O)e:{for(var s=0,a=0;a<this.i.length;a++){t:{var et=this.i[a];if("__data__"in et.g&&(et=et.g.__data__,typeof et=="string")){et=et.length;break t}et=void 0}if(et===void 0)break;if(s+=et,4096<s){s=a;break e}if(s===4096||a===this.i.length-1){s=a+1;break e}}s=1e3}else s=1e3;s=Dd(this,at,s),a=M$2(this.F),S$3(a,"RID",o),S$3(a,"CVER",22),this.D&&S$3(a,"X-HTTP-Session-Id",this.D),zd(this,a),lt&&(this.N?s="headers="+encodeURIComponent(String(ud(lt)))+"&"+s:this.o&&vd(a,this.o,lt)),vc(this.h,at),this.Ya&&S$3(a,"TYPE","init"),this.O?(S$3(a,"$req",s),S$3(a,"SID","null"),at.Z=!0,cc$1(at,a,null)):cc$1(at,a,s),this.G=2}}else this.G==3&&(o?Ed(this,o):this.i.length==0||Yc$1(this.h)||Ed(this))};function Ed(o,s){var a;s?a=s.m:a=o.U++;const et=M$2(o.F);S$3(et,"SID",o.I),S$3(et,"RID",a),S$3(et,"AID",o.T),zd(o,et),o.o&&o.s&&vd(et,o.o,o.s),a=new L$3(o,o.j,a,o.C+1),o.o===null&&(a.H=o.s),s&&(o.i=s.D.concat(o.i)),s=Dd(o,a,1e3),a.setTimeout(Math.round(.5*o.ta)+Math.round(.5*o.ta*Math.random())),vc(o.h,a),cc$1(a,et,s)}function zd(o,s){o.ia&&Qa$1(o.ia,function(a,et){S$3(s,et,a)}),o.l&&Dc$1({},function(a,et){S$3(s,et,a)})}function Dd(o,s,a){a=Math.min(o.i.length,a);var et=o.l?q$5(o.l.Ra,o.l,o):null;e:{var at=o.i;let lt=-1;for(;;){const ht=["count="+a];lt==-1?0<a?(lt=at[0].h,ht.push("ofs="+lt)):lt=0:ht.push("ofs="+lt);let dt=!0;for(let ft=0;ft<a;ft++){let vt=at[ft].h;const wt=at[ft].g;if(vt-=lt,0>vt)lt=Math.max(0,at[ft].h-100),dt=!1;else try{bd(wt,ht,"req"+vt+"_")}catch{et&&et(wt)}}if(dt){et=ht.join("&");break e}}}return o=o.i.splice(0,a),s.D=o,et}function yc$1(o){o.g||o.u||(o.Z=1,sb(o.Ia,o),o.A=0)}function tc$1(o){return o.g||o.u||3<=o.A?!1:(o.Z++,o.u=J$1(q$5(o.Ia,o),Cd(o,o.A)),o.A++,!0)}k$5.Ia=function(){if(this.u=null,Fd(this),this.$&&!(this.K||this.g==null||0>=this.P)){var o=2*this.P;this.j.info("BP detection timer enabled: "+o),this.B=J$1(q$5(this.eb,this),o)}};k$5.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,I$2(10),sc$1(this),Fd(this))};function oc$1(o){o.B!=null&&(l$2.clearTimeout(o.B),o.B=null)}function Fd(o){o.g=new L$3(o,o.j,"rpc",o.Z),o.o===null&&(o.g.H=o.s),o.g.N=0;var s=M$2(o.sa);S$3(s,"RID","rpc"),S$3(s,"SID",o.I),S$3(s,"CI",o.L?"0":"1"),S$3(s,"AID",o.T),S$3(s,"TYPE","xmlhttp"),zd(o,s),o.o&&o.s&&vd(s,o.o,o.s),o.J&&o.g.setTimeout(o.J);var a=o.g;o=o.ka,a.K=1,a.v=dc$1(M$2(s)),a.s=null,a.P=!0,ec$1(a,o)}k$5.cb=function(){this.v!=null&&(this.v=null,sc$1(this),tc$1(this),I$2(19))};function rc$1(o){o.v!=null&&(l$2.clearTimeout(o.v),o.v=null)}function mc$1(o,s){var a=null;if(o.g==s){rc$1(o),oc$1(o),o.g=null;var et=2}else if(qc$1(o.h,s))a=s.D,xc$1(o.h,s),et=1;else return;if(o.G!=0){if(o.pa=s.Y,s.i)if(et==1){a=s.s?s.s.length:0,s=Date.now()-s.F;var at=o.C;et=Mb(),C$2(et,new Pb(et,a)),zc$1(o)}else yc$1(o);else if(at=s.o,at==3||at==0&&0<o.pa||!(et==1&&Bd(o,s)||et==2&&tc$1(o)))switch(a&&0<a.length&&(s=o.h,s.i=s.i.concat(a)),at){case 1:R$1(o,5);break;case 4:R$1(o,10);break;case 3:R$1(o,6);break;default:R$1(o,2)}}}function Cd(o,s){let a=o.Xa+Math.floor(Math.random()*o.bb);return o.l||(a*=2),a*s}function R$1(o,s){if(o.j.info("Error code "+s),s==2){var a=null;o.l&&(a=null);var et=q$5(o.kb,o);a||(a=new T$2("//www.google.com/images/cleardot.gif"),l$2.location&&l$2.location.protocol=="http"||Gc$1(a,"https"),dc$1(a)),cd(a.toString(),et)}else I$2(2);o.G=0,o.l&&o.l.va(s),Ad(o),yd(o)}k$5.kb=function(o){o?(this.j.info("Successfully pinged google.com"),I$2(2)):(this.j.info("Failed to ping google.com"),I$2(1))};function Ad(o){if(o.G=0,o.la=[],o.l){const s=Zc$1(o.h);(s.length!=0||o.i.length!=0)&&(na(o.la,s),na(o.la,o.i),o.h.i.length=0,ma(o.i),o.i.length=0),o.l.ua()}}function wc$1(o,s,a){var et=a instanceof T$2?M$2(a):new T$2(a,void 0);if(et.g!="")s&&(et.g=s+"."+et.g),Hc$1(et,et.m);else{var at=l$2.location;et=at.protocol,s=s?s+"."+at.hostname:at.hostname,at=+at.port;var lt=new T$2(null,void 0);et&&Gc$1(lt,et),s&&(lt.g=s),at&&Hc$1(lt,at),a&&(lt.l=a),et=lt}return a=o.D,s=o.za,a&&s&&S$3(et,a,s),S$3(et,"VER",o.ma),zd(o,et),et}function gc$1(o,s,a){if(s&&!o.H)throw Error("Can't create secondary domain capable XhrIo object.");return s=a&&o.Da&&!o.ra?new W$2(new ed({jb:!0})):new W$2(o.ra),s.Ka(o.H),s}function Gd(){}k$5=Gd.prototype;k$5.xa=function(){};k$5.wa=function(){};k$5.va=function(){};k$5.ua=function(){};k$5.Ra=function(){};function Hd(){if(y$2&&!(10<=Number(La)))throw Error("Environmental error: no available transport.")}Hd.prototype.g=function(o,s){return new X$2(o,s)};function X$2(o,s){B$3.call(this),this.g=new xd(s),this.l=o,this.h=s&&s.messageUrlParams||null,o=s&&s.messageHeaders||null,s&&s.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=s&&s.initMessageHeaders||null,s&&s.messageContentType&&(o?o["X-WebChannel-Content-Type"]=s.messageContentType:o={"X-WebChannel-Content-Type":s.messageContentType}),s&&s.ya&&(o?o["X-WebChannel-Client-Profile"]=s.ya:o={"X-WebChannel-Client-Profile":s.ya}),this.g.S=o,(o=s&&s.Yb)&&!pa(o)&&(this.g.o=o),this.A=s&&s.supportsCrossDomainXhr||!1,this.v=s&&s.sendRawJson||!1,(s=s&&s.httpSessionIdParam)&&!pa(s)&&(this.g.D=s,o=this.h,o!==null&&s in o&&(o=this.h,s in o&&delete o[s])),this.j=new Y$2(this)}t$2(X$2,B$3);X$2.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var o=this.g,s=this.l,a=this.h||void 0;I$2(0),o.V=s,o.ia=a||{},o.L=o.Y,o.F=wc$1(o,null,o.V),zc$1(o)};X$2.prototype.close=function(){Ac$1(this.g)};X$2.prototype.u=function(o){var s=this.g;if(typeof o=="string"){var a={};a.__data__=o,o=a}else this.v&&(a={},a.__data__=lb(o),o=a);s.i.push(new Vc$1(s.ab++,o)),s.G==3&&zc$1(s)};X$2.prototype.M=function(){this.g.l=null,delete this.j,Ac$1(this.g),delete this.g,X$2.X.M.call(this)};function Id(o){Vb.call(this);var s=o.__sm__;if(s){e:{for(const a in s){o=a;break e}o=void 0}(this.i=o)&&(o=this.i,s=s!==null&&o in s?s[o]:void 0),this.data=s}else this.data=o}t$2(Id,Vb);function Jd(){Wb.call(this),this.status=1}t$2(Jd,Wb);function Y$2(o){this.g=o}t$2(Y$2,Gd);Y$2.prototype.xa=function(){C$2(this.g,"a")};Y$2.prototype.wa=function(o){C$2(this.g,new Id(o))};Y$2.prototype.va=function(o){C$2(this.g,new Jd)};Y$2.prototype.ua=function(){C$2(this.g,"b")};Hd.prototype.createWebChannel=Hd.prototype.g;X$2.prototype.send=X$2.prototype.u;X$2.prototype.open=X$2.prototype.m;X$2.prototype.close=X$2.prototype.close;Qb.NO_ERROR=0;Qb.TIMEOUT=8;Qb.HTTP_ERROR=6;Rb.COMPLETE="complete";Ub.EventType=K$2;K$2.OPEN="a";K$2.CLOSE="b";K$2.ERROR="c";K$2.MESSAGE="d";B$3.prototype.listen=B$3.prototype.N;W$2.prototype.listenOnce=W$2.prototype.O;W$2.prototype.getLastError=W$2.prototype.Oa;W$2.prototype.getLastErrorCode=W$2.prototype.Ea;W$2.prototype.getStatus=W$2.prototype.aa;W$2.prototype.getResponseJson=W$2.prototype.Sa;W$2.prototype.getResponseText=W$2.prototype.fa;W$2.prototype.send=W$2.prototype.da;W$2.prototype.setWithCredentials=W$2.prototype.Ka;var createWebChannelTransport=function(){return new Hd},getStatEventTarget=function(){return Mb()},ErrorCode$1=Qb,EventType=Rb,Event$1=G$2,Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},FetchXmlHttpFactory=ed,WebChannel=Ub,XhrIo=W$2;const v$4="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b$4=class{constructor(s){this.uid=s}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(s){return s.uid===this.uid}};b$4.UNAUTHENTICATED=new b$4(null),b$4.GOOGLE_CREDENTIALS=new b$4("google-credentials-uid"),b$4.FIRST_PARTY=new b$4("first-party-uid"),b$4.MOCK_USER=new b$4("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let P$2="9.19.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$1=new Logger("@firebase/firestore");function S$2(){return V$1.logLevel}function C$1(o,...s){if(V$1.logLevel<=LogLevel.DEBUG){const a=s.map(k$4);V$1.debug(`Firestore (${P$2}): ${o}`,...a)}}function x$2(o,...s){if(V$1.logLevel<=LogLevel.ERROR){const a=s.map(k$4);V$1.error(`Firestore (${P$2}): ${o}`,...a)}}function N$2(o,...s){if(V$1.logLevel<=LogLevel.WARN){const a=s.map(k$4);V$1.warn(`Firestore (${P$2}): ${o}`,...a)}}function k$4(o){if(typeof o=="string")return o;try{return s=o,JSON.stringify(s)}catch{return o}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O$1(o="Unexpected state"){const s=`FIRESTORE (${P$2}) INTERNAL ASSERTION FAILED: `+o;throw x$2(s),new Error(s)}function $$1(o,s){o||O$1()}function F$2(o,s){return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let L$2=class extends FirebaseError{constructor(s,a){super(s,a),this.code=s,this.message=a,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q$4=class{constructor(){this.promise=new Promise((s,a)=>{this.resolve=s,this.reject=a})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U$1=class{constructor(s,a){this.user=a,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${s}`)}},K$1=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(s,a){s.enqueueRetryable(()=>a(b$4.UNAUTHENTICATED))}shutdown(){}},G$1=class{constructor(s){this.token=s,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(s,a){this.changeListener=a,s.enqueueRetryable(()=>a(this.token.user))}shutdown(){this.changeListener=null}},Q$2=class{constructor(s){this.t=s,this.currentUser=b$4.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(s,a){let et=this.i;const at=ft=>this.i!==et?(et=this.i,a(ft)):Promise.resolve();let lt=new q$4;this.o=()=>{this.i++,this.currentUser=this.u(),lt.resolve(),lt=new q$4,s.enqueueRetryable(()=>at(this.currentUser))};const ht=()=>{const ft=lt;s.enqueueRetryable(async()=>{await ft.promise,await at(this.currentUser)})},dt=ft=>{C$1("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ft,this.auth.addAuthTokenListener(this.o),ht()};this.t.onInit(ft=>dt(ft)),setTimeout(()=>{if(!this.auth){const ft=this.t.getImmediate({optional:!0});ft?dt(ft):(C$1("FirebaseAuthCredentialsProvider","Auth not yet detected"),lt.resolve(),lt=new q$4)}},0),ht()}getToken(){const s=this.i,a=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(a).then(et=>this.i!==s?(C$1("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):et?($$1(typeof et.accessToken=="string"),new U$1(et.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const s=this.auth&&this.auth.getUid();return $$1(s===null||typeof s=="string"),new b$4(s)}},z$3=class{constructor(s,a,et){this.h=s,this.l=a,this.m=et,this.type="FirstParty",this.user=b$4.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const s=this.p();return s&&this.g.set("Authorization",s),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}},j$1=class{constructor(s,a,et){this.h=s,this.l=a,this.m=et}getToken(){return Promise.resolve(new z$3(this.h,this.l,this.m))}start(s,a){s.enqueueRetryable(()=>a(b$4.FIRST_PARTY))}shutdown(){}invalidateToken(){}},W$1=class{constructor(s){this.value=s,this.type="AppCheck",this.headers=new Map,s&&s.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},H$2=class{constructor(s){this.I=s,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(s,a){const et=lt=>{lt.error!=null&&C$1("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${lt.error.message}`);const ht=lt.token!==this.T;return this.T=lt.token,C$1("FirebaseAppCheckTokenProvider",`Received ${ht?"new":"existing"} token.`),ht?a(lt.token):Promise.resolve()};this.o=lt=>{s.enqueueRetryable(()=>et(lt))};const at=lt=>{C$1("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=lt,this.appCheck.addTokenListener(this.o)};this.I.onInit(lt=>at(lt)),setTimeout(()=>{if(!this.appCheck){const lt=this.I.getImmediate({optional:!0});lt?at(lt):C$1("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const s=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(s).then(a=>a?($$1(typeof a.token=="string"),this.T=a.token,new W$1(a.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$1(o){const s=typeof self<"u"&&(self.crypto||self.msCrypto),a=new Uint8Array(o);if(s&&typeof s.getRandomValues=="function")s.getRandomValues(a);else for(let et=0;et<o;et++)a[et]=Math.floor(256*Math.random());return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Z$1=class{static A(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=Math.floor(256/s.length)*s.length;let et="";for(;et.length<20;){const at=Y$1(40);for(let lt=0;lt<at.length;++lt)et.length<20&&at[lt]<a&&(et+=s.charAt(at[lt]%s.length))}return et}};function X$1(o,s){return o<s?-1:o>s?1:0}function tt(o,s,a){return o.length===s.length&&o.every((et,at)=>a(et,s[at]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(s,a){if(this.seconds=s,this.nanoseconds=a,a<0)throw new L$2(B$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(a>=1e9)throw new L$2(B$2.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+a);if(s<-62135596800)throw new L$2(B$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s);if(s>=253402300800)throw new L$2(B$2.INVALID_ARGUMENT,"Timestamp seconds out of range: "+s)}static now(){return nt.fromMillis(Date.now())}static fromDate(s){return nt.fromMillis(s.getTime())}static fromMillis(s){const a=Math.floor(s/1e3),et=Math.floor(1e6*(s-1e3*a));return new nt(a,et)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(s){return this.seconds===s.seconds?X$1(this.nanoseconds,s.nanoseconds):X$1(this.seconds,s.seconds)}isEqual(s){return s.seconds===this.seconds&&s.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const s=this.seconds- -62135596800;return String(s).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(s){this.timestamp=s}static fromTimestamp(s){return new st(s)}static min(){return new st(new nt(0,0))}static max(){return new st(new nt(253402300799,999999999))}compareTo(s){return this.timestamp._compareTo(s.timestamp)}isEqual(s){return this.timestamp.isEqual(s.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(s,a,et){a===void 0?a=0:a>s.length&&O$1(),et===void 0?et=s.length-a:et>s.length-a&&O$1(),this.segments=s,this.offset=a,this.len=et}get length(){return this.len}isEqual(s){return it.comparator(this,s)===0}child(s){const a=this.segments.slice(this.offset,this.limit());return s instanceof it?s.forEach(et=>{a.push(et)}):a.push(s),this.construct(a)}limit(){return this.offset+this.length}popFirst(s){return s=s===void 0?1:s,this.construct(this.segments,this.offset+s,this.length-s)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(s){return this.segments[this.offset+s]}isEmpty(){return this.length===0}isPrefixOf(s){if(s.length<this.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==s.get(a))return!1;return!0}isImmediateParentOf(s){if(this.length+1!==s.length)return!1;for(let a=0;a<this.length;a++)if(this.get(a)!==s.get(a))return!1;return!0}forEach(s){for(let a=this.offset,et=this.limit();a<et;a++)s(this.segments[a])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(s,a){const et=Math.min(s.length,a.length);for(let at=0;at<et;at++){const lt=s.get(at),ht=a.get(at);if(lt<ht)return-1;if(lt>ht)return 1}return s.length<a.length?-1:s.length>a.length?1:0}}class rt extends it{construct(s,a,et){return new rt(s,a,et)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...s){const a=[];for(const et of s){if(et.indexOf("//")>=0)throw new L$2(B$2.INVALID_ARGUMENT,`Invalid segment (${et}). Paths must not contain // in them.`);a.push(...et.split("/").filter(at=>at.length>0))}return new rt(a)}static emptyPath(){return new rt([])}}const ot=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends it{construct(s,a,et){return new ut(s,a,et)}static isValidIdentifier(s){return ot.test(s)}canonicalString(){return this.toArray().map(s=>(s=s.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(s)||(s="`"+s+"`"),s)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ut(["__name__"])}static fromServerFormat(s){const a=[];let et="",at=0;const lt=()=>{if(et.length===0)throw new L$2(B$2.INVALID_ARGUMENT,`Invalid field path (${s}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);a.push(et),et=""};let ht=!1;for(;at<s.length;){const dt=s[at];if(dt==="\\"){if(at+1===s.length)throw new L$2(B$2.INVALID_ARGUMENT,"Path has trailing escape character: "+s);const ft=s[at+1];if(ft!=="\\"&&ft!=="."&&ft!=="`")throw new L$2(B$2.INVALID_ARGUMENT,"Path has invalid escape sequence: "+s);et+=ft,at+=2}else dt==="`"?(ht=!ht,at++):dt!=="."||ht?(et+=dt,at++):(lt(),at++)}if(lt(),ht)throw new L$2(B$2.INVALID_ARGUMENT,"Unterminated ` in path: "+s);return new ut(a)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(s){this.path=s}static fromPath(s){return new ct(rt.fromString(s))}static fromName(s){return new ct(rt.fromString(s).popFirst(5))}static empty(){return new ct(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(s){return this.path.length>=2&&this.path.get(this.path.length-2)===s}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(s){return s!==null&&rt.comparator(this.path,s.path)===0}toString(){return this.path.toString()}static comparator(s,a){return rt.comparator(s.path,a.path)}static isDocumentKey(s){return s.length%2==0}static fromSegments(s){return new ct(new rt(s.slice()))}}function mt(o,s){const a=o.toTimestamp().seconds,et=o.toTimestamp().nanoseconds+1,at=st.fromTimestamp(et===1e9?new nt(a+1,0):new nt(a,et));return new yt(at,ct.empty(),s)}function gt(o){return new yt(o.readTime,o.key,-1)}class yt{constructor(s,a,et){this.readTime=s,this.documentKey=a,this.largestBatchId=et}static min(){return new yt(st.min(),ct.empty(),-1)}static max(){return new yt(st.max(),ct.empty(),-1)}}function pt(o,s){let a=o.readTime.compareTo(s.readTime);return a!==0?a:(a=ct.comparator(o.documentKey,s.documentKey),a!==0?a:X$1(o.largestBatchId,s.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(s){this.onCommittedListeners.push(s)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(s=>s())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Et(o){if(o.code!==B$2.FAILED_PRECONDITION||o.message!==It)throw o;C$1("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(s){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,s(a=>{this.isDone=!0,this.result=a,this.nextCallback&&this.nextCallback(a)},a=>{this.isDone=!0,this.error=a,this.catchCallback&&this.catchCallback(a)})}catch(s){return this.next(void 0,s)}next(s,a){return this.callbackAttached&&O$1(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(a,this.error):this.wrapSuccess(s,this.result):new At((et,at)=>{this.nextCallback=lt=>{this.wrapSuccess(s,lt).next(et,at)},this.catchCallback=lt=>{this.wrapFailure(a,lt).next(et,at)}})}toPromise(){return new Promise((s,a)=>{this.next(s,a)})}wrapUserFunction(s){try{const a=s();return a instanceof At?a:At.resolve(a)}catch(a){return At.reject(a)}}wrapSuccess(s,a){return s?this.wrapUserFunction(()=>s(a)):At.resolve(a)}wrapFailure(s,a){return s?this.wrapUserFunction(()=>s(a)):At.reject(a)}static resolve(s){return new At((a,et)=>{a(s)})}static reject(s){return new At((a,et)=>{et(s)})}static waitFor(s){return new At((a,et)=>{let at=0,lt=0,ht=!1;s.forEach(dt=>{++at,dt.next(()=>{++lt,ht&&lt===at&&a()},ft=>et(ft))}),ht=!0,lt===at&&a()})}static or(s){let a=At.resolve(!1);for(const et of s)a=a.next(at=>at?At.resolve(at):et());return a}static forEach(s,a){const et=[];return s.forEach((at,lt)=>{et.push(a.call(this,at,lt))}),this.waitFor(et)}static mapArray(s,a){return new At((et,at)=>{const lt=s.length,ht=new Array(lt);let dt=0;for(let ft=0;ft<lt;ft++){const vt=ft;a(s[vt]).next(wt=>{ht[vt]=wt,++dt,dt===lt&&et(ht)},wt=>at(wt))}})}static doWhile(s,a){return new At((et,at)=>{const lt=()=>{s()===!0?a().next(()=>{lt()},at):et()};lt()})}}function Vt(o){return o.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(s,a){this.previousValue=s,a&&(a.sequenceNumberHandler=et=>this.ot(et),this.ut=et=>a.writeSequenceNumber(et))}ot(s){return this.previousValue=Math.max(s,this.previousValue),this.previousValue}next(){const s=++this.previousValue;return this.ut&&this.ut(s),s}}Ot.ct=-1;function $t(o){return o==null}function Mt(o){return o===0&&1/o==-1/0}function Ft(o){return typeof o=="number"&&Number.isInteger(o)&&!Mt(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we$1(o){let s=0;for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&s++;return s}function _e$1(o,s){for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&s(a,o[a])}function me$1(o){for(const s in o)if(Object.prototype.hasOwnProperty.call(o,s))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ge$1=class Bo{constructor(s,a){this.comparator=s,this.root=a||pe$1.EMPTY}insert(s,a){return new Bo(this.comparator,this.root.insert(s,a,this.comparator).copy(null,null,pe$1.BLACK,null,null))}remove(s){return new Bo(this.comparator,this.root.remove(s,this.comparator).copy(null,null,pe$1.BLACK,null,null))}get(s){let a=this.root;for(;!a.isEmpty();){const et=this.comparator(s,a.key);if(et===0)return a.value;et<0?a=a.left:et>0&&(a=a.right)}return null}indexOf(s){let a=0,et=this.root;for(;!et.isEmpty();){const at=this.comparator(s,et.key);if(at===0)return a+et.left.size;at<0?et=et.left:(a+=et.left.size+1,et=et.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(s){return this.root.inorderTraversal(s)}forEach(s){this.inorderTraversal((a,et)=>(s(a,et),!1))}toString(){const s=[];return this.inorderTraversal((a,et)=>(s.push(`${a}:${et}`),!1)),`{${s.join(", ")}}`}reverseTraversal(s){return this.root.reverseTraversal(s)}getIterator(){return new ye(this.root,null,this.comparator,!1)}getIteratorFrom(s){return new ye(this.root,s,this.comparator,!1)}getReverseIterator(){return new ye(this.root,null,this.comparator,!0)}getReverseIteratorFrom(s){return new ye(this.root,s,this.comparator,!0)}};class ye{constructor(s,a,et,at){this.isReverse=at,this.nodeStack=[];let lt=1;for(;!s.isEmpty();)if(lt=a?et(s.key,a):1,a&&at&&(lt*=-1),lt<0)s=this.isReverse?s.left:s.right;else{if(lt===0){this.nodeStack.push(s);break}this.nodeStack.push(s),s=this.isReverse?s.right:s.left}}getNext(){let s=this.nodeStack.pop();const a={key:s.key,value:s.value};if(this.isReverse)for(s=s.left;!s.isEmpty();)this.nodeStack.push(s),s=s.right;else for(s=s.right;!s.isEmpty();)this.nodeStack.push(s),s=s.left;return a}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const s=this.nodeStack[this.nodeStack.length-1];return{key:s.key,value:s.value}}}let pe$1=class co{constructor(s,a,et,at,lt){this.key=s,this.value=a,this.color=et??co.RED,this.left=at??co.EMPTY,this.right=lt??co.EMPTY,this.size=this.left.size+1+this.right.size}copy(s,a,et,at,lt){return new co(s??this.key,a??this.value,et??this.color,at??this.left,lt??this.right)}isEmpty(){return!1}inorderTraversal(s){return this.left.inorderTraversal(s)||s(this.key,this.value)||this.right.inorderTraversal(s)}reverseTraversal(s){return this.right.reverseTraversal(s)||s(this.key,this.value)||this.left.reverseTraversal(s)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(s,a,et){let at=this;const lt=et(s,at.key);return at=lt<0?at.copy(null,null,null,at.left.insert(s,a,et),null):lt===0?at.copy(null,a,null,null,null):at.copy(null,null,null,null,at.right.insert(s,a,et)),at.fixUp()}removeMin(){if(this.left.isEmpty())return co.EMPTY;let s=this;return s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.removeMin(),null),s.fixUp()}remove(s,a){let et,at=this;if(a(s,at.key)<0)at.left.isEmpty()||at.left.isRed()||at.left.left.isRed()||(at=at.moveRedLeft()),at=at.copy(null,null,null,at.left.remove(s,a),null);else{if(at.left.isRed()&&(at=at.rotateRight()),at.right.isEmpty()||at.right.isRed()||at.right.left.isRed()||(at=at.moveRedRight()),a(s,at.key)===0){if(at.right.isEmpty())return co.EMPTY;et=at.right.min(),at=at.copy(et.key,et.value,null,null,at.right.removeMin())}at=at.copy(null,null,null,null,at.right.remove(s,a))}return at.fixUp()}isRed(){return this.color}fixUp(){let s=this;return s.right.isRed()&&!s.left.isRed()&&(s=s.rotateLeft()),s.left.isRed()&&s.left.left.isRed()&&(s=s.rotateRight()),s.left.isRed()&&s.right.isRed()&&(s=s.colorFlip()),s}moveRedLeft(){let s=this.colorFlip();return s.right.left.isRed()&&(s=s.copy(null,null,null,null,s.right.rotateRight()),s=s.rotateLeft(),s=s.colorFlip()),s}moveRedRight(){let s=this.colorFlip();return s.left.left.isRed()&&(s=s.rotateRight(),s=s.colorFlip()),s}rotateLeft(){const s=this.copy(null,null,co.RED,null,this.right.left);return this.right.copy(null,null,this.color,s,null)}rotateRight(){const s=this.copy(null,null,co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,s)}colorFlip(){const s=this.left.copy(null,null,!this.left.color,null,null),a=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,s,a)}checkMaxDepth(){const s=this.check();return Math.pow(2,s)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O$1();const s=this.left.check();if(s!==this.right.check())throw O$1();return s+(this.isRed()?0:1)}};pe$1.EMPTY=null,pe$1.RED=!0,pe$1.BLACK=!1;pe$1.EMPTY=new class{constructor(){this.size=0}get key(){throw O$1()}get value(){throw O$1()}get color(){throw O$1()}get left(){throw O$1()}get right(){throw O$1()}copy(o,s,a,et,at){return this}insert(o,s,a){return new pe$1(o,s)}remove(o,s){return this}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(s){this.comparator=s,this.data=new ge$1(this.comparator)}has(s){return this.data.get(s)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(s){return this.data.indexOf(s)}forEach(s){this.data.inorderTraversal((a,et)=>(s(a),!1))}forEachInRange(s,a){const et=this.data.getIteratorFrom(s[0]);for(;et.hasNext();){const at=et.getNext();if(this.comparator(at.key,s[1])>=0)return;a(at.key)}}forEachWhile(s,a){let et;for(et=a!==void 0?this.data.getIteratorFrom(a):this.data.getIterator();et.hasNext();)if(!s(et.getNext().key))return}firstAfterOrEqual(s){const a=this.data.getIteratorFrom(s);return a.hasNext()?a.getNext().key:null}getIterator(){return new Te$1(this.data.getIterator())}getIteratorFrom(s){return new Te$1(this.data.getIteratorFrom(s))}add(s){return this.copy(this.data.remove(s).insert(s,!0))}delete(s){return this.has(s)?this.copy(this.data.remove(s)):this}isEmpty(){return this.data.isEmpty()}unionWith(s){let a=this;return a.size<s.size&&(a=s,s=this),s.forEach(et=>{a=a.add(et)}),a}isEqual(s){if(!(s instanceof Ie)||this.size!==s.size)return!1;const a=this.data.getIterator(),et=s.data.getIterator();for(;a.hasNext();){const at=a.getNext().key,lt=et.getNext().key;if(this.comparator(at,lt)!==0)return!1}return!0}toArray(){const s=[];return this.forEach(a=>{s.push(a)}),s}toString(){const s=[];return this.forEach(a=>s.push(a)),"SortedSet("+s.toString()+")"}copy(s){const a=new Ie(this.comparator);return a.data=s,a}}let Te$1=class{constructor(s){this.iter=s}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ae$1=class Uo{constructor(s){this.fields=s,s.sort(ut.comparator)}static empty(){return new Uo([])}unionWith(s){let a=new Ie(ut.comparator);for(const et of this.fields)a=a.add(et);for(const et of s)a=a.add(et);return new Uo(a.toArray())}covers(s){for(const a of this.fields)if(a.isPrefixOf(s))return!0;return!1}isEqual(s){return tt(this.fields,s.fields,(a,et)=>a.isEqual(et))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Re$1=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let be$1=class qo{constructor(s){this.binaryString=s}static fromBase64String(s){const a=function(et){try{return atob(et)}catch(at){throw typeof DOMException<"u"&&at instanceof DOMException?new Re$1("Invalid base64 string: "+at):at}}(s);return new qo(a)}static fromUint8Array(s){const a=function(et){let at="";for(let lt=0;lt<et.length;++lt)at+=String.fromCharCode(et[lt]);return at}(s);return new qo(a)}[Symbol.iterator](){let s=0;return{next:()=>s<this.binaryString.length?{value:this.binaryString.charCodeAt(s++),done:!1}:{value:void 0,done:!0}}}toBase64(){return s=this.binaryString,btoa(s);var s}toUint8Array(){return function(s){const a=new Uint8Array(s.length);for(let et=0;et<s.length;et++)a[et]=s.charCodeAt(et);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(s){return X$1(this.binaryString,s.binaryString)}isEqual(s){return this.binaryString===s.binaryString}};be$1.EMPTY_BYTE_STRING=new be$1("");const Pe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ve$1(o){if($$1(!!o),typeof o=="string"){let s=0;const a=Pe.exec(o);if($$1(!!a),a[1]){let at=a[1];at=(at+"000000000").substr(0,9),s=Number(at)}const et=new Date(o);return{seconds:Math.floor(et.getTime()/1e3),nanos:s}}return{seconds:Se$1(o.seconds),nanos:Se$1(o.nanos)}}function Se$1(o){return typeof o=="number"?o:typeof o=="string"?Number(o):0}function De$1(o){return typeof o=="string"?be$1.fromBase64String(o):be$1.fromUint8Array(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce$1(o){var s,a;return((a=(((s=o==null?void 0:o.mapValue)===null||s===void 0?void 0:s.fields)||{}).__type__)===null||a===void 0?void 0:a.stringValue)==="server_timestamp"}function xe$1(o){const s=o.mapValue.fields.__previous_value__;return Ce$1(s)?xe$1(s):s}function Ne$1(o){const s=Ve$1(o.mapValue.fields.__local_write_time__.timestampValue);return new nt(s.seconds,s.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ke$1=class{constructor(s,a,et,at,lt,ht,dt,ft){this.databaseId=s,this.appId=a,this.persistenceKey=et,this.host=at,this.ssl=lt,this.forceLongPolling=ht,this.autoDetectLongPolling=dt,this.useFetchStreams=ft}};class Oe{constructor(s,a){this.projectId=s,this.database=a||"(default)"}static empty(){return new Oe("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(s){return s instanceof Oe&&s.projectId===this.projectId&&s.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $e={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fe(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?Ce$1(o)?4:Ze(o)?9007199254740991:10:O$1()}function Be$1(o,s){if(o===s)return!0;const a=Fe(o);if(a!==Fe(s))return!1;switch(a){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===s.booleanValue;case 4:return Ne$1(o).isEqual(Ne$1(s));case 3:return function(et,at){if(typeof et.timestampValue=="string"&&typeof at.timestampValue=="string"&&et.timestampValue.length===at.timestampValue.length)return et.timestampValue===at.timestampValue;const lt=Ve$1(et.timestampValue),ht=Ve$1(at.timestampValue);return lt.seconds===ht.seconds&&lt.nanos===ht.nanos}(o,s);case 5:return o.stringValue===s.stringValue;case 6:return function(et,at){return De$1(et.bytesValue).isEqual(De$1(at.bytesValue))}(o,s);case 7:return o.referenceValue===s.referenceValue;case 8:return function(et,at){return Se$1(et.geoPointValue.latitude)===Se$1(at.geoPointValue.latitude)&&Se$1(et.geoPointValue.longitude)===Se$1(at.geoPointValue.longitude)}(o,s);case 2:return function(et,at){if("integerValue"in et&&"integerValue"in at)return Se$1(et.integerValue)===Se$1(at.integerValue);if("doubleValue"in et&&"doubleValue"in at){const lt=Se$1(et.doubleValue),ht=Se$1(at.doubleValue);return lt===ht?Mt(lt)===Mt(ht):isNaN(lt)&&isNaN(ht)}return!1}(o,s);case 9:return tt(o.arrayValue.values||[],s.arrayValue.values||[],Be$1);case 10:return function(et,at){const lt=et.mapValue.fields||{},ht=at.mapValue.fields||{};if(we$1(lt)!==we$1(ht))return!1;for(const dt in lt)if(lt.hasOwnProperty(dt)&&(ht[dt]===void 0||!Be$1(lt[dt],ht[dt])))return!1;return!0}(o,s);default:return O$1()}}function Le(o,s){return(o.values||[]).find(a=>Be$1(a,s))!==void 0}function qe$1(o,s){if(o===s)return 0;const a=Fe(o),et=Fe(s);if(a!==et)return X$1(a,et);switch(a){case 0:case 9007199254740991:return 0;case 1:return X$1(o.booleanValue,s.booleanValue);case 2:return function(at,lt){const ht=Se$1(at.integerValue||at.doubleValue),dt=Se$1(lt.integerValue||lt.doubleValue);return ht<dt?-1:ht>dt?1:ht===dt?0:isNaN(ht)?isNaN(dt)?0:-1:1}(o,s);case 3:return Ue(o.timestampValue,s.timestampValue);case 4:return Ue(Ne$1(o),Ne$1(s));case 5:return X$1(o.stringValue,s.stringValue);case 6:return function(at,lt){const ht=De$1(at),dt=De$1(lt);return ht.compareTo(dt)}(o.bytesValue,s.bytesValue);case 7:return function(at,lt){const ht=at.split("/"),dt=lt.split("/");for(let ft=0;ft<ht.length&&ft<dt.length;ft++){const vt=X$1(ht[ft],dt[ft]);if(vt!==0)return vt}return X$1(ht.length,dt.length)}(o.referenceValue,s.referenceValue);case 8:return function(at,lt){const ht=X$1(Se$1(at.latitude),Se$1(lt.latitude));return ht!==0?ht:X$1(Se$1(at.longitude),Se$1(lt.longitude))}(o.geoPointValue,s.geoPointValue);case 9:return function(at,lt){const ht=at.values||[],dt=lt.values||[];for(let ft=0;ft<ht.length&&ft<dt.length;++ft){const vt=qe$1(ht[ft],dt[ft]);if(vt)return vt}return X$1(ht.length,dt.length)}(o.arrayValue,s.arrayValue);case 10:return function(at,lt){if(at===$e.mapValue&&lt===$e.mapValue)return 0;if(at===$e.mapValue)return 1;if(lt===$e.mapValue)return-1;const ht=at.fields||{},dt=Object.keys(ht),ft=lt.fields||{},vt=Object.keys(ft);dt.sort(),vt.sort();for(let wt=0;wt<dt.length&&wt<vt.length;++wt){const Ct=X$1(dt[wt],vt[wt]);if(Ct!==0)return Ct;const xt=qe$1(ht[dt[wt]],ft[vt[wt]]);if(xt!==0)return xt}return X$1(dt.length,vt.length)}(o.mapValue,s.mapValue);default:throw O$1()}}function Ue(o,s){if(typeof o=="string"&&typeof s=="string"&&o.length===s.length)return X$1(o,s);const a=Ve$1(o),et=Ve$1(s),at=X$1(a.seconds,et.seconds);return at!==0?at:X$1(a.nanos,et.nanos)}function Ke(o){return Ge$1(o)}function Ge$1(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(et){const at=Ve$1(et);return`time(${at.seconds},${at.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?De$1(o.bytesValue).toBase64():"referenceValue"in o?(a=o.referenceValue,ct.fromName(a).toString()):"geoPointValue"in o?`geo(${(s=o.geoPointValue).latitude},${s.longitude})`:"arrayValue"in o?function(et){let at="[",lt=!0;for(const ht of et.values||[])lt?lt=!1:at+=",",at+=Ge$1(ht);return at+"]"}(o.arrayValue):"mapValue"in o?function(et){const at=Object.keys(et.fields||{}).sort();let lt="{",ht=!0;for(const dt of at)ht?ht=!1:lt+=",",lt+=`${dt}:${Ge$1(et.fields[dt])}`;return lt+"}"}(o.mapValue):O$1();var s,a}function Qe(o,s){return{referenceValue:`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`}}function ze$1(o){return!!o&&"integerValue"in o}function je$1(o){return!!o&&"arrayValue"in o}function We(o){return!!o&&"nullValue"in o}function He$1(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function Je(o){return!!o&&"mapValue"in o}function Ye$1(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&typeof o.timestampValue=="object")return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const s={mapValue:{fields:{}}};return _e$1(o.mapValue.fields,(a,et)=>s.mapValue.fields[a]=Ye$1(et)),s}if(o.arrayValue){const s={arrayValue:{values:[]}};for(let a=0;a<(o.arrayValue.values||[]).length;++a)s.arrayValue.values[a]=Ye$1(o.arrayValue.values[a]);return s}return Object.assign({},o)}function Ze(o){return(((o.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(s){this.value=s}static empty(){return new sn({mapValue:{}})}field(s){if(s.isEmpty())return this.value;{let a=this.value;for(let et=0;et<s.length-1;++et)if(a=(a.mapValue.fields||{})[s.get(et)],!Je(a))return null;return a=(a.mapValue.fields||{})[s.lastSegment()],a||null}}set(s,a){this.getFieldsMap(s.popLast())[s.lastSegment()]=Ye$1(a)}setAll(s){let a=ut.emptyPath(),et={},at=[];s.forEach((ht,dt)=>{if(!a.isImmediateParentOf(dt)){const ft=this.getFieldsMap(a);this.applyChanges(ft,et,at),et={},at=[],a=dt.popLast()}ht?et[dt.lastSegment()]=Ye$1(ht):at.push(dt.lastSegment())});const lt=this.getFieldsMap(a);this.applyChanges(lt,et,at)}delete(s){const a=this.field(s.popLast());Je(a)&&a.mapValue.fields&&delete a.mapValue.fields[s.lastSegment()]}isEqual(s){return Be$1(this.value,s.value)}getFieldsMap(s){let a=this.value;a.mapValue.fields||(a.mapValue={fields:{}});for(let et=0;et<s.length;++et){let at=a.mapValue.fields[s.get(et)];Je(at)&&at.mapValue.fields||(at={mapValue:{fields:{}}},a.mapValue.fields[s.get(et)]=at),a=at}return a.mapValue.fields}applyChanges(s,a,et){_e$1(a,(at,lt)=>s[at]=lt);for(const at of et)delete s[at]}clone(){return new sn(Ye$1(this.value))}}function rn(o){const s=[];return _e$1(o.fields,(a,et)=>{const at=new ut([a]);if(Je(et)){const lt=rn(et.mapValue).fields;if(lt.length===0)s.push(at);else for(const ht of lt)s.push(at.child(ht))}else s.push(at)}),new Ae$1(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(s,a,et,at,lt,ht,dt){this.key=s,this.documentType=a,this.version=et,this.readTime=at,this.createTime=lt,this.data=ht,this.documentState=dt}static newInvalidDocument(s){return new on(s,0,st.min(),st.min(),st.min(),sn.empty(),0)}static newFoundDocument(s,a,et,at){return new on(s,1,a,st.min(),et,at,0)}static newNoDocument(s,a){return new on(s,2,a,st.min(),st.min(),sn.empty(),0)}static newUnknownDocument(s,a){return new on(s,3,a,st.min(),st.min(),sn.empty(),2)}convertToFoundDocument(s,a){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=s),this.version=s,this.documentType=1,this.data=a,this.documentState=0,this}convertToNoDocument(s){return this.version=s,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(s){return this.version=s,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(s){return this.readTime=s,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(s){return s instanceof on&&this.key.isEqual(s.key)&&this.version.isEqual(s.version)&&this.documentType===s.documentType&&this.documentState===s.documentState&&this.data.isEqual(s.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(s,a){this.position=s,this.inclusive=a}}function cn(o,s,a){let et=0;for(let at=0;at<o.position.length;at++){const lt=s[at],ht=o.position[at];if(lt.field.isKeyField()?et=ct.comparator(ct.fromName(ht.referenceValue),a.key):et=qe$1(ht,a.data.field(lt.field)),lt.dir==="desc"&&(et*=-1),et!==0)break}return et}function an(o,s){if(o===null)return s===null;if(s===null||o.inclusive!==s.inclusive||o.position.length!==s.position.length)return!1;for(let a=0;a<o.position.length;a++)if(!Be$1(o.position[a],s.position[a]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(s,a="asc"){this.field=s,this.dir=a}}function ln(o,s){return o.dir===s.dir&&o.field.isEqual(s.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{}class dn extends fn{constructor(s,a,et){super(),this.field=s,this.op=a,this.value=et}static create(s,a,et){return s.isKeyField()?a==="in"||a==="not-in"?this.createKeyFieldInFilter(s,a,et):new An(s,a,et):a==="array-contains"?new Pn(s,et):a==="in"?new Vn(s,et):a==="not-in"?new Sn(s,et):a==="array-contains-any"?new Dn(s,et):new dn(s,a,et)}static createKeyFieldInFilter(s,a,et){return a==="in"?new Rn(s,et):new vn(s,et)}matches(s){const a=s.data.field(this.field);return this.op==="!="?a!==null&&this.matchesComparison(qe$1(a,this.value)):a!==null&&Fe(this.value)===Fe(a)&&this.matchesComparison(qe$1(a,this.value))}matchesComparison(s){switch(this.op){case"<":return s<0;case"<=":return s<=0;case"==":return s===0;case"!=":return s!==0;case">":return s>0;case">=":return s>=0;default:return O$1()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class wn extends fn{constructor(s,a){super(),this.filters=s,this.op=a,this.ht=null}static create(s,a){return new wn(s,a)}matches(s){return _n(this)?this.filters.find(a=>!a.matches(s))===void 0:this.filters.find(a=>a.matches(s))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((s,a)=>s.concat(a.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const s=this.lt(a=>a.isInequality());return s!==null?s.field:null}lt(s){for(const a of this.getFlattenedFilters())if(s(a))return a;return null}}function _n(o){return o.op==="and"}function gn(o){return yn(o)&&_n(o)}function yn(o){for(const s of o.filters)if(s instanceof wn)return!1;return!0}function pn(o){if(o instanceof dn)return o.field.canonicalString()+o.op.toString()+Ke(o.value);if(gn(o))return o.filters.map(s=>pn(s)).join(",");{const s=o.filters.map(a=>pn(a)).join(",");return`${o.op}(${s})`}}function In(o,s){return o instanceof dn?function(a,et){return et instanceof dn&&a.op===et.op&&a.field.isEqual(et.field)&&Be$1(a.value,et.value)}(o,s):o instanceof wn?function(a,et){return et instanceof wn&&a.op===et.op&&a.filters.length===et.filters.length?a.filters.reduce((at,lt,ht)=>at&&In(lt,et.filters[ht]),!0):!1}(o,s):void O$1()}function En(o){return o instanceof dn?function(s){return`${s.field.canonicalString()} ${s.op} ${Ke(s.value)}`}(o):o instanceof wn?function(s){return s.op.toString()+" {"+s.getFilters().map(En).join(" ,")+"}"}(o):"Filter"}class An extends dn{constructor(s,a,et){super(s,a,et),this.key=ct.fromName(et.referenceValue)}matches(s){const a=ct.comparator(s.key,this.key);return this.matchesComparison(a)}}class Rn extends dn{constructor(s,a){super(s,"in",a),this.keys=bn("in",a)}matches(s){return this.keys.some(a=>a.isEqual(s.key))}}class vn extends dn{constructor(s,a){super(s,"not-in",a),this.keys=bn("not-in",a)}matches(s){return!this.keys.some(a=>a.isEqual(s.key))}}function bn(o,s){var a;return(((a=s.arrayValue)===null||a===void 0?void 0:a.values)||[]).map(et=>ct.fromName(et.referenceValue))}class Pn extends dn{constructor(s,a){super(s,"array-contains",a)}matches(s){const a=s.data.field(this.field);return je$1(a)&&Le(a.arrayValue,this.value)}}class Vn extends dn{constructor(s,a){super(s,"in",a)}matches(s){const a=s.data.field(this.field);return a!==null&&Le(this.value.arrayValue,a)}}class Sn extends dn{constructor(s,a){super(s,"not-in",a)}matches(s){if(Le(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const a=s.data.field(this.field);return a!==null&&!Le(this.value.arrayValue,a)}}class Dn extends dn{constructor(s,a){super(s,"array-contains-any",a)}matches(s){const a=s.data.field(this.field);return!(!je$1(a)||!a.arrayValue.values)&&a.arrayValue.values.some(et=>Le(this.value.arrayValue,et))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(s,a=null,et=[],at=[],lt=null,ht=null,dt=null){this.path=s,this.collectionGroup=a,this.orderBy=et,this.filters=at,this.limit=lt,this.startAt=ht,this.endAt=dt,this.ft=null}}function xn(o,s=null,a=[],et=[],at=null,lt=null,ht=null){return new Cn(o,s,a,et,at,lt,ht)}function Nn(o){const s=F$2(o);if(s.ft===null){let a=s.path.canonicalString();s.collectionGroup!==null&&(a+="|cg:"+s.collectionGroup),a+="|f:",a+=s.filters.map(et=>pn(et)).join(","),a+="|ob:",a+=s.orderBy.map(et=>function(at){return at.field.canonicalString()+at.dir}(et)).join(","),$t(s.limit)||(a+="|l:",a+=s.limit),s.startAt&&(a+="|lb:",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map(et=>Ke(et)).join(",")),s.endAt&&(a+="|ub:",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map(et=>Ke(et)).join(",")),s.ft=a}return s.ft}function kn(o,s){if(o.limit!==s.limit||o.orderBy.length!==s.orderBy.length)return!1;for(let a=0;a<o.orderBy.length;a++)if(!ln(o.orderBy[a],s.orderBy[a]))return!1;if(o.filters.length!==s.filters.length)return!1;for(let a=0;a<o.filters.length;a++)if(!In(o.filters[a],s.filters[a]))return!1;return o.collectionGroup===s.collectionGroup&&!!o.path.isEqual(s.path)&&!!an(o.startAt,s.startAt)&&an(o.endAt,s.endAt)}function On(o){return ct.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(s,a=null,et=[],at=[],lt=null,ht="F",dt=null,ft=null){this.path=s,this.collectionGroup=a,this.explicitOrderBy=et,this.filters=at,this.limit=lt,this.limitType=ht,this.startAt=dt,this.endAt=ft,this.dt=null,this.wt=null,this.startAt,this.endAt}}function Ln(o,s,a,et,at,lt,ht,dt){return new Bn(o,s,a,et,at,lt,ht,dt)}function qn(o){return new Bn(o)}function Un(o){return o.filters.length===0&&o.limit===null&&o.startAt==null&&o.endAt==null&&(o.explicitOrderBy.length===0||o.explicitOrderBy.length===1&&o.explicitOrderBy[0].field.isKeyField())}function Kn(o){return o.explicitOrderBy.length>0?o.explicitOrderBy[0].field:null}function Gn(o){for(const s of o.filters){const a=s.getFirstInequalityField();if(a!==null)return a}return null}function Qn(o){return o.collectionGroup!==null}function zn(o){const s=F$2(o);if(s.dt===null){s.dt=[];const a=Gn(s),et=Kn(s);if(a!==null&&et===null)a.isKeyField()||s.dt.push(new hn(a)),s.dt.push(new hn(ut.keyField(),"asc"));else{let at=!1;for(const lt of s.explicitOrderBy)s.dt.push(lt),lt.field.isKeyField()&&(at=!0);if(!at){const lt=s.explicitOrderBy.length>0?s.explicitOrderBy[s.explicitOrderBy.length-1].dir:"asc";s.dt.push(new hn(ut.keyField(),lt))}}}return s.dt}function jn(o){const s=F$2(o);if(!s.wt)if(s.limitType==="F")s.wt=xn(s.path,s.collectionGroup,zn(s),s.filters,s.limit,s.startAt,s.endAt);else{const a=[];for(const lt of zn(s)){const ht=lt.dir==="desc"?"asc":"desc";a.push(new hn(lt.field,ht))}const et=s.endAt?new un(s.endAt.position,s.endAt.inclusive):null,at=s.startAt?new un(s.startAt.position,s.startAt.inclusive):null;s.wt=xn(s.path,s.collectionGroup,a,s.filters,s.limit,et,at)}return s.wt}function Wn(o,s){s.getFirstInequalityField(),Gn(o);const a=o.filters.concat([s]);return new Bn(o.path,o.collectionGroup,o.explicitOrderBy.slice(),a,o.limit,o.limitType,o.startAt,o.endAt)}function Hn(o,s,a){return new Bn(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),s,a,o.startAt,o.endAt)}function Jn(o,s){return kn(jn(o),jn(s))&&o.limitType===s.limitType}function Yn(o){return`${Nn(jn(o))}|lt:${o.limitType}`}function Zn(o){return`Query(target=${function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map(et=>En(et)).join(", ")}]`),$t(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map(et=>function(at){return`${at.field.canonicalString()} (${at.dir})`}(et)).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map(et=>Ke(et)).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map(et=>Ke(et)).join(",")),`Target(${a})`}(jn(o))}; limitType=${o.limitType})`}function Xn(o,s){return s.isFoundDocument()&&function(a,et){const at=et.key.path;return a.collectionGroup!==null?et.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(at):ct.isDocumentKey(a.path)?a.path.isEqual(at):a.path.isImmediateParentOf(at)}(o,s)&&function(a,et){for(const at of zn(a))if(!at.field.isKeyField()&&et.data.field(at.field)===null)return!1;return!0}(o,s)&&function(a,et){for(const at of a.filters)if(!at.matches(et))return!1;return!0}(o,s)&&function(a,et){return!(a.startAt&&!function(at,lt,ht){const dt=cn(at,lt,ht);return at.inclusive?dt<=0:dt<0}(a.startAt,zn(a),et)||a.endAt&&!function(at,lt,ht){const dt=cn(at,lt,ht);return at.inclusive?dt>=0:dt>0}(a.endAt,zn(a),et))}(o,s)}function ts(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function es(o){return(s,a)=>{let et=!1;for(const at of zn(o)){const lt=ns(at,s,a);if(lt!==0)return lt;et=et||at.field.isKeyField()}return 0}}function ns(o,s,a){const et=o.field.isKeyField()?ct.comparator(s.key,a.key):function(at,lt,ht){const dt=lt.data.field(at),ft=ht.data.field(at);return dt!==null&&ft!==null?qe$1(dt,ft):O$1()}(o.field,s,a);switch(o.dir){case"asc":return et;case"desc":return-1*et;default:return O$1()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(s,a){this.mapKeyFn=s,this.equalsFn=a,this.inner={},this.innerSize=0}get(s){const a=this.mapKeyFn(s),et=this.inner[a];if(et!==void 0){for(const[at,lt]of et)if(this.equalsFn(at,s))return lt}}has(s){return this.get(s)!==void 0}set(s,a){const et=this.mapKeyFn(s),at=this.inner[et];if(at===void 0)return this.inner[et]=[[s,a]],void this.innerSize++;for(let lt=0;lt<at.length;lt++)if(this.equalsFn(at[lt][0],s))return void(at[lt]=[s,a]);at.push([s,a]),this.innerSize++}delete(s){const a=this.mapKeyFn(s),et=this.inner[a];if(et===void 0)return!1;for(let at=0;at<et.length;at++)if(this.equalsFn(et[at][0],s))return et.length===1?delete this.inner[a]:et.splice(at,1),this.innerSize--,!0;return!1}forEach(s){_e$1(this.inner,(a,et)=>{for(const[at,lt]of et)s(at,lt)})}isEmpty(){return me$1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is$1=new ge$1(ct.comparator);function rs(){return is$1}const os=new ge$1(ct.comparator);function us(...o){let s=os;for(const a of o)s=s.insert(a.key,a);return s}function cs(o){let s=os;return o.forEach((a,et)=>s=s.insert(a,et.overlayedDocument)),s}function as(){return ls()}function hs(){return ls()}function ls(){return new ss(o=>o.toString(),(o,s)=>o.isEqual(s))}const fs=new ge$1(ct.comparator),ds=new Ie(ct.comparator);function ws(...o){let s=ds;for(const a of o)s=s.add(a);return s}const _s=new Ie(X$1);function ms(){return _s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(o,s){if(o.useProto3Json){if(isNaN(s))return{doubleValue:"NaN"};if(s===1/0)return{doubleValue:"Infinity"};if(s===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mt(s)?"-0":s}}function ys(o){return{integerValue:""+o}}function ps(o,s){return Ft(s)?ys(s):gs(o,s)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(){this._=void 0}}function Ts(o,s,a){return o instanceof Rs?function(et,at){const lt={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:et.seconds,nanos:et.nanoseconds}}}};return at&&(lt.fields.__previous_value__=at),{mapValue:lt}}(a,s):o instanceof vs?bs(o,s):o instanceof Ps?Vs(o,s):function(et,at){const lt=As(et,at),ht=Ds(lt)+Ds(et._t);return ze$1(lt)&&ze$1(et._t)?ys(ht):gs(et.serializer,ht)}(o,s)}function Es(o,s,a){return o instanceof vs?bs(o,s):o instanceof Ps?Vs(o,s):a}function As(o,s){return o instanceof Ss?ze$1(a=s)||function(et){return!!et&&"doubleValue"in et}(a)?s:{integerValue:0}:null;var a}class Rs extends Is{}class vs extends Is{constructor(s){super(),this.elements=s}}function bs(o,s){const a=Cs(s);for(const et of o.elements)a.some(at=>Be$1(at,et))||a.push(et);return{arrayValue:{values:a}}}class Ps extends Is{constructor(s){super(),this.elements=s}}function Vs(o,s){let a=Cs(s);for(const et of o.elements)a=a.filter(at=>!Be$1(at,et));return{arrayValue:{values:a}}}class Ss extends Is{constructor(s,a){super(),this.serializer=s,this._t=a}}function Ds(o){return Se$1(o.integerValue||o.doubleValue)}function Cs(o){return je$1(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(s,a){this.field=s,this.transform=a}}function Ns(o,s){return o.field.isEqual(s.field)&&function(a,et){return a instanceof vs&&et instanceof vs||a instanceof Ps&&et instanceof Ps?tt(a.elements,et.elements,Be$1):a instanceof Ss&&et instanceof Ss?Be$1(a._t,et._t):a instanceof Rs&&et instanceof Rs}(o.transform,s.transform)}class ks{constructor(s,a){this.version=s,this.transformResults=a}}class Os{constructor(s,a){this.updateTime=s,this.exists=a}static none(){return new Os}static exists(s){return new Os(void 0,s)}static updateTime(s){return new Os(s)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(s){return this.exists===s.exists&&(this.updateTime?!!s.updateTime&&this.updateTime.isEqual(s.updateTime):!s.updateTime)}}function $s(o,s){return o.updateTime!==void 0?s.isFoundDocument()&&s.version.isEqual(o.updateTime):o.exists===void 0||o.exists===s.isFoundDocument()}class Ms{}function Fs(o,s){if(!o.hasLocalMutations||s&&s.fields.length===0)return null;if(s===null)return o.isNoDocument()?new Ws(o.key,Os.none()):new Ks(o.key,o.data,Os.none());{const a=o.data,et=sn.empty();let at=new Ie(ut.comparator);for(let lt of s.fields)if(!at.has(lt)){let ht=a.field(lt);ht===null&&lt.length>1&&(lt=lt.popLast(),ht=a.field(lt)),ht===null?et.delete(lt):et.set(lt,ht),at=at.add(lt)}return new Gs(o.key,et,new Ae$1(at.toArray()),Os.none())}}function Bs(o,s,a){o instanceof Ks?function(et,at,lt){const ht=et.value.clone(),dt=zs(et.fieldTransforms,at,lt.transformResults);ht.setAll(dt),at.convertToFoundDocument(lt.version,ht).setHasCommittedMutations()}(o,s,a):o instanceof Gs?function(et,at,lt){if(!$s(et.precondition,at))return void at.convertToUnknownDocument(lt.version);const ht=zs(et.fieldTransforms,at,lt.transformResults),dt=at.data;dt.setAll(Qs(et)),dt.setAll(ht),at.convertToFoundDocument(lt.version,dt).setHasCommittedMutations()}(o,s,a):function(et,at,lt){at.convertToNoDocument(lt.version).setHasCommittedMutations()}(0,s,a)}function Ls(o,s,a,et){return o instanceof Ks?function(at,lt,ht,dt){if(!$s(at.precondition,lt))return ht;const ft=at.value.clone(),vt=js(at.fieldTransforms,dt,lt);return ft.setAll(vt),lt.convertToFoundDocument(lt.version,ft).setHasLocalMutations(),null}(o,s,a,et):o instanceof Gs?function(at,lt,ht,dt){if(!$s(at.precondition,lt))return ht;const ft=js(at.fieldTransforms,dt,lt),vt=lt.data;return vt.setAll(Qs(at)),vt.setAll(ft),lt.convertToFoundDocument(lt.version,vt).setHasLocalMutations(),ht===null?null:ht.unionWith(at.fieldMask.fields).unionWith(at.fieldTransforms.map(wt=>wt.field))}(o,s,a,et):function(at,lt,ht){return $s(at.precondition,lt)?(lt.convertToNoDocument(lt.version).setHasLocalMutations(),null):ht}(o,s,a)}function qs(o,s){let a=null;for(const et of o.fieldTransforms){const at=s.data.field(et.field),lt=As(et.transform,at||null);lt!=null&&(a===null&&(a=sn.empty()),a.set(et.field,lt))}return a||null}function Us(o,s){return o.type===s.type&&!!o.key.isEqual(s.key)&&!!o.precondition.isEqual(s.precondition)&&!!function(a,et){return a===void 0&&et===void 0||!(!a||!et)&&tt(a,et,(at,lt)=>Ns(at,lt))}(o.fieldTransforms,s.fieldTransforms)&&(o.type===0?o.value.isEqual(s.value):o.type!==1||o.data.isEqual(s.data)&&o.fieldMask.isEqual(s.fieldMask))}class Ks extends Ms{constructor(s,a,et,at=[]){super(),this.key=s,this.value=a,this.precondition=et,this.fieldTransforms=at,this.type=0}getFieldMask(){return null}}class Gs extends Ms{constructor(s,a,et,at,lt=[]){super(),this.key=s,this.data=a,this.fieldMask=et,this.precondition=at,this.fieldTransforms=lt,this.type=1}getFieldMask(){return this.fieldMask}}function Qs(o){const s=new Map;return o.fieldMask.fields.forEach(a=>{if(!a.isEmpty()){const et=o.data.field(a);s.set(a,et)}}),s}function zs(o,s,a){const et=new Map;$$1(o.length===a.length);for(let at=0;at<a.length;at++){const lt=o[at],ht=lt.transform,dt=s.data.field(lt.field);et.set(lt.field,Es(ht,dt,a[at]))}return et}function js(o,s,a){const et=new Map;for(const at of o){const lt=at.transform,ht=a.data.field(at.field);et.set(at.field,Ts(lt,ht,s))}return et}class Ws extends Ms{constructor(s,a){super(),this.key=s,this.precondition=a,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hs extends Ms{constructor(s,a){super(),this.key=s,this.precondition=a,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(s,a,et,at){this.batchId=s,this.localWriteTime=a,this.baseMutations=et,this.mutations=at}applyToRemoteDocument(s,a){const et=a.mutationResults;for(let at=0;at<this.mutations.length;at++){const lt=this.mutations[at];lt.key.isEqual(s.key)&&Bs(lt,s,et[at])}}applyToLocalView(s,a){for(const et of this.baseMutations)et.key.isEqual(s.key)&&(a=Ls(et,s,a,this.localWriteTime));for(const et of this.mutations)et.key.isEqual(s.key)&&(a=Ls(et,s,a,this.localWriteTime));return a}applyToLocalDocumentSet(s,a){const et=hs();return this.mutations.forEach(at=>{const lt=s.get(at.key),ht=lt.overlayedDocument;let dt=this.applyToLocalView(ht,lt.mutatedFields);dt=a.has(at.key)?null:dt;const ft=Fs(ht,dt);ft!==null&&et.set(at.key,ft),ht.isValidDocument()||ht.convertToNoDocument(st.min())}),et}keys(){return this.mutations.reduce((s,a)=>s.add(a.key),ws())}isEqual(s){return this.batchId===s.batchId&&tt(this.mutations,s.mutations,(a,et)=>Us(a,et))&&tt(this.baseMutations,s.baseMutations,(a,et)=>Us(a,et))}}class Ys{constructor(s,a,et,at){this.batch=s,this.commitVersion=a,this.mutationResults=et,this.docVersions=at}static from(s,a,et){$$1(s.mutations.length===et.length);let at=fs;const lt=s.mutations;for(let ht=0;ht<lt.length;ht++)at=at.insert(lt[ht].key,et[ht].version);return new Ys(s,a,et,at)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(s,a){this.largestBatchId=s,this.mutation=a}getKey(){return this.mutation.key}isEqual(s){return s!==null&&this.mutation===s.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(s){this.count=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,ii;function ri(o){switch(o){default:return O$1();case B$2.CANCELLED:case B$2.UNKNOWN:case B$2.DEADLINE_EXCEEDED:case B$2.RESOURCE_EXHAUSTED:case B$2.INTERNAL:case B$2.UNAVAILABLE:case B$2.UNAUTHENTICATED:return!1;case B$2.INVALID_ARGUMENT:case B$2.NOT_FOUND:case B$2.ALREADY_EXISTS:case B$2.PERMISSION_DENIED:case B$2.FAILED_PRECONDITION:case B$2.ABORTED:case B$2.OUT_OF_RANGE:case B$2.UNIMPLEMENTED:case B$2.DATA_LOSS:return!0}}function oi(o){if(o===void 0)return x$2("GRPC error has no .code"),B$2.UNKNOWN;switch(o){case si.OK:return B$2.OK;case si.CANCELLED:return B$2.CANCELLED;case si.UNKNOWN:return B$2.UNKNOWN;case si.DEADLINE_EXCEEDED:return B$2.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return B$2.RESOURCE_EXHAUSTED;case si.INTERNAL:return B$2.INTERNAL;case si.UNAVAILABLE:return B$2.UNAVAILABLE;case si.UNAUTHENTICATED:return B$2.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return B$2.INVALID_ARGUMENT;case si.NOT_FOUND:return B$2.NOT_FOUND;case si.ALREADY_EXISTS:return B$2.ALREADY_EXISTS;case si.PERMISSION_DENIED:return B$2.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return B$2.FAILED_PRECONDITION;case si.ABORTED:return B$2.ABORTED;case si.OUT_OF_RANGE:return B$2.OUT_OF_RANGE;case si.UNIMPLEMENTED:return B$2.UNIMPLEMENTED;case si.DATA_LOSS:return B$2.DATA_LOSS;default:return O$1()}}(ii=si||(si={}))[ii.OK=0]="OK",ii[ii.CANCELLED=1]="CANCELLED",ii[ii.UNKNOWN=2]="UNKNOWN",ii[ii.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ii[ii.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ii[ii.NOT_FOUND=5]="NOT_FOUND",ii[ii.ALREADY_EXISTS=6]="ALREADY_EXISTS",ii[ii.PERMISSION_DENIED=7]="PERMISSION_DENIED",ii[ii.UNAUTHENTICATED=16]="UNAUTHENTICATED",ii[ii.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ii[ii.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ii[ii.ABORTED=10]="ABORTED",ii[ii.OUT_OF_RANGE=11]="OUT_OF_RANGE",ii[ii.UNIMPLEMENTED=12]="UNIMPLEMENTED",ii[ii.INTERNAL=13]="INTERNAL",ii[ii.UNAVAILABLE=14]="UNAVAILABLE",ii[ii.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return ci}static getOrCreateInstance(){return ci===null&&(ci=new ui),ci}onExistenceFilterMismatch(s){const a=Symbol();return this.onExistenceFilterMismatchCallbacks.set(a,s),()=>this.onExistenceFilterMismatchCallbacks.delete(a)}notifyOnExistenceFilterMismatch(s){this.onExistenceFilterMismatchCallbacks.forEach(a=>a(s))}}let ci=null;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(s,a,et,at,lt){this.snapshotVersion=s,this.targetChanges=a,this.targetMismatches=et,this.documentUpdates=at,this.resolvedLimboDocuments=lt}static createSynthesizedRemoteEventForCurrentChange(s,a,et){const at=new Map;return at.set(s,hi.createSynthesizedTargetChangeForCurrentChange(s,a,et)),new ai(st.min(),at,ms(),rs(),ws())}}class hi{constructor(s,a,et,at,lt){this.resumeToken=s,this.current=a,this.addedDocuments=et,this.modifiedDocuments=at,this.removedDocuments=lt}static createSynthesizedTargetChangeForCurrentChange(s,a,et){return new hi(et,a,ws(),ws(),ws())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(s,a,et,at){this.It=s,this.removedTargetIds=a,this.key=et,this.Tt=at}}class fi{constructor(s,a){this.targetId=s,this.Et=a}}class di{constructor(s,a,et=be$1.EMPTY_BYTE_STRING,at=null){this.state=s,this.targetIds=a,this.resumeToken=et,this.cause=at}}class wi{constructor(){this.At=0,this.Rt=gi(),this.vt=be$1.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}get current(){return this.bt}get resumeToken(){return this.vt}get Vt(){return this.At!==0}get St(){return this.Pt}Dt(s){s.approximateByteSize()>0&&(this.Pt=!0,this.vt=s)}Ct(){let s=ws(),a=ws(),et=ws();return this.Rt.forEach((at,lt)=>{switch(lt){case 0:s=s.add(at);break;case 2:a=a.add(at);break;case 1:et=et.add(at);break;default:O$1()}}),new hi(this.vt,this.bt,s,a,et)}xt(){this.Pt=!1,this.Rt=gi()}Nt(s,a){this.Pt=!0,this.Rt=this.Rt.insert(s,a)}kt(s){this.Pt=!0,this.Rt=this.Rt.remove(s)}Ot(){this.At+=1}$t(){this.At-=1}Mt(){this.Pt=!0,this.bt=!0}}class _i{constructor(s){this.Ft=s,this.Bt=new Map,this.Lt=rs(),this.qt=mi(),this.Ut=new Ie(X$1)}Kt(s){for(const a of s.It)s.Tt&&s.Tt.isFoundDocument()?this.Gt(a,s.Tt):this.Qt(a,s.key,s.Tt);for(const a of s.removedTargetIds)this.Qt(a,s.key,s.Tt)}zt(s){this.forEachTarget(s,a=>{const et=this.jt(a);switch(s.state){case 0:this.Wt(a)&&et.Dt(s.resumeToken);break;case 1:et.$t(),et.Vt||et.xt(),et.Dt(s.resumeToken);break;case 2:et.$t(),et.Vt||this.removeTarget(a);break;case 3:this.Wt(a)&&(et.Mt(),et.Dt(s.resumeToken));break;case 4:this.Wt(a)&&(this.Ht(a),et.Dt(s.resumeToken));break;default:O$1()}})}forEachTarget(s,a){s.targetIds.length>0?s.targetIds.forEach(a):this.Bt.forEach((et,at)=>{this.Wt(at)&&a(at)})}Jt(s){var a;const et=s.targetId,at=s.Et.count,lt=this.Yt(et);if(lt){const ht=lt.target;if(On(ht))if(at===0){const dt=new ct(ht.path);this.Qt(et,dt,on.newNoDocument(dt,st.min()))}else $$1(at===1);else{const dt=this.Zt(et);dt!==at&&(this.Ht(et),this.Ut=this.Ut.add(et),(a=ui.instance)===null||a===void 0||a.notifyOnExistenceFilterMismatch({localCacheCount:dt,existenceFilterCount:s.Et.count}))}}}Xt(s){const a=new Map;this.Bt.forEach((lt,ht)=>{const dt=this.Yt(ht);if(dt){if(lt.current&&On(dt.target)){const ft=new ct(dt.target.path);this.Lt.get(ft)!==null||this.te(ht,ft)||this.Qt(ht,ft,on.newNoDocument(ft,s))}lt.St&&(a.set(ht,lt.Ct()),lt.xt())}});let et=ws();this.qt.forEach((lt,ht)=>{let dt=!0;ht.forEachWhile(ft=>{const vt=this.Yt(ft);return!vt||vt.purpose===2||(dt=!1,!1)}),dt&&(et=et.add(lt))}),this.Lt.forEach((lt,ht)=>ht.setReadTime(s));const at=new ai(s,a,this.Ut,this.Lt,et);return this.Lt=rs(),this.qt=mi(),this.Ut=new Ie(X$1),at}Gt(s,a){if(!this.Wt(s))return;const et=this.te(s,a.key)?2:0;this.jt(s).Nt(a.key,et),this.Lt=this.Lt.insert(a.key,a),this.qt=this.qt.insert(a.key,this.ee(a.key).add(s))}Qt(s,a,et){if(!this.Wt(s))return;const at=this.jt(s);this.te(s,a)?at.Nt(a,1):at.kt(a),this.qt=this.qt.insert(a,this.ee(a).delete(s)),et&&(this.Lt=this.Lt.insert(a,et))}removeTarget(s){this.Bt.delete(s)}Zt(s){const a=this.jt(s).Ct();return this.Ft.getRemoteKeysForTarget(s).size+a.addedDocuments.size-a.removedDocuments.size}Ot(s){this.jt(s).Ot()}jt(s){let a=this.Bt.get(s);return a||(a=new wi,this.Bt.set(s,a)),a}ee(s){let a=this.qt.get(s);return a||(a=new Ie(X$1),this.qt=this.qt.insert(s,a)),a}Wt(s){const a=this.Yt(s)!==null;return a||C$1("WatchChangeAggregator","Detected inactive target",s),a}Yt(s){const a=this.Bt.get(s);return a&&a.Vt?null:this.Ft.ne(s)}Ht(s){this.Bt.set(s,new wi),this.Ft.getRemoteKeysForTarget(s).forEach(a=>{this.Qt(s,a,null)})}te(s,a){return this.Ft.getRemoteKeysForTarget(s).has(a)}}function mi(){return new ge$1(ct.comparator)}function gi(){return new ge$1(ct.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pi=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Ii=(()=>({and:"AND",or:"OR"}))();class Ti{constructor(s,a){this.databaseId=s,this.useProto3Json=a}}function Ei(o,s){return o.useProto3Json?`${new Date(1e3*s.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+s.nanoseconds).slice(-9)}Z`:{seconds:""+s.seconds,nanos:s.nanoseconds}}function Ai(o,s){return o.useProto3Json?s.toBase64():s.toUint8Array()}function Ri(o,s){return Ei(o,s.toTimestamp())}function vi(o){return $$1(!!o),st.fromTimestamp(function(s){const a=Ve$1(s);return new nt(a.seconds,a.nanos)}(o))}function bi(o,s){return function(a){return new rt(["projects",a.projectId,"databases",a.database])}(o).child("documents").child(s).canonicalString()}function Pi(o){const s=rt.fromString(o);return $$1(Xi(s)),s}function Vi(o,s){return bi(o.databaseId,s.path)}function Si(o,s){const a=Pi(s);if(a.get(1)!==o.databaseId.projectId)throw new L$2(B$2.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+a.get(1)+" vs "+o.databaseId.projectId);if(a.get(3)!==o.databaseId.database)throw new L$2(B$2.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+a.get(3)+" vs "+o.databaseId.database);return new ct(Ni(a))}function Di(o,s){return bi(o.databaseId,s)}function Ci(o){const s=Pi(o);return s.length===4?rt.emptyPath():Ni(s)}function xi(o){return new rt(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function Ni(o){return $$1(o.length>4&&o.get(4)==="documents"),o.popFirst(5)}function ki(o,s,a){return{name:Vi(o,s),fields:a.value.mapValue.fields}}function Mi(o,s){let a;if("targetChange"in s){s.targetChange;const et=function(ft){return ft==="NO_CHANGE"?0:ft==="ADD"?1:ft==="REMOVE"?2:ft==="CURRENT"?3:ft==="RESET"?4:O$1()}(s.targetChange.targetChangeType||"NO_CHANGE"),at=s.targetChange.targetIds||[],lt=function(ft,vt){return ft.useProto3Json?($$1(vt===void 0||typeof vt=="string"),be$1.fromBase64String(vt||"")):($$1(vt===void 0||vt instanceof Uint8Array),be$1.fromUint8Array(vt||new Uint8Array))}(o,s.targetChange.resumeToken),ht=s.targetChange.cause,dt=ht&&function(ft){const vt=ft.code===void 0?B$2.UNKNOWN:oi(ft.code);return new L$2(vt,ft.message||"")}(ht);a=new di(et,at,lt,dt||null)}else if("documentChange"in s){s.documentChange;const et=s.documentChange;et.document,et.document.name,et.document.updateTime;const at=Si(o,et.document.name),lt=vi(et.document.updateTime),ht=et.document.createTime?vi(et.document.createTime):st.min(),dt=new sn({mapValue:{fields:et.document.fields}}),ft=on.newFoundDocument(at,lt,ht,dt),vt=et.targetIds||[],wt=et.removedTargetIds||[];a=new li(vt,wt,ft.key,ft)}else if("documentDelete"in s){s.documentDelete;const et=s.documentDelete;et.document;const at=Si(o,et.document),lt=et.readTime?vi(et.readTime):st.min(),ht=on.newNoDocument(at,lt),dt=et.removedTargetIds||[];a=new li([],dt,ht.key,ht)}else if("documentRemove"in s){s.documentRemove;const et=s.documentRemove;et.document;const at=Si(o,et.document),lt=et.removedTargetIds||[];a=new li([],lt,at,null)}else{if(!("filter"in s))return O$1();{s.filter;const et=s.filter;et.targetId;const at=et.count||0,lt=new ni(at),ht=et.targetId;a=new fi(ht,lt)}}return a}function Fi(o,s){let a;if(s instanceof Ks)a={update:ki(o,s.key,s.value)};else if(s instanceof Ws)a={delete:Vi(o,s.key)};else if(s instanceof Gs)a={update:ki(o,s.key,s.data),updateMask:Zi(s.fieldMask)};else{if(!(s instanceof Hs))return O$1();a={verify:Vi(o,s.key)}}return s.fieldTransforms.length>0&&(a.updateTransforms=s.fieldTransforms.map(et=>function(at,lt){const ht=lt.transform;if(ht instanceof Rs)return{fieldPath:lt.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(ht instanceof vs)return{fieldPath:lt.field.canonicalString(),appendMissingElements:{values:ht.elements}};if(ht instanceof Ps)return{fieldPath:lt.field.canonicalString(),removeAllFromArray:{values:ht.elements}};if(ht instanceof Ss)return{fieldPath:lt.field.canonicalString(),increment:ht._t};throw O$1()}(0,et))),s.precondition.isNone||(a.currentDocument=function(et,at){return at.updateTime!==void 0?{updateTime:Ri(et,at.updateTime)}:at.exists!==void 0?{exists:at.exists}:O$1()}(o,s.precondition)),a}function Li(o,s){return o&&o.length>0?($$1(s!==void 0),o.map(a=>function(et,at){let lt=et.updateTime?vi(et.updateTime):vi(at);return lt.isEqual(st.min())&&(lt=vi(at)),new ks(lt,et.transformResults||[])}(a,s))):[]}function qi(o,s){return{documents:[Di(o,s.path)]}}function Ui(o,s){const a={structuredQuery:{}},et=s.path;s.collectionGroup!==null?(a.parent=Di(o,et),a.structuredQuery.from=[{collectionId:s.collectionGroup,allDescendants:!0}]):(a.parent=Di(o,et.popLast()),a.structuredQuery.from=[{collectionId:et.lastSegment()}]);const at=function(ft){if(ft.length!==0)return Yi(wn.create(ft,"and"))}(s.filters);at&&(a.structuredQuery.where=at);const lt=function(ft){if(ft.length!==0)return ft.map(vt=>function(wt){return{field:Hi(wt.field),direction:zi(wt.dir)}}(vt))}(s.orderBy);lt&&(a.structuredQuery.orderBy=lt);const ht=function(ft,vt){return ft.useProto3Json||$t(vt)?vt:{value:vt}}(o,s.limit);var dt;return ht!==null&&(a.structuredQuery.limit=ht),s.startAt&&(a.structuredQuery.startAt={before:(dt=s.startAt).inclusive,values:dt.position}),s.endAt&&(a.structuredQuery.endAt=function(ft){return{before:!ft.inclusive,values:ft.position}}(s.endAt)),a}function Ki(o){let s=Ci(o.parent);const a=o.structuredQuery,et=a.from?a.from.length:0;let at=null;if(et>0){$$1(et===1);const wt=a.from[0];wt.allDescendants?at=wt.collectionId:s=s.child(wt.collectionId)}let lt=[];a.where&&(lt=function(wt){const Ct=Qi(wt);return Ct instanceof wn&&gn(Ct)?Ct.getFilters():[Ct]}(a.where));let ht=[];a.orderBy&&(ht=a.orderBy.map(wt=>function(Ct){return new hn(Ji(Ct.field),function(xt){switch(xt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ct.direction))}(wt)));let dt=null;a.limit&&(dt=function(wt){let Ct;return Ct=typeof wt=="object"?wt.value:wt,$t(Ct)?null:Ct}(a.limit));let ft=null;a.startAt&&(ft=function(wt){const Ct=!!wt.before,xt=wt.values||[];return new un(xt,Ct)}(a.startAt));let vt=null;return a.endAt&&(vt=function(wt){const Ct=!wt.before,xt=wt.values||[];return new un(xt,Ct)}(a.endAt)),Ln(s,at,ht,lt,dt,"F",ft,vt)}function Gi(o,s){const a=function(et,at){switch(at){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return O$1()}}(0,s.purpose);return a==null?null:{"goog-listen-tags":a}}function Qi(o){return o.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=Ji(s.unaryFilter.field);return dn.create(a,"==",{doubleValue:NaN});case"IS_NULL":const et=Ji(s.unaryFilter.field);return dn.create(et,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const at=Ji(s.unaryFilter.field);return dn.create(at,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const lt=Ji(s.unaryFilter.field);return dn.create(lt,"!=",{nullValue:"NULL_VALUE"});default:return O$1()}}(o):o.fieldFilter!==void 0?function(s){return dn.create(Ji(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O$1()}}(s.fieldFilter.op),s.fieldFilter.value)}(o):o.compositeFilter!==void 0?function(s){return wn.create(s.compositeFilter.filters.map(a=>Qi(a)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return O$1()}}(s.compositeFilter.op))}(o):O$1()}function zi(o){return yi[o]}function ji(o){return pi[o]}function Wi(o){return Ii[o]}function Hi(o){return{fieldPath:o.canonicalString()}}function Ji(o){return ut.fromServerFormat(o.fieldPath)}function Yi(o){return o instanceof dn?function(s){if(s.op==="=="){if(He$1(s.value))return{unaryFilter:{field:Hi(s.field),op:"IS_NAN"}};if(We(s.value))return{unaryFilter:{field:Hi(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(He$1(s.value))return{unaryFilter:{field:Hi(s.field),op:"IS_NOT_NAN"}};if(We(s.value))return{unaryFilter:{field:Hi(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hi(s.field),op:ji(s.op),value:s.value}}}(o):o instanceof wn?function(s){const a=s.getFilters().map(et=>Yi(et));return a.length===1?a[0]:{compositeFilter:{op:Wi(s.op),filters:a}}}(o):O$1()}function Zi(o){const s=[];return o.fields.forEach(a=>s.push(a.canonicalString())),{fieldPaths:s}}function Xi(o){return o.length>=4&&o.get(0)==="projects"&&o.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(s,a,et,at,lt=st.min(),ht=st.min(),dt=be$1.EMPTY_BYTE_STRING){this.target=s,this.targetId=a,this.purpose=et,this.sequenceNumber=at,this.snapshotVersion=lt,this.lastLimboFreeSnapshotVersion=ht,this.resumeToken=dt}withSequenceNumber(s){return new tr(this.target,this.targetId,this.purpose,s,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(s,a){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,a,this.lastLimboFreeSnapshotVersion,s)}withLastLimboFreeSnapshotVersion(s){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,s,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(s){this.se=s}}function hr(o){const s=Ki({parent:o.parent,structuredQuery:o.structuredQuery});return o.limitType==="LAST"?Hn(s,s.limit,"L"):s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.He=new Lr}addToCollectionParentIndex(s,a){return this.He.add(a),At.resolve()}getCollectionParents(s,a){return At.resolve(this.He.getEntries(a))}addFieldIndex(s,a){return At.resolve()}deleteFieldIndex(s,a){return At.resolve()}getDocumentsMatchingTarget(s,a){return At.resolve(null)}getIndexType(s,a){return At.resolve(0)}getFieldIndexes(s,a){return At.resolve([])}getNextCollectionGroupToUpdate(s){return At.resolve(null)}getMinOffset(s,a){return At.resolve(yt.min())}getMinOffsetFromCollectionGroup(s,a){return At.resolve(yt.min())}updateCollectionGroup(s,a,et){return At.resolve()}updateIndexEntries(s,a){return At.resolve()}}class Lr{constructor(){this.index={}}add(s){const a=s.lastSegment(),et=s.popLast(),at=this.index[a]||new Ie(rt.comparator),lt=!at.has(et);return this.index[a]=at.add(et),lt}has(s){const a=s.lastSegment(),et=s.popLast(),at=this.index[a];return at&&at.has(et)}getEntries(s){return(this.index[s]||new Ie(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(s){this.Rn=s}next(){return this.Rn+=2,this.Rn}static vn(){return new so(0)}static bn(){return new so(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(){this.changes=new ss(s=>s.toString(),(s,a)=>s.isEqual(a)),this.changesApplied=!1}addEntry(s){this.assertNotApplied(),this.changes.set(s.key,s)}removeEntry(s,a){this.assertNotApplied(),this.changes.set(s,on.newInvalidDocument(s).setReadTime(a))}getEntry(s,a){this.assertNotApplied();const et=this.changes.get(a);return et!==void 0?At.resolve(et):this.getFromCache(s,a)}getEntries(s,a){return this.getAllFromCache(s,a)}apply(s){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(s)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(s,a){this.overlayedDocument=s,this.mutatedFields=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(s,a,et,at){this.remoteDocumentCache=s,this.mutationQueue=a,this.documentOverlayCache=et,this.indexManager=at}getDocument(s,a){let et=null;return this.documentOverlayCache.getOverlay(s,a).next(at=>(et=at,this.remoteDocumentCache.getEntry(s,a))).next(at=>(et!==null&&Ls(et.mutation,at,Ae$1.empty(),nt.now()),at))}getDocuments(s,a){return this.remoteDocumentCache.getEntries(s,a).next(et=>this.getLocalViewOfDocuments(s,et,ws()).next(()=>et))}getLocalViewOfDocuments(s,a,et=ws()){const at=as();return this.populateOverlays(s,at,a).next(()=>this.computeViews(s,a,at,et).next(lt=>{let ht=us();return lt.forEach((dt,ft)=>{ht=ht.insert(dt,ft.overlayedDocument)}),ht}))}getOverlayedDocuments(s,a){const et=as();return this.populateOverlays(s,et,a).next(()=>this.computeViews(s,a,et,ws()))}populateOverlays(s,a,et){const at=[];return et.forEach(lt=>{a.has(lt)||at.push(lt)}),this.documentOverlayCache.getOverlays(s,at).next(lt=>{lt.forEach((ht,dt)=>{a.set(ht,dt)})})}computeViews(s,a,et,at){let lt=rs();const ht=ls(),dt=ls();return a.forEach((ft,vt)=>{const wt=et.get(vt.key);at.has(vt.key)&&(wt===void 0||wt.mutation instanceof Gs)?lt=lt.insert(vt.key,vt):wt!==void 0?(ht.set(vt.key,wt.mutation.getFieldMask()),Ls(wt.mutation,vt,wt.mutation.getFieldMask(),nt.now())):ht.set(vt.key,Ae$1.empty())}),this.recalculateAndSaveOverlays(s,lt).next(ft=>(ft.forEach((vt,wt)=>ht.set(vt,wt)),a.forEach((vt,wt)=>{var Ct;return dt.set(vt,new Ro(wt,(Ct=ht.get(vt))!==null&&Ct!==void 0?Ct:null))}),dt))}recalculateAndSaveOverlays(s,a){const et=ls();let at=new ge$1((ht,dt)=>ht-dt),lt=ws();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(s,a).next(ht=>{for(const dt of ht)dt.keys().forEach(ft=>{const vt=a.get(ft);if(vt===null)return;let wt=et.get(ft)||Ae$1.empty();wt=dt.applyToLocalView(vt,wt),et.set(ft,wt);const Ct=(at.get(dt.batchId)||ws()).add(ft);at=at.insert(dt.batchId,Ct)})}).next(()=>{const ht=[],dt=at.getReverseIterator();for(;dt.hasNext();){const ft=dt.getNext(),vt=ft.key,wt=ft.value,Ct=hs();wt.forEach(xt=>{if(!lt.has(xt)){const Pt=Fs(a.get(xt),et.get(xt));Pt!==null&&Ct.set(xt,Pt),lt=lt.add(xt)}}),ht.push(this.documentOverlayCache.saveOverlays(s,vt,Ct))}return At.waitFor(ht)}).next(()=>et)}recalculateAndSaveOverlaysForDocumentKeys(s,a){return this.remoteDocumentCache.getEntries(s,a).next(et=>this.recalculateAndSaveOverlays(s,et))}getDocumentsMatchingQuery(s,a,et){return function(at){return ct.isDocumentKey(at.path)&&at.collectionGroup===null&&at.filters.length===0}(a)?this.getDocumentsMatchingDocumentQuery(s,a.path):Qn(a)?this.getDocumentsMatchingCollectionGroupQuery(s,a,et):this.getDocumentsMatchingCollectionQuery(s,a,et)}getNextDocuments(s,a,et,at){return this.remoteDocumentCache.getAllFromCollectionGroup(s,a,et,at).next(lt=>{const ht=at-lt.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(s,a,et.largestBatchId,at-lt.size):At.resolve(as());let dt=-1,ft=lt;return ht.next(vt=>At.forEach(vt,(wt,Ct)=>(dt<Ct.largestBatchId&&(dt=Ct.largestBatchId),lt.get(wt)?At.resolve():this.remoteDocumentCache.getEntry(s,wt).next(xt=>{ft=ft.insert(wt,xt)}))).next(()=>this.populateOverlays(s,vt,lt)).next(()=>this.computeViews(s,ft,vt,ws())).next(wt=>({batchId:dt,changes:cs(wt)})))})}getDocumentsMatchingDocumentQuery(s,a){return this.getDocument(s,new ct(a)).next(et=>{let at=us();return et.isFoundDocument()&&(at=at.insert(et.key,et)),at})}getDocumentsMatchingCollectionGroupQuery(s,a,et){const at=a.collectionGroup;let lt=us();return this.indexManager.getCollectionParents(s,at).next(ht=>At.forEach(ht,dt=>{const ft=function(vt,wt){return new Bn(wt,null,vt.explicitOrderBy.slice(),vt.filters.slice(),vt.limit,vt.limitType,vt.startAt,vt.endAt)}(a,dt.child(at));return this.getDocumentsMatchingCollectionQuery(s,ft,et).next(vt=>{vt.forEach((wt,Ct)=>{lt=lt.insert(wt,Ct)})})}).next(()=>lt))}getDocumentsMatchingCollectionQuery(s,a,et){let at;return this.documentOverlayCache.getOverlaysForCollection(s,a.path,et.largestBatchId).next(lt=>(at=lt,this.remoteDocumentCache.getDocumentsMatchingQuery(s,a,et,at))).next(lt=>{at.forEach((dt,ft)=>{const vt=ft.getKey();lt.get(vt)===null&&(lt=lt.insert(vt,on.newInvalidDocument(vt)))});let ht=us();return lt.forEach((dt,ft)=>{const vt=at.get(dt);vt!==void 0&&Ls(vt.mutation,ft,Ae$1.empty(),nt.now()),Xn(a,ft)&&(ht=ht.insert(dt,ft))}),ht})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(s){this.serializer=s,this.Zn=new Map,this.Xn=new Map}getBundleMetadata(s,a){return At.resolve(this.Zn.get(a))}saveBundleMetadata(s,a){var et;return this.Zn.set(a.id,{id:(et=a).id,version:et.version,createTime:vi(et.createTime)}),At.resolve()}getNamedQuery(s,a){return At.resolve(this.Xn.get(a))}saveNamedQuery(s,a){return this.Xn.set(a.name,function(et){return{name:et.name,query:hr(et.bundledQuery),readTime:vi(et.readTime)}}(a)),At.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.overlays=new ge$1(ct.comparator),this.ts=new Map}getOverlay(s,a){return At.resolve(this.overlays.get(a))}getOverlays(s,a){const et=as();return At.forEach(a,at=>this.getOverlay(s,at).next(lt=>{lt!==null&&et.set(at,lt)})).next(()=>et)}saveOverlays(s,a,et){return et.forEach((at,lt)=>{this.re(s,a,lt)}),At.resolve()}removeOverlaysForBatchId(s,a,et){const at=this.ts.get(et);return at!==void 0&&(at.forEach(lt=>this.overlays=this.overlays.remove(lt)),this.ts.delete(et)),At.resolve()}getOverlaysForCollection(s,a,et){const at=as(),lt=a.length+1,ht=new ct(a.child("")),dt=this.overlays.getIteratorFrom(ht);for(;dt.hasNext();){const ft=dt.getNext().value,vt=ft.getKey();if(!a.isPrefixOf(vt.path))break;vt.path.length===lt&&ft.largestBatchId>et&&at.set(ft.getKey(),ft)}return At.resolve(at)}getOverlaysForCollectionGroup(s,a,et,at){let lt=new ge$1((vt,wt)=>vt-wt);const ht=this.overlays.getIterator();for(;ht.hasNext();){const vt=ht.getNext().value;if(vt.getKey().getCollectionGroup()===a&&vt.largestBatchId>et){let wt=lt.get(vt.largestBatchId);wt===null&&(wt=as(),lt=lt.insert(vt.largestBatchId,wt)),wt.set(vt.getKey(),vt)}}const dt=as(),ft=lt.getIterator();for(;ft.hasNext()&&(ft.getNext().value.forEach((vt,wt)=>dt.set(vt,wt)),!(dt.size()>=at)););return At.resolve(dt)}re(s,a,et){const at=this.overlays.get(et.key);if(at!==null){const ht=this.ts.get(at.largestBatchId).delete(et.key);this.ts.set(at.largestBatchId,ht)}this.overlays=this.overlays.insert(et.key,new Zs(a,et));let lt=this.ts.get(a);lt===void 0&&(lt=ws(),this.ts.set(a,lt)),this.ts.set(a,lt.add(et.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.es=new Ie(So.ns),this.ss=new Ie(So.rs)}isEmpty(){return this.es.isEmpty()}addReference(s,a){const et=new So(s,a);this.es=this.es.add(et),this.ss=this.ss.add(et)}os(s,a){s.forEach(et=>this.addReference(et,a))}removeReference(s,a){this.us(new So(s,a))}cs(s,a){s.forEach(et=>this.removeReference(et,a))}hs(s){const a=new ct(new rt([])),et=new So(a,s),at=new So(a,s+1),lt=[];return this.ss.forEachInRange([et,at],ht=>{this.us(ht),lt.push(ht.key)}),lt}ls(){this.es.forEach(s=>this.us(s))}us(s){this.es=this.es.delete(s),this.ss=this.ss.delete(s)}fs(s){const a=new ct(new rt([])),et=new So(a,s),at=new So(a,s+1);let lt=ws();return this.ss.forEachInRange([et,at],ht=>{lt=lt.add(ht.key)}),lt}containsKey(s){const a=new So(s,0),et=this.es.firstAfterOrEqual(a);return et!==null&&s.isEqual(et.key)}}class So{constructor(s,a){this.key=s,this.ds=a}static ns(s,a){return ct.comparator(s.key,a.key)||X$1(s.ds,a.ds)}static rs(s,a){return X$1(s.ds,a.ds)||ct.comparator(s.key,a.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(s,a){this.indexManager=s,this.referenceDelegate=a,this.mutationQueue=[],this.ws=1,this._s=new Ie(So.ns)}checkEmpty(s){return At.resolve(this.mutationQueue.length===0)}addMutationBatch(s,a,et,at){const lt=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const ht=new Js(lt,a,et,at);this.mutationQueue.push(ht);for(const dt of at)this._s=this._s.add(new So(dt.key,lt)),this.indexManager.addToCollectionParentIndex(s,dt.key.path.popLast());return At.resolve(ht)}lookupMutationBatch(s,a){return At.resolve(this.gs(a))}getNextMutationBatchAfterBatchId(s,a){const et=a+1,at=this.ys(et),lt=at<0?0:at;return At.resolve(this.mutationQueue.length>lt?this.mutationQueue[lt]:null)}getHighestUnacknowledgedBatchId(){return At.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(s){return At.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(s,a){const et=new So(a,0),at=new So(a,Number.POSITIVE_INFINITY),lt=[];return this._s.forEachInRange([et,at],ht=>{const dt=this.gs(ht.ds);lt.push(dt)}),At.resolve(lt)}getAllMutationBatchesAffectingDocumentKeys(s,a){let et=new Ie(X$1);return a.forEach(at=>{const lt=new So(at,0),ht=new So(at,Number.POSITIVE_INFINITY);this._s.forEachInRange([lt,ht],dt=>{et=et.add(dt.ds)})}),At.resolve(this.ps(et))}getAllMutationBatchesAffectingQuery(s,a){const et=a.path,at=et.length+1;let lt=et;ct.isDocumentKey(lt)||(lt=lt.child(""));const ht=new So(new ct(lt),0);let dt=new Ie(X$1);return this._s.forEachWhile(ft=>{const vt=ft.key.path;return!!et.isPrefixOf(vt)&&(vt.length===at&&(dt=dt.add(ft.ds)),!0)},ht),At.resolve(this.ps(dt))}ps(s){const a=[];return s.forEach(et=>{const at=this.gs(et);at!==null&&a.push(at)}),a}removeMutationBatch(s,a){$$1(this.Is(a.batchId,"removed")===0),this.mutationQueue.shift();let et=this._s;return At.forEach(a.mutations,at=>{const lt=new So(at.key,a.batchId);return et=et.delete(lt),this.referenceDelegate.markPotentiallyOrphaned(s,at.key)}).next(()=>{this._s=et})}En(s){}containsKey(s,a){const et=new So(a,0),at=this._s.firstAfterOrEqual(et);return At.resolve(a.isEqual(at&&at.key))}performConsistencyCheck(s){return this.mutationQueue.length,At.resolve()}Is(s,a){return this.ys(s)}ys(s){return this.mutationQueue.length===0?0:s-this.mutationQueue[0].batchId}gs(s){const a=this.ys(s);return a<0||a>=this.mutationQueue.length?null:this.mutationQueue[a]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(s){this.Ts=s,this.docs=new ge$1(ct.comparator),this.size=0}setIndexManager(s){this.indexManager=s}addEntry(s,a){const et=a.key,at=this.docs.get(et),lt=at?at.size:0,ht=this.Ts(a);return this.docs=this.docs.insert(et,{document:a.mutableCopy(),size:ht}),this.size+=ht-lt,this.indexManager.addToCollectionParentIndex(s,et.path.popLast())}removeEntry(s){const a=this.docs.get(s);a&&(this.docs=this.docs.remove(s),this.size-=a.size)}getEntry(s,a){const et=this.docs.get(a);return At.resolve(et?et.document.mutableCopy():on.newInvalidDocument(a))}getEntries(s,a){let et=rs();return a.forEach(at=>{const lt=this.docs.get(at);et=et.insert(at,lt?lt.document.mutableCopy():on.newInvalidDocument(at))}),At.resolve(et)}getDocumentsMatchingQuery(s,a,et,at){let lt=rs();const ht=a.path,dt=new ct(ht.child("")),ft=this.docs.getIteratorFrom(dt);for(;ft.hasNext();){const{key:vt,value:{document:wt}}=ft.getNext();if(!ht.isPrefixOf(vt.path))break;vt.path.length>ht.length+1||pt(gt(wt),et)<=0||(at.has(wt.key)||Xn(a,wt))&&(lt=lt.insert(wt.key,wt.mutableCopy()))}return At.resolve(lt)}getAllFromCollectionGroup(s,a,et,at){O$1()}Es(s,a){return At.forEach(this.docs,et=>a(et))}newChangeBuffer(s){return new xo(this)}getSize(s){return At.resolve(this.size)}}class xo extends _o{constructor(s){super(),this.Jn=s}applyChanges(s){const a=[];return this.changes.forEach((et,at)=>{at.isValidDocument()?a.push(this.Jn.addEntry(s,at)):this.Jn.removeEntry(et)}),At.waitFor(a)}getFromCache(s,a){return this.Jn.getEntry(s,a)}getAllFromCache(s,a){return this.Jn.getEntries(s,a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(s){this.persistence=s,this.As=new ss(a=>Nn(a),kn),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.Rs=0,this.vs=new Vo,this.targetCount=0,this.bs=so.vn()}forEachTarget(s,a){return this.As.forEach((et,at)=>a(at)),At.resolve()}getLastRemoteSnapshotVersion(s){return At.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(s){return At.resolve(this.Rs)}allocateTargetId(s){return this.highestTargetId=this.bs.next(),At.resolve(this.highestTargetId)}setTargetsMetadata(s,a,et){return et&&(this.lastRemoteSnapshotVersion=et),a>this.Rs&&(this.Rs=a),At.resolve()}Sn(s){this.As.set(s.target,s);const a=s.targetId;a>this.highestTargetId&&(this.bs=new so(a),this.highestTargetId=a),s.sequenceNumber>this.Rs&&(this.Rs=s.sequenceNumber)}addTargetData(s,a){return this.Sn(a),this.targetCount+=1,At.resolve()}updateTargetData(s,a){return this.Sn(a),At.resolve()}removeTargetData(s,a){return this.As.delete(a.target),this.vs.hs(a.targetId),this.targetCount-=1,At.resolve()}removeTargets(s,a,et){let at=0;const lt=[];return this.As.forEach((ht,dt)=>{dt.sequenceNumber<=a&&et.get(dt.targetId)===null&&(this.As.delete(ht),lt.push(this.removeMatchingKeysForTargetId(s,dt.targetId)),at++)}),At.waitFor(lt).next(()=>at)}getTargetCount(s){return At.resolve(this.targetCount)}getTargetData(s,a){const et=this.As.get(a)||null;return At.resolve(et)}addMatchingKeys(s,a,et){return this.vs.os(a,et),At.resolve()}removeMatchingKeys(s,a,et){this.vs.cs(a,et);const at=this.persistence.referenceDelegate,lt=[];return at&&a.forEach(ht=>{lt.push(at.markPotentiallyOrphaned(s,ht))}),At.waitFor(lt)}removeMatchingKeysForTargetId(s,a){return this.vs.hs(a),At.resolve()}getMatchingKeysForTargetId(s,a){const et=this.vs.fs(a);return At.resolve(et)}containsKey(s,a){return At.resolve(this.vs.containsKey(a))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(s,a){this.Ps={},this.overlays={},this.Vs=new Ot(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=s(this),this.Ds=new No(this),this.indexManager=new Br,this.remoteDocumentCache=function(et){return new Co(et)}(et=>this.referenceDelegate.Cs(et)),this.serializer=new er(a),this.xs=new bo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ss=!1,Promise.resolve()}get started(){return this.Ss}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(s){return this.indexManager}getDocumentOverlayCache(s){let a=this.overlays[s.toKey()];return a||(a=new Po,this.overlays[s.toKey()]=a),a}getMutationQueue(s,a){let et=this.Ps[s.toKey()];return et||(et=new Do(a,this.referenceDelegate),this.Ps[s.toKey()]=et),et}getTargetCache(){return this.Ds}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.xs}runTransaction(s,a,et){C$1("MemoryPersistence","Starting transaction:",s);const at=new Oo(this.Vs.next());return this.referenceDelegate.Ns(),et(at).next(lt=>this.referenceDelegate.ks(at).next(()=>lt)).toPromise().then(lt=>(at.raiseOnCommittedEvent(),lt))}Os(s,a){return At.or(Object.values(this.Ps).map(et=>()=>et.containsKey(s,a)))}}class Oo extends Tt{constructor(s){super(),this.currentSequenceNumber=s}}class $o{constructor(s){this.persistence=s,this.$s=new Vo,this.Ms=null}static Fs(s){return new $o(s)}get Bs(){if(this.Ms)return this.Ms;throw O$1()}addReference(s,a,et){return this.$s.addReference(et,a),this.Bs.delete(et.toString()),At.resolve()}removeReference(s,a,et){return this.$s.removeReference(et,a),this.Bs.add(et.toString()),At.resolve()}markPotentiallyOrphaned(s,a){return this.Bs.add(a.toString()),At.resolve()}removeTarget(s,a){this.$s.hs(a.targetId).forEach(at=>this.Bs.add(at.toString()));const et=this.persistence.getTargetCache();return et.getMatchingKeysForTargetId(s,a.targetId).next(at=>{at.forEach(lt=>this.Bs.add(lt.toString()))}).next(()=>et.removeTargetData(s,a))}Ns(){this.Ms=new Set}ks(s){const a=this.persistence.getRemoteDocumentCache().newChangeBuffer();return At.forEach(this.Bs,et=>{const at=ct.fromPath(et);return this.Ls(s,at).next(lt=>{lt||a.removeEntry(at,st.min())})}).next(()=>(this.Ms=null,a.apply(s)))}updateLimboDocument(s,a){return this.Ls(s,a).next(et=>{et?this.Bs.delete(a.toString()):this.Bs.add(a.toString())})}Cs(s){return 0}Ls(s,a){return At.or([()=>At.resolve(this.$s.containsKey(a)),()=>this.persistence.getTargetCache().containsKey(s,a),()=>this.persistence.Os(s,a)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(s,a,et,at){this.targetId=s,this.fromCache=a,this.Vi=et,this.Si=at}static Di(s,a){let et=ws(),at=ws();for(const lt of a.docChanges)switch(lt.type){case 0:et=et.add(lt.doc.key);break;case 1:at=at.add(lt.doc.key)}return new Go(s,a.fromCache,et,at)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(){this.Ci=!1}initialize(s,a){this.xi=s,this.indexManager=a,this.Ci=!0}getDocumentsMatchingQuery(s,a,et,at){return this.Ni(s,a).next(lt=>lt||this.ki(s,a,at,et)).next(lt=>lt||this.Oi(s,a))}Ni(s,a){if(Un(a))return At.resolve(null);let et=jn(a);return this.indexManager.getIndexType(s,et).next(at=>at===0?null:(a.limit!==null&&at===1&&(a=Hn(a,null,"F"),et=jn(a)),this.indexManager.getDocumentsMatchingTarget(s,et).next(lt=>{const ht=ws(...lt);return this.xi.getDocuments(s,ht).next(dt=>this.indexManager.getMinOffset(s,et).next(ft=>{const vt=this.$i(a,dt);return this.Mi(a,vt,ht,ft.readTime)?this.Ni(s,Hn(a,null,"F")):this.Fi(s,vt,a,ft)}))})))}ki(s,a,et,at){return Un(a)||at.isEqual(st.min())?this.Oi(s,a):this.xi.getDocuments(s,et).next(lt=>{const ht=this.$i(a,lt);return this.Mi(a,ht,et,at)?this.Oi(s,a):(S$2()<=LogLevel.DEBUG&&C$1("QueryEngine","Re-using previous result from %s to execute query: %s",at.toString(),Zn(a)),this.Fi(s,ht,a,mt(at,-1)))})}$i(s,a){let et=new Ie(es(s));return a.forEach((at,lt)=>{Xn(s,lt)&&(et=et.add(lt))}),et}Mi(s,a,et,at){if(s.limit===null)return!1;if(et.size!==a.size)return!0;const lt=s.limitType==="F"?a.last():a.first();return!!lt&&(lt.hasPendingWrites||lt.version.compareTo(at)>0)}Oi(s,a){return S$2()<=LogLevel.DEBUG&&C$1("QueryEngine","Using full collection scan to execute query:",Zn(a)),this.xi.getDocumentsMatchingQuery(s,a,yt.min())}Fi(s,a,et,at){return this.xi.getDocumentsMatchingQuery(s,et,at).next(lt=>(a.forEach(ht=>{lt=lt.insert(ht.key,ht)}),lt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(s,a,et,at){this.persistence=s,this.Bi=a,this.serializer=at,this.Li=new ge$1(X$1),this.qi=new ss(lt=>Nn(lt),kn),this.Ui=new Map,this.Ki=s.getRemoteDocumentCache(),this.Ds=s.getTargetCache(),this.xs=s.getBundleCache(),this.Gi(et)}Gi(s){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(s),this.indexManager=this.persistence.getIndexManager(s),this.mutationQueue=this.persistence.getMutationQueue(s,this.indexManager),this.localDocuments=new vo(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}collectGarbage(s){return this.persistence.runTransaction("Collect garbage","readwrite-primary",a=>s.collect(a,this.Li))}}function jo(o,s,a,et){return new zo(o,s,a,et)}async function Wo(o,s){const a=F$2(o);return await a.persistence.runTransaction("Handle user change","readonly",et=>{let at;return a.mutationQueue.getAllMutationBatches(et).next(lt=>(at=lt,a.Gi(s),a.mutationQueue.getAllMutationBatches(et))).next(lt=>{const ht=[],dt=[];let ft=ws();for(const vt of at){ht.push(vt.batchId);for(const wt of vt.mutations)ft=ft.add(wt.key)}for(const vt of lt){dt.push(vt.batchId);for(const wt of vt.mutations)ft=ft.add(wt.key)}return a.localDocuments.getDocuments(et,ft).next(vt=>({Qi:vt,removedBatchIds:ht,addedBatchIds:dt}))})})}function Ho(o,s){const a=F$2(o);return a.persistence.runTransaction("Acknowledge batch","readwrite-primary",et=>{const at=s.batch.keys(),lt=a.Ki.newChangeBuffer({trackRemovals:!0});return function(ht,dt,ft,vt){const wt=ft.batch,Ct=wt.keys();let xt=At.resolve();return Ct.forEach(Pt=>{xt=xt.next(()=>vt.getEntry(dt,Pt)).next(Rt=>{const _t=ft.docVersions.get(Pt);$$1(_t!==null),Rt.version.compareTo(_t)<0&&(wt.applyToRemoteDocument(Rt,ft),Rt.isValidDocument()&&(Rt.setReadTime(ft.commitVersion),vt.addEntry(Rt)))})}),xt.next(()=>ht.mutationQueue.removeMutationBatch(dt,wt))}(a,et,s,lt).next(()=>lt.apply(et)).next(()=>a.mutationQueue.performConsistencyCheck(et)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(et,at,s.batch.batchId)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(et,function(ht){let dt=ws();for(let ft=0;ft<ht.mutationResults.length;++ft)ht.mutationResults[ft].transformResults.length>0&&(dt=dt.add(ht.batch.mutations[ft].key));return dt}(s))).next(()=>a.localDocuments.getDocuments(et,at))})}function Jo(o){const s=F$2(o);return s.persistence.runTransaction("Get last remote snapshot version","readonly",a=>s.Ds.getLastRemoteSnapshotVersion(a))}function Yo(o,s){const a=F$2(o),et=s.snapshotVersion;let at=a.Li;return a.persistence.runTransaction("Apply remote event","readwrite-primary",lt=>{const ht=a.Ki.newChangeBuffer({trackRemovals:!0});at=a.Li;const dt=[];s.targetChanges.forEach((wt,Ct)=>{const xt=at.get(Ct);if(!xt)return;dt.push(a.Ds.removeMatchingKeys(lt,wt.removedDocuments,Ct).next(()=>a.Ds.addMatchingKeys(lt,wt.addedDocuments,Ct)));let Pt=xt.withSequenceNumber(lt.currentSequenceNumber);s.targetMismatches.has(Ct)?Pt=Pt.withResumeToken(be$1.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):wt.resumeToken.approximateByteSize()>0&&(Pt=Pt.withResumeToken(wt.resumeToken,et)),at=at.insert(Ct,Pt),function(Rt,_t,St){return Rt.resumeToken.approximateByteSize()===0||_t.snapshotVersion.toMicroseconds()-Rt.snapshotVersion.toMicroseconds()>=3e8?!0:St.addedDocuments.size+St.modifiedDocuments.size+St.removedDocuments.size>0}(xt,Pt,wt)&&dt.push(a.Ds.updateTargetData(lt,Pt))});let ft=rs(),vt=ws();if(s.documentUpdates.forEach(wt=>{s.resolvedLimboDocuments.has(wt)&&dt.push(a.persistence.referenceDelegate.updateLimboDocument(lt,wt))}),dt.push(Zo(lt,ht,s.documentUpdates).next(wt=>{ft=wt.zi,vt=wt.ji})),!et.isEqual(st.min())){const wt=a.Ds.getLastRemoteSnapshotVersion(lt).next(Ct=>a.Ds.setTargetsMetadata(lt,lt.currentSequenceNumber,et));dt.push(wt)}return At.waitFor(dt).next(()=>ht.apply(lt)).next(()=>a.localDocuments.getLocalViewOfDocuments(lt,ft,vt)).next(()=>ft)}).then(lt=>(a.Li=at,lt))}function Zo(o,s,a){let et=ws(),at=ws();return a.forEach(lt=>et=et.add(lt)),s.getEntries(o,et).next(lt=>{let ht=rs();return a.forEach((dt,ft)=>{const vt=lt.get(dt);ft.isFoundDocument()!==vt.isFoundDocument()&&(at=at.add(dt)),ft.isNoDocument()&&ft.version.isEqual(st.min())?(s.removeEntry(dt,ft.readTime),ht=ht.insert(dt,ft)):!vt.isValidDocument()||ft.version.compareTo(vt.version)>0||ft.version.compareTo(vt.version)===0&&vt.hasPendingWrites?(s.addEntry(ft),ht=ht.insert(dt,ft)):C$1("LocalStore","Ignoring outdated watch update for ",dt,". Current version:",vt.version," Watch version:",ft.version)}),{zi:ht,ji:at}})}function Xo(o,s){const a=F$2(o);return a.persistence.runTransaction("Get next mutation batch","readonly",et=>(s===void 0&&(s=-1),a.mutationQueue.getNextMutationBatchAfterBatchId(et,s)))}function tu(o,s){const a=F$2(o);return a.persistence.runTransaction("Allocate target","readwrite",et=>{let at;return a.Ds.getTargetData(et,s).next(lt=>lt?(at=lt,At.resolve(at)):a.Ds.allocateTargetId(et).next(ht=>(at=new tr(s,ht,0,et.currentSequenceNumber),a.Ds.addTargetData(et,at).next(()=>at))))}).then(et=>{const at=a.Li.get(et.targetId);return(at===null||et.snapshotVersion.compareTo(at.snapshotVersion)>0)&&(a.Li=a.Li.insert(et.targetId,et),a.qi.set(s,et.targetId)),et})}async function eu(o,s,a){const et=F$2(o),at=et.Li.get(s),lt=a?"readwrite":"readwrite-primary";try{a||await et.persistence.runTransaction("Release target",lt,ht=>et.persistence.referenceDelegate.removeTarget(ht,at))}catch(ht){if(!Vt(ht))throw ht;C$1("LocalStore",`Failed to update sequence numbers for target ${s}: ${ht}`)}et.Li=et.Li.remove(s),et.qi.delete(at.target)}function nu(o,s,a){const et=F$2(o);let at=st.min(),lt=ws();return et.persistence.runTransaction("Execute query","readonly",ht=>function(dt,ft,vt){const wt=F$2(dt),Ct=wt.qi.get(vt);return Ct!==void 0?At.resolve(wt.Li.get(Ct)):wt.Ds.getTargetData(ft,vt)}(et,ht,jn(s)).next(dt=>{if(dt)return at=dt.lastLimboFreeSnapshotVersion,et.Ds.getMatchingKeysForTargetId(ht,dt.targetId).next(ft=>{lt=ft})}).next(()=>et.Bi.getDocumentsMatchingQuery(ht,s,a?at:st.min(),a?lt:ws())).next(dt=>(ru(et,ts(s),dt),{documents:dt,Wi:lt})))}function ru(o,s,a){let et=o.Ui.get(s)||st.min();a.forEach((at,lt)=>{lt.readTime.compareTo(et)>0&&(et=lt.readTime)}),o.Ui.set(s,et)}class _u{constructor(){this.activeTargetIds=ms()}tr(s){this.activeTargetIds=this.activeTargetIds.add(s)}er(s){this.activeTargetIds=this.activeTargetIds.delete(s)}Xi(){const s={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(s)}}class gu{constructor(){this.Br=new _u,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(s){}updateMutationState(s,a,et){}addLocalQueryTarget(s){return this.Br.tr(s),this.Lr[s]||"not-current"}updateQueryState(s,a,et){this.Lr[s]=a}removeLocalQueryTarget(s){this.Br.er(s)}isLocalQueryTarget(s){return this.Br.activeTargetIds.has(s)}clearQueryState(s){delete this.Lr[s]}getAllActiveQueryTargets(){return this.Br.activeTargetIds}isActiveQueryTarget(s){return this.Br.activeTargetIds.has(s)}start(){return this.Br=new _u,Promise.resolve()}handleUserChange(s,a,et){}setOnlineState(s){}shutdown(){}writeSequenceNumber(s){}notifyBundleLoaded(s){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{qr(s){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this.Ur=()=>this.Kr(),this.Gr=()=>this.Qr(),this.zr=[],this.jr()}qr(s){this.zr.push(s)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}Kr(){C$1("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const s of this.zr)s(0)}Qr(){C$1("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const s of this.zr)s(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu=null;function Tu(){return Iu===null?Iu=268435456+Math.round(2147483648*Math.random()):Iu++,"0x"+Iu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(s){this.Wr=s.Wr,this.Hr=s.Hr}Jr(s){this.Yr=s}Zr(s){this.Xr=s}onMessage(s){this.eo=s}close(){this.Hr()}send(s){this.Wr(s)}no(){this.Yr()}so(s){this.Xr(s)}io(s){this.eo(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="WebChannelConnection";class vu extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const a=s.ssl?"https":"http";this.ro=a+"://"+s.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get uo(){return!1}co(s,a,et,at,lt){const ht=Tu(),dt=this.ao(s,a);C$1("RestConnection",`Sending RPC '${s}' ${ht}:`,dt,et);const ft={};return this.ho(ft,at,lt),this.lo(s,dt,ft,et).then(vt=>(C$1("RestConnection",`Received RPC '${s}' ${ht}: `,vt),vt),vt=>{throw N$2("RestConnection",`RPC '${s}' ${ht} failed with error: `,vt,"url: ",dt,"request:",et),vt})}fo(s,a,et,at,lt,ht){return this.co(s,a,et,at,lt)}ho(s,a,et){s["X-Goog-Api-Client"]="gl-js/ fire/"+P$2,s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((at,lt)=>s[lt]=at),et&&et.headers.forEach((at,lt)=>s[lt]=at)}ao(s,a){const et=Eu[s];return`${this.ro}/v1/${a}:${et}`}}{constructor(s){super(s),this.forceLongPolling=s.forceLongPolling,this.autoDetectLongPolling=s.autoDetectLongPolling,this.useFetchStreams=s.useFetchStreams}lo(s,a,et,at){const lt=Tu();return new Promise((ht,dt)=>{const ft=new XhrIo;ft.setWithCredentials(!0),ft.listenOnce(EventType.COMPLETE,()=>{try{switch(ft.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const wt=ft.getResponseJson();C$1(Ru,`XHR for RPC '${s}' ${lt} received:`,JSON.stringify(wt)),ht(wt);break;case ErrorCode$1.TIMEOUT:C$1(Ru,`RPC '${s}' ${lt} timed out`),dt(new L$2(B$2.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const Ct=ft.getStatus();if(C$1(Ru,`RPC '${s}' ${lt} failed with status:`,Ct,"response text:",ft.getResponseText()),Ct>0){let xt=ft.getResponseJson();Array.isArray(xt)&&(xt=xt[0]);const Pt=xt==null?void 0:xt.error;if(Pt&&Pt.status&&Pt.message){const Rt=function(_t){const St=_t.toLowerCase().replace(/_/g,"-");return Object.values(B$2).indexOf(St)>=0?St:B$2.UNKNOWN}(Pt.status);dt(new L$2(Rt,Pt.message))}else dt(new L$2(B$2.UNKNOWN,"Server responded with status "+ft.getStatus()))}else dt(new L$2(B$2.UNAVAILABLE,"Connection failed."));break;default:O$1()}}finally{C$1(Ru,`RPC '${s}' ${lt} completed.`)}});const vt=JSON.stringify(at);C$1(Ru,`RPC '${s}' ${lt} sending request:`,at),ft.send(a,"POST",vt,et,15)})}wo(s,a,et){const at=Tu(),lt=[this.ro,"/","google.firestore.v1.Firestore","/",s,"/channel"],ht=createWebChannelTransport(),dt=getStatEventTarget(),ft={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(ft.xmlHttpFactory=new FetchXmlHttpFactory({})),this.ho(ft.initMessageHeaders,a,et),ft.encodeInitMessageHeaders=!0;const vt=lt.join("");C$1(Ru,`Creating RPC '${s}' stream ${at}: ${vt}`,ft);const wt=ht.createWebChannel(vt,ft);let Ct=!1,xt=!1;const Pt=new Au({Wr:_t=>{xt?C$1(Ru,`Not sending because RPC '${s}' stream ${at} is closed:`,_t):(Ct||(C$1(Ru,`Opening RPC '${s}' stream ${at} transport.`),wt.open(),Ct=!0),C$1(Ru,`RPC '${s}' stream ${at} sending:`,_t),wt.send(_t))},Hr:()=>wt.close()}),Rt=(_t,St,bt)=>{_t.listen(St,Nt=>{try{bt(Nt)}catch(kt){setTimeout(()=>{throw kt},0)}})};return Rt(wt,WebChannel.EventType.OPEN,()=>{xt||C$1(Ru,`RPC '${s}' stream ${at} transport opened.`)}),Rt(wt,WebChannel.EventType.CLOSE,()=>{xt||(xt=!0,C$1(Ru,`RPC '${s}' stream ${at} transport closed`),Pt.so())}),Rt(wt,WebChannel.EventType.ERROR,_t=>{xt||(xt=!0,N$2(Ru,`RPC '${s}' stream ${at} transport errored:`,_t),Pt.so(new L$2(B$2.UNAVAILABLE,"The operation could not be completed")))}),Rt(wt,WebChannel.EventType.MESSAGE,_t=>{var St;if(!xt){const bt=_t.data[0];$$1(!!bt);const Nt=bt,kt=Nt.error||((St=Nt[0])===null||St===void 0?void 0:St.error);if(kt){C$1(Ru,`RPC '${s}' stream ${at} received error:`,kt);const Dt=kt.status;let jt=function(Yt){const Bt=si[Yt];if(Bt!==void 0)return oi(Bt)}(Dt),Wt=kt.message;jt===void 0&&(jt=B$2.INTERNAL,Wt="Unknown error status: "+Dt+" with message "+kt.message),xt=!0,Pt.so(new L$2(jt,Wt)),wt.close()}else C$1(Ru,`RPC '${s}' stream ${at} received:`,bt),Pt.io(bt)}}),Rt(dt,Event$1.STAT_EVENT,_t=>{_t.stat===Stat.PROXY?C$1(Ru,`RPC '${s}' stream ${at} detected buffering proxy`):_t.stat===Stat.NOPROXY&&C$1(Ru,`RPC '${s}' stream ${at} detected no buffering proxy`)}),setTimeout(()=>{Pt.no()},0),Pt}}function Pu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(o){return new Ti(o,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(s,a,et=1e3,at=1.5,lt=6e4){this.Ws=s,this.timerId=a,this._o=et,this.mo=at,this.yo=lt,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(s){this.cancel();const a=Math.floor(this.po+this.Ro()),et=Math.max(0,Date.now()-this.To),at=Math.max(0,a-et);at>0&&C$1("ExponentialBackoff",`Backing off for ${at} ms (base delay: ${this.po} ms, delay with jitter: ${a} ms, last attempt: ${et} ms ago)`),this.Io=this.Ws.enqueueAfterDelay(this.timerId,at,()=>(this.To=Date.now(),s())),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}vo(){this.Io!==null&&(this.Io.skipDelay(),this.Io=null)}cancel(){this.Io!==null&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(s,a,et,at,lt,ht,dt,ft){this.Ws=s,this.bo=et,this.Po=at,this.connection=lt,this.authCredentialsProvider=ht,this.appCheckCredentialsProvider=dt,this.listener=ft,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Su(s,a)}xo(){return this.state===1||this.state===5||this.No()}No(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.ko()}async stop(){this.xo()&&await this.close(0)}Oo(){this.state=0,this.Co.reset()}$o(){this.No()&&this.So===null&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,()=>this.Mo()))}Fo(s){this.Bo(),this.stream.send(s)}async Mo(){if(this.No())return this.close(0)}Bo(){this.So&&(this.So.cancel(),this.So=null)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}async close(s,a){this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,s!==4?this.Co.reset():a&&a.code===B$2.RESOURCE_EXHAUSTED?(x$2(a.toString()),x$2("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):a&&a.code===B$2.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.qo(),this.stream.close(),this.stream=null),this.state=s,await this.listener.Zr(a)}qo(){}auth(){this.state=1;const s=this.Uo(this.Vo),a=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([et,at])=>{this.Vo===a&&this.Ko(et,at)},et=>{s(()=>{const at=new L$2(B$2.UNKNOWN,"Fetching auth token failed: "+et.message);return this.Go(at)})})}Ko(s,a){const et=this.Uo(this.Vo);this.stream=this.Qo(s,a),this.stream.Jr(()=>{et(()=>(this.state=2,this.Do=this.Ws.enqueueAfterDelay(this.Po,1e4,()=>(this.No()&&(this.state=3),Promise.resolve())),this.listener.Jr()))}),this.stream.Zr(at=>{et(()=>this.Go(at))}),this.stream.onMessage(at=>{et(()=>this.onMessage(at))})}ko(){this.state=5,this.Co.Ao(async()=>{this.state=0,this.start()})}Go(s){return C$1("PersistentStream",`close with error: ${s}`),this.stream=null,this.close(4,s)}Uo(s){return a=>{this.Ws.enqueueAndForget(()=>this.Vo===s?a():(C$1("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Cu extends Du{constructor(s,a,et,at,lt,ht){super(s,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",a,et,at,ht),this.serializer=lt}Qo(s,a){return this.connection.wo("Listen",s,a)}onMessage(s){this.Co.reset();const a=Mi(this.serializer,s),et=function(at){if(!("targetChange"in at))return st.min();const lt=at.targetChange;return lt.targetIds&&lt.targetIds.length?st.min():lt.readTime?vi(lt.readTime):st.min()}(s);return this.listener.zo(a,et)}jo(s){const a={};a.database=xi(this.serializer),a.addTarget=function(at,lt){let ht;const dt=lt.target;return ht=On(dt)?{documents:qi(at,dt)}:{query:Ui(at,dt)},ht.targetId=lt.targetId,lt.resumeToken.approximateByteSize()>0?ht.resumeToken=Ai(at,lt.resumeToken):lt.snapshotVersion.compareTo(st.min())>0&&(ht.readTime=Ei(at,lt.snapshotVersion.toTimestamp())),ht}(this.serializer,s);const et=Gi(this.serializer,s);et&&(a.labels=et),this.Fo(a)}Wo(s){const a={};a.database=xi(this.serializer),a.removeTarget=s,this.Fo(a)}}class xu extends Du{constructor(s,a,et,at,lt,ht){super(s,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",a,et,at,ht),this.serializer=lt,this.Ho=!1}get Jo(){return this.Ho}start(){this.Ho=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Ho&&this.Yo([])}Qo(s,a){return this.connection.wo("Write",s,a)}onMessage(s){if($$1(!!s.streamToken),this.lastStreamToken=s.streamToken,this.Ho){this.Co.reset();const a=Li(s.writeResults,s.commitTime),et=vi(s.commitTime);return this.listener.Zo(et,a)}return $$1(!s.writeResults||s.writeResults.length===0),this.Ho=!0,this.listener.Xo()}tu(){const s={};s.database=xi(this.serializer),this.Fo(s)}Yo(s){const a={streamToken:this.lastStreamToken,writes:s.map(et=>Fi(this.serializer,et))};this.Fo(a)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends class{}{constructor(s,a,et,at){super(),this.authCredentials=s,this.appCheckCredentials=a,this.connection=et,this.serializer=at,this.eu=!1}nu(){if(this.eu)throw new L$2(B$2.FAILED_PRECONDITION,"The client has already been terminated.")}co(s,a,et){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([at,lt])=>this.connection.co(s,a,et,at,lt)).catch(at=>{throw at.name==="FirebaseError"?(at.code===B$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),at):new L$2(B$2.UNKNOWN,at.toString())})}fo(s,a,et,at){return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([lt,ht])=>this.connection.fo(s,a,et,lt,ht,at)).catch(lt=>{throw lt.name==="FirebaseError"?(lt.code===B$2.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),lt):new L$2(B$2.UNKNOWN,lt.toString())})}terminate(){this.eu=!0}}class Ou{constructor(s,a){this.asyncQueue=s,this.onlineStateHandler=a,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}ou(){this.su===0&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.iu=null,this.cu("Backend didn't respond within 10 seconds."),this.uu("Offline"),Promise.resolve())))}au(s){this.state==="Online"?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu(`Connection failed 1 times. Most recent error: ${s.toString()}`),this.uu("Offline")))}set(s){this.hu(),this.su=0,s==="Online"&&(this.ru=!1),this.uu(s)}uu(s){s!==this.state&&(this.state=s,this.onlineStateHandler(s))}cu(s){const a=`Could not reach Cloud Firestore backend. ${s}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ru?(x$2(a),this.ru=!1):C$1("OnlineStateTracker",a)}hu(){this.iu!==null&&(this.iu.cancel(),this.iu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(s,a,et,at,lt){this.localStore=s,this.datastore=a,this.asyncQueue=et,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=lt,this._u.qr(ht=>{et.enqueueAndForget(async()=>{Qu(this)&&(C$1("RemoteStore","Restarting streams for network reachability change."),await async function(dt){const ft=F$2(dt);ft.du.add(4),await Fu(ft),ft.mu.set("Unknown"),ft.du.delete(4),await Mu(ft)}(this))})}),this.mu=new Ou(et,at)}}async function Mu(o){if(Qu(o))for(const s of o.wu)await s(!0)}async function Fu(o){for(const s of o.wu)await s(!1)}function Bu(o,s){const a=F$2(o);a.fu.has(s.targetId)||(a.fu.set(s.targetId,s),Gu(a)?Ku(a):ac(a).No()&&qu(a,s))}function Lu(o,s){const a=F$2(o),et=ac(a);a.fu.delete(s),et.No()&&Uu(a,s),a.fu.size===0&&(et.No()?et.$o():Qu(a)&&a.mu.set("Unknown"))}function qu(o,s){o.gu.Ot(s.targetId),ac(o).jo(s)}function Uu(o,s){o.gu.Ot(s),ac(o).Wo(s)}function Ku(o){o.gu=new _i({getRemoteKeysForTarget:s=>o.remoteSyncer.getRemoteKeysForTarget(s),ne:s=>o.fu.get(s)||null}),ac(o).start(),o.mu.ou()}function Gu(o){return Qu(o)&&!ac(o).xo()&&o.fu.size>0}function Qu(o){return F$2(o).du.size===0}function zu(o){o.gu=void 0}async function ju(o){o.fu.forEach((s,a)=>{qu(o,s)})}async function Wu(o,s){zu(o),Gu(o)?(o.mu.au(s),Ku(o)):o.mu.set("Unknown")}async function Hu(o,s,a){if(o.mu.set("Online"),s instanceof di&&s.state===2&&s.cause)try{await async function(et,at){const lt=at.cause;for(const ht of at.targetIds)et.fu.has(ht)&&(await et.remoteSyncer.rejectListen(ht,lt),et.fu.delete(ht),et.gu.removeTarget(ht))}(o,s)}catch(et){C$1("RemoteStore","Failed to remove targets %s: %s ",s.targetIds.join(","),et),await Ju(o,et)}else if(s instanceof li?o.gu.Kt(s):s instanceof fi?o.gu.Jt(s):o.gu.zt(s),!a.isEqual(st.min()))try{const et=await Jo(o.localStore);a.compareTo(et)>=0&&await function(at,lt){const ht=at.gu.Xt(lt);return ht.targetChanges.forEach((dt,ft)=>{if(dt.resumeToken.approximateByteSize()>0){const vt=at.fu.get(ft);vt&&at.fu.set(ft,vt.withResumeToken(dt.resumeToken,lt))}}),ht.targetMismatches.forEach(dt=>{const ft=at.fu.get(dt);if(!ft)return;at.fu.set(dt,ft.withResumeToken(be$1.EMPTY_BYTE_STRING,ft.snapshotVersion)),Uu(at,dt);const vt=new tr(ft.target,dt,1,ft.sequenceNumber);qu(at,vt)}),at.remoteSyncer.applyRemoteEvent(ht)}(o,a)}catch(et){C$1("RemoteStore","Failed to raise snapshot:",et),await Ju(o,et)}}async function Ju(o,s,a){if(!Vt(s))throw s;o.du.add(1),await Fu(o),o.mu.set("Offline"),a||(a=()=>Jo(o.localStore)),o.asyncQueue.enqueueRetryable(async()=>{C$1("RemoteStore","Retrying IndexedDB access"),await a(),o.du.delete(1),await Mu(o)})}function Yu(o,s){return s().catch(a=>Ju(o,a,s))}async function Zu(o){const s=F$2(o),a=hc(s);let et=s.lu.length>0?s.lu[s.lu.length-1].batchId:-1;for(;Xu(s);)try{const at=await Xo(s.localStore,et);if(at===null){s.lu.length===0&&a.$o();break}et=at.batchId,tc(s,at)}catch(at){await Ju(s,at)}ec(s)&&nc(s)}function Xu(o){return Qu(o)&&o.lu.length<10}function tc(o,s){o.lu.push(s);const a=hc(o);a.No()&&a.Jo&&a.Yo(s.mutations)}function ec(o){return Qu(o)&&!hc(o).xo()&&o.lu.length>0}function nc(o){hc(o).start()}async function sc(o){hc(o).tu()}async function ic(o){const s=hc(o);for(const a of o.lu)s.Yo(a.mutations)}async function rc(o,s,a){const et=o.lu.shift(),at=Ys.from(et,s,a);await Yu(o,()=>o.remoteSyncer.applySuccessfulWrite(at)),await Zu(o)}async function oc(o,s){s&&hc(o).Jo&&await async function(a,et){if(at=et.code,ri(at)&&at!==B$2.ABORTED){const lt=a.lu.shift();hc(a).Oo(),await Yu(a,()=>a.remoteSyncer.rejectFailedWrite(lt.batchId,et)),await Zu(a)}var at}(o,s),ec(o)&&nc(o)}async function uc(o,s){const a=F$2(o);a.asyncQueue.verifyOperationInProgress(),C$1("RemoteStore","RemoteStore received new credentials");const et=Qu(a);a.du.add(3),await Fu(a),et&&a.mu.set("Unknown"),await a.remoteSyncer.handleCredentialChange(s),a.du.delete(3),await Mu(a)}async function cc(o,s){const a=F$2(o);s?(a.du.delete(2),await Mu(a)):s||(a.du.add(2),await Fu(a),a.mu.set("Unknown"))}function ac(o){return o.yu||(o.yu=function(s,a,et){const at=F$2(s);return at.nu(),new Cu(a,at.connection,at.authCredentials,at.appCheckCredentials,at.serializer,et)}(o.datastore,o.asyncQueue,{Jr:ju.bind(null,o),Zr:Wu.bind(null,o),zo:Hu.bind(null,o)}),o.wu.push(async s=>{s?(o.yu.Oo(),Gu(o)?Ku(o):o.mu.set("Unknown")):(await o.yu.stop(),zu(o))})),o.yu}function hc(o){return o.pu||(o.pu=function(s,a,et){const at=F$2(s);return at.nu(),new xu(a,at.connection,at.authCredentials,at.appCheckCredentials,at.serializer,et)}(o.datastore,o.asyncQueue,{Jr:sc.bind(null,o),Zr:oc.bind(null,o),Xo:ic.bind(null,o),Zo:rc.bind(null,o)}),o.wu.push(async s=>{s?(o.pu.Oo(),await Zu(o)):(await o.pu.stop(),o.lu.length>0&&(C$1("RemoteStore",`Stopping write stream with ${o.lu.length} pending writes`),o.lu=[]))})),o.pu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(s,a,et,at,lt){this.asyncQueue=s,this.timerId=a,this.targetTimeMs=et,this.op=at,this.removalCallback=lt,this.deferred=new q$4,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(ht=>{})}static createAndSchedule(s,a,et,at,lt){const ht=Date.now()+et,dt=new lc(s,a,ht,at,lt);return dt.start(et),dt}start(s){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),s)}skipDelay(){return this.handleDelayElapsed()}cancel(s){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L$2(B$2.CANCELLED,"Operation cancelled"+(s?": "+s:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(s=>this.deferred.resolve(s))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fc(o,s){if(x$2("AsyncQueue",`${s}: ${o}`),Vt(o))return new L$2(B$2.UNAVAILABLE,`${s}: ${o}`);throw o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(s){this.comparator=s?(a,et)=>s(a,et)||ct.comparator(a.key,et.key):(a,et)=>ct.comparator(a.key,et.key),this.keyedMap=us(),this.sortedSet=new ge$1(this.comparator)}static emptySet(s){return new dc(s.comparator)}has(s){return this.keyedMap.get(s)!=null}get(s){return this.keyedMap.get(s)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(s){const a=this.keyedMap.get(s);return a?this.sortedSet.indexOf(a):-1}get size(){return this.sortedSet.size}forEach(s){this.sortedSet.inorderTraversal((a,et)=>(s(a),!1))}add(s){const a=this.delete(s.key);return a.copy(a.keyedMap.insert(s.key,s),a.sortedSet.insert(s,null))}delete(s){const a=this.get(s);return a?this.copy(this.keyedMap.remove(s),this.sortedSet.remove(a)):this}isEqual(s){if(!(s instanceof dc)||this.size!==s.size)return!1;const a=this.sortedSet.getIterator(),et=s.sortedSet.getIterator();for(;a.hasNext();){const at=a.getNext().key,lt=et.getNext().key;if(!at.isEqual(lt))return!1}return!0}toString(){const s=[];return this.forEach(a=>{s.push(a.toString())}),s.length===0?"DocumentSet ()":`DocumentSet (
  `+s.join(`  
`)+`
)`}copy(s,a){const et=new dc;return et.comparator=this.comparator,et.keyedMap=s,et.sortedSet=a,et}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(){this.Iu=new ge$1(ct.comparator)}track(s){const a=s.doc.key,et=this.Iu.get(a);et?s.type!==0&&et.type===3?this.Iu=this.Iu.insert(a,s):s.type===3&&et.type!==1?this.Iu=this.Iu.insert(a,{type:et.type,doc:s.doc}):s.type===2&&et.type===2?this.Iu=this.Iu.insert(a,{type:2,doc:s.doc}):s.type===2&&et.type===0?this.Iu=this.Iu.insert(a,{type:0,doc:s.doc}):s.type===1&&et.type===0?this.Iu=this.Iu.remove(a):s.type===1&&et.type===2?this.Iu=this.Iu.insert(a,{type:1,doc:et.doc}):s.type===0&&et.type===1?this.Iu=this.Iu.insert(a,{type:2,doc:s.doc}):O$1():this.Iu=this.Iu.insert(a,s)}Tu(){const s=[];return this.Iu.inorderTraversal((a,et)=>{s.push(et)}),s}}class _c{constructor(s,a,et,at,lt,ht,dt,ft,vt){this.query=s,this.docs=a,this.oldDocs=et,this.docChanges=at,this.mutatedKeys=lt,this.fromCache=ht,this.syncStateChanged=dt,this.excludesMetadataChanges=ft,this.hasCachedResults=vt}static fromInitialDocuments(s,a,et,at,lt){const ht=[];return a.forEach(dt=>{ht.push({type:0,doc:dt})}),new _c(s,a,dc.emptySet(a),ht,et,at,!0,!1,lt)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(s){if(!(this.fromCache===s.fromCache&&this.hasCachedResults===s.hasCachedResults&&this.syncStateChanged===s.syncStateChanged&&this.mutatedKeys.isEqual(s.mutatedKeys)&&Jn(this.query,s.query)&&this.docs.isEqual(s.docs)&&this.oldDocs.isEqual(s.oldDocs)))return!1;const a=this.docChanges,et=s.docChanges;if(a.length!==et.length)return!1;for(let at=0;at<a.length;at++)if(a[at].type!==et[at].type||!a[at].doc.isEqual(et[at].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this.Eu=void 0,this.listeners=[]}}class gc{constructor(){this.queries=new ss(s=>Yn(s),Jn),this.onlineState="Unknown",this.Au=new Set}}async function yc(o,s){const a=F$2(o),et=s.query;let at=!1,lt=a.queries.get(et);if(lt||(at=!0,lt=new mc),at)try{lt.Eu=await a.onListen(et)}catch(ht){const dt=fc(ht,`Initialization of query '${Zn(s.query)}' failed`);return void s.onError(dt)}a.queries.set(et,lt),lt.listeners.push(s),s.Ru(a.onlineState),lt.Eu&&s.vu(lt.Eu)&&Ec(a)}async function pc(o,s){const a=F$2(o),et=s.query;let at=!1;const lt=a.queries.get(et);if(lt){const ht=lt.listeners.indexOf(s);ht>=0&&(lt.listeners.splice(ht,1),at=lt.listeners.length===0)}if(at)return a.queries.delete(et),a.onUnlisten(et)}function Ic(o,s){const a=F$2(o);let et=!1;for(const at of s){const lt=at.query,ht=a.queries.get(lt);if(ht){for(const dt of ht.listeners)dt.vu(at)&&(et=!0);ht.Eu=at}}et&&Ec(a)}function Tc(o,s,a){const et=F$2(o),at=et.queries.get(s);if(at)for(const lt of at.listeners)lt.onError(a);et.queries.delete(s)}function Ec(o){o.Au.forEach(s=>{s.next()})}class Ac{constructor(s,a,et){this.query=s,this.bu=a,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=et||{}}vu(s){if(!this.options.includeMetadataChanges){const et=[];for(const at of s.docChanges)at.type!==3&&et.push(at);s=new _c(s.query,s.docs,s.oldDocs,et,s.mutatedKeys,s.fromCache,s.syncStateChanged,!0,s.hasCachedResults)}let a=!1;return this.Pu?this.Su(s)&&(this.bu.next(s),a=!0):this.Du(s,this.onlineState)&&(this.Cu(s),a=!0),this.Vu=s,a}onError(s){this.bu.error(s)}Ru(s){this.onlineState=s;let a=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,s)&&(this.Cu(this.Vu),a=!0),a}Du(s,a){if(!s.fromCache)return!0;const et=a!=="Offline";return(!this.options.xu||!et)&&(!s.docs.isEmpty()||s.hasCachedResults||a==="Offline")}Su(s){if(s.docChanges.length>0)return!0;const a=this.Vu&&this.Vu.hasPendingWrites!==s.hasPendingWrites;return!(!s.syncStateChanged&&!a)&&this.options.includeMetadataChanges===!0}Cu(s){s=_c.fromInitialDocuments(s.query,s.docs,s.mutatedKeys,s.fromCache,s.hasCachedResults),this.Pu=!0,this.bu.next(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(s){this.key=s}}class Sc{constructor(s){this.key=s}}class Dc{constructor(s,a){this.query=s,this.Lu=a,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=ws(),this.mutatedKeys=ws(),this.Ku=es(s),this.Gu=new dc(this.Ku)}get Qu(){return this.Lu}zu(s,a){const et=a?a.ju:new wc,at=a?a.Gu:this.Gu;let lt=a?a.mutatedKeys:this.mutatedKeys,ht=at,dt=!1;const ft=this.query.limitType==="F"&&at.size===this.query.limit?at.last():null,vt=this.query.limitType==="L"&&at.size===this.query.limit?at.first():null;if(s.inorderTraversal((wt,Ct)=>{const xt=at.get(wt),Pt=Xn(this.query,Ct)?Ct:null,Rt=!!xt&&this.mutatedKeys.has(xt.key),_t=!!Pt&&(Pt.hasLocalMutations||this.mutatedKeys.has(Pt.key)&&Pt.hasCommittedMutations);let St=!1;xt&&Pt?xt.data.isEqual(Pt.data)?Rt!==_t&&(et.track({type:3,doc:Pt}),St=!0):this.Wu(xt,Pt)||(et.track({type:2,doc:Pt}),St=!0,(ft&&this.Ku(Pt,ft)>0||vt&&this.Ku(Pt,vt)<0)&&(dt=!0)):!xt&&Pt?(et.track({type:0,doc:Pt}),St=!0):xt&&!Pt&&(et.track({type:1,doc:xt}),St=!0,(ft||vt)&&(dt=!0)),St&&(Pt?(ht=ht.add(Pt),lt=_t?lt.add(wt):lt.delete(wt)):(ht=ht.delete(wt),lt=lt.delete(wt)))}),this.query.limit!==null)for(;ht.size>this.query.limit;){const wt=this.query.limitType==="F"?ht.last():ht.first();ht=ht.delete(wt.key),lt=lt.delete(wt.key),et.track({type:1,doc:wt})}return{Gu:ht,ju:et,Mi:dt,mutatedKeys:lt}}Wu(s,a){return s.hasLocalMutations&&a.hasCommittedMutations&&!a.hasLocalMutations}applyChanges(s,a,et){const at=this.Gu;this.Gu=s.Gu,this.mutatedKeys=s.mutatedKeys;const lt=s.ju.Tu();lt.sort((vt,wt)=>function(Ct,xt){const Pt=Rt=>{switch(Rt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O$1()}};return Pt(Ct)-Pt(xt)}(vt.type,wt.type)||this.Ku(vt.doc,wt.doc)),this.Hu(et);const ht=a?this.Ju():[],dt=this.Uu.size===0&&this.current?1:0,ft=dt!==this.qu;return this.qu=dt,lt.length!==0||ft?{snapshot:new _c(this.query,s.Gu,at,lt,s.mutatedKeys,dt===0,ft,!1,!!et&&et.resumeToken.approximateByteSize()>0),Yu:ht}:{Yu:ht}}Ru(s){return this.current&&s==="Offline"?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new wc,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}Zu(s){return!this.Lu.has(s)&&!!this.Gu.has(s)&&!this.Gu.get(s).hasLocalMutations}Hu(s){s&&(s.addedDocuments.forEach(a=>this.Lu=this.Lu.add(a)),s.modifiedDocuments.forEach(a=>{}),s.removedDocuments.forEach(a=>this.Lu=this.Lu.delete(a)),this.current=s.current)}Ju(){if(!this.current)return[];const s=this.Uu;this.Uu=ws(),this.Gu.forEach(et=>{this.Zu(et.key)&&(this.Uu=this.Uu.add(et.key))});const a=[];return s.forEach(et=>{this.Uu.has(et)||a.push(new Sc(et))}),this.Uu.forEach(et=>{s.has(et)||a.push(new Vc(et))}),a}Xu(s){this.Lu=s.Wi,this.Uu=ws();const a=this.zu(s.documents);return this.applyChanges(a,!0)}tc(){return _c.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,this.qu===0,this.hasCachedResults)}}class Cc{constructor(s,a,et){this.query=s,this.targetId=a,this.view=et}}class xc{constructor(s){this.key=s,this.ec=!1}}class Nc{constructor(s,a,et,at,lt,ht){this.localStore=s,this.remoteStore=a,this.eventManager=et,this.sharedClientState=at,this.currentUser=lt,this.maxConcurrentLimboResolutions=ht,this.nc={},this.sc=new ss(dt=>Yn(dt),Jn),this.ic=new Map,this.rc=new Set,this.oc=new ge$1(ct.comparator),this.uc=new Map,this.cc=new Vo,this.ac={},this.hc=new Map,this.lc=so.bn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return this.fc===!0}}async function kc(o,s){const a=aa(o);let et,at;const lt=a.sc.get(s);if(lt)et=lt.targetId,a.sharedClientState.addLocalQueryTarget(et),at=lt.view.tc();else{const ht=await tu(a.localStore,jn(s));a.isPrimaryClient&&Bu(a.remoteStore,ht);const dt=a.sharedClientState.addLocalQueryTarget(ht.targetId);et=ht.targetId,at=await Oc(a,s,et,dt==="current",ht.resumeToken)}return at}async function Oc(o,s,a,et,at){o.dc=(Ct,xt,Pt)=>async function(Rt,_t,St,bt){let Nt=_t.view.zu(St);Nt.Mi&&(Nt=await nu(Rt.localStore,_t.query,!1).then(({documents:jt})=>_t.view.zu(jt,Nt)));const kt=bt&&bt.targetChanges.get(_t.targetId),Dt=_t.view.applyChanges(Nt,Rt.isPrimaryClient,kt);return Wc(Rt,_t.targetId,Dt.Yu),Dt.snapshot}(o,Ct,xt,Pt);const lt=await nu(o.localStore,s,!0),ht=new Dc(s,lt.Wi),dt=ht.zu(lt.documents),ft=hi.createSynthesizedTargetChangeForCurrentChange(a,et&&o.onlineState!=="Offline",at),vt=ht.applyChanges(dt,o.isPrimaryClient,ft);Wc(o,a,vt.Yu);const wt=new Cc(s,a,ht);return o.sc.set(s,wt),o.ic.has(a)?o.ic.get(a).push(s):o.ic.set(a,[s]),vt.snapshot}async function $c(o,s){const a=F$2(o),et=a.sc.get(s),at=a.ic.get(et.targetId);if(at.length>1)return a.ic.set(et.targetId,at.filter(lt=>!Jn(lt,s))),void a.sc.delete(s);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(et.targetId),a.sharedClientState.isActiveQueryTarget(et.targetId)||await eu(a.localStore,et.targetId,!1).then(()=>{a.sharedClientState.clearQueryState(et.targetId),Lu(a.remoteStore,et.targetId),zc(a,et.targetId)}).catch(Et)):(zc(a,et.targetId),await eu(a.localStore,et.targetId,!0))}async function Mc(o,s,a){const et=ha(o);try{const at=await function(lt,ht){const dt=F$2(lt),ft=nt.now(),vt=ht.reduce((xt,Pt)=>xt.add(Pt.key),ws());let wt,Ct;return dt.persistence.runTransaction("Locally write mutations","readwrite",xt=>{let Pt=rs(),Rt=ws();return dt.Ki.getEntries(xt,vt).next(_t=>{Pt=_t,Pt.forEach((St,bt)=>{bt.isValidDocument()||(Rt=Rt.add(St))})}).next(()=>dt.localDocuments.getOverlayedDocuments(xt,Pt)).next(_t=>{wt=_t;const St=[];for(const bt of ht){const Nt=qs(bt,wt.get(bt.key).overlayedDocument);Nt!=null&&St.push(new Gs(bt.key,Nt,rn(Nt.value.mapValue),Os.exists(!0)))}return dt.mutationQueue.addMutationBatch(xt,ft,St,ht)}).next(_t=>{Ct=_t;const St=_t.applyToLocalDocumentSet(wt,Rt);return dt.documentOverlayCache.saveOverlays(xt,_t.batchId,St)})}).then(()=>({batchId:Ct.batchId,changes:cs(wt)}))}(et.localStore,s);et.sharedClientState.addPendingMutation(at.batchId),function(lt,ht,dt){let ft=lt.ac[lt.currentUser.toKey()];ft||(ft=new ge$1(X$1)),ft=ft.insert(ht,dt),lt.ac[lt.currentUser.toKey()]=ft}(et,at.batchId,a),await Yc(et,at.changes),await Zu(et.remoteStore)}catch(at){const lt=fc(at,"Failed to persist write");a.reject(lt)}}async function Fc(o,s){const a=F$2(o);try{const et=await Yo(a.localStore,s);s.targetChanges.forEach((at,lt)=>{const ht=a.uc.get(lt);ht&&($$1(at.addedDocuments.size+at.modifiedDocuments.size+at.removedDocuments.size<=1),at.addedDocuments.size>0?ht.ec=!0:at.modifiedDocuments.size>0?$$1(ht.ec):at.removedDocuments.size>0&&($$1(ht.ec),ht.ec=!1))}),await Yc(a,et,s)}catch(et){await Et(et)}}function Bc(o,s,a){const et=F$2(o);if(et.isPrimaryClient&&a===0||!et.isPrimaryClient&&a===1){const at=[];et.sc.forEach((lt,ht)=>{const dt=ht.view.Ru(s);dt.snapshot&&at.push(dt.snapshot)}),function(lt,ht){const dt=F$2(lt);dt.onlineState=ht;let ft=!1;dt.queries.forEach((vt,wt)=>{for(const Ct of wt.listeners)Ct.Ru(ht)&&(ft=!0)}),ft&&Ec(dt)}(et.eventManager,s),at.length&&et.nc.zo(at),et.onlineState=s,et.isPrimaryClient&&et.sharedClientState.setOnlineState(s)}}async function Lc(o,s,a){const et=F$2(o);et.sharedClientState.updateQueryState(s,"rejected",a);const at=et.uc.get(s),lt=at&&at.key;if(lt){let ht=new ge$1(ct.comparator);ht=ht.insert(lt,on.newNoDocument(lt,st.min()));const dt=ws().add(lt),ft=new ai(st.min(),new Map,new Ie(X$1),ht,dt);await Fc(et,ft),et.oc=et.oc.remove(lt),et.uc.delete(s),Jc(et)}else await eu(et.localStore,s,!1).then(()=>zc(et,s,a)).catch(Et)}async function qc(o,s){const a=F$2(o),et=s.batch.batchId;try{const at=await Ho(a.localStore,s);Qc(a,et,null),Gc(a,et),a.sharedClientState.updateMutationState(et,"acknowledged"),await Yc(a,at)}catch(at){await Et(at)}}async function Uc(o,s,a){const et=F$2(o);try{const at=await function(lt,ht){const dt=F$2(lt);return dt.persistence.runTransaction("Reject batch","readwrite-primary",ft=>{let vt;return dt.mutationQueue.lookupMutationBatch(ft,ht).next(wt=>($$1(wt!==null),vt=wt.keys(),dt.mutationQueue.removeMutationBatch(ft,wt))).next(()=>dt.mutationQueue.performConsistencyCheck(ft)).next(()=>dt.documentOverlayCache.removeOverlaysForBatchId(ft,vt,ht)).next(()=>dt.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ft,vt)).next(()=>dt.localDocuments.getDocuments(ft,vt))})}(et.localStore,s);Qc(et,s,a),Gc(et,s),et.sharedClientState.updateMutationState(s,"rejected",a),await Yc(et,at)}catch(at){await Et(at)}}function Gc(o,s){(o.hc.get(s)||[]).forEach(a=>{a.resolve()}),o.hc.delete(s)}function Qc(o,s,a){const et=F$2(o);let at=et.ac[et.currentUser.toKey()];if(at){const lt=at.get(s);lt&&(a?lt.reject(a):lt.resolve(),at=at.remove(s)),et.ac[et.currentUser.toKey()]=at}}function zc(o,s,a=null){o.sharedClientState.removeLocalQueryTarget(s);for(const et of o.ic.get(s))o.sc.delete(et),a&&o.nc.wc(et,a);o.ic.delete(s),o.isPrimaryClient&&o.cc.hs(s).forEach(et=>{o.cc.containsKey(et)||jc(o,et)})}function jc(o,s){o.rc.delete(s.path.canonicalString());const a=o.oc.get(s);a!==null&&(Lu(o.remoteStore,a),o.oc=o.oc.remove(s),o.uc.delete(a),Jc(o))}function Wc(o,s,a){for(const et of a)et instanceof Vc?(o.cc.addReference(et.key,s),Hc(o,et)):et instanceof Sc?(C$1("SyncEngine","Document no longer in limbo: "+et.key),o.cc.removeReference(et.key,s),o.cc.containsKey(et.key)||jc(o,et.key)):O$1()}function Hc(o,s){const a=s.key,et=a.path.canonicalString();o.oc.get(a)||o.rc.has(et)||(C$1("SyncEngine","New document in limbo: "+a),o.rc.add(et),Jc(o))}function Jc(o){for(;o.rc.size>0&&o.oc.size<o.maxConcurrentLimboResolutions;){const s=o.rc.values().next().value;o.rc.delete(s);const a=new ct(rt.fromString(s)),et=o.lc.next();o.uc.set(et,new xc(a)),o.oc=o.oc.insert(a,et),Bu(o.remoteStore,new tr(jn(qn(a.path)),et,2,Ot.ct))}}async function Yc(o,s,a){const et=F$2(o),at=[],lt=[],ht=[];et.sc.isEmpty()||(et.sc.forEach((dt,ft)=>{ht.push(et.dc(ft,s,a).then(vt=>{if((vt||a)&&et.isPrimaryClient&&et.sharedClientState.updateQueryState(ft.targetId,vt!=null&&vt.fromCache?"not-current":"current"),vt){at.push(vt);const wt=Go.Di(ft.targetId,vt);lt.push(wt)}}))}),await Promise.all(ht),et.nc.zo(at),await async function(dt,ft){const vt=F$2(dt);try{await vt.persistence.runTransaction("notifyLocalViewChanges","readwrite",wt=>At.forEach(ft,Ct=>At.forEach(Ct.Vi,xt=>vt.persistence.referenceDelegate.addReference(wt,Ct.targetId,xt)).next(()=>At.forEach(Ct.Si,xt=>vt.persistence.referenceDelegate.removeReference(wt,Ct.targetId,xt)))))}catch(wt){if(!Vt(wt))throw wt;C$1("LocalStore","Failed to update sequence numbers: "+wt)}for(const wt of ft){const Ct=wt.targetId;if(!wt.fromCache){const xt=vt.Li.get(Ct),Pt=xt.snapshotVersion,Rt=xt.withLastLimboFreeSnapshotVersion(Pt);vt.Li=vt.Li.insert(Ct,Rt)}}}(et.localStore,lt))}async function Zc(o,s){const a=F$2(o);if(!a.currentUser.isEqual(s)){C$1("SyncEngine","User change. New user:",s.toKey());const et=await Wo(a.localStore,s);a.currentUser=s,function(at,lt){at.hc.forEach(ht=>{ht.forEach(dt=>{dt.reject(new L$2(B$2.CANCELLED,lt))})}),at.hc.clear()}(a,"'waitForPendingWrites' promise is rejected due to a user change."),a.sharedClientState.handleUserChange(s,et.removedBatchIds,et.addedBatchIds),await Yc(a,et.Qi)}}function Xc(o,s){const a=F$2(o),et=a.uc.get(s);if(et&&et.ec)return ws().add(et.key);{let at=ws();const lt=a.ic.get(s);if(!lt)return at;for(const ht of lt){const dt=a.sc.get(ht);at=at.unionWith(dt.view.Qu)}return at}}function aa(o){const s=F$2(o);return s.remoteStore.remoteSyncer.applyRemoteEvent=Fc.bind(null,s),s.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xc.bind(null,s),s.remoteStore.remoteSyncer.rejectListen=Lc.bind(null,s),s.nc.zo=Ic.bind(null,s.eventManager),s.nc.wc=Tc.bind(null,s.eventManager),s}function ha(o){const s=F$2(o);return s.remoteStore.remoteSyncer.applySuccessfulWrite=qc.bind(null,s),s.remoteStore.remoteSyncer.rejectFailedWrite=Uc.bind(null,s),s}class fa{constructor(){this.synchronizeTabs=!1}async initialize(s){this.serializer=Vu(s.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(s),this.persistence=this.createPersistence(s),await this.persistence.start(),this.localStore=this.createLocalStore(s),this.gcScheduler=this.createGarbageCollectionScheduler(s,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(s,this.localStore)}createGarbageCollectionScheduler(s,a){return null}createIndexBackfillerScheduler(s,a){return null}createLocalStore(s){return jo(this.persistence,new Qo,s.initialUser,this.serializer)}createPersistence(s){return new ko($o.Fs,this.serializer)}createSharedClientState(s){return new gu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _a{async initialize(s,a){this.localStore||(this.localStore=s.localStore,this.sharedClientState=s.sharedClientState,this.datastore=this.createDatastore(a),this.remoteStore=this.createRemoteStore(a),this.eventManager=this.createEventManager(a),this.syncEngine=this.createSyncEngine(a,!s.synchronizeTabs),this.sharedClientState.onlineStateHandler=et=>Bc(this.syncEngine,et,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zc.bind(null,this.syncEngine),await cc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(s){return new gc}createDatastore(s){const a=Vu(s.databaseInfo.databaseId),et=(at=s.databaseInfo,new vu(at));var at;return function(lt,ht,dt,ft){return new Nu(lt,ht,dt,ft)}(s.authCredentials,s.appCheckCredentials,et,a)}createRemoteStore(s){return a=this.localStore,et=this.datastore,at=s.asyncQueue,lt=dt=>Bc(this.syncEngine,dt,0),ht=pu.D()?new pu:new yu,new $u(a,et,at,lt,ht);var a,et,at,lt,ht}createSyncEngine(s,a){return function(et,at,lt,ht,dt,ft,vt){const wt=new Nc(et,at,lt,ht,dt,ft);return vt&&(wt.fc=!0),wt}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,s.initialUser,s.maxConcurrentLimboResolutions,a)}terminate(){return async function(s){const a=F$2(s);C$1("RemoteStore","RemoteStore shutting down."),a.du.add(5),await Fu(a),a._u.shutdown(),a.mu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(s){this.observer=s,this.muted=!1}next(s){this.observer.next&&this.gc(this.observer.next,s)}error(s){this.observer.error?this.gc(this.observer.error,s):x$2("Uncaught Error in snapshot listener:",s.toString())}yc(){this.muted=!0}gc(s,a){this.muted||setTimeout(()=>{this.muted||s(a)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(s,a,et,at){this.authCredentials=s,this.appCheckCredentials=a,this.asyncQueue=et,this.databaseInfo=at,this.user=b$4.UNAUTHENTICATED,this.clientId=Z$1.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(et,async lt=>{C$1("FirestoreClient","Received user=",lt.uid),await this.authCredentialListener(lt),this.user=lt}),this.appCheckCredentials.start(et,lt=>(C$1("FirestoreClient","Received new app check token=",lt),this.appCheckCredentialListener(lt,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(s){this.authCredentialListener=s}setAppCheckTokenChangeListener(s){this.appCheckCredentialListener=s}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new L$2(B$2.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const s=new q$4;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),s.resolve()}catch(a){const et=fc(a,"Failed to shutdown persistence");s.reject(et)}}),s.promise}}async function Ea(o,s){o.asyncQueue.verifyOperationInProgress(),C$1("FirestoreClient","Initializing OfflineComponentProvider");const a=await o.getConfiguration();await s.initialize(a);let et=a.initialUser;o.setCredentialChangeListener(async at=>{et.isEqual(at)||(await Wo(s.localStore,at),et=at)}),s.persistence.setDatabaseDeletedListener(()=>o.terminate()),o._offlineComponents=s}async function Aa(o,s){o.asyncQueue.verifyOperationInProgress();const a=await va(o);C$1("FirestoreClient","Initializing OnlineComponentProvider");const et=await o.getConfiguration();await s.initialize(a,et),o.setCredentialChangeListener(at=>uc(s.remoteStore,at)),o.setAppCheckTokenChangeListener((at,lt)=>uc(s.remoteStore,lt)),o._onlineComponents=s}function Ra(o){return o.name==="FirebaseError"?o.code===B$2.FAILED_PRECONDITION||o.code===B$2.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}async function va(o){if(!o._offlineComponents)if(o._uninitializedComponentsProvider){C$1("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ea(o,o._uninitializedComponentsProvider._offline)}catch(s){const a=s;if(!Ra(a))throw a;N$2("Error using user provided cache. Falling back to memory cache: "+a),await Ea(o,new fa)}}else C$1("FirestoreClient","Using default OfflineComponentProvider"),await Ea(o,new fa);return o._offlineComponents}async function ba(o){return o._onlineComponents||(o._uninitializedComponentsProvider?(C$1("FirestoreClient","Using user provided OnlineComponentProvider"),await Aa(o,o._uninitializedComponentsProvider._online)):(C$1("FirestoreClient","Using default OnlineComponentProvider"),await Aa(o,new _a))),o._onlineComponents}function Da(o){return ba(o).then(s=>s.syncEngine)}async function xa(o){const s=await ba(o),a=s.eventManager;return a.onListen=kc.bind(null,s.syncEngine),a.onUnlisten=$c.bind(null,s.syncEngine),a}function $a(o,s,a={}){const et=new q$4;return o.asyncQueue.enqueueAndForget(async()=>function(at,lt,ht,dt,ft){const vt=new ga({next:Ct=>{lt.enqueueAndForget(()=>pc(at,wt));const xt=Ct.docs.has(ht);!xt&&Ct.fromCache?ft.reject(new L$2(B$2.UNAVAILABLE,"Failed to get document because the client is offline.")):xt&&Ct.fromCache&&dt&&dt.source==="server"?ft.reject(new L$2(B$2.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ft.resolve(Ct)},error:Ct=>ft.reject(Ct)}),wt=new Ac(qn(ht.path),vt,{includeMetadataChanges:!0,xu:!0});return yc(at,wt)}(await xa(o),o.asyncQueue,s,a,et)),et.promise}function Fa(o,s,a={}){const et=new q$4;return o.asyncQueue.enqueueAndForget(async()=>function(at,lt,ht,dt,ft){const vt=new ga({next:Ct=>{lt.enqueueAndForget(()=>pc(at,wt)),Ct.fromCache&&dt.source==="server"?ft.reject(new L$2(B$2.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ft.resolve(Ct)},error:Ct=>ft.reject(Ct)}),wt=new Ac(ht,vt,{includeMetadataChanges:!0,xu:!0});return yc(at,wt)}(await xa(o),o.asyncQueue,s,a,et)),et.promise}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ka=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(o,s,a){if(!a)throw new L$2(B$2.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${s}.`)}function Qa(o,s,a,et){if(s===!0&&et===!0)throw new L$2(B$2.INVALID_ARGUMENT,`${o} and ${a} cannot be used together.`)}function za(o){if(!ct.isDocumentKey(o))throw new L$2(B$2.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function ja(o){if(ct.isDocumentKey(o))throw new L$2(B$2.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function Wa(o){if(o===void 0)return"undefined";if(o===null)return"null";if(typeof o=="string")return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if(typeof o=="number"||typeof o=="boolean")return""+o;if(typeof o=="object"){if(o instanceof Array)return"an array";{const s=function(a){return a.constructor?a.constructor.name:null}(o);return s?`a custom ${s} object`:"an object"}}return typeof o=="function"?"a function":O$1()}function Ha(o,s){if("_delegate"in o&&(o=o._delegate),!(o instanceof s)){if(s.name===o.constructor.name)throw new L$2(B$2.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const a=Wa(o);throw new L$2(B$2.INVALID_ARGUMENT,`Expected type '${s.name}', but it was: ${a}`)}}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(s){var a;if(s.host===void 0){if(s.ssl!==void 0)throw new L$2(B$2.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=s.host,this.ssl=(a=s.ssl)===null||a===void 0||a;if(this.credentials=s.credentials,this.ignoreUndefinedProperties=!!s.ignoreUndefinedProperties,this.cache=s.localCache,s.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(s.cacheSizeBytes!==-1&&s.cacheSizeBytes<1048576)throw new L$2(B$2.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=s.cacheSizeBytes}this.experimentalForceLongPolling=!!s.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!s.experimentalAutoDetectLongPolling,this.useFetchStreams=!!s.useFetchStreams,Qa("experimentalForceLongPolling",s.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",s.experimentalAutoDetectLongPolling)}isEqual(s){return this.host===s.host&&this.ssl===s.ssl&&this.credentials===s.credentials&&this.cacheSizeBytes===s.cacheSizeBytes&&this.experimentalForceLongPolling===s.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===s.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===s.ignoreUndefinedProperties&&this.useFetchStreams===s.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(s,a,et,at){this._authCredentials=s,this._appCheckCredentials=a,this._databaseId=et,this._app=at,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ya({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new L$2(B$2.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(s){if(this._settingsFrozen)throw new L$2(B$2.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ya(s),s.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new K$1;switch(a.type){case"firstParty":return new j$1(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new L$2(B$2.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(s.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const a=Ka.get(s);a&&(C$1("ComponentProvider","Removing Datastore"),Ka.delete(s),a.terminate())}(this),Promise.resolve()}}function Xa(o,s,a,et={}){var at;const lt=(o=Ha(o,Za))._getSettings();if(lt.host!=="firestore.googleapis.com"&&lt.host!==s&&N$2("Host has been set in both settings() and useEmulator(), emulator host will be used"),o._setSettings(Object.assign(Object.assign({},lt),{host:`${s}:${a}`,ssl:!1})),et.mockUserToken){let ht,dt;if(typeof et.mockUserToken=="string")ht=et.mockUserToken,dt=b$4.MOCK_USER;else{ht=createMockUserToken(et.mockUserToken,(at=o._app)===null||at===void 0?void 0:at.options.projectId);const ft=et.mockUserToken.sub||et.mockUserToken.user_id;if(!ft)throw new L$2(B$2.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");dt=new b$4(ft)}o._authCredentials=new G$1(new U$1(ht,dt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(s,a,et){this.converter=a,this._key=et,this.type="document",this.firestore=s}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nh(this.firestore,this.converter,this._key.path.popLast())}withConverter(s){return new th(this.firestore,s,this._key)}}class eh{constructor(s,a,et){this.converter=a,this._query=et,this.type="query",this.firestore=s}withConverter(s){return new eh(this.firestore,s,this._query)}}class nh extends eh{constructor(s,a,et){super(s,a,qn(et)),this._path=et,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const s=this._path.popLast();return s.isEmpty()?null:new th(this.firestore,null,new ct(s))}withConverter(s){return new nh(this.firestore,s,this._path)}}function sh(o,s,...a){if(o=getModularInstance(o),Ga("collection","path",s),o instanceof Za){const et=rt.fromString(s,...a);return ja(et),new nh(o,null,et)}{if(!(o instanceof th||o instanceof nh))throw new L$2(B$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const et=o._path.child(rt.fromString(s,...a));return ja(et),new nh(o.firestore,null,et)}}function rh(o,s,...a){if(o=getModularInstance(o),arguments.length===1&&(s=Z$1.A()),Ga("doc","path",s),o instanceof Za){const et=rt.fromString(s,...a);return za(et),new th(o,null,new ct(et))}{if(!(o instanceof th||o instanceof nh))throw new L$2(B$2.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const et=o._path.child(rt.fromString(s,...a));return za(et),new th(o.firestore,o instanceof nh?o.converter:null,new ct(et))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Su(this,"async_queue_retry"),this.qc=()=>{const a=Pu();a&&C$1("AsyncQueue","Visibility state changed to "+a.visibilityState),this.Co.vo()};const s=Pu();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.qc)}get isShuttingDown(){return this.Oc}enqueueAndForget(s){this.enqueue(s)}enqueueAndForgetEvenWhileRestricted(s){this.Uc(),this.Kc(s)}enterRestrictedMode(s){if(!this.Oc){this.Oc=!0,this.Bc=s||!1;const a=Pu();a&&typeof a.removeEventListener=="function"&&a.removeEventListener("visibilitychange",this.qc)}}enqueue(s){if(this.Uc(),this.Oc)return new Promise(()=>{});const a=new q$4;return this.Kc(()=>this.Oc&&this.Bc?Promise.resolve():(s().then(a.resolve,a.reject),a.promise)).then(()=>a.promise)}enqueueRetryable(s){this.enqueueAndForget(()=>(this.kc.push(s),this.Gc()))}async Gc(){if(this.kc.length!==0){try{await this.kc[0](),this.kc.shift(),this.Co.reset()}catch(s){if(!Vt(s))throw s;C$1("AsyncQueue","Operation failed with retryable error: "+s)}this.kc.length>0&&this.Co.Ao(()=>this.Gc())}}Kc(s){const a=this.Nc.then(()=>(this.Fc=!0,s().catch(et=>{this.Mc=et,this.Fc=!1;const at=function(lt){let ht=lt.message||"";return lt.stack&&(ht=lt.stack.includes(lt.message)?lt.stack:lt.message+`
`+lt.stack),ht}(et);throw x$2("INTERNAL UNHANDLED ERROR: ",at),et}).then(et=>(this.Fc=!1,et))));return this.Nc=a,a}enqueueAfterDelay(s,a,et){this.Uc(),this.Lc.indexOf(s)>-1&&(a=0);const at=lc.createAndSchedule(this,s,a,et,lt=>this.Qc(lt));return this.$c.push(at),at}Uc(){this.Mc&&O$1()}verifyOperationInProgress(){}async zc(){let s;do s=this.Nc,await s;while(s!==this.Nc)}jc(s){for(const a of this.$c)if(a.timerId===s)return!0;return!1}Wc(s){return this.zc().then(()=>{this.$c.sort((a,et)=>a.targetTimeMs-et.targetTimeMs);for(const a of this.$c)if(a.skipDelay(),s!=="all"&&a.timerId===s)break;return this.zc()})}Hc(s){this.Lc.push(s)}Qc(s){const a=this.$c.indexOf(s);this.$c.splice(a,1)}}class fh extends Za{constructor(s,a,et,at){super(s,a,et,at),this.type="firestore",this._queue=new ch,this._persistenceKey=(at==null?void 0:at.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||mh(this),this._firestoreClient.terminate()}}function wh(o,s){const a=typeof o=="object"?o:getApp(),et=typeof o=="string"?o:s||"(default)",at=_getProvider(a,"firestore").getImmediate({identifier:et});if(!at._initialized){const lt=getDefaultEmulatorHostnameAndPort("firestore");lt&&Xa(at,...lt)}return at}function _h(o){return o._firestoreClient||mh(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function mh(o){var s,a,et;const at=o._freezeSettings(),lt=function(ht,dt,ft,vt){return new ke$1(ht,dt,ft,vt.host,vt.ssl,vt.experimentalForceLongPolling,vt.experimentalAutoDetectLongPolling,vt.useFetchStreams)}(o._databaseId,((s=o._app)===null||s===void 0?void 0:s.options.appId)||"",o._persistenceKey,at);o._firestoreClient=new Ta(o._authCredentials,o._appCheckCredentials,o._queue,lt),!((a=at.cache)===null||a===void 0)&&a._offlineComponentProvider&&(!((et=at.cache)===null||et===void 0)&&et._onlineComponentProvider)&&(o._firestoreClient._uninitializedComponentsProvider={_offlineKind:at.cache.kind,_offline:at.cache._offlineComponentProvider,_online:at.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(s){this._byteString=s}static fromBase64String(s){try{return new Dh(be$1.fromBase64String(s))}catch(a){throw new L$2(B$2.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+a)}}static fromUint8Array(s){return new Dh(be$1.fromUint8Array(s))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(s){return this._byteString.isEqual(s._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(...s){for(let a=0;a<s.length;++a)if(s[a].length===0)throw new L$2(B$2.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(s)}isEqual(s){return this._internalPath.isEqual(s._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(s){this._methodName=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(s,a){if(!isFinite(s)||s<-90||s>90)throw new L$2(B$2.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+s);if(!isFinite(a)||a<-180||a>180)throw new L$2(B$2.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+a);this._lat=s,this._long=a}get latitude(){return this._lat}get longitude(){return this._long}isEqual(s){return this._lat===s._lat&&this._long===s._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(s){return X$1(this._lat,s._lat)||X$1(this._long,s._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=/^__.*__$/;class $h{constructor(s,a,et){this.data=s,this.fieldMask=a,this.fieldTransforms=et}toMutation(s,a){return this.fieldMask!==null?new Gs(s,this.data,this.fieldMask,a,this.fieldTransforms):new Ks(s,this.data,a,this.fieldTransforms)}}class Mh{constructor(s,a,et){this.data=s,this.fieldMask=a,this.fieldTransforms=et}toMutation(s,a){return new Gs(s,this.data,this.fieldMask,a,this.fieldTransforms)}}function Fh(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O$1()}}class Bh{constructor(s,a,et,at,lt,ht){this.settings=s,this.databaseId=a,this.serializer=et,this.ignoreUndefinedProperties=at,lt===void 0&&this.Jc(),this.fieldTransforms=lt||[],this.fieldMask=ht||[]}get path(){return this.settings.path}get Yc(){return this.settings.Yc}Zc(s){return new Bh(Object.assign(Object.assign({},this.settings),s),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Xc(s){var a;const et=(a=this.path)===null||a===void 0?void 0:a.child(s),at=this.Zc({path:et,ta:!1});return at.ea(s),at}na(s){var a;const et=(a=this.path)===null||a===void 0?void 0:a.child(s),at=this.Zc({path:et,ta:!1});return at.Jc(),at}sa(s){return this.Zc({path:void 0,ta:!0})}ia(s){return rl(s,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}contains(s){return this.fieldMask.find(a=>s.isPrefixOf(a))!==void 0||this.fieldTransforms.find(a=>s.isPrefixOf(a.field))!==void 0}Jc(){if(this.path)for(let s=0;s<this.path.length;s++)this.ea(this.path.get(s))}ea(s){if(s.length===0)throw this.ia("Document fields must not be empty");if(Fh(this.Yc)&&Oh.test(s))throw this.ia('Document fields cannot begin and end with "__"')}}class Lh{constructor(s,a,et){this.databaseId=s,this.ignoreUndefinedProperties=a,this.serializer=et||Vu(s)}ua(s,a,et,at=!1){return new Bh({Yc:s,methodName:a,oa:et,path:ut.emptyPath(),ta:!1,ra:at},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qh(o){const s=o._freezeSettings(),a=Vu(o._databaseId);return new Lh(o._databaseId,!!s.ignoreUndefinedProperties,a)}function Uh(o,s,a,et,at,lt={}){const ht=o.ua(lt.merge||lt.mergeFields?2:0,s,a,at);el("Data must be an object, but it was:",ht,et);const dt=Xh(et,ht);let ft,vt;if(lt.merge)ft=new Ae$1(ht.fieldMask),vt=ht.fieldTransforms;else if(lt.mergeFields){const wt=[];for(const Ct of lt.mergeFields){const xt=nl(s,Ct,a);if(!ht.contains(xt))throw new L$2(B$2.INVALID_ARGUMENT,`Field '${xt}' is specified in your field mask but missing from your input data.`);ol(wt,xt)||wt.push(xt)}ft=new Ae$1(wt),vt=ht.fieldTransforms.filter(Ct=>ft.covers(Ct.field))}else ft=null,vt=ht.fieldTransforms;return new $h(new sn(dt),ft,vt)}class Kh extends Nh{_toFieldTransform(s){if(s.Yc!==2)throw s.Yc===1?s.ia(`${this._methodName}() can only appear at the top level of your update data`):s.ia(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return s.fieldMask.push(s.path),null}isEqual(s){return s instanceof Kh}}function Gh(o,s,a){return new Bh({Yc:3,oa:s.settings.oa,methodName:o._methodName,ta:a},s.databaseId,s.serializer,s.ignoreUndefinedProperties)}class zh extends Nh{constructor(s,a){super(s),this.ca=a}_toFieldTransform(s){const a=Gh(this,s,!0),et=this.ca.map(lt=>Zh(lt,a)),at=new vs(et);return new xs(s.path,at)}isEqual(s){return this===s}}class jh extends Nh{constructor(s,a){super(s),this.ca=a}_toFieldTransform(s){const a=Gh(this,s,!0),et=this.ca.map(lt=>Zh(lt,a)),at=new Ps(et);return new xs(s.path,at)}isEqual(s){return this===s}}function Hh(o,s,a,et){const at=o.ua(1,s,a);el("Data must be an object, but it was:",at,et);const lt=[],ht=sn.empty();_e$1(et,(ft,vt)=>{const wt=il(s,ft,a);vt=getModularInstance(vt);const Ct=at.na(wt);if(vt instanceof Kh)lt.push(wt);else{const xt=Zh(vt,Ct);xt!=null&&(lt.push(wt),ht.set(wt,xt))}});const dt=new Ae$1(lt);return new Mh(ht,dt,at.fieldTransforms)}function Jh(o,s,a,et,at,lt){const ht=o.ua(1,s,a),dt=[nl(s,et,a)],ft=[at];if(lt.length%2!=0)throw new L$2(B$2.INVALID_ARGUMENT,`Function ${s}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let xt=0;xt<lt.length;xt+=2)dt.push(nl(s,lt[xt])),ft.push(lt[xt+1]);const vt=[],wt=sn.empty();for(let xt=dt.length-1;xt>=0;--xt)if(!ol(vt,dt[xt])){const Pt=dt[xt];let Rt=ft[xt];Rt=getModularInstance(Rt);const _t=ht.na(Pt);if(Rt instanceof Kh)vt.push(Pt);else{const St=Zh(Rt,_t);St!=null&&(vt.push(Pt),wt.set(Pt,St))}}const Ct=new Ae$1(vt);return new Mh(wt,Ct,ht.fieldTransforms)}function Yh(o,s,a,et=!1){return Zh(a,o.ua(et?4:3,s))}function Zh(o,s){if(tl(o=getModularInstance(o)))return el("Unsupported field value:",s,o),Xh(o,s);if(o instanceof Nh)return function(a,et){if(!Fh(et.Yc))throw et.ia(`${a._methodName}() can only be used with update() and set()`);if(!et.path)throw et.ia(`${a._methodName}() is not currently supported inside arrays`);const at=a._toFieldTransform(et);at&&et.fieldTransforms.push(at)}(o,s),null;if(o===void 0&&s.ignoreUndefinedProperties)return null;if(s.path&&s.fieldMask.push(s.path),o instanceof Array){if(s.settings.ta&&s.Yc!==4)throw s.ia("Nested arrays are not supported");return function(a,et){const at=[];let lt=0;for(const ht of a){let dt=Zh(ht,et.sa(lt));dt==null&&(dt={nullValue:"NULL_VALUE"}),at.push(dt),lt++}return{arrayValue:{values:at}}}(o,s)}return function(a,et){if((a=getModularInstance(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return ps(et.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const at=nt.fromDate(a);return{timestampValue:Ei(et.serializer,at)}}if(a instanceof nt){const at=new nt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ei(et.serializer,at)}}if(a instanceof kh)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Dh)return{bytesValue:Ai(et.serializer,a._byteString)};if(a instanceof th){const at=et.databaseId,lt=a.firestore._databaseId;if(!lt.isEqual(at))throw et.ia(`Document reference is for database ${lt.projectId}/${lt.database} but should be for database ${at.projectId}/${at.database}`);return{referenceValue:bi(a.firestore._databaseId||et.databaseId,a._key.path)}}throw et.ia(`Unsupported field value: ${Wa(a)}`)}(o,s)}function Xh(o,s){const a={};return me$1(o)?s.path&&s.path.length>0&&s.fieldMask.push(s.path):_e$1(o,(et,at)=>{const lt=Zh(at,s.Xc(et));lt!=null&&(a[et]=lt)}),{mapValue:{fields:a}}}function tl(o){return!(typeof o!="object"||o===null||o instanceof Array||o instanceof Date||o instanceof nt||o instanceof kh||o instanceof Dh||o instanceof th||o instanceof Nh)}function el(o,s,a){if(!tl(a)||!function(et){return typeof et=="object"&&et!==null&&(Object.getPrototypeOf(et)===Object.prototype||Object.getPrototypeOf(et)===null)}(a)){const et=Wa(a);throw et==="an object"?s.ia(o+" a custom object"):s.ia(o+" "+et)}}function nl(o,s,a){if((s=getModularInstance(s))instanceof Ch)return s._internalPath;if(typeof s=="string")return il(o,s);throw rl("Field path arguments must be of type string or ",o,!1,void 0,a)}const sl=new RegExp("[~\\*/\\[\\]]");function il(o,s,a){if(s.search(sl)>=0)throw rl(`Invalid field path (${s}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,a);try{return new Ch(...s.split("."))._internalPath}catch{throw rl(`Invalid field path (${s}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,a)}}function rl(o,s,a,et,at){const lt=et&&!et.isEmpty(),ht=at!==void 0;let dt=`Function ${s}() called with invalid data`;a&&(dt+=" (via `toFirestore()`)"),dt+=". ";let ft="";return(lt||ht)&&(ft+=" (found",lt&&(ft+=` in field ${et}`),ht&&(ft+=` in document ${at}`),ft+=")"),new L$2(B$2.INVALID_ARGUMENT,dt+o+ft)}function ol(o,s){return o.some(a=>a.isEqual(s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(s,a,et,at,lt){this._firestore=s,this._userDataWriter=a,this._key=et,this._document=at,this._converter=lt}get id(){return this._key.path.lastSegment()}get ref(){return new th(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const s=new cl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(s)}return this._userDataWriter.convertValue(this._document.data.value)}}get(s){if(this._document){const a=this._document.data.field(al("DocumentSnapshot.get",s));if(a!==null)return this._userDataWriter.convertValue(a)}}}class cl extends ul{data(){return super.data()}}function al(o,s){return typeof s=="string"?il(o,s):s instanceof Ch?s._internalPath:s._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(o){if(o.limitType==="L"&&o.explicitOrderBy.length===0)throw new L$2(B$2.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ll{}class fl extends ll{}function dl(o,s,...a){let et=[];s instanceof ll&&et.push(s),et=et.concat(a),function(at){const lt=at.filter(dt=>dt instanceof ml).length,ht=at.filter(dt=>dt instanceof wl).length;if(lt>1||lt>0&&ht>0)throw new L$2(B$2.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(et);for(const at of et)o=at._apply(o);return o}class wl extends fl{constructor(s,a,et){super(),this._field=s,this._op=a,this._value=et,this.type="where"}static _create(s,a,et){return new wl(s,a,et)}_apply(s){const a=this._parse(s);return Nl(s._query,a),new eh(s.firestore,s.converter,Wn(s._query,a))}_parse(s){const a=qh(s.firestore);return function(at,lt,ht,dt,ft,vt,wt){let Ct;if(ft.isKeyField()){if(vt==="array-contains"||vt==="array-contains-any")throw new L$2(B$2.INVALID_ARGUMENT,`Invalid Query. You can't perform '${vt}' queries on documentId().`);if(vt==="in"||vt==="not-in"){xl(wt,vt);const xt=[];for(const Pt of wt)xt.push(Cl(dt,at,Pt));Ct={arrayValue:{values:xt}}}else Ct=Cl(dt,at,wt)}else vt!=="in"&&vt!=="not-in"&&vt!=="array-contains-any"||xl(wt,vt),Ct=Yh(ht,lt,wt,vt==="in"||vt==="not-in");return dn.create(ft,vt,Ct)}(s._query,"where",a,s.firestore._databaseId,this._field,this._op,this._value)}}function _l(o,s,a){const et=s,at=al("where",o);return wl._create(at,et,a)}class ml extends ll{constructor(s,a){super(),this.type=s,this._queryConstraints=a}static _create(s,a){return new ml(s,a)}_parse(s){const a=this._queryConstraints.map(et=>et._parse(s)).filter(et=>et.getFilters().length>0);return a.length===1?a[0]:wn.create(a,this._getOperator())}_apply(s){const a=this._parse(s);return a.getFilters().length===0?s:(function(et,at){let lt=et;const ht=at.getFlattenedFilters();for(const dt of ht)Nl(lt,dt),lt=Wn(lt,dt)}(s._query,a),new eh(s.firestore,s.converter,Wn(s._query,a)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Cl(o,s,a){if(typeof(a=getModularInstance(a))=="string"){if(a==="")throw new L$2(B$2.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qn(s)&&a.indexOf("/")!==-1)throw new L$2(B$2.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${a}' contains a '/' character.`);const et=s.path.child(rt.fromString(a));if(!ct.isDocumentKey(et))throw new L$2(B$2.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${et}' is not because it has an odd number of segments (${et.length}).`);return Qe(o,new ct(et))}if(a instanceof th)return Qe(o,a._key);throw new L$2(B$2.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wa(a)}.`)}function xl(o,s){if(!Array.isArray(o)||o.length===0)throw new L$2(B$2.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${s.toString()}' filters.`)}function Nl(o,s){if(s.isInequality()){const et=Gn(o),at=s.field;if(et!==null&&!et.isEqual(at))throw new L$2(B$2.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${et.toString()}' and '${at.toString()}'`);const lt=Kn(o);lt!==null&&kl(o,at,lt)}const a=function(et,at){for(const lt of et)for(const ht of lt.getFlattenedFilters())if(at.indexOf(ht.op)>=0)return ht.op;return null}(o.filters,function(et){switch(et){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(s.op));if(a!==null)throw a===s.op?new L$2(B$2.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${s.op.toString()}' filter.`):new L$2(B$2.INVALID_ARGUMENT,`Invalid query. You cannot use '${s.op.toString()}' filters with '${a.toString()}' filters.`)}function kl(o,s,a){if(!a.isEqual(s))throw new L$2(B$2.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${s.toString()}' and so you must also use '${s.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${a.toString()}' instead.`)}class $l{convertValue(s,a="none"){switch(Fe(s)){case 0:return null;case 1:return s.booleanValue;case 2:return Se$1(s.integerValue||s.doubleValue);case 3:return this.convertTimestamp(s.timestampValue);case 4:return this.convertServerTimestamp(s,a);case 5:return s.stringValue;case 6:return this.convertBytes(De$1(s.bytesValue));case 7:return this.convertReference(s.referenceValue);case 8:return this.convertGeoPoint(s.geoPointValue);case 9:return this.convertArray(s.arrayValue,a);case 10:return this.convertObject(s.mapValue,a);default:throw O$1()}}convertObject(s,a){const et={};return _e$1(s.fields,(at,lt)=>{et[at]=this.convertValue(lt,a)}),et}convertGeoPoint(s){return new kh(Se$1(s.latitude),Se$1(s.longitude))}convertArray(s,a){return(s.values||[]).map(et=>this.convertValue(et,a))}convertServerTimestamp(s,a){switch(a){case"previous":const et=xe$1(s);return et==null?null:this.convertValue(et,a);case"estimate":return this.convertTimestamp(Ne$1(s));default:return null}}convertTimestamp(s){const a=Ve$1(s);return new nt(a.seconds,a.nanos)}convertDocumentKey(s,a){const et=rt.fromString(s);$$1(Xi(et));const at=new Oe(et.get(1),et.get(3)),lt=new ct(et.popFirst(5));return at.isEqual(a)||x$2(`Document ${lt} contains a document reference within a different database (${at.projectId}/${at.database}) which is not supported. It will be treated as a reference in the current database (${a.projectId}/${a.database}) instead.`),lt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(o,s,a){let et;return et=o?a&&(a.merge||a.mergeFields)?o.toFirestore(s,a):o.toFirestore(s):s,et}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(s,a){this.hasPendingWrites=s,this.fromCache=a}isEqual(s){return this.hasPendingWrites===s.hasPendingWrites&&this.fromCache===s.fromCache}}class Ql extends ul{constructor(s,a,et,at,lt,ht){super(s,a,et,at,ht),this._firestore=s,this._firestoreImpl=s,this.metadata=lt}exists(){return super.exists()}data(s={}){if(this._document){if(this._converter){const a=new zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(a,s)}return this._userDataWriter.convertValue(this._document.data.value,s.serverTimestamps)}}get(s,a={}){if(this._document){const et=this._document.data.field(al("DocumentSnapshot.get",s));if(et!==null)return this._userDataWriter.convertValue(et,a.serverTimestamps)}}}class zl extends Ql{data(s={}){return super.data(s)}}class jl{constructor(s,a,et,at){this._firestore=s,this._userDataWriter=a,this._snapshot=at,this.metadata=new Gl(at.hasPendingWrites,at.fromCache),this.query=et}get docs(){const s=[];return this.forEach(a=>s.push(a)),s}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(s,a){this._snapshot.docs.forEach(et=>{s.call(a,new zl(this._firestore,this._userDataWriter,et.key,et,new Gl(this._snapshot.mutatedKeys.has(et.key),this._snapshot.fromCache),this.query.converter))})}docChanges(s={}){const a=!!s.includeMetadataChanges;if(a&&this._snapshot.excludesMetadataChanges)throw new L$2(B$2.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===a||(this._cachedChanges=function(et,at){if(et._snapshot.oldDocs.isEmpty()){let lt=0;return et._snapshot.docChanges.map(ht=>{const dt=new zl(et._firestore,et._userDataWriter,ht.doc.key,ht.doc,new Gl(et._snapshot.mutatedKeys.has(ht.doc.key),et._snapshot.fromCache),et.query.converter);return ht.doc,{type:"added",doc:dt,oldIndex:-1,newIndex:lt++}})}{let lt=et._snapshot.oldDocs;return et._snapshot.docChanges.filter(ht=>at||ht.type!==3).map(ht=>{const dt=new zl(et._firestore,et._userDataWriter,ht.doc.key,ht.doc,new Gl(et._snapshot.mutatedKeys.has(ht.doc.key),et._snapshot.fromCache),et.query.converter);let ft=-1,vt=-1;return ht.type!==0&&(ft=lt.indexOf(ht.doc.key),lt=lt.delete(ht.doc.key)),ht.type!==1&&(lt=lt.add(ht.doc),vt=lt.indexOf(ht.doc.key)),{type:Wl(ht.type),doc:dt,oldIndex:ft,newIndex:vt}})}}(this,a),this._cachedChangesIncludeMetadataChanges=a),this._cachedChanges}}function Wl(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O$1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jl(o){o=Ha(o,th);const s=Ha(o.firestore,fh);return $a(_h(s),o._key).then(a=>lf(s,o,a))}class Yl extends $l{constructor(s){super(),this.firestore=s}convertBytes(s){return new Dh(s)}convertReference(s){const a=this.convertDocumentKey(s,this.firestore._databaseId);return new th(this.firestore,null,a)}}function tf(o){o=Ha(o,eh);const s=Ha(o.firestore,fh),a=_h(s),et=new Yl(s);return hl(o._query),Fa(a,o._query).then(at=>new jl(s,et,o,at))}function sf(o,s,a){o=Ha(o,th);const et=Ha(o.firestore,fh),at=Ml(o.converter,s,a);return hf(et,[Uh(qh(et),"setDoc",o._key,at,o.converter!==null,a).toMutation(o._key,Os.none())])}function rf(o,s,a,...et){o=Ha(o,th);const at=Ha(o.firestore,fh),lt=qh(at);let ht;return ht=typeof(s=getModularInstance(s))=="string"||s instanceof Ch?Jh(lt,"updateDoc",o._key,s,a,et):Hh(lt,"updateDoc",o._key,s),hf(at,[ht.toMutation(o._key,Os.exists(!0))])}function hf(o,s){return function(a,et){const at=new q$4;return a.asyncQueue.enqueueAndForget(async()=>Mc(await Da(a),et,at)),at.promise}(_h(o),s)}function lf(o,s,a){const et=a.docs.get(s._key),at=new Yl(o);return new Ql(o,at,s._key,et,new Gl(a.hasPendingWrites,a.fromCache),s.converter)}function Sf(...o){return new zh("arrayUnion",o)}function Df(...o){return new jh("arrayRemove",o)}(function(o,s=!0){(function(a){P$2=a})(SDK_VERSION),_registerComponent(new Component("firestore",(a,{instanceIdentifier:et,options:at})=>{const lt=a.getProvider("app").getImmediate(),ht=new fh(new Q$2(a.getProvider("auth-internal")),new H$2(a.getProvider("app-check-internal")),function(dt,ft){if(!Object.prototype.hasOwnProperty.apply(dt.options,["projectId"]))throw new L$2(B$2.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oe(dt.options.projectId,ft)}(lt,et),lt);return at=Object.assign({useFetchStreams:s},at),ht._setSettings(at),ht},"PUBLIC").setMultipleInstances(!0)),registerVersion(v$4,"3.10.0",o),registerVersion(v$4,"3.10.0","esm2017")})();function __rest$2(o,s){var a={};for(var et in o)Object.prototype.hasOwnProperty.call(o,et)&&s.indexOf(et)<0&&(a[et]=o[et]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(o);at<et.length;at++)s.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(o,et[at])&&(a[et[at]]=o[et[at]]);return a}function _prodErrorMap(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/auth");function _logError(o,...s){logClient.logLevel<=LogLevel.ERROR&&logClient.error(`Auth (${SDK_VERSION}): ${o}`,...s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(o,...s){throw createErrorInternal(o,...s)}function _createError(o,...s){return createErrorInternal(o,...s)}function _errorWithCustomMessage(o,s,a){const et=Object.assign(Object.assign({},prodErrorMap()),{[s]:a});return new ErrorFactory("auth","Firebase",et).create(s,{appName:o.name})}function createErrorInternal(o,...s){if(typeof o!="string"){const a=s[0],et=[...s.slice(1)];return et[0]&&(et[0].appName=o.name),o._errorFactory.create(a,...et)}return _DEFAULT_AUTH_ERROR_FACTORY.create(o,...s)}function _assert(o,s,...a){if(!o)throw createErrorInternal(s,...a)}function debugFail(o){const s="INTERNAL ASSERTION FAILED: "+o;throw _logError(s),new Error(s)}function debugAssert(o,s){o||debugFail(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(o){debugAssert(o instanceof Function,"Expected a class definition");let s=instanceCache.get(o);return s?(debugAssert(s instanceof o,"Instance stored in cache mismatched with class"),s):(s=new o,instanceCache.set(o,s),s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(o,s){const a=_getProvider(o,"auth");if(a.isInitialized()){const at=a.getImmediate(),lt=a.getOptions();if(deepEqual(lt,s??{}))return at;_fail(at,"already-initialized")}return a.initialize({options:s})}function _initializeAuthInstance(o,s){const a=(s==null?void 0:s.persistence)||[],et=(Array.isArray(a)?a:[a]).map(_getInstance);s!=null&&s.errorMap&&o._updateErrorMap(s.errorMap),o._initializeWithPersistence(et,s==null?void 0:s.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var o;return typeof self<"u"&&((o=self.location)===null||o===void 0?void 0:o.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var o;return typeof self<"u"&&((o=self.location)===null||o===void 0?void 0:o.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const o=navigator;return o.languages&&o.languages[0]||o.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(s,a){this.shortDelay=s,this.longDelay=a,debugAssert(a>s,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(o,s){debugAssert(o.emulator,"Emulator should always be set here");const{url:a}=o.emulator;return s?`${a}${s.startsWith("/")?s.slice(1):s}`:a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(s,a,et){this.fetchImpl=s,a&&(this.headersImpl=a),et&&(this.responseImpl=et)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(o,s){return o.tenantId&&!s.tenantId?Object.assign(Object.assign({},s),{tenantId:o.tenantId}):s}async function _performApiRequest(o,s,a,et,at={}){return _performFetchWithErrorHandling(o,at,async()=>{let lt={},ht={};et&&(s==="GET"?ht=et:lt={body:JSON.stringify(et)});const dt=querystring(Object.assign({key:o.config.apiKey},ht)).slice(1),ft=await o._getAdditionalHeaders();return ft["Content-Type"]="application/json",o.languageCode&&(ft["X-Firebase-Locale"]=o.languageCode),FetchProvider.fetch()(_getFinalTarget(o,o.config.apiHost,a,dt),Object.assign({method:s,headers:ft,referrerPolicy:"no-referrer"},lt))})}async function _performFetchWithErrorHandling(o,s,a){o._canInitEmulator=!1;const et=Object.assign(Object.assign({},SERVER_ERROR_MAP),s);try{const at=new NetworkTimeout(o),lt=await Promise.race([a(),at.promise]);at.clearNetworkTimeout();const ht=await lt.json();if("needConfirmation"in ht)throw _makeTaggedError(o,"account-exists-with-different-credential",ht);if(lt.ok&&!("errorMessage"in ht))return ht;{const dt=lt.ok?ht.errorMessage:ht.error.message,[ft,vt]=dt.split(" : ");if(ft==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(o,"credential-already-in-use",ht);if(ft==="EMAIL_EXISTS")throw _makeTaggedError(o,"email-already-in-use",ht);if(ft==="USER_DISABLED")throw _makeTaggedError(o,"user-disabled",ht);const wt=et[ft]||ft.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw _errorWithCustomMessage(o,wt,vt);_fail(o,wt)}}catch(at){if(at instanceof FirebaseError)throw at;_fail(o,"network-request-failed",{message:String(at)})}}async function _performSignInRequest(o,s,a,et,at={}){const lt=await _performApiRequest(o,s,a,et,at);return"mfaPendingCredential"in lt&&_fail(o,"multi-factor-auth-required",{_serverResponse:lt}),lt}function _getFinalTarget(o,s,a,et){const at=`${s}${a}?${et}`;return o.config.emulator?_emulatorUrl(o.config,at):`${o.config.apiScheme}://${at}`}class NetworkTimeout{constructor(s){this.auth=s,this.timer=null,this.promise=new Promise((a,et)=>{this.timer=setTimeout(()=>et(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(o,s,a){const et={appName:o.name};a.email&&(et.email=a.email),a.phoneNumber&&(et.phoneNumber=a.phoneNumber);const at=_createError(o,s,et);return at.customData._tokenResponse=a,at}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(o,s){return _performApiRequest(o,"POST","/v1/accounts:delete",s)}async function getAccountInfo(o,s){return _performApiRequest(o,"POST","/v1/accounts:lookup",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(o){if(o)try{const s=new Date(Number(o));if(!isNaN(s.getTime()))return s.toUTCString()}catch{}}async function getIdTokenResult(o,s=!1){const a=getModularInstance(o),et=await a.getIdToken(s),at=_parseToken(et);_assert(at&&at.exp&&at.auth_time&&at.iat,a.auth,"internal-error");const lt=typeof at.firebase=="object"?at.firebase:void 0,ht=lt==null?void 0:lt.sign_in_provider;return{claims:at,token:et,authTime:utcTimestampToDateString(secondsStringToMilliseconds(at.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(at.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(at.exp)),signInProvider:ht||null,signInSecondFactor:(lt==null?void 0:lt.sign_in_second_factor)||null}}function secondsStringToMilliseconds(o){return Number(o)*1e3}function _parseToken(o){const[s,a,et]=o.split(".");if(s===void 0||a===void 0||et===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const at=base64Decode(a);return at?JSON.parse(at):(_logError("Failed to decode base64 JWT payload"),null)}catch(at){return _logError("Caught error parsing JWT payload as JSON",at==null?void 0:at.toString()),null}}function _tokenExpiresIn(o){const s=_parseToken(o);return _assert(s,"internal-error"),_assert(typeof s.exp<"u","internal-error"),_assert(typeof s.iat<"u","internal-error"),Number(s.exp)-Number(s.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(o,s,a=!1){if(a)return s;try{return await s}catch(et){throw et instanceof FirebaseError&&isUserInvalidated(et)&&o.auth.currentUser===o&&await o.auth.signOut(),et}}function isUserInvalidated({code:o}){return o==="auth/user-disabled"||o==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(s){this.user=s,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(s){var a;if(s){const et=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),et}else{this.errorBackoff=3e4;const at=((a=this.user.stsTokenManager.expirationTime)!==null&&a!==void 0?a:0)-Date.now()-3e5;return Math.max(0,at)}}schedule(s=!1){if(!this.isRunning)return;const a=this.getInterval(s);this.timerId=setTimeout(async()=>{await this.iteration()},a)}async iteration(){try{await this.user.getIdToken(!0)}catch(s){(s==null?void 0:s.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(s,a){this.createdAt=s,this.lastLoginAt=a,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(s){this.createdAt=s.createdAt,this.lastLoginAt=s.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(o){var s;const a=o.auth,et=await o.getIdToken(),at=await _logoutIfInvalidated(o,getAccountInfo(a,{idToken:et}));_assert(at==null?void 0:at.users.length,a,"internal-error");const lt=at.users[0];o._notifyReloadListener(lt);const ht=!((s=lt.providerUserInfo)===null||s===void 0)&&s.length?extractProviderData(lt.providerUserInfo):[],dt=mergeProviderData(o.providerData,ht),ft=o.isAnonymous,vt=!(o.email&&lt.passwordHash)&&!(dt!=null&&dt.length),wt=ft?vt:!1,Ct={uid:lt.localId,displayName:lt.displayName||null,photoURL:lt.photoUrl||null,email:lt.email||null,emailVerified:lt.emailVerified||!1,phoneNumber:lt.phoneNumber||null,tenantId:lt.tenantId||null,providerData:dt,metadata:new UserMetadata(lt.createdAt,lt.lastLoginAt),isAnonymous:wt};Object.assign(o,Ct)}async function reload(o){const s=getModularInstance(o);await _reloadWithoutSaving(s),await s.auth._persistUserIfCurrent(s),s.auth._notifyListenersIfCurrent(s)}function mergeProviderData(o,s){return[...o.filter(et=>!s.some(at=>at.providerId===et.providerId)),...s]}function extractProviderData(o){return o.map(s=>{var{providerId:a}=s,et=__rest$2(s,["providerId"]);return{providerId:a,uid:et.rawId||"",displayName:et.displayName||null,email:et.email||null,phoneNumber:et.phoneNumber||null,photoURL:et.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(o,s){const a=await _performFetchWithErrorHandling(o,{},async()=>{const et=querystring({grant_type:"refresh_token",refresh_token:s}).slice(1),{tokenApiHost:at,apiKey:lt}=o.config,ht=_getFinalTarget(o,at,"/v1/token",`key=${lt}`),dt=await o._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(ht,{method:"POST",headers:dt,body:et})});return{accessToken:a.access_token,expiresIn:a.expires_in,refreshToken:a.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(s){_assert(s.idToken,"internal-error"),_assert(typeof s.idToken<"u","internal-error"),_assert(typeof s.refreshToken<"u","internal-error");const a="expiresIn"in s&&typeof s.expiresIn<"u"?Number(s.expiresIn):_tokenExpiresIn(s.idToken);this.updateTokensAndExpiration(s.idToken,s.refreshToken,a)}async getToken(s,a=!1){return _assert(!this.accessToken||this.refreshToken,s,"user-token-expired"),!a&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(s,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(s,a){const{accessToken:et,refreshToken:at,expiresIn:lt}=await requestStsToken(s,a);this.updateTokensAndExpiration(et,at,Number(lt))}updateTokensAndExpiration(s,a,et){this.refreshToken=a||null,this.accessToken=s||null,this.expirationTime=Date.now()+et*1e3}static fromJSON(s,a){const{refreshToken:et,accessToken:at,expirationTime:lt}=a,ht=new StsTokenManager;return et&&(_assert(typeof et=="string","internal-error",{appName:s}),ht.refreshToken=et),at&&(_assert(typeof at=="string","internal-error",{appName:s}),ht.accessToken=at),lt&&(_assert(typeof lt=="number","internal-error",{appName:s}),ht.expirationTime=lt),ht}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(s){this.accessToken=s.accessToken,this.refreshToken=s.refreshToken,this.expirationTime=s.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(o,s){_assert(typeof o=="string"||typeof o>"u","internal-error",{appName:s})}class UserImpl{constructor(s){var{uid:a,auth:et,stsTokenManager:at}=s,lt=__rest$2(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=a,this.auth=et,this.stsTokenManager=at,this.accessToken=at.accessToken,this.displayName=lt.displayName||null,this.email=lt.email||null,this.emailVerified=lt.emailVerified||!1,this.phoneNumber=lt.phoneNumber||null,this.photoURL=lt.photoURL||null,this.isAnonymous=lt.isAnonymous||!1,this.tenantId=lt.tenantId||null,this.providerData=lt.providerData?[...lt.providerData]:[],this.metadata=new UserMetadata(lt.createdAt||void 0,lt.lastLoginAt||void 0)}async getIdToken(s){const a=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,s));return _assert(a,this.auth,"internal-error"),this.accessToken!==a&&(this.accessToken=a,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),a}getIdTokenResult(s){return getIdTokenResult(this,s)}reload(){return reload(this)}_assign(s){this!==s&&(_assert(this.uid===s.uid,this.auth,"internal-error"),this.displayName=s.displayName,this.photoURL=s.photoURL,this.email=s.email,this.emailVerified=s.emailVerified,this.phoneNumber=s.phoneNumber,this.isAnonymous=s.isAnonymous,this.tenantId=s.tenantId,this.providerData=s.providerData.map(a=>Object.assign({},a)),this.metadata._copy(s.metadata),this.stsTokenManager._assign(s.stsTokenManager))}_clone(s){const a=new UserImpl(Object.assign(Object.assign({},this),{auth:s,stsTokenManager:this.stsTokenManager._clone()}));return a.metadata._copy(this.metadata),a}_onReload(s){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=s,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(s){this.reloadListener?this.reloadListener(s):this.reloadUserInfo=s}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(s,a=!1){let et=!1;s.idToken&&s.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(s),et=!0),a&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),et&&this.auth._notifyListenersIfCurrent(this)}async delete(){const s=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:s})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(s=>Object.assign({},s)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(s,a){var et,at,lt,ht,dt,ft,vt,wt;const Ct=(et=a.displayName)!==null&&et!==void 0?et:void 0,xt=(at=a.email)!==null&&at!==void 0?at:void 0,Pt=(lt=a.phoneNumber)!==null&&lt!==void 0?lt:void 0,Rt=(ht=a.photoURL)!==null&&ht!==void 0?ht:void 0,_t=(dt=a.tenantId)!==null&&dt!==void 0?dt:void 0,St=(ft=a._redirectEventId)!==null&&ft!==void 0?ft:void 0,bt=(vt=a.createdAt)!==null&&vt!==void 0?vt:void 0,Nt=(wt=a.lastLoginAt)!==null&&wt!==void 0?wt:void 0,{uid:kt,emailVerified:Dt,isAnonymous:jt,providerData:Wt,stsTokenManager:Yt}=a;_assert(kt&&Yt,s,"internal-error");const Bt=StsTokenManager.fromJSON(this.name,Yt);_assert(typeof kt=="string",s,"internal-error"),assertStringOrUndefined(Ct,s.name),assertStringOrUndefined(xt,s.name),_assert(typeof Dt=="boolean",s,"internal-error"),_assert(typeof jt=="boolean",s,"internal-error"),assertStringOrUndefined(Pt,s.name),assertStringOrUndefined(Rt,s.name),assertStringOrUndefined(_t,s.name),assertStringOrUndefined(St,s.name),assertStringOrUndefined(bt,s.name),assertStringOrUndefined(Nt,s.name);const zt=new UserImpl({uid:kt,auth:s,email:xt,emailVerified:Dt,displayName:Ct,isAnonymous:jt,photoURL:Rt,phoneNumber:Pt,tenantId:_t,stsTokenManager:Bt,createdAt:bt,lastLoginAt:Nt});return Wt&&Array.isArray(Wt)&&(zt.providerData=Wt.map(qt=>Object.assign({},qt))),St&&(zt._redirectEventId=St),zt}static async _fromIdTokenResponse(s,a,et=!1){const at=new StsTokenManager;at.updateFromServerResponse(a);const lt=new UserImpl({uid:a.localId,auth:s,stsTokenManager:at,isAnonymous:et});return await _reloadWithoutSaving(lt),lt}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(s,a){this.storage[s]=a}async _get(s){const a=this.storage[s];return a===void 0?null:a}async _remove(s){delete this.storage[s]}_addListener(s,a){}_removeListener(s,a){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(o,s,a){return`firebase:${o}:${s}:${a}`}class PersistenceUserManager{constructor(s,a,et){this.persistence=s,this.auth=a,this.userKey=et;const{config:at,name:lt}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,at.apiKey,lt),this.fullPersistenceKey=_persistenceKeyName("persistence",at.apiKey,lt),this.boundEventHandler=a._onStorageEvent.bind(a),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(s){return this.persistence._set(this.fullUserKey,s.toJSON())}async getCurrentUser(){const s=await this.persistence._get(this.fullUserKey);return s?UserImpl._fromJSON(this.auth,s):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(s){if(this.persistence===s)return;const a=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=s,a)return this.setCurrentUser(a)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(s,a,et="authUser"){if(!a.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),s,et);const at=(await Promise.all(a.map(async vt=>{if(await vt._isAvailable())return vt}))).filter(vt=>vt);let lt=at[0]||_getInstance(inMemoryPersistence);const ht=_persistenceKeyName(et,s.config.apiKey,s.name);let dt=null;for(const vt of a)try{const wt=await vt._get(ht);if(wt){const Ct=UserImpl._fromJSON(s,wt);vt!==lt&&(dt=Ct),lt=vt;break}}catch{}const ft=at.filter(vt=>vt._shouldAllowMigration);return!lt._shouldAllowMigration||!ft.length?new PersistenceUserManager(lt,s,et):(lt=ft[0],dt&&await lt._set(ht,dt.toJSON()),await Promise.all(a.map(async vt=>{if(vt!==lt)try{await vt._remove(ht)}catch{}})),new PersistenceUserManager(lt,s,et))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(o){const s=o.toLowerCase();if(s.includes("opera/")||s.includes("opr/")||s.includes("opios/"))return"Opera";if(_isIEMobile(s))return"IEMobile";if(s.includes("msie")||s.includes("trident/"))return"IE";if(s.includes("edge/"))return"Edge";if(_isFirefox(s))return"Firefox";if(s.includes("silk/"))return"Silk";if(_isBlackBerry(s))return"Blackberry";if(_isWebOS(s))return"Webos";if(_isSafari(s))return"Safari";if((s.includes("chrome/")||_isChromeIOS(s))&&!s.includes("edge/"))return"Chrome";if(_isAndroid(s))return"Android";{const a=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,et=o.match(a);if((et==null?void 0:et.length)===2)return et[1]}return"Other"}function _isFirefox(o=getUA()){return/firefox\//i.test(o)}function _isSafari(o=getUA()){const s=o.toLowerCase();return s.includes("safari/")&&!s.includes("chrome/")&&!s.includes("crios/")&&!s.includes("android")}function _isChromeIOS(o=getUA()){return/crios\//i.test(o)}function _isIEMobile(o=getUA()){return/iemobile/i.test(o)}function _isAndroid(o=getUA()){return/android/i.test(o)}function _isBlackBerry(o=getUA()){return/blackberry/i.test(o)}function _isWebOS(o=getUA()){return/webos/i.test(o)}function _isIOS(o=getUA()){return/iphone|ipad|ipod/i.test(o)||/macintosh/i.test(o)&&/mobile/i.test(o)}function _isIOSStandalone(o=getUA()){var s;return _isIOS(o)&&!!(!((s=window.navigator)===null||s===void 0)&&s.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(o=getUA()){return _isIOS(o)||_isAndroid(o)||_isWebOS(o)||_isBlackBerry(o)||/windows phone/i.test(o)||_isIEMobile(o)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(o,s=[]){let a;switch(o){case"Browser":a=_getBrowserName(getUA());break;case"Worker":a=`${_getBrowserName(getUA())}-${o}`;break;default:a=o}const et=s.length?s.join(","):"FirebaseCore-web";return`${a}/JsCore/${SDK_VERSION}/${et}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(s){this.auth=s,this.queue=[]}pushCallback(s,a){const et=lt=>new Promise((ht,dt)=>{try{const ft=s(lt);ht(ft)}catch(ft){dt(ft)}});et.onAbort=a,this.queue.push(et);const at=this.queue.length-1;return()=>{this.queue[at]=()=>Promise.resolve()}}async runMiddleware(s){if(this.auth.currentUser===s)return;const a=[];try{for(const et of this.queue)await et(s),et.onAbort&&a.push(et.onAbort)}catch(et){a.reverse();for(const at of a)try{at()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:et==null?void 0:et.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(s,a,et){this.app=s,this.heartbeatServiceProvider=a,this.config=et,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=s.name,this.clientVersion=et.sdkClientVersion}_initializeWithPersistence(s,a){return a&&(this._popupRedirectResolver=_getInstance(a)),this._initializationPromise=this.queue(async()=>{var et,at;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,s),!this._deleted)){if(!((et=this._popupRedirectResolver)===null||et===void 0)&&et._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(a),this.lastNotifiedUid=((at=this.currentUser)===null||at===void 0?void 0:at.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const s=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!s)){if(this.currentUser&&s&&this.currentUser.uid===s.uid){this._currentUser._assign(s),await this.currentUser.getIdToken();return}await this._updateCurrentUser(s,!0)}}async initializeCurrentUser(s){var a;const et=await this.assertedPersistence.getCurrentUser();let at=et,lt=!1;if(s&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const ht=(a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId,dt=at==null?void 0:at._redirectEventId,ft=await this.tryRedirectSignIn(s);(!ht||ht===dt)&&(ft!=null&&ft.user)&&(at=ft.user,lt=!0)}if(!at)return this.directlySetCurrentUser(null);if(!at._redirectEventId){if(lt)try{await this.beforeStateQueue.runMiddleware(at)}catch(ht){at=et,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ht))}return at?this.reloadAndSetCurrentUserOrClear(at):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===at._redirectEventId?this.directlySetCurrentUser(at):this.reloadAndSetCurrentUserOrClear(at)}async tryRedirectSignIn(s){let a=null;try{a=await this._popupRedirectResolver._completeRedirectFn(this,s,!0)}catch{await this._setRedirectUser(null)}return a}async reloadAndSetCurrentUserOrClear(s){try{await _reloadWithoutSaving(s)}catch(a){if((a==null?void 0:a.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(s)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(s){const a=s?getModularInstance(s):null;return a&&_assert(a.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(a&&a._clone(this))}async _updateCurrentUser(s,a=!1){if(!this._deleted)return s&&_assert(this.tenantId===s.tenantId,this,"tenant-id-mismatch"),a||await this.beforeStateQueue.runMiddleware(s),this.queue(async()=>{await this.directlySetCurrentUser(s),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(s){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(s))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(s){this._errorFactory=new ErrorFactory("auth","Firebase",s())}onAuthStateChanged(s,a,et){return this.registerStateListener(this.authStateSubscription,s,a,et)}beforeAuthStateChanged(s,a){return this.beforeStateQueue.pushCallback(s,a)}onIdTokenChanged(s,a,et){return this.registerStateListener(this.idTokenSubscription,s,a,et)}toJSON(){var s;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(s=this._currentUser)===null||s===void 0?void 0:s.toJSON()}}async _setRedirectUser(s,a){const et=await this.getOrInitRedirectPersistenceManager(a);return s===null?et.removeCurrentUser():et.setCurrentUser(s)}async getOrInitRedirectPersistenceManager(s){if(!this.redirectPersistenceManager){const a=s&&_getInstance(s)||this._popupRedirectResolver;_assert(a,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(a._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(s){var a,et;return this._isInitialized&&await this.queue(async()=>{}),((a=this._currentUser)===null||a===void 0?void 0:a._redirectEventId)===s?this._currentUser:((et=this.redirectUser)===null||et===void 0?void 0:et._redirectEventId)===s?this.redirectUser:null}async _persistUserIfCurrent(s){if(s===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(s))}_notifyListenersIfCurrent(s){s===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s,a;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const et=(a=(s=this.currentUser)===null||s===void 0?void 0:s.uid)!==null&&a!==void 0?a:null;this.lastNotifiedUid!==et&&(this.lastNotifiedUid=et,this.authStateSubscription.next(this.currentUser))}registerStateListener(s,a,et,at){if(this._deleted)return()=>{};const lt=typeof a=="function"?a:a.next.bind(a),ht=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(ht,this,"internal-error"),ht.then(()=>lt(this.currentUser)),typeof a=="function"?s.addObserver(a,et,at):s.addObserver(a)}async directlySetCurrentUser(s){this.currentUser&&this.currentUser!==s&&this._currentUser._stopProactiveRefresh(),s&&this.isProactiveRefreshEnabled&&s._startProactiveRefresh(),this.currentUser=s,s?await this.assertedPersistence.setCurrentUser(s):await this.assertedPersistence.removeCurrentUser()}queue(s){return this.operations=this.operations.then(s,s),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(s){!s||this.frameworks.includes(s)||(this.frameworks.push(s),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const a={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(a["X-Firebase-gmpid"]=this.app.options.appId);const et=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||s===void 0?void 0:s.getHeartbeatsHeader());return et&&(a["X-Firebase-Client"]=et),a}}function _castAuth(o){return getModularInstance(o)}class Subscription{constructor(s){this.auth=s,this.observer=null,this.addObserver=createSubscribe(a=>this.observer=a)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function connectAuthEmulator(o,s,a){const et=_castAuth(o);_assert(et._canInitEmulator,et,"emulator-config-failed"),_assert(/^https?:\/\//.test(s),et,"invalid-emulator-scheme");const at=!!(a!=null&&a.disableWarnings),lt=extractProtocol(s),{host:ht,port:dt}=extractHostAndPort(s),ft=dt===null?"":`:${dt}`;et.config.emulator={url:`${lt}//${ht}${ft}/`},et.settings.appVerificationDisabledForTesting=!0,et.emulatorConfig=Object.freeze({host:ht,port:dt,protocol:lt.replace(":",""),options:Object.freeze({disableWarnings:at})}),at||emitEmulatorWarning()}function extractProtocol(o){const s=o.indexOf(":");return s<0?"":o.substr(0,s+1)}function extractHostAndPort(o){const s=extractProtocol(o),a=/(\/\/)?([^?#/]+)/.exec(o.substr(s.length));if(!a)return{host:"",port:null};const et=a[2].split("@").pop()||"",at=/^(\[[^\]]+\])(:|$)/.exec(et);if(at){const lt=at[1];return{host:lt,port:parsePort(et.substr(lt.length+1))}}else{const[lt,ht]=et.split(":");return{host:lt,port:parsePort(ht)}}}function parsePort(o){if(!o)return null;const s=Number(o);return isNaN(s)?null:s}function emitEmulatorWarning(){function o(){const s=document.createElement("p"),a=s.style;s.innerText="Running in emulator mode. Do not use with production credentials.",a.position="fixed",a.width="100%",a.backgroundColor="#ffffff",a.border=".1em solid #000000",a.color="#b50000",a.bottom="0px",a.left="0px",a.margin="0px",a.zIndex="10000",a.textAlign="center",s.classList.add("firebase-emulator-warning"),document.body.appendChild(s)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",o):o())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(s,a){this.providerId=s,this.signInMethod=a}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(s){return debugFail("not implemented")}_linkToIdToken(s,a){return debugFail("not implemented")}_getReauthenticationResolver(s){return debugFail("not implemented")}}async function updateEmailPassword(o,s){return _performApiRequest(o,"POST","/v1/accounts:update",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(o,s){return _performSignInRequest(o,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(o,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(o,s){return _performSignInRequest(o,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(o,s))}async function signInWithEmailLinkForLinking(o,s){return _performSignInRequest(o,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(o,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(s,a,et,at=null){super("password",et),this._email=s,this._password=a,this._tenantId=at}static _fromEmailAndPassword(s,a){return new EmailAuthCredential(s,a,"password")}static _fromEmailAndCode(s,a,et=null){return new EmailAuthCredential(s,a,"emailLink",et)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(s){const a=typeof s=="string"?JSON.parse(s):s;if(a!=null&&a.email&&(a!=null&&a.password)){if(a.signInMethod==="password")return this._fromEmailAndPassword(a.email,a.password);if(a.signInMethod==="emailLink")return this._fromEmailAndCode(a.email,a.password,a.tenantId)}return null}async _getIdTokenResponse(s){switch(this.signInMethod){case"password":return signInWithPassword(s,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLink$1(s,{email:this._email,oobCode:this._password});default:_fail(s,"internal-error")}}async _linkToIdToken(s,a){switch(this.signInMethod){case"password":return updateEmailPassword(s,{idToken:a,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLinkForLinking(s,{idToken:a,email:this._email,oobCode:this._password});default:_fail(s,"internal-error")}}_getReauthenticationResolver(s){return this._getIdTokenResponse(s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(o,s){return _performSignInRequest(o,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(o,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(s){const a=new OAuthCredential(s.providerId,s.signInMethod);return s.idToken||s.accessToken?(s.idToken&&(a.idToken=s.idToken),s.accessToken&&(a.accessToken=s.accessToken),s.nonce&&!s.pendingToken&&(a.nonce=s.nonce),s.pendingToken&&(a.pendingToken=s.pendingToken)):s.oauthToken&&s.oauthTokenSecret?(a.accessToken=s.oauthToken,a.secret=s.oauthTokenSecret):_fail("argument-error"),a}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(s){const a=typeof s=="string"?JSON.parse(s):s,{providerId:et,signInMethod:at}=a,lt=__rest$2(a,["providerId","signInMethod"]);if(!et||!at)return null;const ht=new OAuthCredential(et,at);return ht.idToken=lt.idToken||void 0,ht.accessToken=lt.accessToken||void 0,ht.secret=lt.secret,ht.nonce=lt.nonce,ht.pendingToken=lt.pendingToken||null,ht}_getIdTokenResponse(s){const a=this.buildRequest();return signInWithIdp(s,a)}_linkToIdToken(s,a){const et=this.buildRequest();return et.idToken=a,signInWithIdp(s,et)}_getReauthenticationResolver(s){const a=this.buildRequest();return a.autoCreate=!1,signInWithIdp(s,a)}buildRequest(){const s={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)s.pendingToken=this.pendingToken;else{const a={};this.idToken&&(a.id_token=this.idToken),this.accessToken&&(a.access_token=this.accessToken),this.secret&&(a.oauth_token_secret=this.secret),a.providerId=this.providerId,this.nonce&&!this.pendingToken&&(a.nonce=this.nonce),s.postBody=querystring(a)}return s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode$1(o){switch(o){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(o){const s=querystringDecode(extractQuerystring(o)).link,a=s?querystringDecode(extractQuerystring(s)).deep_link_id:null,et=querystringDecode(extractQuerystring(o)).deep_link_id;return(et?querystringDecode(extractQuerystring(et)).link:null)||et||a||s||o}class ActionCodeURL{constructor(s){var a,et,at,lt,ht,dt;const ft=querystringDecode(extractQuerystring(s)),vt=(a=ft.apiKey)!==null&&a!==void 0?a:null,wt=(et=ft.oobCode)!==null&&et!==void 0?et:null,Ct=parseMode$1((at=ft.mode)!==null&&at!==void 0?at:null);_assert(vt&&wt&&Ct,"argument-error"),this.apiKey=vt,this.operation=Ct,this.code=wt,this.continueUrl=(lt=ft.continueUrl)!==null&&lt!==void 0?lt:null,this.languageCode=(ht=ft.languageCode)!==null&&ht!==void 0?ht:null,this.tenantId=(dt=ft.tenantId)!==null&&dt!==void 0?dt:null}static parseLink(s){const a=parseDeepLink(s);try{return new ActionCodeURL(a)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(s,a){return EmailAuthCredential._fromEmailAndPassword(s,a)}static credentialWithLink(s,a){const et=ActionCodeURL.parseLink(a);return _assert(et,"argument-error"),EmailAuthCredential._fromEmailAndCode(s,et.code,et.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(s){this.providerId=s,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(s){this.defaultLanguageCode=s}setCustomParameters(s){return this.customParameters=s,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(s){return this.scopes.includes(s)||this.scopes.push(s),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(s){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:s})}static credentialFromResult(s){return FacebookAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return FacebookAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s||!("oauthAccessToken"in s)||!s.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(s.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(s,a){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:s,accessToken:a})}static credentialFromResult(s){return GoogleAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return GoogleAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s)return null;const{oauthIdToken:a,oauthAccessToken:et}=s;if(!a&&!et)return null;try{return GoogleAuthProvider.credential(a,et)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(s){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:s})}static credentialFromResult(s){return GithubAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return GithubAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s||!("oauthAccessToken"in s)||!s.oauthAccessToken)return null;try{return GithubAuthProvider.credential(s.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(s,a){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:s,oauthTokenSecret:a})}static credentialFromResult(s){return TwitterAuthProvider.credentialFromTaggedObject(s)}static credentialFromError(s){return TwitterAuthProvider.credentialFromTaggedObject(s.customData||{})}static credentialFromTaggedObject({_tokenResponse:s}){if(!s)return null;const{oauthAccessToken:a,oauthTokenSecret:et}=s;if(!a||!et)return null;try{return TwitterAuthProvider.credential(a,et)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(o,s){return _performSignInRequest(o,"POST","/v1/accounts:signUp",_addTidIfNecessary(o,s))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(s){this.user=s.user,this.providerId=s.providerId,this._tokenResponse=s._tokenResponse,this.operationType=s.operationType}static async _fromIdTokenResponse(s,a,et,at=!1){const lt=await UserImpl._fromIdTokenResponse(s,et,at),ht=providerIdForResponse(et);return new UserCredentialImpl({user:lt,providerId:ht,_tokenResponse:et,operationType:a})}static async _forOperation(s,a,et){await s._updateTokensIfNecessary(et,!0);const at=providerIdForResponse(et);return new UserCredentialImpl({user:s,providerId:at,_tokenResponse:et,operationType:a})}}function providerIdForResponse(o){return o.providerId?o.providerId:"phoneNumber"in o?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(s,a,et,at){var lt;super(a.code,a.message),this.operationType=et,this.user=at,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:s.name,tenantId:(lt=s.tenantId)!==null&&lt!==void 0?lt:void 0,_serverResponse:a.customData._serverResponse,operationType:et}}static _fromErrorAndOperation(s,a,et,at){return new MultiFactorError(s,a,et,at)}}function _processCredentialSavingMfaContextIfNecessary(o,s,a,et){return(s==="reauthenticate"?a._getReauthenticationResolver(o):a._getIdTokenResponse(o)).catch(lt=>{throw lt.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(o,lt,s,et):lt})}async function _link$1(o,s,a=!1){const et=await _logoutIfInvalidated(o,s._linkToIdToken(o.auth,await o.getIdToken()),a);return UserCredentialImpl._forOperation(o,"link",et)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(o,s,a=!1){const{auth:et}=o,at="reauthenticate";try{const lt=await _logoutIfInvalidated(o,_processCredentialSavingMfaContextIfNecessary(et,at,s,o),a);_assert(lt.idToken,et,"internal-error");const ht=_parseToken(lt.idToken);_assert(ht,et,"internal-error");const{sub:dt}=ht;return _assert(o.uid===dt,et,"user-mismatch"),UserCredentialImpl._forOperation(o,at,lt)}catch(lt){throw(lt==null?void 0:lt.code)==="auth/user-not-found"&&_fail(et,"user-mismatch"),lt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(o,s,a=!1){const et="signIn",at=await _processCredentialSavingMfaContextIfNecessary(o,et,s),lt=await UserCredentialImpl._fromIdTokenResponse(o,et,at);return a||await o._updateCurrentUser(lt.user),lt}async function signInWithCredential(o,s){return _signInWithCredential(_castAuth(o),s)}async function createUserWithEmailAndPassword(o,s,a){const et=_castAuth(o),at=await signUp(et,{returnSecureToken:!0,email:s,password:a}),lt=await UserCredentialImpl._fromIdTokenResponse(et,"signIn",at);return await et._updateCurrentUser(lt.user),lt}function signInWithEmailAndPassword(o,s,a){return signInWithCredential(getModularInstance(o),EmailAuthProvider.credential(s,a))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile$1(o,s){return _performApiRequest(o,"POST","/v1/accounts:update",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateProfile(o,{displayName:s,photoURL:a}){if(s===void 0&&a===void 0)return;const et=getModularInstance(o),lt={idToken:await et.getIdToken(),displayName:s,photoUrl:a,returnSecureToken:!0},ht=await _logoutIfInvalidated(et,updateProfile$1(et.auth,lt));et.displayName=ht.displayName||null,et.photoURL=ht.photoUrl||null;const dt=et.providerData.find(({providerId:ft})=>ft==="password");dt&&(dt.displayName=et.displayName,dt.photoURL=et.photoURL),await et._updateTokensIfNecessary(ht)}function onIdTokenChanged(o,s,a,et){return getModularInstance(o).onIdTokenChanged(s,a,et)}function beforeAuthStateChanged(o,s,a){return getModularInstance(o).beforeAuthStateChanged(s,a)}function onAuthStateChanged(o,s,a,et){return getModularInstance(o).onAuthStateChanged(s,a,et)}function signOut(o){return getModularInstance(o).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(s,a){this.storageRetriever=s,this.type=a}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(s,a){return this.storage.setItem(s,JSON.stringify(a)),Promise.resolve()}_get(s){const a=this.storage.getItem(s);return Promise.resolve(a?JSON.parse(a):null)}_remove(s){return this.storage.removeItem(s),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const o=getUA();return _isSafari(o)||_isIOS(o)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(s,a)=>this.onStorageEvent(s,a),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(s){for(const a of Object.keys(this.listeners)){const et=this.storage.getItem(a),at=this.localCache[a];et!==at&&s(a,at,et)}}onStorageEvent(s,a=!1){if(!s.key){this.forAllChangedKeys((ht,dt,ft)=>{this.notifyListeners(ht,ft)});return}const et=s.key;if(a?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ht=this.storage.getItem(et);if(s.newValue!==ht)s.newValue!==null?this.storage.setItem(et,s.newValue):this.storage.removeItem(et);else if(this.localCache[et]===s.newValue&&!a)return}const at=()=>{const ht=this.storage.getItem(et);!a&&this.localCache[et]===ht||this.notifyListeners(et,ht)},lt=this.storage.getItem(et);_isIE10()&&lt!==s.newValue&&s.newValue!==s.oldValue?setTimeout(at,IE10_LOCAL_STORAGE_SYNC_DELAY):at()}notifyListeners(s,a){this.localCache[s]=a;const et=this.listeners[s];if(et)for(const at of Array.from(et))at(a&&JSON.parse(a))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((s,a,et)=>{this.onStorageEvent(new StorageEvent("storage",{key:s,oldValue:a,newValue:et}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(s,a){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[s]||(this.listeners[s]=new Set,this.localCache[s]=this.storage.getItem(s)),this.listeners[s].add(a)}_removeListener(s,a){this.listeners[s]&&(this.listeners[s].delete(a),this.listeners[s].size===0&&delete this.listeners[s]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(s,a){await super._set(s,a),this.localCache[s]=JSON.stringify(a)}async _get(s){const a=await super._get(s);return this.localCache[s]=JSON.stringify(a),a}async _remove(s){await super._remove(s),delete this.localCache[s]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(s,a){}_removeListener(s,a){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(o){return Promise.all(o.map(async s=>{try{return{fulfilled:!0,value:await s}}catch(a){return{fulfilled:!1,reason:a}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(s){this.eventTarget=s,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(s){const a=this.receivers.find(at=>at.isListeningto(s));if(a)return a;const et=new Receiver(s);return this.receivers.push(et),et}isListeningto(s){return this.eventTarget===s}async handleEvent(s){const a=s,{eventId:et,eventType:at,data:lt}=a.data,ht=this.handlersMap[at];if(!(ht!=null&&ht.size))return;a.ports[0].postMessage({status:"ack",eventId:et,eventType:at});const dt=Array.from(ht).map(async vt=>vt(a.origin,lt)),ft=await _allSettled(dt);a.ports[0].postMessage({status:"done",eventId:et,eventType:at,response:ft})}_subscribe(s,a){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[s]||(this.handlersMap[s]=new Set),this.handlersMap[s].add(a)}_unsubscribe(s,a){this.handlersMap[s]&&a&&this.handlersMap[s].delete(a),(!a||this.handlersMap[s].size===0)&&delete this.handlersMap[s],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(o="",s=10){let a="";for(let et=0;et<s;et++)a+=Math.floor(Math.random()*10);return o+a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(s){this.target=s,this.handlers=new Set}removeMessageHandler(s){s.messageChannel&&(s.messageChannel.port1.removeEventListener("message",s.onMessage),s.messageChannel.port1.close()),this.handlers.delete(s)}async _send(s,a,et=50){const at=typeof MessageChannel<"u"?new MessageChannel:null;if(!at)throw new Error("connection_unavailable");let lt,ht;return new Promise((dt,ft)=>{const vt=_generateEventId("",20);at.port1.start();const wt=setTimeout(()=>{ft(new Error("unsupported_event"))},et);ht={messageChannel:at,onMessage(Ct){const xt=Ct;if(xt.data.eventId===vt)switch(xt.data.status){case"ack":clearTimeout(wt),lt=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(lt),dt(xt.data.response);break;default:clearTimeout(wt),clearTimeout(lt),ft(new Error("invalid_response"));break}}},this.handlers.add(ht),at.port1.addEventListener("message",ht.onMessage),this.target.postMessage({eventType:s,eventId:vt,data:a},[at.port2])}).finally(()=>{ht&&this.removeMessageHandler(ht)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(o){_window().location.href=o}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var o;return((o=navigator==null?void 0:navigator.serviceWorker)===null||o===void 0?void 0:o.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(s){this.request=s}toPromise(){return new Promise((s,a)=>{this.request.addEventListener("success",()=>{s(this.request.result)}),this.request.addEventListener("error",()=>{a(this.request.error)})})}}function getObjectStore(o,s){return o.transaction([DB_OBJECTSTORE_NAME],s?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const o=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(o).toPromise()}function _openDatabase(){const o=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((s,a)=>{o.addEventListener("error",()=>{a(o.error)}),o.addEventListener("upgradeneeded",()=>{const et=o.result;try{et.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(at){a(at)}}),o.addEventListener("success",async()=>{const et=o.result;et.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?s(et):(et.close(),await _deleteDatabase(),s(await _openDatabase()))})})}async function _putObject(o,s,a){const et=getObjectStore(o,!0).put({[DB_DATA_KEYPATH]:s,value:a});return new DBPromise(et).toPromise()}async function getObject(o,s){const a=getObjectStore(o,!1).get(s),et=await new DBPromise(a).toPromise();return et===void 0?null:et.value}function _deleteObject(o,s){const a=getObjectStore(o,!0).delete(s);return new DBPromise(a).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(s){let a=0;for(;;)try{const et=await this._openDb();return await s(et)}catch(et){if(a++>_TRANSACTION_RETRY_COUNT)throw et;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(s,a)=>({keyProcessed:(await this._poll()).includes(a.key)})),this.receiver._subscribe("ping",async(s,a)=>["keyChanged"])}async initializeSender(){var s,a;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const et=await this.sender._send("ping",{},800);et&&!((s=et[0])===null||s===void 0)&&s.fulfilled&&!((a=et[0])===null||a===void 0)&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(s){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:s},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const s=await _openDatabase();return await _putObject(s,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(s,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(s){this.pendingWrites++;try{await s()}finally{this.pendingWrites--}}async _set(s,a){return this._withPendingWrite(async()=>(await this._withRetries(et=>_putObject(et,s,a)),this.localCache[s]=a,this.notifyServiceWorker(s)))}async _get(s){const a=await this._withRetries(et=>getObject(et,s));return this.localCache[s]=a,a}async _remove(s){return this._withPendingWrite(async()=>(await this._withRetries(a=>_deleteObject(a,s)),delete this.localCache[s],this.notifyServiceWorker(s)))}async _poll(){const s=await this._withRetries(at=>{const lt=getObjectStore(at,!1).getAll();return new DBPromise(lt).toPromise()});if(!s)return[];if(this.pendingWrites!==0)return[];const a=[],et=new Set;for(const{fbase_key:at,value:lt}of s)et.add(at),JSON.stringify(this.localCache[at])!==JSON.stringify(lt)&&(this.notifyListeners(at,lt),a.push(at));for(const at of Object.keys(this.localCache))this.localCache[at]&&!et.has(at)&&(this.notifyListeners(at,null),a.push(at));return a}notifyListeners(s,a){this.localCache[s]=a;const et=this.listeners[s];if(et)for(const at of Array.from(et))at(a)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(s,a){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[s]||(this.listeners[s]=new Set,this._get(s)),this.listeners[s].add(a)}_removeListener(s,a){this.listeners[s]&&(this.listeners[s].delete(a),this.listeners[s].size===0&&delete this.listeners[s]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var o,s;return(s=(o=document.getElementsByTagName("head"))===null||o===void 0?void 0:o[0])!==null&&s!==void 0?s:document}function _loadJS(o){return new Promise((s,a)=>{const et=document.createElement("script");et.setAttribute("src",o),et.onload=s,et.onerror=at=>{const lt=_createError("internal-error");lt.customData=at,a(lt)},et.type="text/javascript",et.charset="UTF-8",getScriptParentElement().appendChild(et)})}function _generateCallbackName(o){return`__${o}${Math.floor(Math.random()*1e6)}`}new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(o,s){return s?_getInstance(s):(_assert(o._popupRedirectResolver,o,"argument-error"),o._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(s){super("custom","custom"),this.params=s}_getIdTokenResponse(s){return signInWithIdp(s,this._buildIdpRequest())}_linkToIdToken(s,a){return signInWithIdp(s,this._buildIdpRequest(a))}_getReauthenticationResolver(s){return signInWithIdp(s,this._buildIdpRequest())}_buildIdpRequest(s){const a={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return s&&(a.idToken=s),a}}function _signIn(o){return _signInWithCredential(o.auth,new IdpCredential(o),o.bypassAuthState)}function _reauth(o){const{auth:s,user:a}=o;return _assert(a,s,"internal-error"),_reauthenticate(a,new IdpCredential(o),o.bypassAuthState)}async function _link(o){const{auth:s,user:a}=o;return _assert(a,s,"internal-error"),_link$1(a,new IdpCredential(o),o.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(s,a,et,at,lt=!1){this.auth=s,this.resolver=et,this.user=at,this.bypassAuthState=lt,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(a)?a:[a]}execute(){return new Promise(async(s,a)=>{this.pendingPromise={resolve:s,reject:a};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(et){this.reject(et)}})}async onAuthEvent(s){const{urlResponse:a,sessionId:et,postBody:at,tenantId:lt,error:ht,type:dt}=s;if(ht){this.reject(ht);return}const ft={auth:this.auth,requestUri:a,sessionId:et,tenantId:lt||void 0,postBody:at||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(dt)(ft))}catch(vt){this.reject(vt)}}onError(s){this.reject(s)}getIdpTask(s){switch(s){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(s){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(s),this.unregisterAndCleanUp()}reject(s){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(s),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(s,a,et,at,lt){super(s,a,at,lt),this.provider=et,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const s=await this.execute();return _assert(s,this.auth,"internal-error"),s}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const s=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],s),this.authWindow.associatedEvent=s,this.resolver._originValidation(this.auth).catch(a=>{this.reject(a)}),this.resolver._isIframeWebStorageSupported(this.auth,a=>{a||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var s;return((s=this.authWindow)===null||s===void 0?void 0:s.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const s=()=>{var a,et;if(!((et=(a=this.authWindow)===null||a===void 0?void 0:a.window)===null||et===void 0)&&et.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(s,_POLL_WINDOW_CLOSE_TIMEOUT.get())};s()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(s,a,et=!1){super(s,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],a,void 0,et),this.eventId=null}async execute(){let s=redirectOutcomeMap.get(this.auth._key());if(!s){try{const et=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;s=()=>Promise.resolve(et)}catch(a){s=()=>Promise.reject(a)}redirectOutcomeMap.set(this.auth._key(),s)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),s()}async onAuthEvent(s){if(s.type==="signInViaRedirect")return super.onAuthEvent(s);if(s.type==="unknown"){this.resolve(null);return}if(s.eventId){const a=await this.auth._redirectUserForId(s.eventId);if(a)return this.user=a,super.onAuthEvent(s);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(o,s){const a=pendingRedirectKey(s),et=resolverPersistence(o);if(!await et._isAvailable())return!1;const at=await et._get(a)==="true";return await et._remove(a),at}function _overrideRedirectResult(o,s){redirectOutcomeMap.set(o._key(),s)}function resolverPersistence(o){return _getInstance(o._redirectPersistence)}function pendingRedirectKey(o){return _persistenceKeyName(PENDING_REDIRECT_KEY,o.config.apiKey,o.name)}async function _getRedirectResult(o,s,a=!1){const et=_castAuth(o),at=_withDefaultResolver(et,s),ht=await new RedirectAction(et,at,a).execute();return ht&&!a&&(delete ht.user._redirectEventId,await et._persistUserIfCurrent(ht.user),await et._setRedirectUser(null,s)),ht}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(s){this.auth=s,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(s){this.consumers.add(s),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,s)&&(this.sendToConsumer(this.queuedRedirectEvent,s),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(s){this.consumers.delete(s)}onEvent(s){if(this.hasEventBeenHandled(s))return!1;let a=!1;return this.consumers.forEach(et=>{this.isEventForConsumer(s,et)&&(a=!0,this.sendToConsumer(s,et),this.saveEventToCache(s))}),this.hasHandledPotentialRedirect||!isRedirectEvent(s)||(this.hasHandledPotentialRedirect=!0,a||(this.queuedRedirectEvent=s,a=!0)),a}sendToConsumer(s,a){var et;if(s.error&&!isNullRedirectEvent(s)){const at=((et=s.error.code)===null||et===void 0?void 0:et.split("auth/")[1])||"internal-error";a.onError(_createError(this.auth,at))}else a.onAuthEvent(s)}isEventForConsumer(s,a){const et=a.eventId===null||!!s.eventId&&s.eventId===a.eventId;return a.filter.includes(s.type)&&et}hasEventBeenHandled(s){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(s))}saveEventToCache(s){this.cachedEventUids.add(eventUid(s)),this.lastProcessedEventTime=Date.now()}}function eventUid(o){return[o.type,o.eventId,o.sessionId,o.tenantId].filter(s=>s).join("-")}function isNullRedirectEvent({type:o,error:s}){return o==="unknown"&&(s==null?void 0:s.code)==="auth/no-auth-event"}function isRedirectEvent(o){switch(o.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(o);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(o,s={}){return _performApiRequest(o,"GET","/v1/projects",s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(o){if(o.config.emulator)return;const{authorizedDomains:s}=await _getProjectConfig(o);for(const a of s)try{if(matchDomain(a))return}catch{}_fail(o,"unauthorized-domain")}function matchDomain(o){const s=_getCurrentUrl(),{protocol:a,hostname:et}=new URL(s);if(o.startsWith("chrome-extension://")){const ht=new URL(o);return ht.hostname===""&&et===""?a==="chrome-extension:"&&o.replace("chrome-extension://","")===s.replace("chrome-extension://",""):a==="chrome-extension:"&&ht.hostname===et}if(!HTTP_REGEX.test(a))return!1;if(IP_ADDRESS_REGEX.test(o))return et===o;const at=o.replace(/\./g,"\\.");return new RegExp("^(.+\\."+at+"|"+at+")$","i").test(et)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const o=_window().___jsl;if(o!=null&&o.H){for(const s of Object.keys(o.H))if(o.H[s].r=o.H[s].r||[],o.H[s].L=o.H[s].L||[],o.H[s].r=[...o.H[s].L],o.CP)for(let a=0;a<o.CP.length;a++)o.CP[a]=null}}function loadGapi(o){return new Promise((s,a)=>{var et,at,lt;function ht(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{s(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),a(_createError(o,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((at=(et=_window().gapi)===null||et===void 0?void 0:et.iframes)===null||at===void 0)&&at.Iframe)s(gapi.iframes.getContext());else if(!((lt=_window().gapi)===null||lt===void 0)&&lt.load)ht();else{const dt=_generateCallbackName("iframefcb");return _window()[dt]=()=>{gapi.load?ht():a(_createError(o,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${dt}`).catch(ft=>a(ft))}}).catch(s=>{throw cachedGApiLoader=null,s})}let cachedGApiLoader=null;function _loadGapi(o){return cachedGApiLoader=cachedGApiLoader||loadGapi(o),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(o){const s=o.config;_assert(s.authDomain,o,"auth-domain-config-required");const a=s.emulator?_emulatorUrl(s,EMULATED_IFRAME_PATH):`https://${o.config.authDomain}/${IFRAME_PATH}`,et={apiKey:s.apiKey,appName:o.name,v:SDK_VERSION},at=EID_FROM_APIHOST.get(o.config.apiHost);at&&(et.eid=at);const lt=o._getFrameworks();return lt.length&&(et.fw=lt.join(",")),`${a}?${querystring(et).slice(1)}`}async function _openIframe(o){const s=await _loadGapi(o),a=_window().gapi;return _assert(a,o,"internal-error"),s.open({where:document.body,url:getIframeUrl(o),messageHandlersFilter:a.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},et=>new Promise(async(at,lt)=>{await et.restyle({setHideOnLeave:!1});const ht=_createError(o,"network-request-failed"),dt=_window().setTimeout(()=>{lt(ht)},PING_TIMEOUT.get());function ft(){_window().clearTimeout(dt),at(et)}et.ping(ft).then(ft,()=>{lt(ht)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(s){this.window=s,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(o,s,a,et=DEFAULT_WIDTH,at=DEFAULT_HEIGHT){const lt=Math.max((window.screen.availHeight-at)/2,0).toString(),ht=Math.max((window.screen.availWidth-et)/2,0).toString();let dt="";const ft=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:et.toString(),height:at.toString(),top:lt,left:ht}),vt=getUA().toLowerCase();a&&(dt=_isChromeIOS(vt)?TARGET_BLANK:a),_isFirefox(vt)&&(s=s||FIREFOX_EMPTY_URL,ft.scrollbars="yes");const wt=Object.entries(ft).reduce((xt,[Pt,Rt])=>`${xt}${Pt}=${Rt},`,"");if(_isIOSStandalone(vt)&&dt!=="_self")return openAsNewWindowIOS(s||"",dt),new AuthPopup(null);const Ct=window.open(s||"",dt,wt);_assert(Ct,o,"popup-blocked");try{Ct.focus()}catch{}return new AuthPopup(Ct)}function openAsNewWindowIOS(o,s){const a=document.createElement("a");a.href=o,a.target=s;const et=document.createEvent("MouseEvent");et.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),a.dispatchEvent(et)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler";function _getRedirectUrl(o,s,a,et,at,lt){_assert(o.config.authDomain,o,"auth-domain-config-required"),_assert(o.config.apiKey,o,"invalid-api-key");const ht={apiKey:o.config.apiKey,appName:o.name,authType:a,redirectUrl:et,v:SDK_VERSION,eventId:at};if(s instanceof FederatedAuthProvider){s.setDefaultLanguage(o.languageCode),ht.providerId=s.providerId||"",isEmpty(s.getCustomParameters())||(ht.customParameters=JSON.stringify(s.getCustomParameters()));for(const[ft,vt]of Object.entries(lt||{}))ht[ft]=vt}if(s instanceof BaseOAuthProvider){const ft=s.getScopes().filter(vt=>vt!=="");ft.length>0&&(ht.scopes=ft.join(","))}o.tenantId&&(ht.tid=o.tenantId);const dt=ht;for(const ft of Object.keys(dt))dt[ft]===void 0&&delete dt[ft];return`${getHandlerBase(o)}?${querystring(dt).slice(1)}`}function getHandlerBase({config:o}){return o.emulator?_emulatorUrl(o,EMULATOR_WIDGET_PATH):`https://${o.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(s,a,et,at){var lt;debugAssert((lt=this.eventManagers[s._key()])===null||lt===void 0?void 0:lt.manager,"_initialize() not called before _openPopup()");const ht=_getRedirectUrl(s,a,et,_getCurrentUrl(),at);return _open(s,ht,_generateEventId())}async _openRedirect(s,a,et,at){return await this._originValidation(s),_setWindowLocation(_getRedirectUrl(s,a,et,_getCurrentUrl(),at)),new Promise(()=>{})}_initialize(s){const a=s._key();if(this.eventManagers[a]){const{manager:at,promise:lt}=this.eventManagers[a];return at?Promise.resolve(at):(debugAssert(lt,"If manager is not set, promise should be"),lt)}const et=this.initAndGetManager(s);return this.eventManagers[a]={promise:et},et.catch(()=>{delete this.eventManagers[a]}),et}async initAndGetManager(s){const a=await _openIframe(s),et=new AuthEventManager(s);return a.register("authEvent",at=>(_assert(at==null?void 0:at.authEvent,s,"invalid-auth-event"),{status:et.onEvent(at.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[s._key()]={manager:et},this.iframes[s._key()]=a,et}_isIframeWebStorageSupported(s,a){this.iframes[s._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},at=>{var lt;const ht=(lt=at==null?void 0:at[0])===null||lt===void 0?void 0:lt[WEB_STORAGE_SUPPORT_KEY];ht!==void 0&&a(!!ht),_fail(s,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(s){const a=s._key();return this.originValidationPromises[a]||(this.originValidationPromises[a]=_validateOrigin(s)),this.originValidationPromises[a]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$8="@firebase/auth",version$5="0.22.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(s){this.auth=s,this.internalListeners=new Map}getUid(){var s;return this.assertAuthConfigured(),((s=this.auth.currentUser)===null||s===void 0?void 0:s.uid)||null}async getToken(s){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(s)}:null}addAuthTokenListener(s){if(this.assertAuthConfigured(),this.internalListeners.has(s))return;const a=this.auth.onIdTokenChanged(et=>{s((et==null?void 0:et.stsTokenManager.accessToken)||null)});this.internalListeners.set(s,a),this.updateProactiveRefresh()}removeAuthTokenListener(s){this.assertAuthConfigured();const a=this.internalListeners.get(s);a&&(this.internalListeners.delete(s),a(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(o){switch(o){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(o){_registerComponent(new Component("auth",(s,{options:a})=>{const et=s.getProvider("app").getImmediate(),at=s.getProvider("heartbeat"),{apiKey:lt,authDomain:ht}=et.options;return((dt,ft)=>{_assert(lt&&!lt.includes(":"),"invalid-api-key",{appName:dt.name}),_assert(!(ht!=null&&ht.includes(":")),"argument-error",{appName:dt.name});const vt={apiKey:lt,authDomain:ht,clientPlatform:o,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(o)},wt=new AuthImpl(dt,ft,vt);return _initializeAuthInstance(wt,a),wt})(et,at)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((s,a,et)=>{s.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",s=>{const a=_castAuth(s.getProvider("auth").getImmediate());return(et=>new AuthInterop(et))(a)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$8,version$5,getVersionForPlatform(o)),registerVersion(name$8,version$5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=o=>async s=>{const a=s&&await s.getIdTokenResult(),et=a&&(new Date().getTime()-Date.parse(a.issuedAtTime))/1e3;if(et&&et>authIdTokenMaxAge)return;const at=a==null?void 0:a.token;lastPostedIdToken!==at&&(lastPostedIdToken=at,await fetch(o,{method:at?"POST":"DELETE",headers:at?{Authorization:`Bearer ${at}`}:{}}))};function getAuth(o=getApp()){const s=_getProvider(o,"auth");if(s.isInitialized())return s.getImmediate();const a=initializeAuth(o,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),et=getExperimentalSetting("authTokenSyncURL");if(et){const lt=mintCookieFactory(et);beforeAuthStateChanged(a,lt,()=>lt(a.currentUser)),onIdTokenChanged(a,ht=>lt(ht))}const at=getDefaultEmulatorHost("auth");return at&&connectAuthEmulator(a,`http://${at}`),a}registerAuth("Browser");var name$7="firebase",version$4="9.19.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$7,version$4,"app");const name$6="@firebase/installations",version$3="0.6.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$3}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=60*60*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={["missing-app-config-values"]:'Missing App configuration value: "{$valueName}"',["not-registered"]:"Firebase Installation is not registered.",["installation-not-found"]:"Firebase Installation not found.",["request-failed"]:'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',["app-offline"]:"Could not process request. Application offline.",["delete-pending-registration"]:"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(o){return o instanceof FirebaseError&&o.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:o}){return`${INSTALLATIONS_API_URL}/projects/${o}/installations`}function extractAuthTokenInfoFromResponse(o){return{token:o.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(o.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(o,s){const et=(await s.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:o,serverCode:et.code,serverMessage:et.message,serverStatus:et.status})}function getHeaders$1({apiKey:o}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":o})}function getHeadersWithAuth(o,{refreshToken:s}){const a=getHeaders$1(o);return a.append("Authorization",getAuthorizationHeader(s)),a}async function retryIfServerError(o){const s=await o();return s.status>=500&&s.status<600?o():s}function getExpiresInFromResponseExpiresIn(o){return Number(o.replace("s","000"))}function getAuthorizationHeader(o){return`${INTERNAL_AUTH_VERSION} ${o}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:o,heartbeatServiceProvider:s},{fid:a}){const et=getInstallationsEndpoint(o),at=getHeaders$1(o),lt=s.getImmediate({optional:!0});if(lt){const vt=await lt.getHeartbeatsHeader();vt&&at.append("x-firebase-client",vt)}const ht={fid:a,authVersion:INTERNAL_AUTH_VERSION,appId:o.appId,sdkVersion:PACKAGE_VERSION},dt={method:"POST",headers:at,body:JSON.stringify(ht)},ft=await retryIfServerError(()=>fetch(et,dt));if(ft.ok){const vt=await ft.json();return{fid:vt.fid||a,registrationStatus:2,refreshToken:vt.refreshToken,authToken:extractAuthTokenInfoFromResponse(vt.authToken)}}else throw await getErrorFromResponse("Create Installation",ft)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(o){return new Promise(s=>{setTimeout(s,o)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(o){return btoa(String.fromCharCode(...o)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const o=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(o),o[0]=112+o[0]%16;const a=encode$a(o);return VALID_FID_PATTERN.test(a)?a:INVALID_FID}catch{return INVALID_FID}}function encode$a(o){return bufferToBase64UrlSafe(o).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey(o){return`${o.appName}!${o.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(o,s){const a=getKey(o);callFidChangeCallbacks(a,s),broadcastFidChange(a,s)}function callFidChangeCallbacks(o,s){const a=fidChangeCallbacks.get(o);if(a)for(const et of a)et(s)}function broadcastFidChange(o,s){const a=getBroadcastChannel();a&&a.postMessage({key:o,fid:s}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=o=>{callFidChangeCallbacks(o.data.key,o.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-installations-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-installations-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(o,s)=>{switch(s){case 0:o.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function set(o,s){const a=getKey(o),at=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),lt=at.objectStore(OBJECT_STORE_NAME),ht=await lt.get(a);return await lt.put(s,a),await at.done,(!ht||ht.fid!==s.fid)&&fidChanged(o,s.fid),s}async function remove(o){const s=getKey(o),et=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");await et.objectStore(OBJECT_STORE_NAME).delete(s),await et.done}async function update(o,s){const a=getKey(o),at=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite"),lt=at.objectStore(OBJECT_STORE_NAME),ht=await lt.get(a),dt=s(ht);return dt===void 0?await lt.delete(a):await lt.put(dt,a),await at.done,dt&&(!ht||ht.fid!==dt.fid)&&fidChanged(o,dt.fid),dt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(o){let s;const a=await update(o.appConfig,et=>{const at=updateOrCreateInstallationEntry(et),lt=triggerRegistrationIfNecessary(o,at);return s=lt.registrationPromise,lt.installationEntry});return a.fid===INVALID_FID?{installationEntry:await s}:{installationEntry:a,registrationPromise:s}}function updateOrCreateInstallationEntry(o){const s=o||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(s)}function triggerRegistrationIfNecessary(o,s){if(s.registrationStatus===0){if(!navigator.onLine){const at=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:s,registrationPromise:at}}const a={fid:s.fid,registrationStatus:1,registrationTime:Date.now()},et=registerInstallation(o,a);return{installationEntry:a,registrationPromise:et}}else return s.registrationStatus===1?{installationEntry:s,registrationPromise:waitUntilFidRegistration(o)}:{installationEntry:s}}async function registerInstallation(o,s){try{const a=await createInstallationRequest(o,s);return set(o.appConfig,a)}catch(a){throw isServerError(a)&&a.customData.serverCode===409?await remove(o.appConfig):await set(o.appConfig,{fid:s.fid,registrationStatus:0}),a}}async function waitUntilFidRegistration(o){let s=await updateInstallationRequest(o.appConfig);for(;s.registrationStatus===1;)await sleep(100),s=await updateInstallationRequest(o.appConfig);if(s.registrationStatus===0){const{installationEntry:a,registrationPromise:et}=await getInstallationEntry(o);return et||a}return s}function updateInstallationRequest(o){return update(o,s=>{if(!s)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(s)})}function clearTimedOutRequest(o){return hasInstallationRequestTimedOut(o)?{fid:o.fid,registrationStatus:0}:o}function hasInstallationRequestTimedOut(o){return o.registrationStatus===1&&o.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:o,heartbeatServiceProvider:s},a){const et=getGenerateAuthTokenEndpoint(o,a),at=getHeadersWithAuth(o,a),lt=s.getImmediate({optional:!0});if(lt){const vt=await lt.getHeartbeatsHeader();vt&&at.append("x-firebase-client",vt)}const ht={installation:{sdkVersion:PACKAGE_VERSION,appId:o.appId}},dt={method:"POST",headers:at,body:JSON.stringify(ht)},ft=await retryIfServerError(()=>fetch(et,dt));if(ft.ok){const vt=await ft.json();return extractAuthTokenInfoFromResponse(vt)}else throw await getErrorFromResponse("Generate Auth Token",ft)}function getGenerateAuthTokenEndpoint(o,{fid:s}){return`${getInstallationsEndpoint(o)}/${s}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(o,s=!1){let a;const et=await update(o.appConfig,lt=>{if(!isEntryRegistered(lt))throw ERROR_FACTORY$1.create("not-registered");const ht=lt.authToken;if(!s&&isAuthTokenValid(ht))return lt;if(ht.requestStatus===1)return a=waitUntilAuthTokenRequest(o,s),lt;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const dt=makeAuthTokenRequestInProgressEntry(lt);return a=fetchAuthTokenFromServer(o,dt),dt}});return a?await a:et.authToken}async function waitUntilAuthTokenRequest(o,s){let a=await updateAuthTokenRequest(o.appConfig);for(;a.authToken.requestStatus===1;)await sleep(100),a=await updateAuthTokenRequest(o.appConfig);const et=a.authToken;return et.requestStatus===0?refreshAuthToken(o,s):et}function updateAuthTokenRequest(o){return update(o,s=>{if(!isEntryRegistered(s))throw ERROR_FACTORY$1.create("not-registered");const a=s.authToken;return hasAuthTokenRequestTimedOut(a)?Object.assign(Object.assign({},s),{authToken:{requestStatus:0}}):s})}async function fetchAuthTokenFromServer(o,s){try{const a=await generateAuthTokenRequest(o,s),et=Object.assign(Object.assign({},s),{authToken:a});return await set(o.appConfig,et),a}catch(a){if(isServerError(a)&&(a.customData.serverCode===401||a.customData.serverCode===404))await remove(o.appConfig);else{const et=Object.assign(Object.assign({},s),{authToken:{requestStatus:0}});await set(o.appConfig,et)}throw a}}function isEntryRegistered(o){return o!==void 0&&o.registrationStatus===2}function isAuthTokenValid(o){return o.requestStatus===2&&!isAuthTokenExpired(o)}function isAuthTokenExpired(o){const s=Date.now();return s<o.creationTime||o.creationTime+o.expiresIn<s+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(o){const s={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},o),{authToken:s})}function hasAuthTokenRequestTimedOut(o){return o.requestStatus===1&&o.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(o){const s=o,{installationEntry:a,registrationPromise:et}=await getInstallationEntry(s);return et?et.catch(console.error):refreshAuthToken(s).catch(console.error),a.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken(o,s=!1){const a=o;return await completeInstallationRegistration(a),(await refreshAuthToken(a,s)).token}async function completeInstallationRegistration(o){const{registrationPromise:s}=await getInstallationEntry(o);s&&await s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(o){if(!o||!o.options)throw getMissingValueError("App Configuration");if(!o.name)throw getMissingValueError("App Name");const s=["projectId","apiKey","appId"];for(const a of s)if(!o.options[a])throw getMissingValueError(a);return{appName:o.name,projectId:o.options.projectId,apiKey:o.options.apiKey,appId:o.options.appId}}function getMissingValueError(o){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=o=>{const s=o.getProvider("app").getImmediate(),a=extractAppConfig(s),et=_getProvider(s,"heartbeat");return{app:s,appConfig:a,heartbeatServiceProvider:et,_delete:()=>Promise.resolve()}},internalFactory=o=>{const s=o.getProvider("app").getImmediate(),a=_getProvider(s,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(a),getToken:at=>getToken(a,at)}};function registerInstallations(){_registerComponent(new Component(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$6,version$3);registerVersion(name$6,version$3,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ANALYTICS_TYPE="analytics",GA_FID_KEY="firebase_id",ORIGIN_KEY="origin",FETCH_TIMEOUT_MILLIS=60*1e3,DYNAMIC_CONFIG_URL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",GTAG_URL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={["already-exists"]:"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",["already-initialized"]:"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.",["already-initialized-settings"]:"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",["interop-component-reg-failed"]:"Firebase Analytics Interop Component failed to instantiate: {$reason}",["invalid-analytics-context"]:"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["indexeddb-unavailable"]:"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",["fetch-throttle"]:"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",["config-fetch-failed"]:"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",["no-api-key"]:'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',["no-app-id"]:'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',["invalid-gtag-resource"]:"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ERROR_FACTORY=new ErrorFactory("analytics","Analytics",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createGtagTrustedTypesScriptURL(o){if(!o.startsWith(GTAG_URL)){const s=ERROR_FACTORY.create("invalid-gtag-resource",{gtagURL:o});return logger.warn(s.message),""}return o}function promiseAllSettled(o){return Promise.all(o.map(s=>s.catch(a=>a)))}function createTrustedTypesPolicy(o,s){let a;return window.trustedTypes&&(a=window.trustedTypes.createPolicy(o,s)),a}function insertScriptTag(o,s){const a=createTrustedTypesPolicy("firebase-js-sdk-policy",{createScriptURL:createGtagTrustedTypesScriptURL}),et=document.createElement("script"),at=`${GTAG_URL}?l=${o}&id=${s}`;et.src=a?a==null?void 0:a.createScriptURL(at):at,et.async=!0,document.head.appendChild(et)}function getOrCreateDataLayer(o){let s=[];return Array.isArray(window[o])?s=window[o]:window[o]=s,s}async function gtagOnConfig(o,s,a,et,at,lt){const ht=et[at];try{if(ht)await s[ht];else{const ft=(await promiseAllSettled(a)).find(vt=>vt.measurementId===at);ft&&await s[ft.appId]}}catch(dt){logger.error(dt)}o("config",at,lt)}async function gtagOnEvent(o,s,a,et,at){try{let lt=[];if(at&&at.send_to){let ht=at.send_to;Array.isArray(ht)||(ht=[ht]);const dt=await promiseAllSettled(a);for(const ft of ht){const vt=dt.find(Ct=>Ct.measurementId===ft),wt=vt&&s[vt.appId];if(wt)lt.push(wt);else{lt=[];break}}}lt.length===0&&(lt=Object.values(s)),await Promise.all(lt),o("event",et,at||{})}catch(lt){logger.error(lt)}}function wrapGtag(o,s,a,et){async function at(lt,ht,dt){try{lt==="event"?await gtagOnEvent(o,s,a,ht,dt):lt==="config"?await gtagOnConfig(o,s,a,et,ht,dt):lt==="consent"?o("consent","update",dt):o("set",ht)}catch(ft){logger.error(ft)}}return at}function wrapOrCreateGtag(o,s,a,et,at){let lt=function(...ht){window[et].push(arguments)};return window[at]&&typeof window[at]=="function"&&(lt=window[at]),window[at]=wrapGtag(lt,o,s,a),{gtagCore:lt,wrappedGtag:window[at]}}function findGtagScriptOnPage(o){const s=window.document.getElementsByTagName("script");for(const a of Object.values(s))if(a.src&&a.src.includes(GTAG_URL)&&a.src.includes(o))return a;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LONG_RETRY_FACTOR=30,BASE_INTERVAL_MILLIS=1e3;class RetryData{constructor(s={},a=BASE_INTERVAL_MILLIS){this.throttleMetadata=s,this.intervalMillis=a}getThrottleMetadata(s){return this.throttleMetadata[s]}setThrottleMetadata(s,a){this.throttleMetadata[s]=a}deleteThrottleMetadata(s){delete this.throttleMetadata[s]}}const defaultRetryData=new RetryData;function getHeaders(o){return new Headers({Accept:"application/json","x-goog-api-key":o})}async function fetchDynamicConfig(o){var s;const{appId:a,apiKey:et}=o,at={method:"GET",headers:getHeaders(et)},lt=DYNAMIC_CONFIG_URL.replace("{app-id}",a),ht=await fetch(lt,at);if(ht.status!==200&&ht.status!==304){let dt="";try{const ft=await ht.json();!((s=ft.error)===null||s===void 0)&&s.message&&(dt=ft.error.message)}catch{}throw ERROR_FACTORY.create("config-fetch-failed",{httpStatus:ht.status,responseMessage:dt})}return ht.json()}async function fetchDynamicConfigWithRetry(o,s=defaultRetryData,a){const{appId:et,apiKey:at,measurementId:lt}=o.options;if(!et)throw ERROR_FACTORY.create("no-app-id");if(!at){if(lt)return{measurementId:lt,appId:et};throw ERROR_FACTORY.create("no-api-key")}const ht=s.getThrottleMetadata(et)||{backoffCount:0,throttleEndTimeMillis:Date.now()},dt=new AnalyticsAbortSignal;return setTimeout(async()=>{dt.abort()},a!==void 0?a:FETCH_TIMEOUT_MILLIS),attemptFetchDynamicConfigWithRetry({appId:et,apiKey:at,measurementId:lt},ht,dt,s)}async function attemptFetchDynamicConfigWithRetry(o,{throttleEndTimeMillis:s,backoffCount:a},et,at=defaultRetryData){var lt;const{appId:ht,measurementId:dt}=o;try{await setAbortableTimeout(et,s)}catch(ft){if(dt)return logger.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${ft==null?void 0:ft.message}]`),{appId:ht,measurementId:dt};throw ft}try{const ft=await fetchDynamicConfig(o);return at.deleteThrottleMetadata(ht),ft}catch(ft){const vt=ft;if(!isRetriableError(vt)){if(at.deleteThrottleMetadata(ht),dt)return logger.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${dt} provided in the "measurementId" field in the local Firebase config. [${vt==null?void 0:vt.message}]`),{appId:ht,measurementId:dt};throw ft}const wt=Number((lt=vt==null?void 0:vt.customData)===null||lt===void 0?void 0:lt.httpStatus)===503?calculateBackoffMillis(a,at.intervalMillis,LONG_RETRY_FACTOR):calculateBackoffMillis(a,at.intervalMillis),Ct={throttleEndTimeMillis:Date.now()+wt,backoffCount:a+1};return at.setThrottleMetadata(ht,Ct),logger.debug(`Calling attemptFetch again in ${wt} millis`),attemptFetchDynamicConfigWithRetry(o,Ct,et,at)}}function setAbortableTimeout(o,s){return new Promise((a,et)=>{const at=Math.max(s-Date.now(),0),lt=setTimeout(a,at);o.addEventListener(()=>{clearTimeout(lt),et(ERROR_FACTORY.create("fetch-throttle",{throttleEndTimeMillis:s}))})})}function isRetriableError(o){if(!(o instanceof FirebaseError)||!o.customData)return!1;const s=Number(o.customData.httpStatus);return s===429||s===500||s===503||s===504}class AnalyticsAbortSignal{constructor(){this.listeners=[]}addEventListener(s){this.listeners.push(s)}abort(){this.listeners.forEach(s=>s())}}async function logEvent$1(o,s,a,et,at){if(at&&at.global){o("event",a,et);return}else{const lt=await s,ht=Object.assign(Object.assign({},et),{send_to:lt});o("event",a,ht)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function validateIndexedDB(){if(isIndexedDBAvailable())try{await validateIndexedDBOpenable()}catch(o){return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:o==null?void 0:o.toString()}).message),!1}else return logger.warn(ERROR_FACTORY.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function _initializeAnalytics(o,s,a,et,at,lt,ht){var dt;const ft=fetchDynamicConfigWithRetry(o);ft.then(Pt=>{a[Pt.measurementId]=Pt.appId,o.options.measurementId&&Pt.measurementId!==o.options.measurementId&&logger.warn(`The measurement ID in the local Firebase config (${o.options.measurementId}) does not match the measurement ID fetched from the server (${Pt.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pt=>logger.error(Pt)),s.push(ft);const vt=validateIndexedDB().then(Pt=>{if(Pt)return et.getId()}),[wt,Ct]=await Promise.all([ft,vt]);findGtagScriptOnPage(lt)||insertScriptTag(lt,wt.measurementId),at("js",new Date);const xt=(dt=ht==null?void 0:ht.config)!==null&&dt!==void 0?dt:{};return xt[ORIGIN_KEY]="firebase",xt.update=!0,Ct!=null&&(xt[GA_FID_KEY]=Ct),at("config",wt.measurementId,xt),wt.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AnalyticsService{constructor(s){this.app=s}_delete(){return delete initializationPromisesMap[this.app.options.appId],Promise.resolve()}}let initializationPromisesMap={},dynamicConfigPromisesList=[];const measurementIdToAppId={};let dataLayerName="dataLayer",gtagName="gtag",gtagCoreFunction,wrappedGtagFunction,globalInitDone=!1;function warnOnBrowserContextMismatch(){const o=[];if(isBrowserExtension()&&o.push("This is a browser extension environment."),areCookiesEnabled()||o.push("Cookies are not available."),o.length>0){const s=o.map((et,at)=>`(${at+1}) ${et}`).join(" "),a=ERROR_FACTORY.create("invalid-analytics-context",{errorInfo:s});logger.warn(a.message)}}function factory$2(o,s,a){warnOnBrowserContextMismatch();const et=o.options.appId;if(!et)throw ERROR_FACTORY.create("no-app-id");if(!o.options.apiKey)if(o.options.measurementId)logger.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${o.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ERROR_FACTORY.create("no-api-key");if(initializationPromisesMap[et]!=null)throw ERROR_FACTORY.create("already-exists",{id:et});if(!globalInitDone){getOrCreateDataLayer(dataLayerName);const{wrappedGtag:lt,gtagCore:ht}=wrapOrCreateGtag(initializationPromisesMap,dynamicConfigPromisesList,measurementIdToAppId,dataLayerName,gtagName);wrappedGtagFunction=lt,gtagCoreFunction=ht,globalInitDone=!0}return initializationPromisesMap[et]=_initializeAnalytics(o,dynamicConfigPromisesList,measurementIdToAppId,s,gtagCoreFunction,dataLayerName,a),new AnalyticsService(o)}function getAnalytics(o=getApp()){o=getModularInstance(o);const s=_getProvider(o,ANALYTICS_TYPE);return s.isInitialized()?s.getImmediate():initializeAnalytics(o)}function initializeAnalytics(o,s={}){const a=_getProvider(o,ANALYTICS_TYPE);if(a.isInitialized()){const at=a.getImmediate();if(deepEqual(s,a.getOptions()))return at;throw ERROR_FACTORY.create("already-initialized")}return a.initialize({options:s})}function logEvent(o,s,a,et){o=getModularInstance(o),logEvent$1(wrappedGtagFunction,initializationPromisesMap[o.app.options.appId],s,a,et).catch(at=>logger.error(at))}const name$5="@firebase/analytics",version$2="0.9.5";function registerAnalytics(){_registerComponent(new Component(ANALYTICS_TYPE,(s,{options:a})=>{const et=s.getProvider("app").getImmediate(),at=s.getProvider("installations-internal").getImmediate();return factory$2(et,at,a)},"PUBLIC")),_registerComponent(new Component("analytics-internal",o,"PRIVATE")),registerVersion(name$5,version$2),registerVersion(name$5,version$2,"esm2017");function o(s){try{const a=s.getProvider(ANALYTICS_TYPE).getImmediate();return{logEvent:(et,at,lt)=>logEvent(a,et,at,lt)}}catch(a){throw ERROR_FACTORY.create("interop-component-reg-failed",{reason:a})}}}registerAnalytics();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3,DEFAULT_MIN_SLEEP_TIME_MILLIS=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(s,a,et=0){super(prependCode(s),`Firebase Storage: ${a} (${prependCode(s)})`),this.status_=et,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(s){this.status_=s}_codeEquals(s){return prependCode(s)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(s){this.customData.serverResponse=s,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(o){o.UNKNOWN="unknown",o.OBJECT_NOT_FOUND="object-not-found",o.BUCKET_NOT_FOUND="bucket-not-found",o.PROJECT_NOT_FOUND="project-not-found",o.QUOTA_EXCEEDED="quota-exceeded",o.UNAUTHENTICATED="unauthenticated",o.UNAUTHORIZED="unauthorized",o.UNAUTHORIZED_APP="unauthorized-app",o.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",o.INVALID_CHECKSUM="invalid-checksum",o.CANCELED="canceled",o.INVALID_EVENT_NAME="invalid-event-name",o.INVALID_URL="invalid-url",o.INVALID_DEFAULT_BUCKET="invalid-default-bucket",o.NO_DEFAULT_BUCKET="no-default-bucket",o.CANNOT_SLICE_BLOB="cannot-slice-blob",o.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",o.NO_DOWNLOAD_URL="no-download-url",o.INVALID_ARGUMENT="invalid-argument",o.INVALID_ARGUMENT_COUNT="invalid-argument-count",o.APP_DELETED="app-deleted",o.INVALID_ROOT_OPERATION="invalid-root-operation",o.INVALID_FORMAT="invalid-format",o.INTERNAL_ERROR="internal-error",o.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(o){return"storage/"+o}function unknown(){const o="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,o)}function objectNotFound(o){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")}function quotaExceeded(o){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const o="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,o)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(o){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+o+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(o){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+o+"'.")}function invalidDefaultBucket(o){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+o+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function serverFileWrongSize(){return new StorageError(StorageErrorCode.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(o){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${o} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(o){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,o)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(o){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+o+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(o,s){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+o+"': "+s)}function internalError(o){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(s,a){this.bucket=s,this.path_=a}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const s=encodeURIComponent;return"/b/"+s(this.bucket)+"/o/"+s(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(s,a){let et;try{et=Location.makeFromUrl(s,a)}catch{return new Location(s,"")}if(et.path==="")return et;throw invalidDefaultBucket(s)}static makeFromUrl(s,a){let et=null;const at="([A-Za-z0-9.\\-_]+)";function lt(Dt){Dt.path.charAt(Dt.path.length-1)==="/"&&(Dt.path_=Dt.path_.slice(0,-1))}const ht="(/(.*))?$",dt=new RegExp("^gs://"+at+ht,"i"),ft={bucket:1,path:3};function vt(Dt){Dt.path_=decodeURIComponent(Dt.path)}const wt="v[A-Za-z0-9_]+",Ct=a.replace(/[.]/g,"\\."),xt="(/([^?#]*).*)?$",Pt=new RegExp(`^https?://${Ct}/${wt}/b/${at}/o${xt}`,"i"),Rt={bucket:1,path:3},_t=a===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":a,St="([^?#]*)",bt=new RegExp(`^https?://${_t}/${at}/${St}`,"i"),kt=[{regex:dt,indices:ft,postModify:lt},{regex:Pt,indices:Rt,postModify:vt},{regex:bt,indices:{bucket:1,path:2},postModify:vt}];for(let Dt=0;Dt<kt.length;Dt++){const jt=kt[Dt],Wt=jt.regex.exec(s);if(Wt){const Yt=Wt[jt.indices.bucket];let Bt=Wt[jt.indices.path];Bt||(Bt=""),et=new Location(Yt,Bt),jt.postModify(et);break}}if(et==null)throw invalidUrl(s);return et}}class FailRequest{constructor(s){this.promise_=Promise.reject(s)}getPromise(){return this.promise_}cancel(s=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(o,s,a){let et=1,at=null,lt=null,ht=!1,dt=0;function ft(){return dt===2}let vt=!1;function wt(...St){vt||(vt=!0,s.apply(null,St))}function Ct(St){at=setTimeout(()=>{at=null,o(Pt,ft())},St)}function xt(){lt&&clearTimeout(lt)}function Pt(St,...bt){if(vt){xt();return}if(St){xt(),wt.call(null,St,...bt);return}if(ft()||ht){xt(),wt.call(null,St,...bt);return}et<64&&(et*=2);let kt;dt===1?(dt=2,kt=0):kt=(et+Math.random())*1e3,Ct(kt)}let Rt=!1;function _t(St){Rt||(Rt=!0,xt(),!vt&&(at!==null?(St||(dt=2),clearTimeout(at),Ct(0)):St||(dt=1)))}return Ct(0),lt=setTimeout(()=>{ht=!0,_t(!0)},a),_t}function stop(o){o(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(o){return o!==void 0}function isFunction(o){return typeof o=="function"}function isNonArrayObject(o){return typeof o=="object"&&!Array.isArray(o)}function isString$1(o){return typeof o=="string"||o instanceof String}function isNativeBlob(o){return isNativeBlobDefined()&&o instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"&&!isNode()}function validateNumber(o,s,a,et){if(et<s)throw invalidArgument(`Invalid value for '${o}'. Expected ${s} or greater.`);if(et>a)throw invalidArgument(`Invalid value for '${o}'. Expected ${a} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(o,s,a){let et=s;return a==null&&(et=`https://${s}`),`${a}://${et}/v0${o}`}function makeQueryString(o){const s=encodeURIComponent;let a="?";for(const et in o)if(o.hasOwnProperty(et)){const at=s(et)+"="+s(o[et]);a=a+at+"&"}return a=a.slice(0,-1),a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ErrorCode;(function(o){o[o.NO_ERROR=0]="NO_ERROR",o[o.NETWORK_ERROR=1]="NETWORK_ERROR",o[o.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(o,s){const a=o>=500&&o<600,at=[408,429].indexOf(o)!==-1,lt=s.indexOf(o)!==-1;return a||at||lt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(s,a,et,at,lt,ht,dt,ft,vt,wt,Ct,xt=!0){this.url_=s,this.method_=a,this.headers_=et,this.body_=at,this.successCodes_=lt,this.additionalRetryCodes_=ht,this.callback_=dt,this.errorCallback_=ft,this.timeout_=vt,this.progressCallback_=wt,this.connectionFactory_=Ct,this.retry=xt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Pt,Rt)=>{this.resolve_=Pt,this.reject_=Rt,this.start_()})}start_(){const s=(et,at)=>{if(at){et(!1,new RequestEndStatus(!1,null,!0));return}const lt=this.connectionFactory_();this.pendingConnection_=lt;const ht=dt=>{const ft=dt.loaded,vt=dt.lengthComputable?dt.total:-1;this.progressCallback_!==null&&this.progressCallback_(ft,vt)};this.progressCallback_!==null&&lt.addUploadProgressListener(ht),lt.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&lt.removeUploadProgressListener(ht),this.pendingConnection_=null;const dt=lt.getErrorCode()===ErrorCode.NO_ERROR,ft=lt.getStatus();if(!dt||isRetryStatusCode(ft,this.additionalRetryCodes_)&&this.retry){const wt=lt.getErrorCode()===ErrorCode.ABORT;et(!1,new RequestEndStatus(!1,null,wt));return}const vt=this.successCodes_.indexOf(ft)!==-1;et(!0,new RequestEndStatus(vt,lt))})},a=(et,at)=>{const lt=this.resolve_,ht=this.reject_,dt=at.connection;if(at.wasSuccessCode)try{const ft=this.callback_(dt,dt.getResponse());isJustDef(ft)?lt(ft):lt()}catch(ft){ht(ft)}else if(dt!==null){const ft=unknown();ft.serverResponse=dt.getErrorText(),this.errorCallback_?ht(this.errorCallback_(dt,ft)):ht(ft)}else if(at.canceled){const ft=this.appDelete_?appDeleted():canceled();ht(ft)}else{const ft=retryLimitExceeded();ht(ft)}};this.canceled_?a(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(s,a,this.timeout_)}getPromise(){return this.promise_}cancel(s){this.canceled_=!0,this.appDelete_=s||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(s,a,et){this.wasSuccessCode=s,this.connection=a,this.canceled=!!et}}function addAuthHeader_(o,s){s!==null&&s.length>0&&(o.Authorization="Firebase "+s)}function addVersionHeader_(o,s){o["X-Firebase-Storage-Version"]="webjs/"+(s??"AppManager")}function addGmpidHeader_(o,s){s&&(o["X-Firebase-GMPID"]=s)}function addAppCheckHeader_(o,s){s!==null&&(o["X-Firebase-AppCheck"]=s)}function makeRequest(o,s,a,et,at,lt,ht=!0){const dt=makeQueryString(o.urlParams),ft=o.url+dt,vt=Object.assign({},o.headers);return addGmpidHeader_(vt,s),addAuthHeader_(vt,a),addVersionHeader_(vt,lt),addAppCheckHeader_(vt,et),new NetworkRequest(ft,o.method,vt,o.body,o.successCodes,o.additionalRetryCodes,o.handler,o.errorHandler,o.timeout,o.progressCallback,at,ht)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...o){const s=getBlobBuilder();if(s!==void 0){const a=new s;for(let et=0;et<o.length;et++)a.append(o[et]);return a.getBlob()}else{if(isNativeBlobDefined())return new Blob(o);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(o,s,a){return o.webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(o){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(s,a){this.data=s,this.contentType=a||null}}function dataFromString(o,s){switch(o){case StringFormat.RAW:return new StringData(utf8Bytes_(s));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(o,s));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(s),dataURLContentType_(s))}throw unknown()}function utf8Bytes_(o){const s=[];for(let a=0;a<o.length;a++){let et=o.charCodeAt(a);if(et<=127)s.push(et);else if(et<=2047)s.push(192|et>>6,128|et&63);else if((et&64512)===55296)if(!(a<o.length-1&&(o.charCodeAt(a+1)&64512)===56320))s.push(239,191,189);else{const lt=et,ht=o.charCodeAt(++a);et=65536|(lt&1023)<<10|ht&1023,s.push(240|et>>18,128|et>>12&63,128|et>>6&63,128|et&63)}else(et&64512)===56320?s.push(239,191,189):s.push(224|et>>12,128|et>>6&63,128|et&63)}return new Uint8Array(s)}function percentEncodedBytes_(o){let s;try{s=decodeURIComponent(o)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(s)}function base64Bytes_(o,s){switch(o){case StringFormat.BASE64:{const at=s.indexOf("-")!==-1,lt=s.indexOf("_")!==-1;if(at||lt)throw invalidFormat(o,"Invalid character '"+(at?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const at=s.indexOf("+")!==-1,lt=s.indexOf("/")!==-1;if(at||lt)throw invalidFormat(o,"Invalid character '"+(at?"+":"/")+"' found: is it base64 encoded?");s=s.replace(/-/g,"+").replace(/_/g,"/");break}}let a;try{a=decodeBase64(s)}catch(at){throw at.message.includes("polyfill")?at:invalidFormat(o,"Invalid character found")}const et=new Uint8Array(a.length);for(let at=0;at<a.length;at++)et[at]=a.charCodeAt(at);return et}class DataURLParts{constructor(s){this.base64=!1,this.contentType=null;const a=s.match(/^data:([^,]+)?,/);if(a===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const et=a[1]||null;et!=null&&(this.base64=endsWith(et,";base64"),this.contentType=this.base64?et.substring(0,et.length-7):et),this.rest=s.substring(s.indexOf(",")+1)}}function dataURLBytes_(o){const s=new DataURLParts(o);return s.base64?base64Bytes_(StringFormat.BASE64,s.rest):percentEncodedBytes_(s.rest)}function dataURLContentType_(o){return new DataURLParts(o).contentType}function endsWith(o,s){return o.length>=s.length?o.substring(o.length-s.length)===s:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(s,a){let et=0,at="";isNativeBlob(s)?(this.data_=s,et=s.size,at=s.type):s instanceof ArrayBuffer?(a?this.data_=new Uint8Array(s):(this.data_=new Uint8Array(s.byteLength),this.data_.set(new Uint8Array(s))),et=this.data_.length):s instanceof Uint8Array&&(a?this.data_=s:(this.data_=new Uint8Array(s.length),this.data_.set(s)),et=s.length),this.size_=et,this.type_=at}size(){return this.size_}type(){return this.type_}slice(s,a){if(isNativeBlob(this.data_)){const et=this.data_,at=sliceBlob(et,s,a);return at===null?null:new FbsBlob(at)}else{const et=new Uint8Array(this.data_.buffer,s,a-s);return new FbsBlob(et,!0)}}static getBlob(...s){if(isNativeBlobDefined()){const a=s.map(et=>et instanceof FbsBlob?et.data_:et);return new FbsBlob(getBlob$1.apply(null,a))}else{const a=s.map(ht=>isString$1(ht)?dataFromString(StringFormat.RAW,ht).data:ht.data_);let et=0;a.forEach(ht=>{et+=ht.byteLength});const at=new Uint8Array(et);let lt=0;return a.forEach(ht=>{for(let dt=0;dt<ht.length;dt++)at[lt++]=ht[dt]}),new FbsBlob(at,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(o){let s;try{s=JSON.parse(o)}catch{return null}return isNonArrayObject(s)?s:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(o){if(o.length===0)return null;const s=o.lastIndexOf("/");return s===-1?"":o.slice(0,s)}function child(o,s){const a=s.split("/").filter(et=>et.length>0).join("/");return o.length===0?a:o+"/"+a}function lastComponent(o){const s=o.lastIndexOf("/",o.length-2);return s===-1?o:o.slice(s+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(o,s){return s}class Mapping{constructor(s,a,et,at){this.server=s,this.local=a||s,this.writable=!!et,this.xform=at||noXform_}}let mappings_=null;function xformPath(o){return!isString$1(o)||o.length<2?o:lastComponent(o)}function getMappings(){if(mappings_)return mappings_;const o=[];o.push(new Mapping("bucket")),o.push(new Mapping("generation")),o.push(new Mapping("metageneration")),o.push(new Mapping("name","fullPath",!0));function s(lt,ht){return xformPath(ht)}const a=new Mapping("name");a.xform=s,o.push(a);function et(lt,ht){return ht!==void 0?Number(ht):ht}const at=new Mapping("size");return at.xform=et,o.push(at),o.push(new Mapping("timeCreated")),o.push(new Mapping("updated")),o.push(new Mapping("md5Hash",null,!0)),o.push(new Mapping("cacheControl",null,!0)),o.push(new Mapping("contentDisposition",null,!0)),o.push(new Mapping("contentEncoding",null,!0)),o.push(new Mapping("contentLanguage",null,!0)),o.push(new Mapping("contentType",null,!0)),o.push(new Mapping("metadata","customMetadata",!0)),mappings_=o,mappings_}function addRef(o,s){function a(){const et=o.bucket,at=o.fullPath,lt=new Location(et,at);return s._makeStorageReference(lt)}Object.defineProperty(o,"ref",{get:a})}function fromResource(o,s,a){const et={};et.type="file";const at=a.length;for(let lt=0;lt<at;lt++){const ht=a[lt];et[ht.local]=ht.xform(et,s[ht.server])}return addRef(et,o),et}function fromResourceString(o,s,a){const et=jsonObjectOrNull(s);return et===null?null:fromResource(o,et,a)}function downloadUrlFromResourceString(o,s,a,et){const at=jsonObjectOrNull(s);if(at===null||!isString$1(at.downloadTokens))return null;const lt=at.downloadTokens;if(lt.length===0)return null;const ht=encodeURIComponent;return lt.split(",").map(vt=>{const wt=o.bucket,Ct=o.fullPath,xt="/b/"+ht(wt)+"/o/"+ht(Ct),Pt=makeUrl(xt,a,et),Rt=makeQueryString({alt:"media",token:vt});return Pt+Rt})[0]}function toResourceString(o,s){const a={},et=s.length;for(let at=0;at<et;at++){const lt=s[at];lt.writable&&(a[lt.server]=o[lt.local])}return JSON.stringify(a)}class RequestInfo{constructor(s,a,et,at){this.url=s,this.method=a,this.handler=et,this.timeout=at,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(o){if(!o)throw unknown()}function metadataHandler(o,s){function a(et,at){const lt=fromResourceString(o,at,s);return handlerCheck(lt!==null),lt}return a}function downloadUrlHandler(o,s){function a(et,at){const lt=fromResourceString(o,at,s);return handlerCheck(lt!==null),downloadUrlFromResourceString(lt,at,o.host,o._protocol)}return a}function sharedErrorHandler(o){function s(a,et){let at;return a.getStatus()===401?a.getErrorText().includes("Firebase App Check token is invalid")?at=unauthorizedApp():at=unauthenticated():a.getStatus()===402?at=quotaExceeded(o.bucket):a.getStatus()===403?at=unauthorized(o.path):at=et,at.status=a.getStatus(),at.serverResponse=et.serverResponse,at}return s}function objectErrorHandler(o){const s=sharedErrorHandler(o);function a(et,at){let lt=s(et,at);return et.getStatus()===404&&(lt=objectNotFound(o.path)),lt.serverResponse=at.serverResponse,lt}return a}function getMetadata$2(o,s,a){const et=s.fullServerUrl(),at=makeUrl(et,o.host,o._protocol),lt="GET",ht=o.maxOperationRetryTime,dt=new RequestInfo(at,lt,metadataHandler(o,a),ht);return dt.errorHandler=objectErrorHandler(s),dt}function getDownloadUrl(o,s,a){const et=s.fullServerUrl(),at=makeUrl(et,o.host,o._protocol),lt="GET",ht=o.maxOperationRetryTime,dt=new RequestInfo(at,lt,downloadUrlHandler(o,a),ht);return dt.errorHandler=objectErrorHandler(s),dt}function determineContentType_(o,s){return o&&o.contentType||s&&s.type()||"application/octet-stream"}function metadataForUpload_(o,s,a){const et=Object.assign({},a);return et.fullPath=o.path,et.size=s.size(),et.contentType||(et.contentType=determineContentType_(null,s)),et}function multipartUpload(o,s,a,et,at){const lt=s.bucketOnlyServerUrl(),ht={"X-Goog-Upload-Protocol":"multipart"};function dt(){let kt="";for(let Dt=0;Dt<2;Dt++)kt=kt+Math.random().toString().slice(2);return kt}const ft=dt();ht["Content-Type"]="multipart/related; boundary="+ft;const vt=metadataForUpload_(s,et,at),wt=toResourceString(vt,a),Ct="--"+ft+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+wt+`\r
--`+ft+`\r
Content-Type: `+vt.contentType+`\r
\r
`,xt=`\r
--`+ft+"--",Pt=FbsBlob.getBlob(Ct,et,xt);if(Pt===null)throw cannotSliceBlob();const Rt={name:vt.fullPath},_t=makeUrl(lt,o.host,o._protocol),St="POST",bt=o.maxUploadRetryTime,Nt=new RequestInfo(_t,St,metadataHandler(o,a),bt);return Nt.urlParams=Rt,Nt.headers=ht,Nt.body=Pt.uploadData(),Nt.errorHandler=sharedErrorHandler(s),Nt}class ResumableUploadStatus{constructor(s,a,et,at){this.current=s,this.total=a,this.finalized=!!et,this.metadata=at||null}}function checkResumeHeader_(o,s){let a=null;try{a=o.getResponseHeader("X-Goog-Upload-Status")}catch{handlerCheck(!1)}return handlerCheck(!!a&&(s||["active"]).indexOf(a)!==-1),a}function createResumableUpload(o,s,a,et,at){const lt=s.bucketOnlyServerUrl(),ht=metadataForUpload_(s,et,at),dt={name:ht.fullPath},ft=makeUrl(lt,o.host,o._protocol),vt="POST",wt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${et.size()}`,"X-Goog-Upload-Header-Content-Type":ht.contentType,"Content-Type":"application/json; charset=utf-8"},Ct=toResourceString(ht,a),xt=o.maxUploadRetryTime;function Pt(_t){checkResumeHeader_(_t);let St;try{St=_t.getResponseHeader("X-Goog-Upload-URL")}catch{handlerCheck(!1)}return handlerCheck(isString$1(St)),St}const Rt=new RequestInfo(ft,vt,Pt,xt);return Rt.urlParams=dt,Rt.headers=wt,Rt.body=Ct,Rt.errorHandler=sharedErrorHandler(s),Rt}function getResumableUploadStatus(o,s,a,et){const at={"X-Goog-Upload-Command":"query"};function lt(vt){const wt=checkResumeHeader_(vt,["active","final"]);let Ct=null;try{Ct=vt.getResponseHeader("X-Goog-Upload-Size-Received")}catch{handlerCheck(!1)}Ct||handlerCheck(!1);const xt=Number(Ct);return handlerCheck(!isNaN(xt)),new ResumableUploadStatus(xt,et.size(),wt==="final")}const ht="POST",dt=o.maxUploadRetryTime,ft=new RequestInfo(a,ht,lt,dt);return ft.headers=at,ft.errorHandler=sharedErrorHandler(s),ft}const RESUMABLE_UPLOAD_CHUNK_SIZE=256*1024;function continueResumableUpload(o,s,a,et,at,lt,ht,dt){const ft=new ResumableUploadStatus(0,0);if(ht?(ft.current=ht.current,ft.total=ht.total):(ft.current=0,ft.total=et.size()),et.size()!==ft.total)throw serverFileWrongSize();const vt=ft.total-ft.current;let wt=vt;at>0&&(wt=Math.min(wt,at));const Ct=ft.current,xt=Ct+wt;let Pt="";wt===0?Pt="finalize":vt===wt?Pt="upload, finalize":Pt="upload";const Rt={"X-Goog-Upload-Command":Pt,"X-Goog-Upload-Offset":`${ft.current}`},_t=et.slice(Ct,xt);if(_t===null)throw cannotSliceBlob();function St(Dt,jt){const Wt=checkResumeHeader_(Dt,["active","final"]),Yt=ft.current+wt,Bt=et.size();let zt;return Wt==="final"?zt=metadataHandler(s,lt)(Dt,jt):zt=null,new ResumableUploadStatus(Yt,Bt,Wt==="final",zt)}const bt="POST",Nt=s.maxUploadRetryTime,kt=new RequestInfo(a,bt,St,Nt);return kt.headers=Rt,kt.body=_t.uploadData(),kt.progressCallback=dt||null,kt.errorHandler=sharedErrorHandler(o),kt}const TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function taskStateFromInternalTaskState(o){switch(o){case"running":case"pausing":case"canceling":return TaskState.RUNNING;case"paused":return TaskState.PAUSED;case"success":return TaskState.SUCCESS;case"canceled":return TaskState.CANCELED;case"error":return TaskState.ERROR;default:return TaskState.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Observer{constructor(s,a,et){if(isFunction(s)||a!=null||et!=null)this.next=s,this.error=a??void 0,this.complete=et??void 0;else{const lt=s;this.next=lt.next,this.error=lt.error,this.complete=lt.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function async(o){return(...s)=>{Promise.resolve().then(()=>o(...s))}}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(s=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,s()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,s()}),this.xhr_.addEventListener("load",()=>{s()})})}send(s,a,et,at){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(a,s,!0),at!==void 0)for(const lt in at)at.hasOwnProperty(lt)&&this.xhr_.setRequestHeader(lt,at[lt].toString());return et!==void 0?this.xhr_.send(et):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(s){return this.xhr_.getResponseHeader(s)}addUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",s)}removeUploadProgressListener(s){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",s)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UploadTask{constructor(s,a,et=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=s,this._blob=a,this._metadata=et,this._mappings=getMappings(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=at=>{if(this._request=void 0,this._chunkMultiplier=1,at._codeEquals(StorageErrorCode.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const lt=this.isExponentialBackoffExpired();if(isRetryStatusCode(at.status,[]))if(lt)at=retryLimitExceeded();else{this.sleepTime=Math.max(this.sleepTime*2,DEFAULT_MIN_SLEEP_TIME_MILLIS),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=at,this._transition("error")}},this._metadataErrorHandler=at=>{this._request=void 0,at._codeEquals(StorageErrorCode.CANCELED)?this.completeTransitions_():(this._error=at,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((at,lt)=>{this._resolve=at,this._reject=lt,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const s=this._transferred;return a=>this._updateProgress(s+a)}_shouldDoResumable(s){return s.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(s){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([a,et])=>{switch(this._state){case"running":s(a,et);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((s,a)=>{const et=createResumableUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),at=this._ref.storage._makeRequest(et,newTextConnection,s,a);this._request=at,at.getPromise().then(lt=>{this._request=void 0,this._uploadUrl=lt,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const s=this._uploadUrl;this._resolveToken((a,et)=>{const at=getResumableUploadStatus(this._ref.storage,this._ref._location,s,this._blob),lt=this._ref.storage._makeRequest(at,newTextConnection,a,et);this._request=lt,lt.getPromise().then(ht=>{ht=ht,this._request=void 0,this._updateProgress(ht.current),this._needToFetchStatus=!1,ht.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const s=RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier,a=new ResumableUploadStatus(this._transferred,this._blob.size()),et=this._uploadUrl;this._resolveToken((at,lt)=>{let ht;try{ht=continueResumableUpload(this._ref._location,this._ref.storage,et,this._blob,s,this._mappings,a,this._makeProgressCallback())}catch(ft){this._error=ft,this._transition("error");return}const dt=this._ref.storage._makeRequest(ht,newTextConnection,at,lt,!1);this._request=dt,dt.getPromise().then(ft=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ft.current),ft.finalized?(this._metadata=ft.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((s,a)=>{const et=getMetadata$2(this._ref.storage,this._ref._location,this._mappings),at=this._ref.storage._makeRequest(et,newTextConnection,s,a);this._request=at,at.getPromise().then(lt=>{this._request=void 0,this._metadata=lt,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((s,a)=>{const et=multipartUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),at=this._ref.storage._makeRequest(et,newTextConnection,s,a);this._request=at,at.getPromise().then(lt=>{this._request=void 0,this._metadata=lt,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(s){const a=this._transferred;this._transferred=s,this._transferred!==a&&this._notifyObservers()}_transition(s){if(this._state!==s)switch(s){case"canceling":case"pausing":this._state=s,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const a=this._state==="paused";this._state=s,a&&(this._notifyObservers(),this._start());break;case"paused":this._state=s,this._notifyObservers();break;case"canceled":this._error=canceled(),this._state=s,this._notifyObservers();break;case"error":this._state=s,this._notifyObservers();break;case"success":this._state=s,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const s=taskStateFromInternalTaskState(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:s,metadata:this._metadata,task:this,ref:this._ref}}on(s,a,et,at){const lt=new Observer(a||void 0,et||void 0,at||void 0);return this._addObserver(lt),()=>{this._removeObserver(lt)}}then(s,a){return this._promise.then(s,a)}catch(s){return this.then(null,s)}_addObserver(s){this._observers.push(s),this._notifyObserver(s)}_removeObserver(s){const a=this._observers.indexOf(s);a!==-1&&this._observers.splice(a,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(a=>{this._notifyObserver(a)})}_finishPromise(){if(this._resolve!==void 0){let s=!0;switch(taskStateFromInternalTaskState(this._state)){case TaskState.SUCCESS:async(this._resolve.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:const a=this._reject;async(a.bind(null,this._error))();break;default:s=!1;break}s&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(s){switch(taskStateFromInternalTaskState(this._state)){case TaskState.RUNNING:case TaskState.PAUSED:s.next&&async(s.next.bind(s,this.snapshot))();break;case TaskState.SUCCESS:s.complete&&async(s.complete.bind(s))();break;case TaskState.CANCELED:case TaskState.ERROR:s.error&&async(s.error.bind(s,this._error))();break;default:s.error&&async(s.error.bind(s,this._error))()}}resume(){const s=this._state==="paused"||this._state==="pausing";return s&&this._transition("running"),s}pause(){const s=this._state==="running";return s&&this._transition("pausing"),s}cancel(){const s=this._state==="running"||this._state==="pausing";return s&&this._transition("canceling"),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(s,a){this._service=s,a instanceof Location?this._location=a:this._location=Location.makeFromUrl(a,s.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(s,a){return new Reference(s,a)}get root(){const s=new Location(this._location.bucket,"");return this._newRef(this._service,s)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const s=parent(this._location.path);if(s===null)return null;const a=new Location(this._location.bucket,s);return new Reference(this._service,a)}_throwIfRoot(s){if(this._location.path==="")throw invalidRootOperation(s)}}function uploadBytesResumable$1(o,s,a){return o._throwIfRoot("uploadBytesResumable"),new UploadTask(o,new FbsBlob(s),a)}function getDownloadURL$1(o){o._throwIfRoot("getDownloadURL");const s=getDownloadUrl(o.storage,o._location,getMappings());return o.storage.makeRequestWithTokens(s,newTextConnection).then(a=>{if(a===null)throw noDownloadURL();return a})}function _getChild$1(o,s){const a=child(o._location.path,s),et=new Location(o._location.bucket,a);return new Reference(o.storage,et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(o){return/^[A-Za-z]+:\/\//.test(o)}function refFromURL(o,s){return new Reference(o,s)}function refFromPath(o,s){if(o instanceof FirebaseStorageImpl){const a=o;if(a._bucket==null)throw noDefaultBucket();const et=new Reference(a,a._bucket);return s!=null?refFromPath(et,s):et}else return s!==void 0?_getChild$1(o,s):o}function ref$1(o,s){if(s&&isUrl(s)){if(o instanceof FirebaseStorageImpl)return refFromURL(o,s);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(o,s)}function extractBucket(o,s){const a=s==null?void 0:s[CONFIG_STORAGE_BUCKET_KEY];return a==null?null:Location.makeFromBucketSpec(a,o)}function connectStorageEmulator$1(o,s,a,et={}){o.host=`${s}:${a}`,o._protocol="http";const{mockUserToken:at}=et;at&&(o._overrideAuthToken=typeof at=="string"?at:createMockUserToken(at,o.app.options.projectId))}class FirebaseStorageImpl{constructor(s,a,et,at,lt){this.app=s,this._authProvider=a,this._appCheckProvider=et,this._url=at,this._firebaseVersion=lt,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,at!=null?this._bucket=Location.makeFromBucketSpec(at,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(s){this._host=s,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,s):this._bucket=extractBucket(s,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(s){validateNumber("time",0,Number.POSITIVE_INFINITY,s),this._maxUploadRetryTime=s}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(s){validateNumber("time",0,Number.POSITIVE_INFINITY,s),this._maxOperationRetryTime=s}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const s=this._authProvider.getImmediate({optional:!0});if(s){const a=await s.getToken();if(a!==null)return a.accessToken}return null}async _getAppCheckToken(){const s=this._appCheckProvider.getImmediate({optional:!0});return s?(await s.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(s=>s.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(s){return new Reference(this,s)}_makeRequest(s,a,et,at,lt=!0){if(this._deleted)return new FailRequest(appDeleted());{const ht=makeRequest(s,this._appId,et,at,a,this._firebaseVersion,lt);return this._requests.add(ht),ht.getPromise().then(()=>this._requests.delete(ht),()=>this._requests.delete(ht)),ht}}async makeRequestWithTokens(s,a){const[et,at]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(s,a,et,at).getPromise()}}const name$4="@firebase/storage",version$1="0.11.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytesResumable(o,s,a){return o=getModularInstance(o),uploadBytesResumable$1(o,s,a)}function getDownloadURL(o){return o=getModularInstance(o),getDownloadURL$1(o)}function ref(o,s){return o=getModularInstance(o),ref$1(o,s)}function getStorage(o=getApp(),s){o=getModularInstance(o);const et=_getProvider(o,STORAGE_TYPE).getImmediate({identifier:s}),at=getDefaultEmulatorHostnameAndPort("storage");return at&&connectStorageEmulator(et,...at),et}function connectStorageEmulator(o,s,a,et={}){connectStorageEmulator$1(o,s,a,et)}function factory$1(o,{instanceIdentifier:s}){const a=o.getProvider("app").getImmediate(),et=o.getProvider("auth-internal"),at=o.getProvider("app-check-internal");return new FirebaseStorageImpl(a,et,at,s,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory$1,"PUBLIC").setMultipleInstances(!0)),registerVersion(name$4,version$1,""),registerVersion(name$4,version$1,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyC6d6Js_NtmDPOCYCgh_uM2jThMKUyRVp8",authDomain:"universal-medical-record.firebaseapp.com",projectId:"universal-medical-record",storageBucket:"universal-medical-record.appspot.com",messagingSenderId:"188442213702",appId:"1:188442213702:web:f13f4e02bce6b2e6dbb947",measurementId:"G-PTRTCY3V7C"},app=initializeApp(firebaseConfig);getAnalytics(app);const auth=getAuth(),db=wh(),storage=getStorage(),AuthContext=reactExports.createContext(),AuthContextProvider=({children:o})=>{const[s,a]=reactExports.useState({});return reactExports.useEffect(()=>{const et=onAuthStateChanged(auth,at=>{a(at)});return()=>{et()}},[]),jsx(AuthContext.Provider,{value:{currentUser:s},children:o})};function r$1(o){var s,a,et="";if(typeof o=="string"||typeof o=="number")et+=o;else if(typeof o=="object")if(Array.isArray(o))for(s=0;s<o.length;s++)o[s]&&(a=r$1(o[s]))&&(et&&(et+=" "),et+=a);else for(s in o)o[s]&&(et&&(et+=" "),et+=s);return et}function clsx(){for(var o,s,a=0,et="";a<arguments.length;)(o=arguments[a++])&&(s=r$1(o))&&(et&&(et+=" "),et+=s);return et}const u$1=o=>typeof o=="number"&&!isNaN(o),d$2=o=>typeof o=="string",p$2=o=>typeof o=="function",m$2=o=>d$2(o)||p$2(o)?o:null,f$2=o=>reactExports.isValidElement(o)||d$2(o)||p$2(o)||u$1(o);function g$3(o,s,a){a===void 0&&(a=300);const{scrollHeight:et,style:at}=o;requestAnimationFrame(()=>{at.minHeight="initial",at.height=et+"px",at.transition=`all ${a}ms`,requestAnimationFrame(()=>{at.height="0",at.padding="0",at.margin="0",setTimeout(s,a)})})}function h$2(o){let{enter:s,exit:a,appendPosition:et=!1,collapse:at=!0,collapseDuration:lt=300}=o;return function(ht){let{children:dt,position:ft,preventExitTransition:vt,done:wt,nodeRef:Ct,isIn:xt}=ht;const Pt=et?`${s}--${ft}`:s,Rt=et?`${a}--${ft}`:a,_t=reactExports.useRef(0);return reactExports.useLayoutEffect(()=>{const St=Ct.current,bt=Pt.split(" "),Nt=kt=>{kt.target===Ct.current&&(St.dispatchEvent(new Event("d")),St.removeEventListener("animationend",Nt),St.removeEventListener("animationcancel",Nt),_t.current===0&&kt.type!=="animationcancel"&&St.classList.remove(...bt))};St.classList.add(...bt),St.addEventListener("animationend",Nt),St.addEventListener("animationcancel",Nt)},[]),reactExports.useEffect(()=>{const St=Ct.current,bt=()=>{St.removeEventListener("animationend",bt),at?g$3(St,wt,lt):wt()};xt||(vt?bt():(_t.current=1,St.className+=` ${Rt}`,St.addEventListener("animationend",bt)))},[xt]),React.createElement(React.Fragment,null,dt)}}function y$1(o,s){return{content:o.content,containerId:o.props.containerId,id:o.props.toastId,theme:o.props.theme,type:o.props.type,data:o.props.data||{},isLoading:o.props.isLoading,icon:o.props.icon,status:s}}const v$3={list:new Map,emitQueue:new Map,on(o,s){return this.list.has(o)||this.list.set(o,[]),this.list.get(o).push(s),this},off(o,s){if(s){const a=this.list.get(o).filter(et=>et!==s);return this.list.set(o,a),this}return this.list.delete(o),this},cancelEmit(o){const s=this.emitQueue.get(o);return s&&(s.forEach(clearTimeout),this.emitQueue.delete(o)),this},emit(o){this.list.has(o)&&this.list.get(o).forEach(s=>{const a=setTimeout(()=>{s(...[].slice.call(arguments,1))},0);this.emitQueue.has(o)||this.emitQueue.set(o,[]),this.emitQueue.get(o).push(a)})}},T$1=o=>{let{theme:s,type:a,...et}=o;return React.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:s==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...et})},E$1={info:function(o){return React.createElement(T$1,{...o},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(o){return React.createElement(T$1,{...o},React.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(o){return React.createElement(T$1,{...o},React.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(o){return React.createElement(T$1,{...o},React.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return React.createElement("div",{className:"Toastify__spinner"})}};function C(o){const[,s]=reactExports.useReducer(Pt=>Pt+1,0),[a,et]=reactExports.useState([]),at=reactExports.useRef(null),lt=reactExports.useRef(new Map).current,ht=Pt=>a.indexOf(Pt)!==-1,dt=reactExports.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:o,containerId:null,isToastActive:ht,getToast:Pt=>lt.get(Pt)}).current;function ft(Pt){let{containerId:Rt}=Pt;const{limit:_t}=dt.props;!_t||Rt&&dt.containerId!==Rt||(dt.count-=dt.queue.length,dt.queue=[])}function vt(Pt){et(Rt=>Pt==null?[]:Rt.filter(_t=>_t!==Pt))}function wt(){const{toastContent:Pt,toastProps:Rt,staleId:_t}=dt.queue.shift();xt(Pt,Rt,_t)}function Ct(Pt,Rt){let{delay:_t,staleId:St,...bt}=Rt;if(!f$2(Pt)||function(Fn){return!at.current||dt.props.enableMultiContainer&&Fn.containerId!==dt.props.containerId||lt.has(Fn.toastId)&&Fn.updateId==null}(bt))return;const{toastId:Nt,updateId:kt,data:Dt}=bt,{props:jt}=dt,Wt=()=>vt(Nt),Yt=kt==null;Yt&&dt.count++;const Bt={...jt,style:jt.toastStyle,key:dt.toastKey++,...Object.fromEntries(Object.entries(bt).filter(Fn=>{let[dr,ar]=Fn;return ar!=null})),toastId:Nt,updateId:kt,data:Dt,closeToast:Wt,isIn:!1,className:m$2(bt.className||jt.toastClassName),bodyClassName:m$2(bt.bodyClassName||jt.bodyClassName),progressClassName:m$2(bt.progressClassName||jt.progressClassName),autoClose:!bt.isLoading&&(zt=bt.autoClose,qt=jt.autoClose,zt===!1||u$1(zt)&&zt>0?zt:qt),deleteToast(){const Fn=y$1(lt.get(Nt),"removed");lt.delete(Nt),v$3.emit(4,Fn);const dr=dt.queue.length;if(dt.count=Nt==null?dt.count-dt.displayedToast:dt.count-1,dt.count<0&&(dt.count=0),dr>0){const ar=Nt==null?dt.props.limit:1;if(dr===1||ar===1)dt.displayedToast++,wt();else{const pr=ar>dr?dr:ar;dt.displayedToast=pr;for(let mr=0;mr<pr;mr++)wt()}}else s()}};var zt,qt;Bt.iconOut=function(Fn){let{theme:dr,type:ar,isLoading:pr,icon:mr}=Fn,cr=null;const sr={theme:dr,type:ar};return mr===!1||(p$2(mr)?cr=mr(sr):reactExports.isValidElement(mr)?cr=reactExports.cloneElement(mr,sr):d$2(mr)||u$1(mr)?cr=mr:pr?cr=E$1.spinner():(wr=>wr in E$1)(ar)&&(cr=E$1[ar](sr))),cr}(Bt),p$2(bt.onOpen)&&(Bt.onOpen=bt.onOpen),p$2(bt.onClose)&&(Bt.onClose=bt.onClose),Bt.closeButton=jt.closeButton,bt.closeButton===!1||f$2(bt.closeButton)?Bt.closeButton=bt.closeButton:bt.closeButton===!0&&(Bt.closeButton=!f$2(jt.closeButton)||jt.closeButton);let nn=Pt;reactExports.isValidElement(Pt)&&!d$2(Pt.type)?nn=reactExports.cloneElement(Pt,{closeToast:Wt,toastProps:Bt,data:Dt}):p$2(Pt)&&(nn=Pt({closeToast:Wt,toastProps:Bt,data:Dt})),jt.limit&&jt.limit>0&&dt.count>jt.limit&&Yt?dt.queue.push({toastContent:nn,toastProps:Bt,staleId:St}):u$1(_t)?setTimeout(()=>{xt(nn,Bt,St)},_t):xt(nn,Bt,St)}function xt(Pt,Rt,_t){const{toastId:St}=Rt;_t&&lt.delete(_t);const bt={content:Pt,props:Rt};lt.set(St,bt),et(Nt=>[...Nt,St].filter(kt=>kt!==_t)),v$3.emit(4,y$1(bt,bt.props.updateId==null?"added":"updated"))}return reactExports.useEffect(()=>(dt.containerId=o.containerId,v$3.cancelEmit(3).on(0,Ct).on(1,Pt=>at.current&&vt(Pt)).on(5,ft).emit(2,dt),()=>{lt.clear(),v$3.emit(3,dt)}),[]),reactExports.useEffect(()=>{dt.props=o,dt.isToastActive=ht,dt.displayedToast=a.length}),{getToastToRender:function(Pt){const Rt=new Map,_t=Array.from(lt.values());return o.newestOnTop&&_t.reverse(),_t.forEach(St=>{const{position:bt}=St.props;Rt.has(bt)||Rt.set(bt,[]),Rt.get(bt).push(St)}),Array.from(Rt,St=>Pt(St[0],St[1]))},containerRef:at,isToastActive:ht}}function b$3(o){return o.targetTouches&&o.targetTouches.length>=1?o.targetTouches[0].clientX:o.clientX}function I$1(o){return o.targetTouches&&o.targetTouches.length>=1?o.targetTouches[0].clientY:o.clientY}function _$1(o){const[s,a]=reactExports.useState(!1),[et,at]=reactExports.useState(!1),lt=reactExports.useRef(null),ht=reactExports.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,dt=reactExports.useRef(o),{autoClose:ft,pauseOnHover:vt,closeToast:wt,onClick:Ct,closeOnClick:xt}=o;function Pt(Dt){if(o.draggable){Dt.nativeEvent.type==="touchstart"&&Dt.nativeEvent.preventDefault(),ht.didMove=!1,document.addEventListener("mousemove",bt),document.addEventListener("mouseup",Nt),document.addEventListener("touchmove",bt),document.addEventListener("touchend",Nt);const jt=lt.current;ht.canCloseOnClick=!0,ht.canDrag=!0,ht.boundingRect=jt.getBoundingClientRect(),jt.style.transition="",ht.x=b$3(Dt.nativeEvent),ht.y=I$1(Dt.nativeEvent),o.draggableDirection==="x"?(ht.start=ht.x,ht.removalDistance=jt.offsetWidth*(o.draggablePercent/100)):(ht.start=ht.y,ht.removalDistance=jt.offsetHeight*(o.draggablePercent===80?1.5*o.draggablePercent:o.draggablePercent/100))}}function Rt(Dt){if(ht.boundingRect){const{top:jt,bottom:Wt,left:Yt,right:Bt}=ht.boundingRect;Dt.nativeEvent.type!=="touchend"&&o.pauseOnHover&&ht.x>=Yt&&ht.x<=Bt&&ht.y>=jt&&ht.y<=Wt?St():_t()}}function _t(){a(!0)}function St(){a(!1)}function bt(Dt){const jt=lt.current;ht.canDrag&&jt&&(ht.didMove=!0,s&&St(),ht.x=b$3(Dt),ht.y=I$1(Dt),ht.delta=o.draggableDirection==="x"?ht.x-ht.start:ht.y-ht.start,ht.start!==ht.x&&(ht.canCloseOnClick=!1),jt.style.transform=`translate${o.draggableDirection}(${ht.delta}px)`,jt.style.opacity=""+(1-Math.abs(ht.delta/ht.removalDistance)))}function Nt(){document.removeEventListener("mousemove",bt),document.removeEventListener("mouseup",Nt),document.removeEventListener("touchmove",bt),document.removeEventListener("touchend",Nt);const Dt=lt.current;if(ht.canDrag&&ht.didMove&&Dt){if(ht.canDrag=!1,Math.abs(ht.delta)>ht.removalDistance)return at(!0),void o.closeToast();Dt.style.transition="transform 0.2s, opacity 0.2s",Dt.style.transform=`translate${o.draggableDirection}(0)`,Dt.style.opacity="1"}}reactExports.useEffect(()=>{dt.current=o}),reactExports.useEffect(()=>(lt.current&&lt.current.addEventListener("d",_t,{once:!0}),p$2(o.onOpen)&&o.onOpen(reactExports.isValidElement(o.children)&&o.children.props),()=>{const Dt=dt.current;p$2(Dt.onClose)&&Dt.onClose(reactExports.isValidElement(Dt.children)&&Dt.children.props)}),[]),reactExports.useEffect(()=>(o.pauseOnFocusLoss&&(document.hasFocus()||St(),window.addEventListener("focus",_t),window.addEventListener("blur",St)),()=>{o.pauseOnFocusLoss&&(window.removeEventListener("focus",_t),window.removeEventListener("blur",St))}),[o.pauseOnFocusLoss]);const kt={onMouseDown:Pt,onTouchStart:Pt,onMouseUp:Rt,onTouchEnd:Rt};return ft&&vt&&(kt.onMouseEnter=St,kt.onMouseLeave=_t),xt&&(kt.onClick=Dt=>{Ct&&Ct(Dt),ht.canCloseOnClick&&wt()}),{playToast:_t,pauseToast:St,isRunning:s,preventExitTransition:et,toastRef:lt,eventHandlers:kt}}function L$1(o){let{closeToast:s,theme:a,ariaLabel:et="close"}=o;return React.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:at=>{at.stopPropagation(),s(at)},"aria-label":et},React.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},React.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function O(o){let{delay:s,isRunning:a,closeToast:et,type:at="default",hide:lt,className:ht,style:dt,controlledProgress:ft,progress:vt,rtl:wt,isIn:Ct,theme:xt}=o;const Pt=lt||ft&&vt===0,Rt={...dt,animationDuration:`${s}ms`,animationPlayState:a?"running":"paused",opacity:Pt?0:1};ft&&(Rt.transform=`scaleX(${vt})`);const _t=clsx("Toastify__progress-bar",ft?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${xt}`,`Toastify__progress-bar--${at}`,{"Toastify__progress-bar--rtl":wt}),St=p$2(ht)?ht({rtl:wt,type:at,defaultClassName:_t}):clsx(_t,ht);return React.createElement("div",{role:"progressbar","aria-hidden":Pt?"true":"false","aria-label":"notification timer",className:St,style:Rt,[ft&&vt>=1?"onTransitionEnd":"onAnimationEnd"]:ft&&vt<1?null:()=>{Ct&&et()}})}const N$1=o=>{const{isRunning:s,preventExitTransition:a,toastRef:et,eventHandlers:at}=_$1(o),{closeButton:lt,children:ht,autoClose:dt,onClick:ft,type:vt,hideProgressBar:wt,closeToast:Ct,transition:xt,position:Pt,className:Rt,style:_t,bodyClassName:St,bodyStyle:bt,progressClassName:Nt,progressStyle:kt,updateId:Dt,role:jt,progress:Wt,rtl:Yt,toastId:Bt,deleteToast:zt,isIn:qt,isLoading:nn,iconOut:Fn,closeOnClick:dr,theme:ar}=o,pr=clsx("Toastify__toast",`Toastify__toast-theme--${ar}`,`Toastify__toast--${vt}`,{"Toastify__toast--rtl":Yt},{"Toastify__toast--close-on-click":dr}),mr=p$2(Rt)?Rt({rtl:Yt,position:Pt,type:vt,defaultClassName:pr}):clsx(pr,Rt),cr=!!Wt||!dt,sr={closeToast:Ct,type:vt,theme:ar};let wr=null;return lt===!1||(wr=p$2(lt)?lt(sr):reactExports.isValidElement(lt)?reactExports.cloneElement(lt,sr):L$1(sr)),React.createElement(xt,{isIn:qt,done:zt,position:Pt,preventExitTransition:a,nodeRef:et},React.createElement("div",{id:Bt,onClick:ft,className:mr,...at,style:_t,ref:et},React.createElement("div",{...qt&&{role:jt},className:p$2(St)?St({type:vt}):clsx("Toastify__toast-body",St),style:bt},Fn!=null&&React.createElement("div",{className:clsx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!nn})},Fn),React.createElement("div",null,ht)),wr,React.createElement(O,{...Dt&&!cr?{key:`pb-${Dt}`}:{},rtl:Yt,theme:ar,delay:dt,isRunning:s,isIn:qt,closeToast:Ct,hide:wt,type:vt,style:kt,className:Nt,controlledProgress:cr,progress:Wt||0})))},M$1=function(o,s){return s===void 0&&(s=!1),{enter:`Toastify--animate Toastify__${o}-enter`,exit:`Toastify--animate Toastify__${o}-exit`,appendPosition:s}},R=h$2(M$1("bounce",!0));h$2(M$1("slide",!0));h$2(M$1("zoom"));h$2(M$1("flip"));const k$3=reactExports.forwardRef((o,s)=>{const{getToastToRender:a,containerRef:et,isToastActive:at}=C(o),{className:lt,style:ht,rtl:dt,containerId:ft}=o;function vt(wt){const Ct=clsx("Toastify__toast-container",`Toastify__toast-container--${wt}`,{"Toastify__toast-container--rtl":dt});return p$2(lt)?lt({position:wt,rtl:dt,defaultClassName:Ct}):clsx(Ct,m$2(lt))}return reactExports.useEffect(()=>{s&&(s.current=et.current)},[]),React.createElement("div",{ref:et,className:"Toastify",id:ft},a((wt,Ct)=>{const xt=Ct.length?{...ht}:{...ht,pointerEvents:"none"};return React.createElement("div",{className:vt(wt),style:xt,key:`container-${wt}`},Ct.map((Pt,Rt)=>{let{content:_t,props:St}=Pt;return React.createElement(N$1,{...St,isIn:at(St.toastId),style:{...St.style,"--nth":Rt+1,"--len":Ct.length},key:`toast-${St.key}`},_t)}))}))});k$3.displayName="ToastContainer",k$3.defaultProps={position:"top-right",transition:R,autoClose:5e3,closeButton:L$1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let P$1,B$1=new Map,D=[],A$2=1;function z$2(){return""+A$2++}function F$1(o){return o&&(d$2(o.toastId)||u$1(o.toastId))?o.toastId:z$2()}function H$1(o,s){return B$1.size>0?v$3.emit(0,o,s):D.push({content:o,options:s}),s.toastId}function S$1(o,s){return{...s,type:s&&s.type||o,toastId:F$1(s)}}function q$3(o){return(s,a)=>H$1(s,S$1(o,a))}function Q$1(o,s){return H$1(o,S$1("default",s))}Q$1.loading=(o,s)=>H$1(o,S$1("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...s})),Q$1.promise=function(o,s,a){let et,{pending:at,error:lt,success:ht}=s;at&&(et=d$2(at)?Q$1.loading(at,a):Q$1.loading(at.render,{...a,...at}));const dt={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},ft=(wt,Ct,xt)=>{if(Ct==null)return void Q$1.dismiss(et);const Pt={type:wt,...dt,...a,data:xt},Rt=d$2(Ct)?{render:Ct}:Ct;return et?Q$1.update(et,{...Pt,...Rt}):Q$1(Rt.render,{...Pt,...Rt}),xt},vt=p$2(o)?o():o;return vt.then(wt=>ft("success",ht,wt)).catch(wt=>ft("error",lt,wt)),vt},Q$1.success=q$3("success"),Q$1.info=q$3("info"),Q$1.error=q$3("error"),Q$1.warning=q$3("warning"),Q$1.warn=Q$1.warning,Q$1.dark=(o,s)=>H$1(o,S$1("default",{theme:"dark",...s})),Q$1.dismiss=o=>{B$1.size>0?v$3.emit(1,o):D=D.filter(s=>o!=null&&s.options.toastId!==o)},Q$1.clearWaitingQueue=function(o){return o===void 0&&(o={}),v$3.emit(5,o)},Q$1.isActive=o=>{let s=!1;return B$1.forEach(a=>{a.isToastActive&&a.isToastActive(o)&&(s=!0)}),s},Q$1.update=function(o,s){s===void 0&&(s={}),setTimeout(()=>{const a=function(et,at){let{containerId:lt}=at;const ht=B$1.get(lt||P$1);return ht&&ht.getToast(et)}(o,s);if(a){const{props:et,content:at}=a,lt={delay:100,...et,...s,toastId:s.toastId||o,updateId:z$2()};lt.toastId!==o&&(lt.staleId=o);const ht=lt.render||at;delete lt.render,H$1(ht,lt)}},0)},Q$1.done=o=>{Q$1.update(o,{progress:1})},Q$1.onChange=o=>(v$3.on(4,o),()=>{v$3.off(4,o)}),Q$1.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Q$1.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},v$3.on(2,o=>{P$1=o.containerId||o,B$1.set(P$1,o),D.forEach(s=>{v$3.emit(0,s.content,s.options)}),D=[]}).on(3,o=>{B$1.delete(o.containerId||o),B$1.size===0&&v$3.off(0).off(1).off(5)});var reactIsExports$1={},reactIs$2={get exports(){return reactIsExports$1},set exports(o){reactIsExports$1=o}},reactIs_production_min$1={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$2=Symbol.for("react.element"),c$1=Symbol.for("react.portal"),d$1=Symbol.for("react.fragment"),e$1=Symbol.for("react.strict_mode"),f$1=Symbol.for("react.profiler"),g$2=Symbol.for("react.provider"),h$1=Symbol.for("react.context"),k$2=Symbol.for("react.server_context"),l$1=Symbol.for("react.forward_ref"),m$1=Symbol.for("react.suspense"),n$1=Symbol.for("react.suspense_list"),p$1=Symbol.for("react.memo"),q$2=Symbol.for("react.lazy"),t$1=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v$2(o){if(typeof o=="object"&&o!==null){var s=o.$$typeof;switch(s){case b$2:switch(o=o.type,o){case d$1:case f$1:case e$1:case m$1:case n$1:return o;default:switch(o=o&&o.$$typeof,o){case k$2:case h$1:case l$1:case q$2:case p$1:case g$2:return o;default:return s}}case c$1:return s}}}reactIs_production_min$1.ContextConsumer=h$1;reactIs_production_min$1.ContextProvider=g$2;reactIs_production_min$1.Element=b$2;reactIs_production_min$1.ForwardRef=l$1;reactIs_production_min$1.Fragment=d$1;reactIs_production_min$1.Lazy=q$2;reactIs_production_min$1.Memo=p$1;reactIs_production_min$1.Portal=c$1;reactIs_production_min$1.Profiler=f$1;reactIs_production_min$1.StrictMode=e$1;reactIs_production_min$1.Suspense=m$1;reactIs_production_min$1.SuspenseList=n$1;reactIs_production_min$1.isAsyncMode=function(){return!1};reactIs_production_min$1.isConcurrentMode=function(){return!1};reactIs_production_min$1.isContextConsumer=function(o){return v$2(o)===h$1};reactIs_production_min$1.isContextProvider=function(o){return v$2(o)===g$2};reactIs_production_min$1.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===b$2};reactIs_production_min$1.isForwardRef=function(o){return v$2(o)===l$1};reactIs_production_min$1.isFragment=function(o){return v$2(o)===d$1};reactIs_production_min$1.isLazy=function(o){return v$2(o)===q$2};reactIs_production_min$1.isMemo=function(o){return v$2(o)===p$1};reactIs_production_min$1.isPortal=function(o){return v$2(o)===c$1};reactIs_production_min$1.isProfiler=function(o){return v$2(o)===f$1};reactIs_production_min$1.isStrictMode=function(o){return v$2(o)===e$1};reactIs_production_min$1.isSuspense=function(o){return v$2(o)===m$1};reactIs_production_min$1.isSuspenseList=function(o){return v$2(o)===n$1};reactIs_production_min$1.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===d$1||o===f$1||o===e$1||o===m$1||o===n$1||o===t$1||typeof o=="object"&&o!==null&&(o.$$typeof===q$2||o.$$typeof===p$1||o.$$typeof===g$2||o.$$typeof===h$1||o.$$typeof===l$1||o.$$typeof===u||o.getModuleId!==void 0)};reactIs_production_min$1.typeOf=v$2;(function(o){o.exports=reactIs_production_min$1})(reactIs$2);function stylis_min(o){function s(en,Kt,Gt,mn,Jt){for(var rr=0,Tn=0,fr=0,ur=0,Ht,Xt,Zt=0,tn=0,$n,lr=$n=Ht=0,Er=0,Dr=0,br=0,kr=0,Ar=Gt.length,Rr=Ar-1,Nr,Mn="",Ir="",zr="",Qt="",Lt;Er<Ar;){if(Xt=Gt.charCodeAt(Er),Er===Rr&&Tn+ur+fr+rr!==0&&(Tn!==0&&(Xt=Tn===47?10:47),ur=fr=rr=0,Ar++,Rr++),Tn+ur+fr+rr===0){if(Er===Rr&&(0<Dr&&(Mn=Mn.replace(xt,"")),0<Mn.trim().length)){switch(Xt){case 32:case 9:case 59:case 13:case 10:break;default:Mn+=Gt.charAt(Er)}Xt=59}switch(Xt){case 123:for(Mn=Mn.trim(),Ht=Mn.charCodeAt(0),$n=1,kr=++Er;Er<Ar;){switch(Xt=Gt.charCodeAt(Er)){case 123:$n++;break;case 125:$n--;break;case 47:switch(Xt=Gt.charCodeAt(Er+1)){case 42:case 47:e:{for(lr=Er+1;lr<Rr;++lr)switch(Gt.charCodeAt(lr)){case 47:if(Xt===42&&Gt.charCodeAt(lr-1)===42&&Er+2!==lr){Er=lr+1;break e}break;case 10:if(Xt===47){Er=lr+1;break e}}Er=lr}}break;case 91:Xt++;case 40:Xt++;case 34:case 39:for(;Er++<Rr&&Gt.charCodeAt(Er)!==Xt;);}if($n===0)break;Er++}switch($n=Gt.substring(kr,Er),Ht===0&&(Ht=(Mn=Mn.replace(Ct,"").trim()).charCodeAt(0)),Ht){case 64:switch(0<Dr&&(Mn=Mn.replace(xt,"")),Xt=Mn.charCodeAt(1),Xt){case 100:case 109:case 115:case 45:Dr=Kt;break;default:Dr=mr}if($n=s(Kt,Dr,$n,Xt,Jt+1),kr=$n.length,0<sr&&(Dr=a(mr,Mn,br),Lt=dt(3,$n,Dr,Kt,dr,Fn,kr,Xt,Jt,mn),Mn=Dr.join(""),Lt!==void 0&&(kr=($n=Lt.trim()).length)===0&&(Xt=0,$n="")),0<kr)switch(Xt){case 115:Mn=Mn.replace(Wt,ht);case 100:case 109:case 45:$n=Mn+"{"+$n+"}";break;case 107:Mn=Mn.replace(Nt,"$1 $2"),$n=Mn+"{"+$n+"}",$n=pr===1||pr===2&&lt("@"+$n,3)?"@-webkit-"+$n+"@"+$n:"@"+$n;break;default:$n=Mn+$n,mn===112&&($n=(Ir+=$n,""))}else $n="";break;default:$n=s(Kt,a(Kt,Mn,br),$n,mn,Jt+1)}zr+=$n,$n=br=Dr=lr=Ht=0,Mn="",Xt=Gt.charCodeAt(++Er);break;case 125:case 59:if(Mn=(0<Dr?Mn.replace(xt,""):Mn).trim(),1<(kr=Mn.length))switch(lr===0&&(Ht=Mn.charCodeAt(0),Ht===45||96<Ht&&123>Ht)&&(kr=(Mn=Mn.replace(" ",":")).length),0<sr&&(Lt=dt(1,Mn,Kt,en,dr,Fn,Ir.length,mn,Jt,mn))!==void 0&&(kr=(Mn=Lt.trim()).length)===0&&(Mn="\0\0"),Ht=Mn.charCodeAt(0),Xt=Mn.charCodeAt(1),Ht){case 0:break;case 64:if(Xt===105||Xt===99){Qt+=Mn+Gt.charAt(Er);break}default:Mn.charCodeAt(kr-1)!==58&&(Ir+=at(Mn,Ht,Xt,Mn.charCodeAt(2)))}br=Dr=lr=Ht=0,Mn="",Xt=Gt.charCodeAt(++Er)}}switch(Xt){case 13:case 10:Tn===47?Tn=0:1+Ht===0&&mn!==107&&0<Mn.length&&(Dr=1,Mn+="\0"),0<sr*$r&&dt(0,Mn,Kt,en,dr,Fn,Ir.length,mn,Jt,mn),Fn=1,dr++;break;case 59:case 125:if(Tn+ur+fr+rr===0){Fn++;break}default:switch(Fn++,Nr=Gt.charAt(Er),Xt){case 9:case 32:if(ur+rr+Tn===0)switch(Zt){case 44:case 58:case 9:case 32:Nr="";break;default:Xt!==32&&(Nr=" ")}break;case 0:Nr="\\0";break;case 12:Nr="\\f";break;case 11:Nr="\\v";break;case 38:ur+Tn+rr===0&&(Dr=br=1,Nr="\f"+Nr);break;case 108:if(ur+Tn+rr+ar===0&&0<lr)switch(Er-lr){case 2:Zt===112&&Gt.charCodeAt(Er-3)===58&&(ar=Zt);case 8:tn===111&&(ar=tn)}break;case 58:ur+Tn+rr===0&&(lr=Er);break;case 44:Tn+fr+ur+rr===0&&(Dr=1,Nr+="\r");break;case 34:case 39:Tn===0&&(ur=ur===Xt?0:ur===0?Xt:ur);break;case 91:ur+Tn+fr===0&&rr++;break;case 93:ur+Tn+fr===0&&rr--;break;case 41:ur+Tn+rr===0&&fr--;break;case 40:if(ur+Tn+rr===0){if(Ht===0)switch(2*Zt+3*tn){case 533:break;default:Ht=1}fr++}break;case 64:Tn+fr+ur+rr+lr+$n===0&&($n=1);break;case 42:case 47:if(!(0<ur+rr+fr))switch(Tn){case 0:switch(2*Xt+3*Gt.charCodeAt(Er+1)){case 235:Tn=47;break;case 220:kr=Er,Tn=42}break;case 42:Xt===47&&Zt===42&&kr+2!==Er&&(Gt.charCodeAt(kr+2)===33&&(Ir+=Gt.substring(kr,Er+1)),Nr="",Tn=0)}}Tn===0&&(Mn+=Nr)}tn=Zt,Zt=Xt,Er++}if(kr=Ir.length,0<kr){if(Dr=Kt,0<sr&&(Lt=dt(2,Ir,Dr,en,dr,Fn,kr,mn,Jt,mn),Lt!==void 0&&(Ir=Lt).length===0))return Qt+Ir+zr;if(Ir=Dr.join(",")+"{"+Ir+"}",pr*ar!==0){switch(pr!==2||lt(Ir,2)||(ar=0),ar){case 111:Ir=Ir.replace(Dt,":-moz-$1")+Ir;break;case 112:Ir=Ir.replace(kt,"::-webkit-input-$1")+Ir.replace(kt,"::-moz-$1")+Ir.replace(kt,":-ms-input-$1")+Ir}ar=0}}return Qt+Ir+zr}function a(en,Kt,Gt){var mn=Kt.trim().split(St);Kt=mn;var Jt=mn.length,rr=en.length;switch(rr){case 0:case 1:var Tn=0;for(en=rr===0?"":en[0]+" ";Tn<Jt;++Tn)Kt[Tn]=et(en,Kt[Tn],Gt).trim();break;default:var fr=Tn=0;for(Kt=[];Tn<Jt;++Tn)for(var ur=0;ur<rr;++ur)Kt[fr++]=et(en[ur]+" ",mn[Tn],Gt).trim()}return Kt}function et(en,Kt,Gt){var mn=Kt.charCodeAt(0);switch(33>mn&&(mn=(Kt=Kt.trim()).charCodeAt(0)),mn){case 38:return Kt.replace(bt,"$1"+en.trim());case 58:return en.trim()+Kt.replace(bt,"$1"+en.trim());default:if(0<1*Gt&&0<Kt.indexOf("\f"))return Kt.replace(bt,(en.charCodeAt(0)===58?"":"$1")+en.trim())}return en+Kt}function at(en,Kt,Gt,mn){var Jt=en+";",rr=2*Kt+3*Gt+4*mn;if(rr===944){en=Jt.indexOf(":",9)+1;var Tn=Jt.substring(en,Jt.length-1).trim();return Tn=Jt.substring(0,en).trim()+Tn+";",pr===1||pr===2&&lt(Tn,1)?"-webkit-"+Tn+Tn:Tn}if(pr===0||pr===2&&!lt(Jt,1))return Jt;switch(rr){case 1015:return Jt.charCodeAt(10)===97?"-webkit-"+Jt+Jt:Jt;case 951:return Jt.charCodeAt(3)===116?"-webkit-"+Jt+Jt:Jt;case 963:return Jt.charCodeAt(5)===110?"-webkit-"+Jt+Jt:Jt;case 1009:if(Jt.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Jt+Jt;case 978:return"-webkit-"+Jt+"-moz-"+Jt+Jt;case 1019:case 983:return"-webkit-"+Jt+"-moz-"+Jt+"-ms-"+Jt+Jt;case 883:if(Jt.charCodeAt(8)===45)return"-webkit-"+Jt+Jt;if(0<Jt.indexOf("image-set(",11))return Jt.replace(nn,"$1-webkit-$2")+Jt;break;case 932:if(Jt.charCodeAt(4)===45)switch(Jt.charCodeAt(5)){case 103:return"-webkit-box-"+Jt.replace("-grow","")+"-webkit-"+Jt+"-ms-"+Jt.replace("grow","positive")+Jt;case 115:return"-webkit-"+Jt+"-ms-"+Jt.replace("shrink","negative")+Jt;case 98:return"-webkit-"+Jt+"-ms-"+Jt.replace("basis","preferred-size")+Jt}return"-webkit-"+Jt+"-ms-"+Jt+Jt;case 964:return"-webkit-"+Jt+"-ms-flex-"+Jt+Jt;case 1023:if(Jt.charCodeAt(8)!==99)break;return Tn=Jt.substring(Jt.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Tn+"-webkit-"+Jt+"-ms-flex-pack"+Tn+Jt;case 1005:return Rt.test(Jt)?Jt.replace(Pt,":-webkit-")+Jt.replace(Pt,":-moz-")+Jt:Jt;case 1e3:switch(Tn=Jt.substring(13).trim(),Kt=Tn.indexOf("-")+1,Tn.charCodeAt(0)+Tn.charCodeAt(Kt)){case 226:Tn=Jt.replace(jt,"tb");break;case 232:Tn=Jt.replace(jt,"tb-rl");break;case 220:Tn=Jt.replace(jt,"lr");break;default:return Jt}return"-webkit-"+Jt+"-ms-"+Tn+Jt;case 1017:if(Jt.indexOf("sticky",9)===-1)break;case 975:switch(Kt=(Jt=en).length-10,Tn=(Jt.charCodeAt(Kt)===33?Jt.substring(0,Kt):Jt).substring(en.indexOf(":",7)+1).trim(),rr=Tn.charCodeAt(0)+(Tn.charCodeAt(7)|0)){case 203:if(111>Tn.charCodeAt(8))break;case 115:Jt=Jt.replace(Tn,"-webkit-"+Tn)+";"+Jt;break;case 207:case 102:Jt=Jt.replace(Tn,"-webkit-"+(102<rr?"inline-":"")+"box")+";"+Jt.replace(Tn,"-webkit-"+Tn)+";"+Jt.replace(Tn,"-ms-"+Tn+"box")+";"+Jt}return Jt+";";case 938:if(Jt.charCodeAt(5)===45)switch(Jt.charCodeAt(6)){case 105:return Tn=Jt.replace("-items",""),"-webkit-"+Jt+"-webkit-box-"+Tn+"-ms-flex-"+Tn+Jt;case 115:return"-webkit-"+Jt+"-ms-flex-item-"+Jt.replace(Bt,"")+Jt;default:return"-webkit-"+Jt+"-ms-flex-line-pack"+Jt.replace("align-content","").replace(Bt,"")+Jt}break;case 973:case 989:if(Jt.charCodeAt(3)!==45||Jt.charCodeAt(4)===122)break;case 931:case 953:if(qt.test(en)===!0)return(Tn=en.substring(en.indexOf(":")+1)).charCodeAt(0)===115?at(en.replace("stretch","fill-available"),Kt,Gt,mn).replace(":fill-available",":stretch"):Jt.replace(Tn,"-webkit-"+Tn)+Jt.replace(Tn,"-moz-"+Tn.replace("fill-",""))+Jt;break;case 962:if(Jt="-webkit-"+Jt+(Jt.charCodeAt(5)===102?"-ms-"+Jt:"")+Jt,Gt+mn===211&&Jt.charCodeAt(13)===105&&0<Jt.indexOf("transform",10))return Jt.substring(0,Jt.indexOf(";",27)+1).replace(_t,"$1-webkit-$2")+Jt}return Jt}function lt(en,Kt){var Gt=en.indexOf(Kt===1?":":"{"),mn=en.substring(0,Kt!==3?Gt:10);return Gt=en.substring(Gt+1,en.length-1),wr(Kt!==2?mn:mn.replace(zt,"$1"),Gt,Kt)}function ht(en,Kt){var Gt=at(Kt,Kt.charCodeAt(0),Kt.charCodeAt(1),Kt.charCodeAt(2));return Gt!==Kt+";"?Gt.replace(Yt," or ($1)").substring(4):"("+Kt+")"}function dt(en,Kt,Gt,mn,Jt,rr,Tn,fr,ur,Ht){for(var Xt=0,Zt=Kt,tn;Xt<sr;++Xt)switch(tn=cr[Xt].call(wt,en,Zt,Gt,mn,Jt,rr,Tn,fr,ur,Ht)){case void 0:case!1:case!0:case null:break;default:Zt=tn}if(Zt!==Kt)return Zt}function ft(en){switch(en){case void 0:case null:sr=cr.length=0;break;default:if(typeof en=="function")cr[sr++]=en;else if(typeof en=="object")for(var Kt=0,Gt=en.length;Kt<Gt;++Kt)ft(en[Kt]);else $r=!!en|0}return ft}function vt(en){return en=en.prefix,en!==void 0&&(wr=null,en?typeof en!="function"?pr=1:(pr=2,wr=en):pr=0),vt}function wt(en,Kt){var Gt=en;if(33>Gt.charCodeAt(0)&&(Gt=Gt.trim()),Sr=Gt,Gt=[Sr],0<sr){var mn=dt(-1,Kt,Gt,Gt,dr,Fn,0,0,0,0);mn!==void 0&&typeof mn=="string"&&(Kt=mn)}var Jt=s(mr,Gt,Kt,0,0);return 0<sr&&(mn=dt(-2,Jt,Gt,Gt,dr,Fn,Jt.length,0,0,0),mn!==void 0&&(Jt=mn)),Sr="",ar=0,Fn=dr=1,Jt}var Ct=/^\0+/g,xt=/[\0\r\f]/g,Pt=/: */g,Rt=/zoo|gra/,_t=/([,: ])(transform)/g,St=/,\r+?/g,bt=/([\t\r\n ])*\f?&/g,Nt=/@(k\w+)\s*(\S*)\s*/,kt=/::(place)/g,Dt=/:(read-only)/g,jt=/[svh]\w+-[tblr]{2}/,Wt=/\(\s*(.*)\s*\)/g,Yt=/([\s\S]*?);/g,Bt=/-self|flex-/g,zt=/[^]*?(:[rp][el]a[\w-]+)[^]*/,qt=/stretch|:\s*\w+\-(?:conte|avail)/,nn=/([^-])(image-set\()/,Fn=1,dr=1,ar=0,pr=1,mr=[],cr=[],sr=0,wr=null,$r=0,Sr="";return wt.use=ft,wt.set=vt,o!==void 0&&vt(o),wt}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function memoize(o){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=o(a)),s[a]}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(o){return reactPropsRegex.test(o)||o.charCodeAt(0)===111&&o.charCodeAt(1)===110&&o.charCodeAt(2)<91}),reactIsExports={},reactIs$1={get exports(){return reactIsExports},set exports(o){reactIsExports=o}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$1=typeof Symbol=="function"&&Symbol.for,c=b$1?Symbol.for("react.element"):60103,d=b$1?Symbol.for("react.portal"):60106,e=b$1?Symbol.for("react.fragment"):60107,f=b$1?Symbol.for("react.strict_mode"):60108,g$1=b$1?Symbol.for("react.profiler"):60114,h=b$1?Symbol.for("react.provider"):60109,k$1=b$1?Symbol.for("react.context"):60110,l=b$1?Symbol.for("react.async_mode"):60111,m=b$1?Symbol.for("react.concurrent_mode"):60111,n=b$1?Symbol.for("react.forward_ref"):60112,p=b$1?Symbol.for("react.suspense"):60113,q$1=b$1?Symbol.for("react.suspense_list"):60120,r=b$1?Symbol.for("react.memo"):60115,t=b$1?Symbol.for("react.lazy"):60116,v$1=b$1?Symbol.for("react.block"):60121,w$1=b$1?Symbol.for("react.fundamental"):60117,x$1=b$1?Symbol.for("react.responder"):60118,y=b$1?Symbol.for("react.scope"):60119;function z$1(o){if(typeof o=="object"&&o!==null){var s=o.$$typeof;switch(s){case c:switch(o=o.type,o){case l:case m:case e:case g$1:case f:case p:return o;default:switch(o=o&&o.$$typeof,o){case k$1:case n:case t:case r:case h:return o;default:return s}}case d:return s}}}function A$1(o){return z$1(o)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g$1;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(o){return A$1(o)||z$1(o)===l};reactIs_production_min.isConcurrentMode=A$1;reactIs_production_min.isContextConsumer=function(o){return z$1(o)===k$1};reactIs_production_min.isContextProvider=function(o){return z$1(o)===h};reactIs_production_min.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===c};reactIs_production_min.isForwardRef=function(o){return z$1(o)===n};reactIs_production_min.isFragment=function(o){return z$1(o)===e};reactIs_production_min.isLazy=function(o){return z$1(o)===t};reactIs_production_min.isMemo=function(o){return z$1(o)===r};reactIs_production_min.isPortal=function(o){return z$1(o)===d};reactIs_production_min.isProfiler=function(o){return z$1(o)===g$1};reactIs_production_min.isStrictMode=function(o){return z$1(o)===f};reactIs_production_min.isSuspense=function(o){return z$1(o)===p};reactIs_production_min.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===e||o===m||o===g$1||o===f||o===p||o===q$1||typeof o=="object"&&o!==null&&(o.$$typeof===t||o.$$typeof===r||o.$$typeof===h||o.$$typeof===k$1||o.$$typeof===n||o.$$typeof===w$1||o.$$typeof===x$1||o.$$typeof===y||o.$$typeof===v$1)};reactIs_production_min.typeOf=z$1;(function(o){o.exports=reactIs_production_min})(reactIs$1);var reactIs=reactIsExports,REACT_STATICS={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;function getStatics(o){return reactIs.isMemo(o)?MEMO_STATICS:TYPE_STATICS[o.$$typeof]||REACT_STATICS}var defineProperty$1=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=Object.prototype;function hoistNonReactStatics(o,s,a){if(typeof s!="string"){if(objectPrototype){var et=getPrototypeOf(s);et&&et!==objectPrototype&&hoistNonReactStatics(o,et,a)}var at=getOwnPropertyNames(s);getOwnPropertySymbols&&(at=at.concat(getOwnPropertySymbols(s)));for(var lt=getStatics(o),ht=getStatics(s),dt=0;dt<at.length;++dt){var ft=at[dt];if(!KNOWN_STATICS[ft]&&!(a&&a[ft])&&!(ht&&ht[ft])&&!(lt&&lt[ft])){var vt=getOwnPropertyDescriptor(s,ft);try{defineProperty$1(o,ft,vt)}catch{}}}}return o}var hoistNonReactStatics_cjs=hoistNonReactStatics;function v(){return(v=Object.assign||function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var et in a)Object.prototype.hasOwnProperty.call(a,et)&&(o[et]=a[et])}return o}).apply(this,arguments)}var g=function(o,s){for(var a=[o[0]],et=0,at=s.length;et<at;et+=1)a.push(s[et],o[et+1]);return a},S=function(o){return o!==null&&typeof o=="object"&&(o.toString?o.toString():Object.prototype.toString.call(o))==="[object Object]"&&!reactIsExports$1.typeOf(o)},w=Object.freeze([]),E=Object.freeze({});function b(o){return typeof o=="function"}function _(o){return o.displayName||o.name||"Component"}function N(o){return o&&typeof o.styledComponentId=="string"}var A=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",I=typeof window<"u"&&"HTMLElement"in window,P=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY));function j(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),et=1;et<s;et++)a[et-1]=arguments[et];throw new Error("An error occurred. See https://git.io/JUIaE#"+o+" for more information."+(a.length>0?" Args: "+a.join(", "):""))}var T=function(){function o(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var s=o.prototype;return s.indexOfGroup=function(a){for(var et=0,at=0;at<a;at++)et+=this.groupSizes[at];return et},s.insertRules=function(a,et){if(a>=this.groupSizes.length){for(var at=this.groupSizes,lt=at.length,ht=lt;a>=ht;)(ht<<=1)<0&&j(16,""+a);this.groupSizes=new Uint32Array(ht),this.groupSizes.set(at),this.length=ht;for(var dt=lt;dt<ht;dt++)this.groupSizes[dt]=0}for(var ft=this.indexOfGroup(a+1),vt=0,wt=et.length;vt<wt;vt++)this.tag.insertRule(ft,et[vt])&&(this.groupSizes[a]++,ft++)},s.clearGroup=function(a){if(a<this.length){var et=this.groupSizes[a],at=this.indexOfGroup(a),lt=at+et;this.groupSizes[a]=0;for(var ht=at;ht<lt;ht++)this.tag.deleteRule(at)}},s.getGroup=function(a){var et="";if(a>=this.length||this.groupSizes[a]===0)return et;for(var at=this.groupSizes[a],lt=this.indexOfGroup(a),ht=lt+at,dt=lt;dt<ht;dt++)et+=this.tag.getRule(dt)+`/*!sc*/
`;return et},o}(),x=new Map,k=new Map,V=1,B=function(o){if(x.has(o))return x.get(o);for(;k.has(V);)V++;var s=V++;return x.set(o,s),k.set(s,o),s},z=function(o){return k.get(o)},M=function(o,s){s>=V&&(V=s+1),x.set(o,s),k.set(s,o)},G="style["+A+'][data-styled-version="5.3.9"]',L=new RegExp("^"+A+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),F=function(o,s,a){for(var et,at=a.split(","),lt=0,ht=at.length;lt<ht;lt++)(et=at[lt])&&o.registerName(s,et)},Y=function(o,s){for(var a=(s.textContent||"").split(`/*!sc*/
`),et=[],at=0,lt=a.length;at<lt;at++){var ht=a[at].trim();if(ht){var dt=ht.match(L);if(dt){var ft=0|parseInt(dt[1],10),vt=dt[2];ft!==0&&(M(vt,ft),F(o,vt,dt[3]),o.getTag().insertRules(ft,et)),et.length=0}else et.push(ht)}}},q=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},H=function(o){var s=document.head,a=o||s,et=document.createElement("style"),at=function(dt){for(var ft=dt.childNodes,vt=ft.length;vt>=0;vt--){var wt=ft[vt];if(wt&&wt.nodeType===1&&wt.hasAttribute(A))return wt}}(a),lt=at!==void 0?at.nextSibling:null;et.setAttribute(A,"active"),et.setAttribute("data-styled-version","5.3.9");var ht=q();return ht&&et.setAttribute("nonce",ht),a.insertBefore(et,lt),et},$=function(){function o(a){var et=this.element=H(a);et.appendChild(document.createTextNode("")),this.sheet=function(at){if(at.sheet)return at.sheet;for(var lt=document.styleSheets,ht=0,dt=lt.length;ht<dt;ht++){var ft=lt[ht];if(ft.ownerNode===at)return ft}j(17)}(et),this.length=0}var s=o.prototype;return s.insertRule=function(a,et){try{return this.sheet.insertRule(et,a),this.length++,!0}catch{return!1}},s.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},s.getRule=function(a){var et=this.sheet.cssRules[a];return et!==void 0&&typeof et.cssText=="string"?et.cssText:""},o}(),W=function(){function o(a){var et=this.element=H(a);this.nodes=et.childNodes,this.length=0}var s=o.prototype;return s.insertRule=function(a,et){if(a<=this.length&&a>=0){var at=document.createTextNode(et),lt=this.nodes[a];return this.element.insertBefore(at,lt||null),this.length++,!0}return!1},s.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},s.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},o}(),U=function(){function o(a){this.rules=[],this.length=0}var s=o.prototype;return s.insertRule=function(a,et){return a<=this.length&&(this.rules.splice(a,0,et),this.length++,!0)},s.deleteRule=function(a){this.rules.splice(a,1),this.length--},s.getRule=function(a){return a<this.length?this.rules[a]:""},o}(),J=I,X={isServer:!I,useCSSOMInjection:!P},Z=function(){function o(a,et,at){a===void 0&&(a=E),et===void 0&&(et={}),this.options=v({},X,{},a),this.gs=et,this.names=new Map(at),this.server=!!a.isServer,!this.server&&I&&J&&(J=!1,function(lt){for(var ht=document.querySelectorAll(G),dt=0,ft=ht.length;dt<ft;dt++){var vt=ht[dt];vt&&vt.getAttribute(A)!=="active"&&(Y(lt,vt),vt.parentNode&&vt.parentNode.removeChild(vt))}}(this))}o.registerId=function(a){return B(a)};var s=o.prototype;return s.reconstructWithOptions=function(a,et){return et===void 0&&(et=!0),new o(v({},this.options,{},a),this.gs,et&&this.names||void 0)},s.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},s.getTag=function(){return this.tag||(this.tag=(at=(et=this.options).isServer,lt=et.useCSSOMInjection,ht=et.target,a=at?new U(ht):lt?new $(ht):new W(ht),new T(a)));var a,et,at,lt,ht},s.hasNameForId=function(a,et){return this.names.has(a)&&this.names.get(a).has(et)},s.registerName=function(a,et){if(B(a),this.names.has(a))this.names.get(a).add(et);else{var at=new Set;at.add(et),this.names.set(a,at)}},s.insertRules=function(a,et,at){this.registerName(a,et),this.getTag().insertRules(B(a),at)},s.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},s.clearRules=function(a){this.getTag().clearGroup(B(a)),this.clearNames(a)},s.clearTag=function(){this.tag=void 0},s.toString=function(){return function(a){for(var et=a.getTag(),at=et.length,lt="",ht=0;ht<at;ht++){var dt=z(ht);if(dt!==void 0){var ft=a.names.get(dt),vt=et.getGroup(ht);if(ft&&vt&&ft.size){var wt=A+".g"+ht+'[id="'+dt+'"]',Ct="";ft!==void 0&&ft.forEach(function(xt){xt.length>0&&(Ct+=xt+",")}),lt+=""+vt+wt+'{content:"'+Ct+`"}/*!sc*/
`}}}return lt}(this)},o}(),K=/(a)(d)/gi,Q=function(o){return String.fromCharCode(o+(o>25?39:97))};function ee(o){var s,a="";for(s=Math.abs(o);s>52;s=s/52|0)a=Q(s%52)+a;return(Q(s%52)+a).replace(K,"$1-$2")}var te=function(o,s){for(var a=s.length;a;)o=33*o^s.charCodeAt(--a);return o},ne=function(o){return te(5381,o)};function re(o){for(var s=0;s<o.length;s+=1){var a=o[s];if(b(a)&&!N(a))return!1}return!0}var oe=ne("5.3.9"),se=function(){function o(s,a,et){this.rules=s,this.staticRulesId="",this.isStatic=(et===void 0||et.isStatic)&&re(s),this.componentId=a,this.baseHash=te(oe,a),this.baseStyle=et,Z.registerId(a)}return o.prototype.generateAndInjectStyles=function(s,a,et){var at=this.componentId,lt=[];if(this.baseStyle&&lt.push(this.baseStyle.generateAndInjectStyles(s,a,et)),this.isStatic&&!et.hash)if(this.staticRulesId&&a.hasNameForId(at,this.staticRulesId))lt.push(this.staticRulesId);else{var ht=Ne(this.rules,s,a,et).join(""),dt=ee(te(this.baseHash,ht)>>>0);if(!a.hasNameForId(at,dt)){var ft=et(ht,"."+dt,void 0,at);a.insertRules(at,dt,ft)}lt.push(dt),this.staticRulesId=dt}else{for(var vt=this.rules.length,wt=te(this.baseHash,et.hash),Ct="",xt=0;xt<vt;xt++){var Pt=this.rules[xt];if(typeof Pt=="string")Ct+=Pt;else if(Pt){var Rt=Ne(Pt,s,a,et),_t=Array.isArray(Rt)?Rt.join(""):Rt;wt=te(wt,_t+xt),Ct+=_t}}if(Ct){var St=ee(wt>>>0);if(!a.hasNameForId(at,St)){var bt=et(Ct,"."+St,void 0,at);a.insertRules(at,St,bt)}lt.push(St)}}return lt.join(" ")},o}(),ie=/^\s*\/\/.*$/gm,ae=[":","[",".","#"];function ce(o){var s,a,et,at,lt=o===void 0?E:o,ht=lt.options,dt=ht===void 0?E:ht,ft=lt.plugins,vt=ft===void 0?w:ft,wt=new stylis_min(dt),Ct=[],xt=function(_t){function St(bt){if(bt)try{_t(bt+"}")}catch{}}return function(bt,Nt,kt,Dt,jt,Wt,Yt,Bt,zt,qt){switch(bt){case 1:if(zt===0&&Nt.charCodeAt(0)===64)return _t(Nt+";"),"";break;case 2:if(Bt===0)return Nt+"/*|*/";break;case 3:switch(Bt){case 102:case 112:return _t(kt[0]+Nt),"";default:return Nt+(qt===0?"/*|*/":"")}case-2:Nt.split("/*|*/}").forEach(St)}}}(function(_t){Ct.push(_t)}),Pt=function(_t,St,bt){return St===0&&ae.indexOf(bt[a.length])!==-1||bt.match(at)?_t:"."+s};function Rt(_t,St,bt,Nt){Nt===void 0&&(Nt="&");var kt=_t.replace(ie,""),Dt=St&&bt?bt+" "+St+" { "+kt+" }":kt;return s=Nt,a=St,et=new RegExp("\\"+a+"\\b","g"),at=new RegExp("(\\"+a+"\\b){2,}"),wt(bt||!St?"":St,Dt)}return wt.use([].concat(vt,[function(_t,St,bt){_t===2&&bt.length&&bt[0].lastIndexOf(a)>0&&(bt[0]=bt[0].replace(et,Pt))},xt,function(_t){if(_t===-2){var St=Ct;return Ct=[],St}}])),Rt.hash=vt.length?vt.reduce(function(_t,St){return St.name||j(15),te(_t,St.name)},5381).toString():"",Rt}var ue=React.createContext();ue.Consumer;var de=React.createContext(),he=(de.Consumer,new Z),pe=ce();function fe(){return reactExports.useContext(ue)||he}function me(){return reactExports.useContext(de)||pe}var ve=function(){function o(s,a){var et=this;this.inject=function(at,lt){lt===void 0&&(lt=pe);var ht=et.name+lt.hash;at.hasNameForId(et.id,ht)||at.insertRules(et.id,ht,lt(et.rules,ht,"@keyframes"))},this.toString=function(){return j(12,String(et.name))},this.name=s,this.id="sc-keyframes-"+s,this.rules=a}return o.prototype.getName=function(s){return s===void 0&&(s=pe),this.name+s.hash},o}(),ge=/([A-Z])/,Se=/([A-Z])/g,we=/^ms-/,Ee=function(o){return"-"+o.toLowerCase()};function be(o){return ge.test(o)?o.replace(Se,Ee).replace(we,"-ms-"):o}var _e=function(o){return o==null||o===!1||o===""};function Ne(o,s,a,et){if(Array.isArray(o)){for(var at,lt=[],ht=0,dt=o.length;ht<dt;ht+=1)(at=Ne(o[ht],s,a,et))!==""&&(Array.isArray(at)?lt.push.apply(lt,at):lt.push(at));return lt}if(_e(o))return"";if(N(o))return"."+o.styledComponentId;if(b(o)){if(typeof(vt=o)!="function"||vt.prototype&&vt.prototype.isReactComponent||!s)return o;var ft=o(s);return Ne(ft,s,a,et)}var vt;return o instanceof ve?a?(o.inject(a,et),o.getName(et)):o:S(o)?function wt(Ct,xt){var Pt,Rt,_t=[];for(var St in Ct)Ct.hasOwnProperty(St)&&!_e(Ct[St])&&(Array.isArray(Ct[St])&&Ct[St].isCss||b(Ct[St])?_t.push(be(St)+":",Ct[St],";"):S(Ct[St])?_t.push.apply(_t,wt(Ct[St],St)):_t.push(be(St)+": "+(Pt=St,(Rt=Ct[St])==null||typeof Rt=="boolean"||Rt===""?"":typeof Rt!="number"||Rt===0||Pt in unitlessKeys?String(Rt).trim():Rt+"px")+";"));return xt?[xt+" {"].concat(_t,["}"]):_t}(o):o.toString()}var Ae=function(o){return Array.isArray(o)&&(o.isCss=!0),o};function Ce(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),et=1;et<s;et++)a[et-1]=arguments[et];return b(o)||S(o)?Ae(Ne(g(w,[o].concat(a)))):a.length===0&&o.length===1&&typeof o[0]=="string"?o:Ae(Ne(g(o,a)))}var Re=function(o,s,a){return a===void 0&&(a=E),o.theme!==a.theme&&o.theme||s||a.theme},De=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,je=/(^-|-$)/g;function Te(o){return o.replace(De,"-").replace(je,"")}var xe=function(o){return ee(ne(o)>>>0)};function ke(o){return typeof o=="string"&&!0}var Ve=function(o){return typeof o=="function"||typeof o=="object"&&o!==null&&!Array.isArray(o)},Be=function(o){return o!=="__proto__"&&o!=="constructor"&&o!=="prototype"};function ze(o,s,a){var et=o[a];Ve(s)&&Ve(et)?Me(et,s):o[a]=s}function Me(o){for(var s=arguments.length,a=new Array(s>1?s-1:0),et=1;et<s;et++)a[et-1]=arguments[et];for(var at=0,lt=a;at<lt.length;at++){var ht=lt[at];if(Ve(ht))for(var dt in ht)Be(dt)&&ze(o,ht[dt],dt)}return o}var Ge=React.createContext();Ge.Consumer;var Ye={};function qe(o,s,a){var et=N(o),at=!ke(o),lt=s.attrs,ht=lt===void 0?w:lt,dt=s.componentId,ft=dt===void 0?function(Nt,kt){var Dt=typeof Nt!="string"?"sc":Te(Nt);Ye[Dt]=(Ye[Dt]||0)+1;var jt=Dt+"-"+xe("5.3.9"+Dt+Ye[Dt]);return kt?kt+"-"+jt:jt}(s.displayName,s.parentComponentId):dt,vt=s.displayName,wt=vt===void 0?function(Nt){return ke(Nt)?"styled."+Nt:"Styled("+_(Nt)+")"}(o):vt,Ct=s.displayName&&s.componentId?Te(s.displayName)+"-"+s.componentId:s.componentId||ft,xt=et&&o.attrs?Array.prototype.concat(o.attrs,ht).filter(Boolean):ht,Pt=s.shouldForwardProp;et&&o.shouldForwardProp&&(Pt=s.shouldForwardProp?function(Nt,kt,Dt){return o.shouldForwardProp(Nt,kt,Dt)&&s.shouldForwardProp(Nt,kt,Dt)}:o.shouldForwardProp);var Rt,_t=new se(a,Ct,et?o.componentStyle:void 0),St=_t.isStatic&&ht.length===0,bt=function(Nt,kt){return function(Dt,jt,Wt,Yt){var Bt=Dt.attrs,zt=Dt.componentStyle,qt=Dt.defaultProps,nn=Dt.foldedComponentIds,Fn=Dt.shouldForwardProp,dr=Dt.styledComponentId,ar=Dt.target,pr=function(mn,Jt,rr){mn===void 0&&(mn=E);var Tn=v({},Jt,{theme:mn}),fr={};return rr.forEach(function(ur){var Ht,Xt,Zt,tn=ur;for(Ht in b(tn)&&(tn=tn(Tn)),tn)Tn[Ht]=fr[Ht]=Ht==="className"?(Xt=fr[Ht],Zt=tn[Ht],Xt&&Zt?Xt+" "+Zt:Xt||Zt):tn[Ht]}),[Tn,fr]}(Re(jt,reactExports.useContext(Ge),qt)||E,jt,Bt),mr=pr[0],cr=pr[1],sr=function(mn,Jt,rr,Tn){var fr=fe(),ur=me(),Ht=Jt?mn.generateAndInjectStyles(E,fr,ur):mn.generateAndInjectStyles(rr,fr,ur);return Ht}(zt,Yt,mr),wr=Wt,$r=cr.$as||jt.$as||cr.as||jt.as||ar,Sr=ke($r),en=cr!==jt?v({},jt,{},cr):jt,Kt={};for(var Gt in en)Gt[0]!=="$"&&Gt!=="as"&&(Gt==="forwardedAs"?Kt.as=en[Gt]:(Fn?Fn(Gt,isPropValid,$r):!Sr||isPropValid(Gt))&&(Kt[Gt]=en[Gt]));return jt.style&&cr.style!==jt.style&&(Kt.style=v({},jt.style,{},cr.style)),Kt.className=Array.prototype.concat(nn,dr,sr!==dr?sr:null,jt.className,cr.className).filter(Boolean).join(" "),Kt.ref=wr,reactExports.createElement($r,Kt)}(Rt,Nt,kt,St)};return bt.displayName=wt,(Rt=React.forwardRef(bt)).attrs=xt,Rt.componentStyle=_t,Rt.displayName=wt,Rt.shouldForwardProp=Pt,Rt.foldedComponentIds=et?Array.prototype.concat(o.foldedComponentIds,o.styledComponentId):w,Rt.styledComponentId=Ct,Rt.target=et?o.target:o,Rt.withComponent=function(Nt){var kt=s.componentId,Dt=function(Wt,Yt){if(Wt==null)return{};var Bt,zt,qt={},nn=Object.keys(Wt);for(zt=0;zt<nn.length;zt++)Bt=nn[zt],Yt.indexOf(Bt)>=0||(qt[Bt]=Wt[Bt]);return qt}(s,["componentId"]),jt=kt&&kt+"-"+(ke(Nt)?Nt:Te(_(Nt)));return qe(Nt,v({},Dt,{attrs:xt,componentId:jt}),a)},Object.defineProperty(Rt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Nt){this._foldedDefaultProps=et?Me({},o.defaultProps,Nt):Nt}}),Object.defineProperty(Rt,"toString",{value:function(){return"."+Rt.styledComponentId}}),at&&hoistNonReactStatics_cjs(Rt,o,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),Rt}var He=function(o){return function s(a,et,at){if(at===void 0&&(at=E),!reactIsExports$1.isValidElementType(et))return j(1,String(et));var lt=function(){return a(et,at,Ce.apply(void 0,arguments))};return lt.withConfig=function(ht){return s(a,et,v({},at,{},ht))},lt.attrs=function(ht){return s(a,et,v({},at,{attrs:Array.prototype.concat(at.attrs,ht).filter(Boolean)}))},lt}(qe,o)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(o){He[o]=He(o)});const styled=He,Wrapper$4=styled.div`
  .empty {
    margin-top: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    color: #988e7b;
  }
  .empty a {
    text-decoration: none;
    color: #988e7b;
  }

  .loader {
    width: 100dvw;
    height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .main {
    width: 100%;
    height: auto;
    background-color: rgb(245, 245, 245);
    font-family: poppins;
    padding: 50px 0;
    display: grid;
    place-items: center;
  }
  .main .heading {
    font-size: 27px;
    font-weight: 500;
    color: rgb(106, 6, 236);
    position: relative;
    margin-bottom: 80px;
    text-align: center;
  }
  .heading::after {
    content: " ";
    position: absolute;
    width: 50%;
    height: 4px;
    left: 50%;
    bottom: -5px;
    background-image: linear-gradient(
      to right,
      rgb(106, 6, 236),
      rgb(220, 0, 240)
    );
    transform: translateX(-50%);
  }

  /* Container Css Start  */

  .container {
    width: 70%;
    height: auto;
    position: relative;
  }
  .container ul::after {
    position: absolute;
    content: "";
    width: 2px;
    height: 100%;
    background-image: linear-gradient(
      to right,
      rgb(106, 6, 236),
      rgb(220, 0, 240)
    );
  }
  .container ul {
    list-style: none;
  }
  .container ul li {
    width: 50%;
    height: auto;
    padding: 15px 20px;
    background-color: #fff;
    margin-bottom: 30px;
    border-radius: 10px;
    box-shadow: 4px 4px 25px rgba(51, 51, 51, 0.192);
    position: relative;
    z-index: 99;
  }
  .container ul li:nth-child(odd) {
    float: left;
    clear: right;
    transform: translateX(-30px);
  }
  .container ul li:nth-child(odd) .date {
    right: 20px;
  }
  .container ul li:nth-child(even) {
    float: right;
    clear: left;
    transform: translateX(30px);
  }
  .container ul li:nth-child(4) {
    margin-bottom: 0;
  }
  .container ul li .title {
    font-size: 20px;
    font-weight: 500;
    color: rgb(106, 6, 236);
  }
  ul li p {
    font-size: 15px;
    color: #444;
    margin: 7px 0;
    line-height: 23px;
  }
  ul li a {
    font-size: 15px;
    color: rgb(106, 6, 236);
    text-decoration: none;
  }
  ul li .date {
    position: absolute;
    top: -45px;
    width: 135px;
    height: 35px;
    border-radius: 20px;
    color: #fff;
    background-image: linear-gradient(
      to right,
      rgb(106, 6, 236),
      rgb(220, 0, 240)
    );
    display: grid;
    place-items: center;
    font-size: 14px;
  }
  .container ul li .circle {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background-color: rgba(220, 0, 240, 0.401);
    position: absolute;
    top: 0;
  }
  .container ul li .circle::after {
    content: "";
    position: absolute;
    width: 15px;
    height: 15px;
    background-color: rgb(106, 6, 236);
    border-radius: 50%;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }
  .container ul li:nth-child(odd) .circle {
    right: -30px;
    transform: translate(50%, -50%);
  }
  .container ul li:nth-child(even) .circle {
    left: -30px;
    transform: translate(-50%, -50%);
  }

  /*  Media Query Started  */

  @media screen and (max-width: 1224px) {
    .container {
      width: 85%;
    }
  }

  @media screen and (max-width: 993px) {
    .container {
      width: 80%;
      transform: translateX(15px);
    }
    .container ul::after {
      left: -30px;
    }
    .container ul li {
      width: 100%;
      float: none;
      clear: none;
      margin-bottom: 80px;
    }
    .container ul li:nth-child(odd) {
      text-align: left;
      transform: translateX(0);
    }
    .container ul li:nth-child(odd) .date {
      left: 20px;
    }
    .container ul li:nth-child(odd) .circle {
      left: -30px;
      transform: translate(-50%, -50%);
    }
    .container ul li:nth-child(even) {
      transform: translateX(0);
    }
  }
`;var cssUnit={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function parseLengthAndUnit(o){if(typeof o=="number")return{value:o,unit:"px"};var s,a=(o.match(/^[0-9.]*/)||"").toString();a.includes(".")?s=parseFloat(a):s=parseInt(a,10);var et=(o.match(/[^0-9]*$/)||"").toString();return cssUnit[et]?{value:s,unit:et}:(console.warn("React Spinners: ".concat(o," is not a valid css value. Defaulting to ").concat(s,"px.")),{value:s,unit:"px"})}function cssValue(o){var s=parseLengthAndUnit(o);return"".concat(s.value).concat(s.unit)}var createAnimation=function(o,s,a){var et="react-spinners-".concat(o,"-").concat(a);if(typeof window>"u"||!window.document)return et;var at=document.createElement("style");document.head.appendChild(at);var lt=at.sheet,ht=`
    @keyframes `.concat(et,` {
      `).concat(s,`
    }
  `);return lt&&lt.insertRule(ht,0),et},BasicColors;(function(o){o.maroon="#800000",o.red="#FF0000",o.orange="#FFA500",o.yellow="#FFFF00",o.olive="#808000",o.green="#008000",o.purple="#800080",o.fuchsia="#FF00FF",o.lime="#00FF00",o.teal="#008080",o.aqua="#00FFFF",o.blue="#0000FF",o.navy="#000080",o.black="#000000",o.gray="#808080",o.silver="#C0C0C0",o.white="#FFFFFF"})(BasicColors||(BasicColors={}));var calculateRgba=function(o,s){if(Object.keys(BasicColors).includes(o)&&(o=BasicColors[o]),o[0]==="#"&&(o=o.slice(1)),o.length===3){var a="";o.split("").forEach(function(at){a+=at,a+=at}),o=a}var et=(o.match(/.{2}/g)||[]).map(function(at){return parseInt(at,16)}).join(", ");return"rgba(".concat(et,", ").concat(s,")")},__assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(o){for(var s,a=1,et=arguments.length;a<et;a++){s=arguments[a];for(var at in s)Object.prototype.hasOwnProperty.call(s,at)&&(o[at]=s[at])}return o},__assign$1.apply(this,arguments)},__rest$1=globalThis&&globalThis.__rest||function(o,s){var a={};for(var et in o)Object.prototype.hasOwnProperty.call(o,et)&&s.indexOf(et)<0&&(a[et]=o[et]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(o);at<et.length;at++)s.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(o,et[at])&&(a[et[at]]=o[et[at]]);return a};function HashLoader(o){var s=o.loading,a=s===void 0?!0:s,et=o.color,at=et===void 0?"#000000":et,lt=o.speedMultiplier,ht=lt===void 0?1:lt,dt=o.cssOverride,ft=dt===void 0?{}:dt,vt=o.size,wt=vt===void 0?50:vt,Ct=__rest$1(o,["loading","color","speedMultiplier","cssOverride","size"]),xt=parseLengthAndUnit(wt),Pt=xt.value,Rt=xt.unit,_t=__assign$1({display:"inherit",position:"relative",width:cssValue(wt),height:cssValue(wt),transform:"rotate(165deg)"},ft),St=Pt/5,bt=(Pt-St)/2,Nt=bt-St,kt=calculateRgba(at,.75),Dt=createAnimation("HashLoader","0% {width: ".concat(St,"px; box-shadow: ").concat(bt,"px ").concat(-Nt,"px ").concat(kt,", ").concat(-bt,"px ").concat(Nt,"px ").concat(kt,`}
    35% {width: `).concat(cssValue(wt),"; box-shadow: 0 ").concat(-Nt,"px ").concat(kt,", 0 ").concat(Nt,"px ").concat(kt,`}
    70% {width: `).concat(St,"px; box-shadow: ").concat(-bt,"px ").concat(-Nt,"px ").concat(kt,", ").concat(bt,"px ").concat(Nt,"px ").concat(kt,`}
    100% {box-shadow: `).concat(bt,"px ").concat(-Nt,"px ").concat(kt,", ").concat(-bt,"px ").concat(Nt,"px ").concat(kt,"}"),"before"),jt=createAnimation("HashLoader","0% {height: ".concat(St,"px; box-shadow: ").concat(Nt,"px ").concat(bt,"px ").concat(at,", ").concat(-Nt,"px ").concat(-bt,"px ").concat(at,`}
    35% {height: `).concat(cssValue(wt),"; box-shadow: ").concat(Nt,"px 0 ").concat(at,", ").concat(-Nt,"px 0 ").concat(at,`}
    70% {height: `).concat(St,"px; box-shadow: ").concat(Nt,"px ").concat(-bt,"px ").concat(at,", ").concat(-Nt,"px ").concat(bt,"px ").concat(at,`}
    100% {box-shadow: `).concat(Nt,"px ").concat(bt,"px ").concat(at,", ").concat(-Nt,"px ").concat(-bt,"px ").concat(at,"}"),"after"),Wt=function(Yt){return{position:"absolute",top:"50%",left:"50%",display:"block",width:"".concat(Pt/5).concat(Rt),height:"".concat(Pt/5).concat(Rt),borderRadius:"".concat(Pt/10).concat(Rt),transform:"translate(-50%, -50%)",animationFillMode:"none",animation:"".concat(Yt===1?Dt:jt," ").concat(2/ht,"s infinite")}};return a?reactExports.createElement("span",__assign$1({style:_t},Ct),reactExports.createElement("span",{style:Wt(1)}),reactExports.createElement("span",{style:Wt(2)})):null}var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(o){for(var s,a=1,et=arguments.length;a<et;a++){s=arguments[a];for(var at in s)Object.prototype.hasOwnProperty.call(s,at)&&(o[at]=s[at])}return o},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(o,s){var a={};for(var et in o)Object.prototype.hasOwnProperty.call(o,et)&&s.indexOf(et)<0&&(a[et]=o[et]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var at=0,et=Object.getOwnPropertySymbols(o);at<et.length;at++)s.indexOf(et[at])<0&&Object.prototype.propertyIsEnumerable.call(o,et[at])&&(a[et[at]]=o[et[at]]);return a};function Tree2Element(o){return o&&o.map(function(s,a){return React.createElement(s.tag,__assign({key:a},s.attr),Tree2Element(s.child))})}function GenIcon(o){return function(s){return React.createElement(IconBase,__assign({attr:__assign({},o.attr)},s),Tree2Element(o.child))}}function IconBase(o){var s=function(a){var et=o.attr,at=o.size,lt=o.title,ht=__rest(o,["attr","size","title"]),dt=at||a.size||"1em",ft;return a.className&&(ft=a.className),o.className&&(ft=(ft?ft+" ":"")+o.className),React.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,et,ht,{className:ft,style:__assign(__assign({color:o.color||a.color},a.style),o.style),height:dt,width:dt,xmlns:"http://www.w3.org/2000/svg"}),lt&&React.createElement("title",null,lt),o.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,function(a){return s(a)}):s(DefaultContext)}function MdAddCircle(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}}]})(o)}const Modal$1="";function getIterator(o){if(typeof o.next=="function")return o;if(typeof o[Symbol.iterator]=="function")return o[Symbol.iterator]();if(typeof o[Symbol.asyncIterator]=="function")return o[Symbol.asyncIterator]();throw new TypeError('"values" does not to conform to any of the iterator or iterable protocols')}function defer(){let o,s;return{promise:new Promise((et,at)=>{s=et,o=at}),reject:o,resolve:s}}function _transform(o,s,a){const et=getIterator(a),at=[],lt=[];let ht=!1,dt=!1,ft=0,vt=null;function wt(){for(;lt.length>0&&at.length>0;){const{resolve:_t}=lt.shift(),St=at.shift();_t({done:!1,value:St})}for(;lt.length>0&&ft===0&&ht;){const{resolve:_t,reject:St}=lt.shift();vt?(St(vt),vt=null):_t({done:!0,value:void 0})}}async function Ct(){if(ht){wt();return}if(!dt&&!(ft+at.length>=o)){dt=!0,ft++;try{const{done:_t,value:St}=await et.next();_t?(ht=!0,ft--,wt()):xt(St)}catch(_t){ht=!0,ft--,vt=_t,wt()}dt=!1,Ct()}}async function xt(_t){try{const St=await s(_t);at.push(St)}catch(St){ht=!0,vt=St}ft--,wt(),Ct()}async function Pt(){if(at.length===0){const St=defer();return lt.push(St),Ct(),St.promise}const _t=at.shift();return Ct(),{done:!1,value:_t}}const Rt={next:Pt,[Symbol.asyncIterator]:()=>Rt};return Rt}function transform(o,s,a){return s===void 0?(et,at)=>at?transform(o,et,at):transform(o,et):a===void 0?et=>transform(o,s,et):_transform(o,s,a)}var pRetryExports={},pRetry$1={get exports(){return pRetryExports},set exports(o){pRetryExports=o}},retryExports={},retry$2={get exports(){return retryExports},set exports(o){retryExports=o}},retry$1={};function RetryOperation(o,s){typeof s=="boolean"&&(s={forever:s}),this._originalTimeouts=JSON.parse(JSON.stringify(o)),this._timeouts=o,this._options=s||{},this._maxRetryTime=s&&s.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var retry_operation=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};RetryOperation.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};RetryOperation.prototype.retry=function(o){if(this._timeout&&clearTimeout(this._timeout),!o)return!1;var s=new Date().getTime();if(o&&s-this._operationStart>=this._maxRetryTime)return this._errors.push(o),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(o);var a=this._timeouts.shift();if(a===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),a=this._cachedTimeouts.slice(-1);else return!1;var et=this;return this._timer=setTimeout(function(){et._attempts++,et._operationTimeoutCb&&(et._timeout=setTimeout(function(){et._operationTimeoutCb(et._attempts)},et._operationTimeout),et._options.unref&&et._timeout.unref()),et._fn(et._attempts)},a),this._options.unref&&this._timer.unref(),!0};RetryOperation.prototype.attempt=function(o,s){this._fn=o,s&&(s.timeout&&(this._operationTimeout=s.timeout),s.cb&&(this._operationTimeoutCb=s.cb));var a=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){a._operationTimeoutCb()},a._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};RetryOperation.prototype.try=function(o){console.log("Using RetryOperation.try() is deprecated"),this.attempt(o)};RetryOperation.prototype.start=function(o){console.log("Using RetryOperation.start() is deprecated"),this.attempt(o)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0)return null;for(var o={},s=null,a=0,et=0;et<this._errors.length;et++){var at=this._errors[et],lt=at.message,ht=(o[lt]||0)+1;o[lt]=ht,ht>=a&&(s=at,a=ht)}return s};(function(o){var s=retry_operation;o.operation=function(a){var et=o.timeouts(a);return new s(et,{forever:a&&(a.forever||a.retries===1/0),unref:a&&a.unref,maxRetryTime:a&&a.maxRetryTime})},o.timeouts=function(a){if(a instanceof Array)return[].concat(a);var et={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var at in a)et[at]=a[at];if(et.minTimeout>et.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var lt=[],ht=0;ht<et.retries;ht++)lt.push(this.createTimeout(ht,et));return a&&a.forever&&!lt.length&&lt.push(this.createTimeout(ht,et)),lt.sort(function(dt,ft){return dt-ft}),lt},o.createTimeout=function(a,et){var at=et.randomize?Math.random()+1:1,lt=Math.round(at*Math.max(et.minTimeout,1)*Math.pow(et.factor,a));return lt=Math.min(lt,et.maxTimeout),lt},o.wrap=function(a,et,at){if(et instanceof Array&&(at=et,et=null),!at){at=[];for(var lt in a)typeof a[lt]=="function"&&at.push(lt)}for(var ht=0;ht<at.length;ht++){var dt=at[ht],ft=a[dt];a[dt]=function(wt){var Ct=o.operation(et),xt=Array.prototype.slice.call(arguments,1),Pt=xt.pop();xt.push(function(Rt){Ct.retry(Rt)||(Rt&&(arguments[0]=Ct.mainError()),Pt.apply(this,arguments))}),Ct.attempt(function(){wt.apply(a,xt)})}.bind(a,ft),a[dt].options=et}}})(retry$1);(function(o){o.exports=retry$1})(retry$2);const retry=retryExports,networkErrorMsgs=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class AbortError extends Error{constructor(s){super(),s instanceof Error?(this.originalError=s,{message:s}=s):(this.originalError=new Error(s),this.originalError.stack=this.stack),this.name="AbortError",this.message=s}}const decorateErrorWithCounts=(o,s,a)=>{const et=a.retries-(s-1);return o.attemptNumber=s,o.retriesLeft=et,o},isNetworkError=o=>networkErrorMsgs.includes(o),pRetry=(o,s)=>new Promise((a,et)=>{s={onFailedAttempt:()=>{},retries:10,...s};const at=retry.operation(s);at.attempt(async lt=>{try{a(await o(lt))}catch(ht){if(!(ht instanceof Error)){et(new TypeError(`Non-error was thrown: "${ht}". You should only throw errors.`));return}if(ht instanceof AbortError)at.stop(),et(ht.originalError);else if(ht instanceof TypeError&&!isNetworkError(ht.message))at.stop(),et(ht);else{decorateErrorWithCounts(ht,lt,s);try{await s.onFailedAttempt(ht)}catch(dt){et(dt);return}at.retry(ht)||et(at.mainError())}}})});pRetry$1.exports=pRetry;pRetryExports.default=pRetry;var AbortError_1=pRetryExports.AbortError=AbortError;const last=async o=>{let s;for await(const a of o)s=a;return s};var itLast=last,itPipeExports={},itPipe={get exports(){return itPipeExports},set exports(o){itPipeExports=o}};const rawPipe=(...o)=>{let s;for(;o.length;)s=o.shift()(s);return s},isIterable$1=o=>o&&(typeof o[Symbol.asyncIterator]=="function"||typeof o[Symbol.iterator]=="function"||typeof o.next=="function"),isDuplex=o=>o&&typeof o.sink=="function"&&isIterable$1(o.source),duplexPipelineFn=o=>s=>(o.sink(s),o.source),pipe=(...o)=>{if(isDuplex(o[0])){const s=o[0];o[0]=()=>s.source}else if(isIterable$1(o[0])){const s=o[0];o[0]=()=>s}if(o.length>1&&isDuplex(o[o.length-1])&&(o[o.length-1]=o[o.length-1].sink),o.length>2)for(let s=1;s<o.length-1;s++)isDuplex(o[s])&&(o[s]=duplexPipelineFn(o[s]));return rawPipe(...o)};itPipe.exports=pipe;itPipeExports.pipe=pipe;itPipeExports.rawPipe=rawPipe;itPipeExports.isIterable=isIterable$1;itPipeExports.isDuplex=isDuplex;var encode_1$1=encode$9,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$9(o,s,a){if(Number.MAX_SAFE_INTEGER&&o>Number.MAX_SAFE_INTEGER)throw encode$9.bytes=0,new RangeError("Could not encode varint");s=s||[],a=a||0;for(var et=a;o>=INT$1;)s[a++]=o&255|MSB$3,o/=128;for(;o&MSBALL$1;)s[a++]=o&255|MSB$3,o>>>=7;return s[a]=o|0,encode$9.bytes=a-et+1,s}var decode$a=read$1,MSB$2=128,REST$2=127;function read$1(o,et){var a=0,et=et||0,at=0,lt=et,ht,dt=o.length;do{if(lt>=dt||at>49)throw read$1.bytes=0,new RangeError("Could not decode varint");ht=o[lt++],a+=at<28?(ht&REST$2)<<at:(ht&REST$2)*Math.pow(2,at),at+=7}while(ht>=MSB$2);return read$1.bytes=lt-et,a}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(o){return o<N1$1?1:o<N2$1?2:o<N3$1?3:o<N4$1?4:o<N5$1?5:o<N6$1?6:o<N7$1?7:o<N8$1?8:o<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$a,encodingLength:length$1},encode_1=encode$8,MSB=128,REST=127,MSBALL=~REST,INT=Math.pow(2,31);function encode$8(o,s,a){s=s||[],a=a||0;for(var et=a;o>=INT;)s[a++]=o&255|MSB,o/=128;for(;o&MSBALL;)s[a++]=o&255|MSB,o>>>=7;return s[a]=o|0,encode$8.bytes=a-et+1,s}var decode$9=read,MSB$1=128,REST$1=127;function read(o,et){var a=0,et=et||0,at=0,lt=et,ht,dt=o.length;do{if(lt>=dt)throw read.bytes=0,new RangeError("Could not decode varint");ht=o[lt++],a+=at<28?(ht&REST$1)<<at:(ht&REST$1)*Math.pow(2,at),at+=7}while(ht>=MSB$1);return read.bytes=lt-et,a}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(o){return o<N1?1:o<N2?2:o<N3?3:o<N4?4:o<N5?5:o<N6?6:o<N7?7:o<N8?8:o<N9?9:10},varint={encode:encode_1,decode:decode$9,encodingLength:length},_brrp_varint=varint;const decode$8=(o,s=0)=>[_brrp_varint.decode(o,s),_brrp_varint.decode.bytes],encodeTo=(o,s,a=0)=>(_brrp_varint.encode(o,s,a),s),encodingLength=o=>_brrp_varint.encodingLength(o),empty=new Uint8Array(0),fromHex=o=>{const s=o.match(/../g);return s?new Uint8Array(s.map(a=>parseInt(a,16))):empty},equals$2=(o,s)=>{if(o===s)return!0;if(o.byteLength!==s.byteLength)return!1;for(let a=0;a<o.byteLength;a++)if(o[a]!==s[a])return!1;return!0},coerce=o=>{if(o instanceof Uint8Array&&o.constructor.name==="Uint8Array")return o;if(o instanceof ArrayBuffer)return new Uint8Array(o);if(ArrayBuffer.isView(o))return new Uint8Array(o.buffer,o.byteOffset,o.byteLength);throw new Error("Unknown type, must be binary type")},fromString$3=o=>new TextEncoder().encode(o),toString$1=o=>new TextDecoder().decode(o),create$4=(o,s)=>{const a=s.byteLength,et=encodingLength(o),at=et+encodingLength(a),lt=new Uint8Array(at+a);return encodeTo(o,lt,0),encodeTo(a,lt,et),lt.set(s,at),new Digest(o,a,s,lt)},decode$7=o=>{const s=coerce(o),[a,et]=decode$8(s),[at,lt]=decode$8(s.subarray(et)),ht=s.subarray(et+lt);if(ht.byteLength!==at)throw new Error("Incorrect length");return new Digest(a,at,ht,s)},equals$1=(o,s)=>o===s?!0:o.code===s.code&&o.size===s.size&&equals$2(o.bytes,s.bytes);class Digest{constructor(s,a,et,at){this.code=s,this.size=a,this.digest=et,this.bytes=at}}function base(o,s){if(o.length>=255)throw new TypeError("Alphabet too long");for(var a=new Uint8Array(256),et=0;et<a.length;et++)a[et]=255;for(var at=0;at<o.length;at++){var lt=o.charAt(at),ht=lt.charCodeAt(0);if(a[ht]!==255)throw new TypeError(lt+" is ambiguous");a[ht]=at}var dt=o.length,ft=o.charAt(0),vt=Math.log(dt)/Math.log(256),wt=Math.log(256)/Math.log(dt);function Ct(Rt){if(Rt instanceof Uint8Array||(ArrayBuffer.isView(Rt)?Rt=new Uint8Array(Rt.buffer,Rt.byteOffset,Rt.byteLength):Array.isArray(Rt)&&(Rt=Uint8Array.from(Rt))),!(Rt instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Rt.length===0)return"";for(var _t=0,St=0,bt=0,Nt=Rt.length;bt!==Nt&&Rt[bt]===0;)bt++,_t++;for(var kt=(Nt-bt)*wt+1>>>0,Dt=new Uint8Array(kt);bt!==Nt;){for(var jt=Rt[bt],Wt=0,Yt=kt-1;(jt!==0||Wt<St)&&Yt!==-1;Yt--,Wt++)jt+=256*Dt[Yt]>>>0,Dt[Yt]=jt%dt>>>0,jt=jt/dt>>>0;if(jt!==0)throw new Error("Non-zero carry");St=Wt,bt++}for(var Bt=kt-St;Bt!==kt&&Dt[Bt]===0;)Bt++;for(var zt=ft.repeat(_t);Bt<kt;++Bt)zt+=o.charAt(Dt[Bt]);return zt}function xt(Rt){if(typeof Rt!="string")throw new TypeError("Expected String");if(Rt.length===0)return new Uint8Array;var _t=0;if(Rt[_t]!==" "){for(var St=0,bt=0;Rt[_t]===ft;)St++,_t++;for(var Nt=(Rt.length-_t)*vt+1>>>0,kt=new Uint8Array(Nt);Rt[_t];){var Dt=a[Rt.charCodeAt(_t)];if(Dt===255)return;for(var jt=0,Wt=Nt-1;(Dt!==0||jt<bt)&&Wt!==-1;Wt--,jt++)Dt+=dt*kt[Wt]>>>0,kt[Wt]=Dt%256>>>0,Dt=Dt/256>>>0;if(Dt!==0)throw new Error("Non-zero carry");bt=jt,_t++}if(Rt[_t]!==" "){for(var Yt=Nt-bt;Yt!==Nt&&kt[Yt]===0;)Yt++;for(var Bt=new Uint8Array(St+(Nt-Yt)),zt=St;Yt!==Nt;)Bt[zt++]=kt[Yt++];return Bt}}}function Pt(Rt){var _t=xt(Rt);if(_t)return _t;throw new Error(`Non-${s} character`)}return{encode:Ct,decodeUnsafe:xt,decode:Pt}}var src$2=base,_brrp__multiformats_scope_baseX=src$2;class Encoder{constructor(s,a,et){this.name=s,this.prefix=a,this.baseEncode=et}encode(s){if(s instanceof Uint8Array)return`${this.prefix}${this.baseEncode(s)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(s,a,et){if(this.name=s,this.prefix=a,a.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=a.codePointAt(0),this.baseDecode=et}decode(s){if(typeof s=="string"){if(s.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(s)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(s.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(s){return or(this,s)}}class ComposedDecoder{constructor(s){this.decoders=s}or(s){return or(this,s)}decode(s){const a=s[0],et=this.decoders[a];if(et)return et.decode(s);throw RangeError(`Unable to decode multibase string ${JSON.stringify(s)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(o,s)=>new ComposedDecoder({...o.decoders||{[o.prefix]:o},...s.decoders||{[s.prefix]:s}});class Codec{constructor(s,a,et,at){this.name=s,this.prefix=a,this.baseEncode=et,this.baseDecode=at,this.encoder=new Encoder(s,a,et),this.decoder=new Decoder(s,a,at)}encode(s){return this.encoder.encode(s)}decode(s){return this.decoder.decode(s)}}const from$1=({name:o,prefix:s,encode:a,decode:et})=>new Codec(o,s,a,et),baseX=({prefix:o,name:s,alphabet:a})=>{const{encode:et,decode:at}=_brrp__multiformats_scope_baseX(a,s);return from$1({prefix:o,name:s,encode:et,decode:lt=>coerce(at(lt))})},decode$6=(o,s,a,et)=>{const at={};for(let wt=0;wt<s.length;++wt)at[s[wt]]=wt;let lt=o.length;for(;o[lt-1]==="=";)--lt;const ht=new Uint8Array(lt*a/8|0);let dt=0,ft=0,vt=0;for(let wt=0;wt<lt;++wt){const Ct=at[o[wt]];if(Ct===void 0)throw new SyntaxError(`Non-${et} character`);ft=ft<<a|Ct,dt+=a,dt>=8&&(dt-=8,ht[vt++]=255&ft>>dt)}if(dt>=a||255&ft<<8-dt)throw new SyntaxError("Unexpected end of data");return ht},encode$7=(o,s,a)=>{const et=s[s.length-1]==="=",at=(1<<a)-1;let lt="",ht=0,dt=0;for(let ft=0;ft<o.length;++ft)for(dt=dt<<8|o[ft],ht+=8;ht>a;)ht-=a,lt+=s[at&dt>>ht];if(ht&&(lt+=s[at&dt<<a-ht]),et)for(;lt.length*a&7;)lt+="=";return lt},rfc4648=({name:o,prefix:s,bitsPerChar:a,alphabet:et})=>from$1({prefix:s,name:o,encode(at){return encode$7(at,et,a)},decode(at){return decode$6(at,et,a,o)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc,base58flickr},Symbol.toStringTag,{value:"Module"})),base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$1=Object.freeze(Object.defineProperty({__proto__:null,base32,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"}));class CID{constructor(s,a,et,at){this.code=a,this.version=s,this.multihash=et,this.bytes=at,this.byteOffset=at.byteOffset,this.byteLength=at.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:s,multihash:a}=this;if(s!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(a.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(a)}}}toV1(){switch(this.version){case 0:{const{code:s,digest:a}=this.multihash,et=create$4(s,a);return CID.createV1(this.code,et)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(s){return s&&this.code===s.code&&this.version===s.version&&equals$1(this.multihash,s.multihash)}toString(s){const{bytes:a,version:et,_baseCache:at}=this;switch(et){case 0:return toStringV0(a,at,s||base58btc.encoder);default:return toStringV1(a,at,s||base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(s){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(s&&(s[cidSymbol]||s.asCID===s))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(s){if(s instanceof CID)return s;if(s!=null&&s.asCID===s){const{version:a,code:et,multihash:at,bytes:lt}=s;return new CID(a,et,at,lt||encodeCID(a,et,at.bytes))}else if(s!=null&&s[cidSymbol]===!0){const{version:a,multihash:et,code:at}=s,lt=decode$7(et);return CID.create(a,at,lt)}else return null}static create(s,a,et){if(typeof a!="number")throw new Error("String codecs are no longer supported");switch(s){case 0:{if(a!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(s,a,et,et.bytes)}case 1:{const at=encodeCID(s,a,et.bytes);return new CID(s,a,et,at)}default:throw new Error("Invalid version")}}static createV0(s){return CID.create(0,DAG_PB_CODE,s)}static createV1(s,a){return CID.create(1,s,a)}static decode(s){const[a,et]=CID.decodeFirst(s);if(et.length)throw new Error("Incorrect length");return a}static decodeFirst(s){const a=CID.inspectBytes(s),et=a.size-a.multihashSize,at=coerce(s.subarray(et,et+a.multihashSize));if(at.byteLength!==a.multihashSize)throw new Error("Incorrect length");const lt=at.subarray(a.multihashSize-a.digestSize),ht=new Digest(a.multihashCode,a.digestSize,lt,at);return[a.version===0?CID.createV0(ht):CID.createV1(a.codec,ht),s.subarray(a.size)]}static inspectBytes(s){let a=0;const et=()=>{const[Ct,xt]=decode$8(s.subarray(a));return a+=xt,Ct};let at=et(),lt=DAG_PB_CODE;if(at===18?(at=0,a=0):at===1&&(lt=et()),at!==0&&at!==1)throw new RangeError(`Invalid CID version ${at}`);const ht=a,dt=et(),ft=et(),vt=a+ft,wt=vt-ht;return{version:at,codec:lt,multihashCode:dt,digestSize:ft,multihashSize:wt,size:vt}}static parse(s,a){const[et,at]=parseCIDtoBytes(s,a),lt=CID.decode(at);return lt._baseCache.set(et,s),lt}}const parseCIDtoBytes=(o,s)=>{switch(o[0]){case"Q":{const a=s||base58btc;return[base58btc.prefix,a.decode(`${base58btc.prefix}${o}`)]}case base58btc.prefix:{const a=s||base58btc;return[base58btc.prefix,a.decode(o)]}case base32.prefix:{const a=s||base32;return[base32.prefix,a.decode(o)]}default:{if(s==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[o[0],s.decode(o)]}}},toStringV0=(o,s,a)=>{const{prefix:et}=a;if(et!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${a.name} encoding`);const at=s.get(et);if(at==null){const lt=a.encode(o).slice(1);return s.set(et,lt),lt}else return at},toStringV1=(o,s,a)=>{const{prefix:et}=a,at=s.get(et);if(at==null){const lt=a.encode(o);return s.set(et,lt),lt}else return at},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(o,s,a)=>{const et=encodingLength(o),at=et+encodingLength(s),lt=new Uint8Array(at+a.byteLength);return encodeTo(o,lt,0),encodeTo(s,lt,et),lt.set(a,at),lt},cidSymbol=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version="0.0.0-dev",deprecate=(o,s)=>{if(o.test(version))console.warn(s);else throw new Error(s)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(o){if(o===null)return"null";if(o===void 0)return"undefined";if(o===!0||o===!1)return"boolean";const s=typeof o;if(typeofs.includes(s))return s;if(s==="function")return"Function";if(Array.isArray(o))return"Array";if(isBuffer$1(o))return"Buffer";const a=getObjectType(o);return a||"Object"}function isBuffer$1(o){return o&&o.constructor&&o.constructor.isBuffer&&o.constructor.isBuffer.call(null,o)}function getObjectType(o){const s=Object.prototype.toString.call(o).slice(8,-1);if(objectTypeNames.includes(s))return s}class Type{constructor(s,a,et){this.major=s,this.majorEncoded=s<<5,this.name=a,this.terminal=et}toString(){return`Type[${this.major}].${this.name}`}compare(s){return this.major<s.major?-1:this.major>s.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(s,a,et){this.type=s,this.value=a,this.encodedLength=et,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer(o){return useBuffer&&globalThis.Buffer.isBuffer(o)}function asU8A(o){return o instanceof Uint8Array?isBuffer(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o:Uint8Array.from(o)}const toString=useBuffer?(o,s,a)=>a-s>64?globalThis.Buffer.from(o.subarray(s,a)).toString("utf8"):utf8Slice(o,s,a):(o,s,a)=>a-s>64?textDecoder$1.decode(o.subarray(s,a)):utf8Slice(o,s,a),fromString$2=useBuffer?o=>o.length>64?globalThis.Buffer.from(o):utf8ToBytes(o):o=>o.length>64?textEncoder$2.encode(o):utf8ToBytes(o),fromArray=o=>Uint8Array.from(o),slice=useBuffer?(o,s,a)=>isBuffer(o)?new Uint8Array(o.subarray(s,a)):o.slice(s,a):(o,s,a)=>o.slice(s,a),concat$2=useBuffer?(o,s)=>(o=o.map(a=>a instanceof Uint8Array?a:globalThis.Buffer.from(a)),asU8A(globalThis.Buffer.concat(o,s))):(o,s)=>{const a=new Uint8Array(s);let et=0;for(let at of o)et+at.length>a.length&&(at=at.subarray(0,a.length-et)),a.set(at,et),et+=at.length;return a},alloc=useBuffer?o=>globalThis.Buffer.allocUnsafe(o):o=>new Uint8Array(o);function compare(o,s){if(isBuffer(o)&&isBuffer(s))return o.compare(s);for(let a=0;a<o.length;a++)if(o[a]!==s[a])return o[a]<s[a]?-1:1;return 0}function utf8ToBytes(o,s=1/0){let a;const et=o.length;let at=null;const lt=[];for(let ht=0;ht<et;++ht){if(a=o.charCodeAt(ht),a>55295&&a<57344){if(!at){if(a>56319){(s-=3)>-1&&lt.push(239,191,189);continue}else if(ht+1===et){(s-=3)>-1&&lt.push(239,191,189);continue}at=a;continue}if(a<56320){(s-=3)>-1&&lt.push(239,191,189),at=a;continue}a=(at-55296<<10|a-56320)+65536}else at&&(s-=3)>-1&&lt.push(239,191,189);if(at=null,a<128){if((s-=1)<0)break;lt.push(a)}else if(a<2048){if((s-=2)<0)break;lt.push(a>>6|192,a&63|128)}else if(a<65536){if((s-=3)<0)break;lt.push(a>>12|224,a>>6&63|128,a&63|128)}else if(a<1114112){if((s-=4)<0)break;lt.push(a>>18|240,a>>12&63|128,a>>6&63|128,a&63|128)}else throw new Error("Invalid code point")}return lt}function utf8Slice(o,s,a){const et=[];for(;s<a;){const at=o[s];let lt=null,ht=at>239?4:at>223?3:at>191?2:1;if(s+ht<=a){let dt,ft,vt,wt;switch(ht){case 1:at<128&&(lt=at);break;case 2:dt=o[s+1],(dt&192)===128&&(wt=(at&31)<<6|dt&63,wt>127&&(lt=wt));break;case 3:dt=o[s+1],ft=o[s+2],(dt&192)===128&&(ft&192)===128&&(wt=(at&15)<<12|(dt&63)<<6|ft&63,wt>2047&&(wt<55296||wt>57343)&&(lt=wt));break;case 4:dt=o[s+1],ft=o[s+2],vt=o[s+3],(dt&192)===128&&(ft&192)===128&&(vt&192)===128&&(wt=(at&15)<<18|(dt&63)<<12|(ft&63)<<6|vt&63,wt>65535&&wt<1114112&&(lt=wt))}}lt===null?(lt=65533,ht=1):lt>65535&&(lt-=65536,et.push(lt>>>10&1023|55296),lt=56320|lt&1023),et.push(lt),s+=ht}return decodeCodePointsArray(et)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(o){const s=o.length;if(s<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,o);let a="",et=0;for(;et<s;)a+=String.fromCharCode.apply(String,o.slice(et,et+=MAX_ARGUMENTS_LENGTH));return a}const defaultChunkSize=256;class Bl{constructor(s=defaultChunkSize){this.chunkSize=s,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(s){let a=this.chunks[this.chunks.length-1];if(this.cursor+s.length<=this.maxCursor+1){const at=a.length-(this.maxCursor-this.cursor)-1;a.set(s,at)}else{if(a){const at=a.length-(this.maxCursor-this.cursor)-1;at<a.length&&(this.chunks[this.chunks.length-1]=a.subarray(0,at),this.maxCursor=this.cursor-1)}s.length<64&&s.length<this.chunkSize?(a=alloc(this.chunkSize),this.chunks.push(a),this.maxCursor+=a.length,this._initReuseChunk===null&&(this._initReuseChunk=a),a.set(s,0)):(this.chunks.push(s),this.maxCursor+=s.length)}this.cursor+=s.length}toBytes(s=!1){let a;if(this.chunks.length===1){const et=this.chunks[0];s&&this.cursor>et.length/2?(a=this.cursor===et.length?et:et.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):a=slice(et,0,this.cursor)}else a=concat$2(this.chunks,this.cursor);return s&&this.reset(),a}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(o,s,a){if(o.length-s<a)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(o,s,a){assertEnoughData(o,s,1);const et=o[s];if(a.strict===!0&&et<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return et}function readUint16(o,s,a){assertEnoughData(o,s,2);const et=o[s]<<8|o[s+1];if(a.strict===!0&&et<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return et}function readUint32(o,s,a){assertEnoughData(o,s,4);const et=o[s]*16777216+(o[s+1]<<16)+(o[s+2]<<8)+o[s+3];if(a.strict===!0&&et<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return et}function readUint64(o,s,a){assertEnoughData(o,s,8);const et=o[s]*16777216+(o[s+1]<<16)+(o[s+2]<<8)+o[s+3],at=o[s+4]*16777216+(o[s+5]<<16)+(o[s+6]<<8)+o[s+7],lt=(BigInt(et)<<BigInt(32))+BigInt(at);if(a.strict===!0&&lt<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(lt<=Number.MAX_SAFE_INTEGER)return Number(lt);if(a.allowBigInt===!0)return lt;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(o,s,a,et){return new Token(Type.uint,readUint8(o,s+1,et),2)}function decodeUint16(o,s,a,et){return new Token(Type.uint,readUint16(o,s+1,et),3)}function decodeUint32(o,s,a,et){return new Token(Type.uint,readUint32(o,s+1,et),5)}function decodeUint64(o,s,a,et){return new Token(Type.uint,readUint64(o,s+1,et),9)}function encodeUint(o,s){return encodeUintValue(o,0,s.value)}function encodeUintValue(o,s,a){if(a<uintBoundaries[0]){const et=Number(a);o.push([s|et])}else if(a<uintBoundaries[1]){const et=Number(a);o.push([s|24,et])}else if(a<uintBoundaries[2]){const et=Number(a);o.push([s|25,et>>>8,et&255])}else if(a<uintBoundaries[3]){const et=Number(a);o.push([s|26,et>>>24&255,et>>>16&255,et>>>8&255,et&255])}else{const et=BigInt(a);if(et<uintBoundaries[4]){const at=[s|27,0,0,0,0,0,0,0];let lt=Number(et&BigInt(4294967295)),ht=Number(et>>BigInt(32)&BigInt(4294967295));at[8]=lt&255,lt=lt>>8,at[7]=lt&255,lt=lt>>8,at[6]=lt&255,lt=lt>>8,at[5]=lt&255,at[4]=ht&255,ht=ht>>8,at[3]=ht&255,ht=ht>>8,at[2]=ht&255,ht=ht>>8,at[1]=ht&255,o.push(at)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(s){return encodeUintValue.encodedSize(s.value)};encodeUintValue.encodedSize=function(s){return s<uintBoundaries[0]?1:s<uintBoundaries[1]?2:s<uintBoundaries[2]?3:s<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(s,a){return s.value<a.value?-1:s.value>a.value?1:0};function decodeNegint8(o,s,a,et){return new Token(Type.negint,-1-readUint8(o,s+1,et),2)}function decodeNegint16(o,s,a,et){return new Token(Type.negint,-1-readUint16(o,s+1,et),3)}function decodeNegint32(o,s,a,et){return new Token(Type.negint,-1-readUint32(o,s+1,et),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(o,s,a,et){const at=readUint64(o,s+1,et);if(typeof at!="bigint"){const lt=-1-at;if(lt>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,lt,9)}if(et.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(at),9)}function encodeNegint(o,s){const a=s.value,et=typeof a=="bigint"?a*neg1b-pos1b:a*-1-1;encodeUintValue(o,s.type.majorEncoded,et)}encodeNegint.encodedSize=function(s){const a=s.value,et=typeof a=="bigint"?a*neg1b-pos1b:a*-1-1;return et<uintBoundaries[0]?1:et<uintBoundaries[1]?2:et<uintBoundaries[2]?3:et<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(s,a){return s.value<a.value?1:s.value>a.value?-1:0};function toToken$3(o,s,a,et){assertEnoughData(o,s,a+et);const at=slice(o,s+a,s+a+et);return new Token(Type.bytes,at,a+et)}function decodeBytesCompact(o,s,a,et){return toToken$3(o,s,1,a)}function decodeBytes8(o,s,a,et){return toToken$3(o,s,2,readUint8(o,s+1,et))}function decodeBytes16(o,s,a,et){return toToken$3(o,s,3,readUint16(o,s+1,et))}function decodeBytes32(o,s,a,et){return toToken$3(o,s,5,readUint32(o,s+1,et))}function decodeBytes64(o,s,a,et){const at=readUint64(o,s+1,et);if(typeof at=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(o,s,9,at)}function tokenBytes(o){return o.encodedBytes===void 0&&(o.encodedBytes=o.type===Type.string?fromString$2(o.value):o.value),o.encodedBytes}function encodeBytes(o,s){const a=tokenBytes(s);encodeUintValue(o,s.type.majorEncoded,a.length),o.push(a)}encodeBytes.encodedSize=function(s){const a=tokenBytes(s);return encodeUintValue.encodedSize(a.length)+a.length};encodeBytes.compareTokens=function(s,a){return compareBytes(tokenBytes(s),tokenBytes(a))};function compareBytes(o,s){return o.length<s.length?-1:o.length>s.length?1:compare(o,s)}function toToken$2(o,s,a,et,at){const lt=a+et;assertEnoughData(o,s,lt);const ht=new Token(Type.string,toString(o,s+a,s+lt),lt);return at.retainStringBytes===!0&&(ht.byteValue=slice(o,s+a,s+lt)),ht}function decodeStringCompact(o,s,a,et){return toToken$2(o,s,1,a,et)}function decodeString8(o,s,a,et){return toToken$2(o,s,2,readUint8(o,s+1,et),et)}function decodeString16(o,s,a,et){return toToken$2(o,s,3,readUint16(o,s+1,et),et)}function decodeString32(o,s,a,et){return toToken$2(o,s,5,readUint32(o,s+1,et),et)}function decodeString64(o,s,a,et){const at=readUint64(o,s+1,et);if(typeof at=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(o,s,9,at,et)}const encodeString=encodeBytes;function toToken$1(o,s,a,et){return new Token(Type.array,et,a)}function decodeArrayCompact(o,s,a,et){return toToken$1(o,s,1,a)}function decodeArray8(o,s,a,et){return toToken$1(o,s,2,readUint8(o,s+1,et))}function decodeArray16(o,s,a,et){return toToken$1(o,s,3,readUint16(o,s+1,et))}function decodeArray32(o,s,a,et){return toToken$1(o,s,5,readUint32(o,s+1,et))}function decodeArray64(o,s,a,et){const at=readUint64(o,s+1,et);if(typeof at=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(o,s,9,at)}function decodeArrayIndefinite(o,s,a,et){if(et.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(o,s,1,1/0)}function encodeArray(o,s){encodeUintValue(o,Type.array.majorEncoded,s.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(s){return encodeUintValue.encodedSize(s.value)};function toToken(o,s,a,et){return new Token(Type.map,et,a)}function decodeMapCompact(o,s,a,et){return toToken(o,s,1,a)}function decodeMap8(o,s,a,et){return toToken(o,s,2,readUint8(o,s+1,et))}function decodeMap16(o,s,a,et){return toToken(o,s,3,readUint16(o,s+1,et))}function decodeMap32(o,s,a,et){return toToken(o,s,5,readUint32(o,s+1,et))}function decodeMap64(o,s,a,et){const at=readUint64(o,s+1,et);if(typeof at=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(o,s,9,at)}function decodeMapIndefinite(o,s,a,et){if(et.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(o,s,1,1/0)}function encodeMap(o,s){encodeUintValue(o,Type.map.majorEncoded,s.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(s){return encodeUintValue.encodedSize(s.value)};function decodeTagCompact(o,s,a,et){return new Token(Type.tag,a,1)}function decodeTag8(o,s,a,et){return new Token(Type.tag,readUint8(o,s+1,et),2)}function decodeTag16(o,s,a,et){return new Token(Type.tag,readUint16(o,s+1,et),3)}function decodeTag32(o,s,a,et){return new Token(Type.tag,readUint32(o,s+1,et),5)}function decodeTag64(o,s,a,et){return new Token(Type.tag,readUint64(o,s+1,et),9)}function encodeTag(o,s){encodeUintValue(o,Type.tag.majorEncoded,s.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(s){return encodeUintValue.encodedSize(s.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(o,s,a,et){if(et.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return et.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(o,s,a,et){if(et.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(o,s,a){if(a){if(a.allowNaN===!1&&Number.isNaN(o))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(a.allowInfinity===!1&&(o===1/0||o===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,o,s)}function decodeFloat16(o,s,a,et){return createToken(readFloat16(o,s+1),3,et)}function decodeFloat32(o,s,a,et){return createToken(readFloat32(o,s+1),5,et)}function decodeFloat64(o,s,a,et){return createToken(readFloat64(o,s+1),9,et)}function encodeFloat(o,s,a){const et=s.value;if(et===!1)o.push([Type.float.majorEncoded|MINOR_FALSE]);else if(et===!0)o.push([Type.float.majorEncoded|MINOR_TRUE]);else if(et===null)o.push([Type.float.majorEncoded|MINOR_NULL]);else if(et===void 0)o.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let at,lt=!1;(!a||a.float64!==!0)&&(encodeFloat16(et),at=readFloat16(ui8a,1),et===at||Number.isNaN(et)?(ui8a[0]=249,o.push(ui8a.slice(0,3)),lt=!0):(encodeFloat32(et),at=readFloat32(ui8a,1),et===at&&(ui8a[0]=250,o.push(ui8a.slice(0,5)),lt=!0))),lt||(encodeFloat64(et),at=readFloat64(ui8a,1),ui8a[0]=251,o.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(s,a){const et=s.value;if(et===!1||et===!0||et===null||et===void 0)return 1;if(!a||a.float64!==!0){encodeFloat16(et);let at=readFloat16(ui8a,1);if(et===at||Number.isNaN(et))return 3;if(encodeFloat32(et),at=readFloat32(ui8a,1),et===at)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(o){if(o===1/0)dataView.setUint16(0,31744,!1);else if(o===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(o))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,o);const s=dataView.getUint32(0),a=(s&2139095040)>>23,et=s&8388607;if(a===255)dataView.setUint16(0,31744,!1);else if(a===0)dataView.setUint16(0,(o&2147483648)>>16|et>>13,!1);else{const at=a-127;at<-24?dataView.setUint16(0,0):at<-14?dataView.setUint16(0,(s&2147483648)>>16|1<<24+at,!1):dataView.setUint16(0,(s&2147483648)>>16|at+15<<10|et>>13,!1)}}}function readFloat16(o,s){if(o.length-s<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const a=(o[s]<<8)+o[s+1];if(a===31744)return 1/0;if(a===64512)return-1/0;if(a===32256)return NaN;const et=a>>10&31,at=a&1023;let lt;return et===0?lt=at*2**-24:et!==31?lt=(at+1024)*2**(et-25):lt=at===0?1/0:NaN,a&32768?-lt:lt}function encodeFloat32(o){dataView.setFloat32(0,o,!1)}function readFloat32(o,s){if(o.length-s<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const a=(o.byteOffset||0)+s;return new DataView(o.buffer,a,4).getFloat32(0,!1)}function encodeFloat64(o){dataView.setFloat64(0,o,!1)}function readFloat64(o,s){if(o.length-s<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const a=(o.byteOffset||0)+s;return new DataView(o.buffer,a,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(o,s,a){throw new Error(`${decodeErrPrefix} encountered invalid minor (${a}) for major ${o[s]>>>5}`)}function errorer(o){return()=>{throw new Error(`${decodeErrPrefix} ${o}`)}}const jump=[];for(let o=0;o<=23;o++)jump[o]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let o=32;o<=55;o++)jump[o]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let o=64;o<=87;o++)jump[o]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let o=96;o<=119;o++)jump[o]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let o=128;o<=151;o++)jump[o]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let o=160;o<=183;o++)jump[o]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let o=192;o<=215;o++)jump[o]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let o=224;o<=243;o++)jump[o]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let o=0;o<24;o++)quick[o]=new Token(Type.uint,o,1);for(let o=-1;o>=-24;o--)quick[31-o]=new Token(Type.negint,o,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(o){switch(o.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return o.value.length?void 0:fromArray([64]);case Type.string:return o.value===""?fromArray([96]):void 0;case Type.array:return o.value===0?fromArray([128]):void 0;case Type.map:return o.value===0?fromArray([160]):void 0;case Type.uint:return o.value<24?fromArray([Number(o.value)]):void 0;case Type.negint:if(o.value>=-24)return fromArray([31-Number(o.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const o=[];return o[Type.uint.major]=encodeUint,o[Type.negint.major]=encodeNegint,o[Type.bytes.major]=encodeBytes,o[Type.string.major]=encodeString,o[Type.array.major]=encodeArray,o[Type.map.major]=encodeMap,o[Type.tag.major]=encodeTag,o[Type.float.major]=encodeFloat,o}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(s,a){this.obj=s,this.parent=a}includes(s){let a=this;do if(a.obj===s)return!0;while(a=a.parent);return!1}static createCheck(s,a){if(s&&s.includes(a))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(a,s)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(o,s,a,et){return!Number.isInteger(o)||!Number.isSafeInteger(o)?new Token(Type.float,o):o>=0?new Token(Type.uint,o):new Token(Type.negint,o)},bigint(o,s,a,et){return o>=BigInt(0)?new Token(Type.uint,o):new Token(Type.negint,o)},Uint8Array(o,s,a,et){return new Token(Type.bytes,o)},string(o,s,a,et){return new Token(Type.string,o)},boolean(o,s,a,et){return o?simpleTokens.true:simpleTokens.false},null(o,s,a,et){return simpleTokens.null},undefined(o,s,a,et){return simpleTokens.undefined},ArrayBuffer(o,s,a,et){return new Token(Type.bytes,new Uint8Array(o))},DataView(o,s,a,et){return new Token(Type.bytes,new Uint8Array(o.buffer,o.byteOffset,o.byteLength))},Array(o,s,a,et){if(!o.length)return a.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;et=Ref.createCheck(et,o);const at=[];let lt=0;for(const ht of o)at[lt++]=objectToTokens(ht,a,et);return a.addBreakTokens?[new Token(Type.array,o.length),at,new Token(Type.break)]:[new Token(Type.array,o.length),at]},Object(o,s,a,et){const at=s!=="Object",lt=at?o.keys():Object.keys(o),ht=at?o.size:lt.length;if(!ht)return a.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;et=Ref.createCheck(et,o);const dt=[];let ft=0;for(const vt of lt)dt[ft++]=[objectToTokens(vt,a,et),objectToTokens(at?o.get(vt):o[vt],a,et)];return sortMapEntries(dt,a),a.addBreakTokens?[new Token(Type.map,ht),dt,new Token(Type.break)]:[new Token(Type.map,ht),dt]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const o of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${o}Array`]=typeEncoders.DataView;function objectToTokens(o,s={},a){const et=is(o),at=s&&s.typeEncoders&&s.typeEncoders[et]||typeEncoders[et];if(typeof at=="function"){const ht=at(o,et,s,a);if(ht!=null)return ht}const lt=typeEncoders[et];if(!lt)throw new Error(`${encodeErrPrefix} unsupported type: ${et}`);return lt(o,et,s,a)}function sortMapEntries(o,s){s.mapSorter&&o.sort(s.mapSorter)}function mapSorter(o,s){const a=Array.isArray(o[0])?o[0][0]:o[0],et=Array.isArray(s[0])?s[0][0]:s[0];if(a.type!==et.type)return a.type.compare(et.type);const at=a.type.major,lt=cborEncoders[at].compareTokens(a,et);return lt===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),lt}function tokensToEncoded(o,s,a,et){if(Array.isArray(s))for(const at of s)tokensToEncoded(o,at,a,et);else a[s.type.major](o,s,et)}function encodeCustom(o,s,a){const et=objectToTokens(o,a);if(!Array.isArray(et)&&a.quickEncodeToken){const at=a.quickEncodeToken(et);if(at)return at;const lt=s[et.type.major];if(lt.encodedSize){const ht=lt.encodedSize(et,a),dt=new Bl(ht);if(lt(dt,et,a),dt.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${et} was wrong`);return asU8A(dt.chunks[0])}}return buf.reset(),tokensToEncoded(buf,et,s,a),buf.toBytes(!0)}function encode$6(o,s){return s=Object.assign({},defaultEncodeOptions,s),encodeCustom(o,cborEncoders,s)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(s,a={}){this.pos=0,this.data=s,this.options=a}done(){return this.pos>=this.data.length}next(){const s=this.data[this.pos];let a=quick[s];if(a===void 0){const et=jump[s];if(!et)throw new Error(`${decodeErrPrefix} no decoder for major type ${s>>>5} (byte 0x${s.toString(16).padStart(2,"0")})`);const at=s&31;a=et(this.data,this.pos,at,this.options)}return this.pos+=a.encodedLength,a}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(o,s,a){const et=[];for(let at=0;at<o.value;at++){const lt=tokensToObject(s,a);if(lt===BREAK){if(o.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(lt===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${at}, expected ${o.value})`);et[at]=lt}return et}function tokenToMap(o,s,a){const et=a.useMaps===!0,at=et?void 0:{},lt=et?new Map:void 0;for(let ht=0;ht<o.value;ht++){const dt=tokensToObject(s,a);if(dt===BREAK){if(o.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(dt===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${ht} [no key], expected ${o.value})`);if(et!==!0&&typeof dt!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof dt})`);if(a.rejectDuplicateMapKeys===!0&&(et&&lt.has(dt)||!et&&dt in at))throw new Error(`${decodeErrPrefix} found repeat map key "${dt}"`);const ft=tokensToObject(s,a);if(ft===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${ht} [no value], expected ${o.value})`);et?lt.set(dt,ft):at[dt]=ft}return et?lt:at}function tokensToObject(o,s){if(o.done())return DONE;const a=o.next();if(a.type===Type.break)return BREAK;if(a.type.terminal)return a.value;if(a.type===Type.array)return tokenToArray(a,o,s);if(a.type===Type.map)return tokenToMap(a,o,s);if(a.type===Type.tag){if(s.tags&&typeof s.tags[a.value]=="function"){const et=tokensToObject(o,s);return s.tags[a.value](et)}throw new Error(`${decodeErrPrefix} tag not supported (${a.value})`)}throw new Error("unsupported")}function decode$5(o,s){if(!(o instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);s=Object.assign({},defaultDecodeOptions,s);const a=s.tokenizer||new Tokeniser(o,s),et=tokensToObject(a,s);if(et===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(et===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!a.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return et}const CID_CBOR_TAG$1=42;function cidEncoder$1(o){if(o.asCID!==o)return null;const s=CID.asCID(o);if(!s)return null;const a=new Uint8Array(s.bytes.byteLength+1);return a.set(s.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,a)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(o){if(Number.isNaN(o))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(o===1/0||o===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(o){if(o[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(o.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const code$5=113,encode$5=o=>encode$6(o,encodeOptions$1),decode$4=o=>decode$5(o,decodeOptions$1),CIDV0_BYTES={SHA2_256:18,LENGTH:32,DAG_PB:112};async function readVarint(o){const s=await o.upTo(8),a=varint$1.decode(s);return o.seek(varint$1.decode.bytes),a}async function readHeader(o){const s=await readVarint(o);if(s===0)throw new Error("Invalid CAR header (zero length)");const a=await o.exactly(s);o.seek(s);const et=decode$4(a);if(et==null||Array.isArray(et)||typeof et!="object")throw new Error("Invalid CAR header format");if(et.version!==1)throw typeof et.version=="string"?new Error(`Invalid CAR version: "${et.version}"`):new Error(`Invalid CAR version: ${et.version}`);if(!Array.isArray(et.roots))throw new Error("Invalid CAR header format");if(Object.keys(et).filter(at=>at!=="roots"&&at!=="version").length)throw new Error("Invalid CAR header format");return et}async function readMultihash(o){const s=await o.upTo(8);varint$1.decode(s);const a=varint$1.decode.bytes,et=varint$1.decode(s.subarray(varint$1.decode.bytes)),at=varint$1.decode.bytes,lt=a+at+et,ht=await o.exactly(lt);return o.seek(lt),ht}async function readCid(o){const s=await o.exactly(2);if(s[0]===CIDV0_BYTES.SHA2_256&&s[1]===CIDV0_BYTES.LENGTH){const ht=await o.exactly(34);o.seek(34);const dt=decode$7(ht);return CID.create(0,CIDV0_BYTES.DAG_PB,dt)}const a=await readVarint(o);if(a!==1)throw new Error(`Unexpected CID version (${a})`);const et=await readVarint(o),at=await readMultihash(o),lt=decode$7(at);return CID.create(a,et,lt)}async function readBlockHead(o){const s=o.pos;let a=await readVarint(o);if(a===0)throw new Error("Invalid CAR section (zero length)");a+=o.pos-s;const et=await readCid(o),at=a-(o.pos-s);return{cid:et,length:a,blockLength:at}}async function readBlock(o){const{cid:s,blockLength:a}=await readBlockHead(o),et=await o.exactly(a);return o.seek(a),{bytes:et,cid:s}}async function readBlockIndex(o){const s=o.pos,{cid:a,length:et,blockLength:at}=await readBlockHead(o),lt={cid:a,length:et,blockLength:at,offset:s,blockOffset:o.pos};return o.seek(lt.blockLength),lt}function createDecoder(o){const s=readHeader(o);return{header:()=>s,async*blocks(){for(await s;(await o.upTo(8)).length>0;)yield await readBlock(o)},async*blocksIndex(){for(await s;(await o.upTo(8)).length>0;)yield await readBlockIndex(o)}}}function bytesReader(o){let s=0;return{async upTo(a){return o.subarray(s,s+Math.min(a,o.length-s))},async exactly(a){if(a>o.length-s)throw new Error("Unexpected end of data");return o.subarray(s,s+a)},seek(a){s+=a},get pos(){return s}}}function chunkReader(o){let s=0,a=0,et=0,at=new Uint8Array(0);const lt=async ht=>{a=at.length-et;const dt=[at.subarray(et)];for(;a<ht;){const vt=await o();if(vt==null)break;a<0?vt.length>a&&dt.push(vt.subarray(-a)):dt.push(vt),a+=vt.length}at=new Uint8Array(dt.reduce((vt,wt)=>vt+wt.length,0));let ft=0;for(const vt of dt)at.set(vt,ft),ft+=vt.length;et=0};return{async upTo(ht){return at.length-et<ht&&await lt(ht),at.subarray(et,et+Math.min(at.length-et,ht))},async exactly(ht){if(at.length-et<ht&&await lt(ht),at.length-et<ht)throw new Error("Unexpected end of data");return at.subarray(et,et+ht)},seek(ht){s+=ht,et+=ht},get pos(){return s}}}function asyncIterableReader(o){const s=o[Symbol.asyncIterator]();async function a(){const et=await s.next();return et.done?null:et.value}return chunkReader(a)}class CarReader{constructor(s,a,et){this._version=s,this._roots=a,this._blocks=et,this._keys=et.map(at=>at.cid.toString())}get version(){return this._version}async getRoots(){return this._roots}async has(s){return this._keys.indexOf(s.toString())>-1}async get(s){const a=this._keys.indexOf(s.toString());return a>-1?this._blocks[a]:void 0}async*blocks(){for(const s of this._blocks)yield s}async*cids(){for(const s of this._blocks)yield s.cid}static async fromBytes(s){if(!(s instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeReaderComplete(bytesReader(s))}static async fromIterable(s){if(!s||typeof s[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeReaderComplete(asyncIterableReader(s))}}async function decodeReaderComplete(o){const s=createDecoder(o),{version:a,roots:et}=await s.header(),at=[];for await(const lt of s.blocks())at.push(lt);return new CarReader(a,et,at)}class CarIteratorBase{constructor(s,a,et){this._version=s,this._roots=a,this._iterable=et,this._decoded=!1}get version(){return this._version}async getRoots(){return this._roots}}class CarBlockIterator extends CarIteratorBase{[Symbol.asyncIterator](){if(this._decoded)throw new Error("Cannot decode more than once");if(!this._iterable)throw new Error("Block iterable not found");return this._decoded=!0,this._iterable[Symbol.asyncIterator]()}static async fromBytes(s){const{version:a,roots:et,iterator:at}=await fromBytes(s);return new CarBlockIterator(a,et,at)}static async fromIterable(s){const{version:a,roots:et,iterator:at}=await fromIterable(s);return new CarBlockIterator(a,et,at)}}async function fromBytes(o){if(!(o instanceof Uint8Array))throw new TypeError("fromBytes() requires a Uint8Array");return decodeIterator(bytesReader(o))}async function fromIterable(o){if(!o||typeof o[Symbol.asyncIterator]!="function")throw new TypeError("fromIterable() requires an async iterable");return decodeIterator(asyncIterableReader(o))}async function decodeIterator(o){const s=createDecoder(o),{version:a,roots:et}=await s.header();return{version:a,roots:et,iterator:s.blocks()}}function createHeader(o){const s=encode$5({version:1,roots:o}),a=varint$1.encode(s.length),et=new Uint8Array(a.length+s.length);return et.set(a,0),et.set(s,a.length),et}function createEncoder(o){return{async setRoots(s){const a=createHeader(s);await o.write(a)},async writeBlock(s){const{cid:a,bytes:et}=s;await o.write(new Uint8Array(varint$1.encode(a.bytes.length+et.length))),await o.write(a.bytes),et.length&&await o.write(et)},async close(){return o.end()}}}function noop$1(){}function create$3(){const o=[];let s=null,a=noop$1,et=!1,at=null,lt=noop$1;const ht=()=>(s||(s=new Promise(vt=>{a=()=>{s=null,a=noop$1,vt()}})),s),dt={write(vt){o.push(vt);const wt=ht();return lt(),wt},async end(){et=!0;const vt=ht();return lt(),vt}},ft={async next(){const vt=o.shift();return vt?(o.length===0&&a(),{done:!1,value:vt}):et?(a(),{done:!0,value:void 0}):(at||(at=new Promise(wt=>{lt=()=>(at=null,lt=noop$1,wt(ft.next()))})),at)}};return{writer:dt,iterator:ft}}class CarWriter{constructor(s,a){this._encoder=a,this._mutex=a.setRoots(s),this._ended=!1}async put(s){if(!(s.bytes instanceof Uint8Array)||!s.cid)throw new TypeError("Can only write {cid, bytes} objects");if(this._ended)throw new Error("Already closed");const a=CID.asCID(s.cid);if(!a)throw new TypeError("Can only write {cid, bytes} objects");return this._mutex=this._mutex.then(()=>this._encoder.writeBlock({cid:a,bytes:s.bytes})),this._mutex}async close(){if(this._ended)throw new Error("Already closed");return await this._mutex,this._ended=!0,this._encoder.close()}static create(s){s=toRoots(s);const{encoder:a,iterator:et}=encodeWriter(),at=new CarWriter(s,a),lt=new CarWriterOut(et);return{writer:at,out:lt}}static createAppender(){const{encoder:s,iterator:a}=encodeWriter();s.setRoots=()=>Promise.resolve();const et=new CarWriter([],s),at=new CarWriterOut(a);return{writer:et,out:at}}static async updateRootsInBytes(s,a){const et=bytesReader(s);await readHeader(et);const at=createHeader(a);if(et.pos!==at.length)throw new Error(`updateRoots() can only overwrite a header of the same length (old header is ${et.pos} bytes, new header is ${at.length} bytes)`);return s.set(at,0),s}}class CarWriterOut{constructor(s){this._iterator=s}[Symbol.asyncIterator](){if(this._iterating)throw new Error("Multiple iterator not supported");return this._iterating=!0,this._iterator}}function encodeWriter(){const o=create$3(),{writer:s,iterator:a}=o;return{encoder:createEncoder(s),iterator:a}}function toRoots(o){if(o===void 0)return[];if(!Array.isArray(o)){const a=CID.asCID(o);if(!a)throw new TypeError("roots must be a single CID or an array of CIDs");return[a]}const s=[];for(const a of o){const et=CID.asCID(a);if(!et)throw new TypeError("roots must be a single CID or an array of CIDs");s.push(et)}return s}async function*batch$1(o,s=1){let a=[];s<1&&(s=1);for await(const et of o)for(a.push(et);a.length>=s;)yield a.slice(0,s),a=a.slice(s);for(;a.length;)yield a.slice(0,s),a=a.slice(s)}var itBatch=batch$1;const batch=itBatch;async function*parallelBatch(o,s=1){for await(const a of batch(o,s)){const et=a.map(at=>at().then(lt=>({ok:!0,value:lt}),lt=>({ok:!1,err:lt})));for(let at=0;at<et.length;at++){const lt=await et[at];if(lt.ok)yield lt.value;else throw lt.err}}}var itParallelBatch=parallelBatch,isPlainObj=o=>{if(Object.prototype.toString.call(o)!=="[object Object]")return!1;const s=Object.getPrototypeOf(o);return s===null||s===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(o,s,a)=>Object.defineProperty(o,s,{value:a,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal$1,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=o=>{const s=[];for(const a in o)hasOwnProperty.call(o,a)&&s.push(a);if(Object.getOwnPropertySymbols){const a=Object.getOwnPropertySymbols(o);for(const et of a)propertyIsEnumerable.call(o,et)&&s.push(et)}return s};function clone(o){return Array.isArray(o)?cloneArray(o):isOptionObject(o)?cloneOptionObject(o):o}function cloneArray(o){const s=o.slice(0,0);return getEnumerableOwnPropertyKeys(o).forEach(a=>{defineProperty(s,a,clone(o[a]))}),s}function cloneOptionObject(o){const s=Object.getPrototypeOf(o)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(o).forEach(a=>{defineProperty(s,a,clone(o[a]))}),s}const mergeKeys=(o,s,a,et)=>(a.forEach(at=>{typeof s[at]>"u"&&et.ignoreUndefined||(at in o&&o[at]!==Object.getPrototypeOf(o)?defineProperty(o,at,merge(o[at],s[at],et)):defineProperty(o,at,clone(s[at])))}),o),concatArrays=(o,s,a)=>{let et=o.slice(0,0),at=0;return[o,s].forEach(lt=>{const ht=[];for(let dt=0;dt<lt.length;dt++)hasOwnProperty.call(lt,dt)&&(ht.push(String(dt)),lt===o?defineProperty(et,at++,lt[dt]):defineProperty(et,at++,clone(lt[dt])));et=mergeKeys(et,lt,getEnumerableOwnPropertyKeys(lt).filter(dt=>!ht.includes(dt)),a)}),et};function merge(o,s,a){return a.concatArrays&&Array.isArray(o)&&Array.isArray(s)?concatArrays(o,s,a):!isOptionObject(s)||!isOptionObject(o)?clone(s):mergeKeys(o,s,getEnumerableOwnPropertyKeys(s),a)}var mergeOptions=function(...o){const s=merge(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let a={_:{}};for(const et of o)if(et!==void 0){if(!isOptionObject(et))throw new TypeError("`"+et+"` is not an Option Object");a=merge(a,{_:et},s)}return a._};const from=({name:o,code:s,encode:a})=>new Hasher(o,s,a);class Hasher{constructor(s,a,et){this.name=s,this.code=a,this.encode=et}digest(s){if(s instanceof Uint8Array){const a=this.encode(s);return a instanceof Uint8Array?create$4(this.code,a):a.then(et=>create$4(this.code,et))}else throw Error("Unknown type, must be binary type")}}const sha=o=>async s=>new Uint8Array(await crypto.subtle.digest(o,s)),sha256=from({name:"sha2-256",code:18,encode:sha("SHA-256")});var murmurhash3jsRevisitedExports={},murmurhash3jsRevisited={get exports(){return murmurhash3jsRevisitedExports},set exports(o){murmurhash3jsRevisitedExports=o}},murmurHash3jsExports={},murmurHash3js={get exports(){return murmurHash3jsExports},set exports(o){murmurHash3jsExports=o}};(function(o,s){(function(a,et){var at={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function lt(_t){if(!Array.isArray(_t)&&!ArrayBuffer.isView(_t))return!1;for(var St=0;St<_t.length;St++)if(!Number.isInteger(_t[St])||_t[St]<0||_t[St]>255)return!1;return!0}function ht(_t,St){return(_t&65535)*St+(((_t>>>16)*St&65535)<<16)}function dt(_t,St){return _t<<St|_t>>>32-St}function ft(_t){return _t^=_t>>>16,_t=ht(_t,2246822507),_t^=_t>>>13,_t=ht(_t,3266489909),_t^=_t>>>16,_t}function vt(_t,St){_t=[_t[0]>>>16,_t[0]&65535,_t[1]>>>16,_t[1]&65535],St=[St[0]>>>16,St[0]&65535,St[1]>>>16,St[1]&65535];var bt=[0,0,0,0];return bt[3]+=_t[3]+St[3],bt[2]+=bt[3]>>>16,bt[3]&=65535,bt[2]+=_t[2]+St[2],bt[1]+=bt[2]>>>16,bt[2]&=65535,bt[1]+=_t[1]+St[1],bt[0]+=bt[1]>>>16,bt[1]&=65535,bt[0]+=_t[0]+St[0],bt[0]&=65535,[bt[0]<<16|bt[1],bt[2]<<16|bt[3]]}function wt(_t,St){_t=[_t[0]>>>16,_t[0]&65535,_t[1]>>>16,_t[1]&65535],St=[St[0]>>>16,St[0]&65535,St[1]>>>16,St[1]&65535];var bt=[0,0,0,0];return bt[3]+=_t[3]*St[3],bt[2]+=bt[3]>>>16,bt[3]&=65535,bt[2]+=_t[2]*St[3],bt[1]+=bt[2]>>>16,bt[2]&=65535,bt[2]+=_t[3]*St[2],bt[1]+=bt[2]>>>16,bt[2]&=65535,bt[1]+=_t[1]*St[3],bt[0]+=bt[1]>>>16,bt[1]&=65535,bt[1]+=_t[2]*St[2],bt[0]+=bt[1]>>>16,bt[1]&=65535,bt[1]+=_t[3]*St[1],bt[0]+=bt[1]>>>16,bt[1]&=65535,bt[0]+=_t[0]*St[3]+_t[1]*St[2]+_t[2]*St[1]+_t[3]*St[0],bt[0]&=65535,[bt[0]<<16|bt[1],bt[2]<<16|bt[3]]}function Ct(_t,St){return St%=64,St===32?[_t[1],_t[0]]:St<32?[_t[0]<<St|_t[1]>>>32-St,_t[1]<<St|_t[0]>>>32-St]:(St-=32,[_t[1]<<St|_t[0]>>>32-St,_t[0]<<St|_t[1]>>>32-St])}function xt(_t,St){return St%=64,St===0?_t:St<32?[_t[0]<<St|_t[1]>>>32-St,_t[1]<<St]:[_t[1]<<St-32,0]}function Pt(_t,St){return[_t[0]^St[0],_t[1]^St[1]]}function Rt(_t){return _t=Pt(_t,[0,_t[0]>>>1]),_t=wt(_t,[4283543511,3981806797]),_t=Pt(_t,[0,_t[0]>>>1]),_t=wt(_t,[3301882366,444984403]),_t=Pt(_t,[0,_t[0]>>>1]),_t}at.x86.hash32=function(_t,St){if(at.inputValidation&&!lt(_t))return et;St=St||0;for(var bt=_t.length%4,Nt=_t.length-bt,kt=St,Dt=0,jt=3432918353,Wt=461845907,Yt=0;Yt<Nt;Yt=Yt+4)Dt=_t[Yt]|_t[Yt+1]<<8|_t[Yt+2]<<16|_t[Yt+3]<<24,Dt=ht(Dt,jt),Dt=dt(Dt,15),Dt=ht(Dt,Wt),kt^=Dt,kt=dt(kt,13),kt=ht(kt,5)+3864292196;switch(Dt=0,bt){case 3:Dt^=_t[Yt+2]<<16;case 2:Dt^=_t[Yt+1]<<8;case 1:Dt^=_t[Yt],Dt=ht(Dt,jt),Dt=dt(Dt,15),Dt=ht(Dt,Wt),kt^=Dt}return kt^=_t.length,kt=ft(kt),kt>>>0},at.x86.hash128=function(_t,St){if(at.inputValidation&&!lt(_t))return et;St=St||0;for(var bt=_t.length%16,Nt=_t.length-bt,kt=St,Dt=St,jt=St,Wt=St,Yt=0,Bt=0,zt=0,qt=0,nn=597399067,Fn=2869860233,dr=951274213,ar=2716044179,pr=0;pr<Nt;pr=pr+16)Yt=_t[pr]|_t[pr+1]<<8|_t[pr+2]<<16|_t[pr+3]<<24,Bt=_t[pr+4]|_t[pr+5]<<8|_t[pr+6]<<16|_t[pr+7]<<24,zt=_t[pr+8]|_t[pr+9]<<8|_t[pr+10]<<16|_t[pr+11]<<24,qt=_t[pr+12]|_t[pr+13]<<8|_t[pr+14]<<16|_t[pr+15]<<24,Yt=ht(Yt,nn),Yt=dt(Yt,15),Yt=ht(Yt,Fn),kt^=Yt,kt=dt(kt,19),kt+=Dt,kt=ht(kt,5)+1444728091,Bt=ht(Bt,Fn),Bt=dt(Bt,16),Bt=ht(Bt,dr),Dt^=Bt,Dt=dt(Dt,17),Dt+=jt,Dt=ht(Dt,5)+197830471,zt=ht(zt,dr),zt=dt(zt,17),zt=ht(zt,ar),jt^=zt,jt=dt(jt,15),jt+=Wt,jt=ht(jt,5)+2530024501,qt=ht(qt,ar),qt=dt(qt,18),qt=ht(qt,nn),Wt^=qt,Wt=dt(Wt,13),Wt+=kt,Wt=ht(Wt,5)+850148119;switch(Yt=0,Bt=0,zt=0,qt=0,bt){case 15:qt^=_t[pr+14]<<16;case 14:qt^=_t[pr+13]<<8;case 13:qt^=_t[pr+12],qt=ht(qt,ar),qt=dt(qt,18),qt=ht(qt,nn),Wt^=qt;case 12:zt^=_t[pr+11]<<24;case 11:zt^=_t[pr+10]<<16;case 10:zt^=_t[pr+9]<<8;case 9:zt^=_t[pr+8],zt=ht(zt,dr),zt=dt(zt,17),zt=ht(zt,ar),jt^=zt;case 8:Bt^=_t[pr+7]<<24;case 7:Bt^=_t[pr+6]<<16;case 6:Bt^=_t[pr+5]<<8;case 5:Bt^=_t[pr+4],Bt=ht(Bt,Fn),Bt=dt(Bt,16),Bt=ht(Bt,dr),Dt^=Bt;case 4:Yt^=_t[pr+3]<<24;case 3:Yt^=_t[pr+2]<<16;case 2:Yt^=_t[pr+1]<<8;case 1:Yt^=_t[pr],Yt=ht(Yt,nn),Yt=dt(Yt,15),Yt=ht(Yt,Fn),kt^=Yt}return kt^=_t.length,Dt^=_t.length,jt^=_t.length,Wt^=_t.length,kt+=Dt,kt+=jt,kt+=Wt,Dt+=kt,jt+=kt,Wt+=kt,kt=ft(kt),Dt=ft(Dt),jt=ft(jt),Wt=ft(Wt),kt+=Dt,kt+=jt,kt+=Wt,Dt+=kt,jt+=kt,Wt+=kt,("00000000"+(kt>>>0).toString(16)).slice(-8)+("00000000"+(Dt>>>0).toString(16)).slice(-8)+("00000000"+(jt>>>0).toString(16)).slice(-8)+("00000000"+(Wt>>>0).toString(16)).slice(-8)},at.x64.hash128=function(_t,St){if(at.inputValidation&&!lt(_t))return et;St=St||0;for(var bt=_t.length%16,Nt=_t.length-bt,kt=[0,St],Dt=[0,St],jt=[0,0],Wt=[0,0],Yt=[2277735313,289559509],Bt=[1291169091,658871167],zt=0;zt<Nt;zt=zt+16)jt=[_t[zt+4]|_t[zt+5]<<8|_t[zt+6]<<16|_t[zt+7]<<24,_t[zt]|_t[zt+1]<<8|_t[zt+2]<<16|_t[zt+3]<<24],Wt=[_t[zt+12]|_t[zt+13]<<8|_t[zt+14]<<16|_t[zt+15]<<24,_t[zt+8]|_t[zt+9]<<8|_t[zt+10]<<16|_t[zt+11]<<24],jt=wt(jt,Yt),jt=Ct(jt,31),jt=wt(jt,Bt),kt=Pt(kt,jt),kt=Ct(kt,27),kt=vt(kt,Dt),kt=vt(wt(kt,[0,5]),[0,1390208809]),Wt=wt(Wt,Bt),Wt=Ct(Wt,33),Wt=wt(Wt,Yt),Dt=Pt(Dt,Wt),Dt=Ct(Dt,31),Dt=vt(Dt,kt),Dt=vt(wt(Dt,[0,5]),[0,944331445]);switch(jt=[0,0],Wt=[0,0],bt){case 15:Wt=Pt(Wt,xt([0,_t[zt+14]],48));case 14:Wt=Pt(Wt,xt([0,_t[zt+13]],40));case 13:Wt=Pt(Wt,xt([0,_t[zt+12]],32));case 12:Wt=Pt(Wt,xt([0,_t[zt+11]],24));case 11:Wt=Pt(Wt,xt([0,_t[zt+10]],16));case 10:Wt=Pt(Wt,xt([0,_t[zt+9]],8));case 9:Wt=Pt(Wt,[0,_t[zt+8]]),Wt=wt(Wt,Bt),Wt=Ct(Wt,33),Wt=wt(Wt,Yt),Dt=Pt(Dt,Wt);case 8:jt=Pt(jt,xt([0,_t[zt+7]],56));case 7:jt=Pt(jt,xt([0,_t[zt+6]],48));case 6:jt=Pt(jt,xt([0,_t[zt+5]],40));case 5:jt=Pt(jt,xt([0,_t[zt+4]],32));case 4:jt=Pt(jt,xt([0,_t[zt+3]],24));case 3:jt=Pt(jt,xt([0,_t[zt+2]],16));case 2:jt=Pt(jt,xt([0,_t[zt+1]],8));case 1:jt=Pt(jt,[0,_t[zt]]),jt=wt(jt,Yt),jt=Ct(jt,31),jt=wt(jt,Bt),kt=Pt(kt,jt)}return kt=Pt(kt,[0,_t.length]),Dt=Pt(Dt,[0,_t.length]),kt=vt(kt,Dt),Dt=vt(Dt,kt),kt=Rt(kt),Dt=Rt(Dt),kt=vt(kt,Dt),Dt=vt(Dt,kt),("00000000"+(kt[0]>>>0).toString(16)).slice(-8)+("00000000"+(kt[1]>>>0).toString(16)).slice(-8)+("00000000"+(Dt[0]>>>0).toString(16)).slice(-8)+("00000000"+(Dt[1]>>>0).toString(16)).slice(-8)},o.exports&&(s=o.exports=at),s.murmurHash3=at})()})(murmurHash3js,murmurHash3jsExports);(function(o){o.exports=murmurHash3jsExports})(murmurhash3jsRevisited);const mur=getDefaultExportFromCjs(murmurhash3jsRevisitedExports),murmur3128=from({name:"murmur3-128",code:34,encode:o=>fromHex(mur.x64.hash128(o))});async function hamtHashFn(o){return(await murmur3128.encode(o)).slice(0,8).reverse()}const defaultOptions={chunker:"fixed",strategy:"balanced",rawLeaves:!1,onlyHash:!1,reduceSingleLeafToSelf:!0,hasher:sha256,leafType:"file",cidVersion:0,progress:()=>()=>{},shardSplitThreshold:1e3,fileImportConcurrency:50,blockWriteConcurrency:10,minChunkSize:262144,maxChunkSize:262144,avgChunkSize:262144,window:16,polynomial:0x3df305dfb2a804,maxChildrenPerNode:174,layerRepeat:4,wrapWithDirectory:!1,recursive:!1,hidden:!1,timeout:void 0,hamtHashFn,hamtHashCode:34,hamtBucketBits:8},defaultOptions$1=(o={})=>mergeOptions.bind({ignoreUndefined:!0})(defaultOptions,o);function assign(o,s){for(const a in s)Object.defineProperty(o,a,{value:s[a],enumerable:!0,configurable:!0});return o}function createError(o,s,a){if(!o||typeof o=="string")throw new TypeError("Please pass an Error to err-code");a||(a={}),typeof s=="object"&&(a=s,s=""),s&&(a.code=s);try{return assign(o,a)}catch{a.message=o.message,a.stack=o.stack;const at=function(){};return at.prototype=Object.create(Object.getPrototypeOf(o)),assign(new at,a)}}var errCode=createError,minimalExports={},minimal$1={get exports(){return minimalExports},set exports(o){minimalExports=o}},indexMinimal={},minimal={},aspromise=asPromise;function asPromise(o,s){for(var a=new Array(arguments.length-1),et=0,at=2,lt=!0;at<arguments.length;)a[et++]=arguments[at++];return new Promise(function(dt,ft){a[et]=function(wt){if(lt)if(lt=!1,wt)ft(wt);else{for(var Ct=new Array(arguments.length-1),xt=0;xt<Ct.length;)Ct[xt++]=arguments[xt];dt.apply(null,Ct)}};try{o.apply(s||null,a)}catch(vt){lt&&(lt=!1,ft(vt))}})}var base64$3={};(function(o){var s=o;s.length=function(dt){var ft=dt.length;if(!ft)return 0;for(var vt=0;--ft%4>1&&dt.charAt(ft)==="=";)++vt;return Math.ceil(dt.length*3)/4-vt};for(var a=new Array(64),et=new Array(123),at=0;at<64;)et[a[at]=at<26?at+65:at<52?at+71:at<62?at-4:at-59|43]=at++;s.encode=function(dt,ft,vt){for(var wt=null,Ct=[],xt=0,Pt=0,Rt;ft<vt;){var _t=dt[ft++];switch(Pt){case 0:Ct[xt++]=a[_t>>2],Rt=(_t&3)<<4,Pt=1;break;case 1:Ct[xt++]=a[Rt|_t>>4],Rt=(_t&15)<<2,Pt=2;break;case 2:Ct[xt++]=a[Rt|_t>>6],Ct[xt++]=a[_t&63],Pt=0;break}xt>8191&&((wt||(wt=[])).push(String.fromCharCode.apply(String,Ct)),xt=0)}return Pt&&(Ct[xt++]=a[Rt],Ct[xt++]=61,Pt===1&&(Ct[xt++]=61)),wt?(xt&&wt.push(String.fromCharCode.apply(String,Ct.slice(0,xt))),wt.join("")):String.fromCharCode.apply(String,Ct.slice(0,xt))};var lt="invalid encoding";s.decode=function(dt,ft,vt){for(var wt=vt,Ct=0,xt,Pt=0;Pt<dt.length;){var Rt=dt.charCodeAt(Pt++);if(Rt===61&&Ct>1)break;if((Rt=et[Rt])===void 0)throw Error(lt);switch(Ct){case 0:xt=Rt,Ct=1;break;case 1:ft[vt++]=xt<<2|(Rt&48)>>4,xt=Rt,Ct=2;break;case 2:ft[vt++]=(xt&15)<<4|(Rt&60)>>2,xt=Rt,Ct=3;break;case 3:ft[vt++]=(xt&3)<<6|Rt,Ct=0;break}}if(Ct===1)throw Error(lt);return vt-wt},s.test=function(dt){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(dt)}})(base64$3);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(s,a,et){return(this._listeners[s]||(this._listeners[s]=[])).push({fn:a,ctx:et||this}),this};EventEmitter.prototype.off=function(s,a){if(s===void 0)this._listeners={};else if(a===void 0)this._listeners[s]=[];else for(var et=this._listeners[s],at=0;at<et.length;)et[at].fn===a?et.splice(at,1):++at;return this};EventEmitter.prototype.emit=function(s){var a=this._listeners[s];if(a){for(var et=[],at=1;at<arguments.length;)et.push(arguments[at++]);for(at=0;at<a.length;)a[at].fn.apply(a[at++].ctx,et)}return this};var float=factory(factory);function factory(o){return typeof Float32Array<"u"?function(){var s=new Float32Array([-0]),a=new Uint8Array(s.buffer),et=a[3]===128;function at(ft,vt,wt){s[0]=ft,vt[wt]=a[0],vt[wt+1]=a[1],vt[wt+2]=a[2],vt[wt+3]=a[3]}function lt(ft,vt,wt){s[0]=ft,vt[wt]=a[3],vt[wt+1]=a[2],vt[wt+2]=a[1],vt[wt+3]=a[0]}o.writeFloatLE=et?at:lt,o.writeFloatBE=et?lt:at;function ht(ft,vt){return a[0]=ft[vt],a[1]=ft[vt+1],a[2]=ft[vt+2],a[3]=ft[vt+3],s[0]}function dt(ft,vt){return a[3]=ft[vt],a[2]=ft[vt+1],a[1]=ft[vt+2],a[0]=ft[vt+3],s[0]}o.readFloatLE=et?ht:dt,o.readFloatBE=et?dt:ht}():function(){function s(et,at,lt,ht){var dt=at<0?1:0;if(dt&&(at=-at),at===0)et(1/at>0?0:2147483648,lt,ht);else if(isNaN(at))et(2143289344,lt,ht);else if(at>34028234663852886e22)et((dt<<31|2139095040)>>>0,lt,ht);else if(at<11754943508222875e-54)et((dt<<31|Math.round(at/1401298464324817e-60))>>>0,lt,ht);else{var ft=Math.floor(Math.log(at)/Math.LN2),vt=Math.round(at*Math.pow(2,-ft)*8388608)&8388607;et((dt<<31|ft+127<<23|vt)>>>0,lt,ht)}}o.writeFloatLE=s.bind(null,writeUintLE),o.writeFloatBE=s.bind(null,writeUintBE);function a(et,at,lt){var ht=et(at,lt),dt=(ht>>31)*2+1,ft=ht>>>23&255,vt=ht&8388607;return ft===255?vt?NaN:dt*(1/0):ft===0?dt*1401298464324817e-60*vt:dt*Math.pow(2,ft-150)*(vt+8388608)}o.readFloatLE=a.bind(null,readUintLE),o.readFloatBE=a.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var s=new Float64Array([-0]),a=new Uint8Array(s.buffer),et=a[7]===128;function at(ft,vt,wt){s[0]=ft,vt[wt]=a[0],vt[wt+1]=a[1],vt[wt+2]=a[2],vt[wt+3]=a[3],vt[wt+4]=a[4],vt[wt+5]=a[5],vt[wt+6]=a[6],vt[wt+7]=a[7]}function lt(ft,vt,wt){s[0]=ft,vt[wt]=a[7],vt[wt+1]=a[6],vt[wt+2]=a[5],vt[wt+3]=a[4],vt[wt+4]=a[3],vt[wt+5]=a[2],vt[wt+6]=a[1],vt[wt+7]=a[0]}o.writeDoubleLE=et?at:lt,o.writeDoubleBE=et?lt:at;function ht(ft,vt){return a[0]=ft[vt],a[1]=ft[vt+1],a[2]=ft[vt+2],a[3]=ft[vt+3],a[4]=ft[vt+4],a[5]=ft[vt+5],a[6]=ft[vt+6],a[7]=ft[vt+7],s[0]}function dt(ft,vt){return a[7]=ft[vt],a[6]=ft[vt+1],a[5]=ft[vt+2],a[4]=ft[vt+3],a[3]=ft[vt+4],a[2]=ft[vt+5],a[1]=ft[vt+6],a[0]=ft[vt+7],s[0]}o.readDoubleLE=et?ht:dt,o.readDoubleBE=et?dt:ht}():function(){function s(et,at,lt,ht,dt,ft){var vt=ht<0?1:0;if(vt&&(ht=-ht),ht===0)et(0,dt,ft+at),et(1/ht>0?0:2147483648,dt,ft+lt);else if(isNaN(ht))et(0,dt,ft+at),et(2146959360,dt,ft+lt);else if(ht>17976931348623157e292)et(0,dt,ft+at),et((vt<<31|2146435072)>>>0,dt,ft+lt);else{var wt;if(ht<22250738585072014e-324)wt=ht/5e-324,et(wt>>>0,dt,ft+at),et((vt<<31|wt/4294967296)>>>0,dt,ft+lt);else{var Ct=Math.floor(Math.log(ht)/Math.LN2);Ct===1024&&(Ct=1023),wt=ht*Math.pow(2,-Ct),et(wt*4503599627370496>>>0,dt,ft+at),et((vt<<31|Ct+1023<<20|wt*1048576&1048575)>>>0,dt,ft+lt)}}}o.writeDoubleLE=s.bind(null,writeUintLE,0,4),o.writeDoubleBE=s.bind(null,writeUintBE,4,0);function a(et,at,lt,ht,dt){var ft=et(ht,dt+at),vt=et(ht,dt+lt),wt=(vt>>31)*2+1,Ct=vt>>>20&2047,xt=4294967296*(vt&1048575)+ft;return Ct===2047?xt?NaN:wt*(1/0):Ct===0?wt*5e-324*xt:wt*Math.pow(2,Ct-1075)*(xt+4503599627370496)}o.readDoubleLE=a.bind(null,readUintLE,0,4),o.readDoubleBE=a.bind(null,readUintBE,4,0)}(),o}function writeUintLE(o,s,a){s[a]=o&255,s[a+1]=o>>>8&255,s[a+2]=o>>>16&255,s[a+3]=o>>>24}function writeUintBE(o,s,a){s[a]=o>>>24,s[a+1]=o>>>16&255,s[a+2]=o>>>8&255,s[a+3]=o&255}function readUintLE(o,s){return(o[s]|o[s+1]<<8|o[s+2]<<16|o[s+3]<<24)>>>0}function readUintBE(o,s){return(o[s]<<24|o[s+1]<<16|o[s+2]<<8|o[s+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(o){}return null}var utf8$2={};(function(o){var s=o;s.length=function(et){for(var at=0,lt=0,ht=0;ht<et.length;++ht)lt=et.charCodeAt(ht),lt<128?at+=1:lt<2048?at+=2:(lt&64512)===55296&&(et.charCodeAt(ht+1)&64512)===56320?(++ht,at+=4):at+=3;return at},s.read=function(et,at,lt){var ht=lt-at;if(ht<1)return"";for(var dt=null,ft=[],vt=0,wt;at<lt;)wt=et[at++],wt<128?ft[vt++]=wt:wt>191&&wt<224?ft[vt++]=(wt&31)<<6|et[at++]&63:wt>239&&wt<365?(wt=((wt&7)<<18|(et[at++]&63)<<12|(et[at++]&63)<<6|et[at++]&63)-65536,ft[vt++]=55296+(wt>>10),ft[vt++]=56320+(wt&1023)):ft[vt++]=(wt&15)<<12|(et[at++]&63)<<6|et[at++]&63,vt>8191&&((dt||(dt=[])).push(String.fromCharCode.apply(String,ft)),vt=0);return dt?(vt&&dt.push(String.fromCharCode.apply(String,ft.slice(0,vt))),dt.join("")):String.fromCharCode.apply(String,ft.slice(0,vt))},s.write=function(et,at,lt){for(var ht=lt,dt,ft,vt=0;vt<et.length;++vt)dt=et.charCodeAt(vt),dt<128?at[lt++]=dt:dt<2048?(at[lt++]=dt>>6|192,at[lt++]=dt&63|128):(dt&64512)===55296&&((ft=et.charCodeAt(vt+1))&64512)===56320?(dt=65536+((dt&1023)<<10)+(ft&1023),++vt,at[lt++]=dt>>18|240,at[lt++]=dt>>12&63|128,at[lt++]=dt>>6&63|128,at[lt++]=dt&63|128):(at[lt++]=dt>>12|224,at[lt++]=dt>>6&63|128,at[lt++]=dt&63|128);return lt-ht}})(utf8$2);var pool_1=pool;function pool(o,s,a){var et=a||8192,at=et>>>1,lt=null,ht=et;return function(ft){if(ft<1||ft>at)return o(ft);ht+ft>et&&(lt=o(et),ht=0);var vt=s.call(lt,ht,ht+=ft);return ht&7&&(ht=(ht|7)+1),vt}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=s;var o=requireMinimal();function s(lt,ht){this.lo=lt>>>0,this.hi=ht>>>0}var a=s.zero=new s(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var et=s.zeroHash="\0\0\0\0\0\0\0\0";s.fromNumber=function(ht){if(ht===0)return a;var dt=ht<0;dt&&(ht=-ht);var ft=ht>>>0,vt=(ht-ft)/4294967296>>>0;return dt&&(vt=~vt>>>0,ft=~ft>>>0,++ft>4294967295&&(ft=0,++vt>4294967295&&(vt=0))),new s(ft,vt)},s.from=function(ht){if(typeof ht=="number")return s.fromNumber(ht);if(o.isString(ht))if(o.Long)ht=o.Long.fromString(ht);else return s.fromNumber(parseInt(ht,10));return ht.low||ht.high?new s(ht.low>>>0,ht.high>>>0):a},s.prototype.toNumber=function(ht){if(!ht&&this.hi>>>31){var dt=~this.lo+1>>>0,ft=~this.hi>>>0;return dt||(ft=ft+1>>>0),-(dt+ft*4294967296)}return this.lo+this.hi*4294967296},s.prototype.toLong=function(ht){return o.Long?new o.Long(this.lo|0,this.hi|0,!!ht):{low:this.lo|0,high:this.hi|0,unsigned:!!ht}};var at=String.prototype.charCodeAt;return s.fromHash=function(ht){return ht===et?a:new s((at.call(ht,0)|at.call(ht,1)<<8|at.call(ht,2)<<16|at.call(ht,3)<<24)>>>0,(at.call(ht,4)|at.call(ht,5)<<8|at.call(ht,6)<<16|at.call(ht,7)<<24)>>>0)},s.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},s.prototype.zzEncode=function(){var ht=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ht)>>>0,this.lo=(this.lo<<1^ht)>>>0,this},s.prototype.zzDecode=function(){var ht=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ht)>>>0,this.hi=(this.hi>>>1^ht)>>>0,this},s.prototype.length=function(){var ht=this.lo,dt=(this.lo>>>28|this.hi<<4)>>>0,ft=this.hi>>>24;return ft===0?dt===0?ht<16384?ht<128?1:2:ht<2097152?3:4:dt<16384?dt<128?5:6:dt<2097152?7:8:ft<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(o){var s=o;s.asPromise=aspromise,s.base64=base64$3,s.EventEmitter=eventemitter,s.float=float,s.inquire=inquire_1,s.utf8=utf8$2,s.pool=pool_1,s.LongBits=requireLongbits(),s.isNode=!!(typeof commonjsGlobal$1<"u"&&commonjsGlobal$1&&commonjsGlobal$1.process&&commonjsGlobal$1.process.versions&&commonjsGlobal$1.process.versions.node),s.global=s.isNode&&commonjsGlobal$1||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal$1,s.emptyArray=Object.freeze?Object.freeze([]):[],s.emptyObject=Object.freeze?Object.freeze({}):{},s.isInteger=Number.isInteger||function(lt){return typeof lt=="number"&&isFinite(lt)&&Math.floor(lt)===lt},s.isString=function(lt){return typeof lt=="string"||lt instanceof String},s.isObject=function(lt){return lt&&typeof lt=="object"},s.isset=s.isSet=function(lt,ht){var dt=lt[ht];return dt!=null&&lt.hasOwnProperty(ht)?typeof dt!="object"||(Array.isArray(dt)?dt.length:Object.keys(dt).length)>0:!1},s.Buffer=function(){try{var at=s.inquire("buffer").Buffer;return at.prototype.utf8Write?at:null}catch{return null}}(),s._Buffer_from=null,s._Buffer_allocUnsafe=null,s.newBuffer=function(lt){return typeof lt=="number"?s.Buffer?s._Buffer_allocUnsafe(lt):new s.Array(lt):s.Buffer?s._Buffer_from(lt):typeof Uint8Array>"u"?lt:new Uint8Array(lt)},s.Array=typeof Uint8Array<"u"?Uint8Array:Array,s.Long=s.global.dcodeIO&&s.global.dcodeIO.Long||s.global.Long||s.inquire("long"),s.key2Re=/^true|false|0|1$/,s.key32Re=/^-?(?:0|[1-9][0-9]*)$/,s.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,s.longToHash=function(lt){return lt?s.LongBits.from(lt).toHash():s.LongBits.zeroHash},s.longFromHash=function(lt,ht){var dt=s.LongBits.fromHash(lt);return s.Long?s.Long.fromBits(dt.lo,dt.hi,ht):dt.toNumber(!!ht)};function a(at,lt,ht){for(var dt=Object.keys(lt),ft=0;ft<dt.length;++ft)(at[dt[ft]]===void 0||!ht)&&(at[dt[ft]]=lt[dt[ft]]);return at}s.merge=a,s.lcFirst=function(lt){return lt.charAt(0).toLowerCase()+lt.substring(1)};function et(at){function lt(ht,dt){if(!(this instanceof lt))return new lt(ht,dt);Object.defineProperty(this,"message",{get:function(){return ht}}),Error.captureStackTrace?Error.captureStackTrace(this,lt):Object.defineProperty(this,"stack",{value:new Error().stack||""}),dt&&a(this,dt)}return(lt.prototype=Object.create(Error.prototype)).constructor=lt,Object.defineProperty(lt.prototype,"name",{get:function(){return at}}),lt.prototype.toString=function(){return this.name+": "+this.message},lt}s.newError=et,s.ProtocolError=et("ProtocolError"),s.oneOfGetter=function(lt){for(var ht={},dt=0;dt<lt.length;++dt)ht[lt[dt]]=1;return function(){for(var ft=Object.keys(this),vt=ft.length-1;vt>-1;--vt)if(ht[ft[vt]]===1&&this[ft[vt]]!==void 0&&this[ft[vt]]!==null)return ft[vt]}},s.oneOfSetter=function(lt){return function(ht){for(var dt=0;dt<lt.length;++dt)lt[dt]!==ht&&delete this[lt[dt]]}},s.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},s._configure=function(){var at=s.Buffer;if(!at){s._Buffer_from=s._Buffer_allocUnsafe=null;return}s._Buffer_from=at.from!==Uint8Array.from&&at.from||function(ht,dt){return new at(ht,dt)},s._Buffer_allocUnsafe=at.allocUnsafe||function(ht){return new at(ht)}}}(minimal)),minimal}var writer=Writer$1,util$4=requireMinimal(),BufferWriter$1,LongBits$1=util$4.LongBits,base64$2=util$4.base64,utf8$1=util$4.utf8;function Op(o,s,a){this.fn=o,this.len=s,this.next=void 0,this.val=a}function noop(){}function State(o){this.head=o.head,this.tail=o.tail,this.len=o.len,this.next=o.states}function Writer$1(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}var create$2=function o(){return util$4.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$2();Writer$1.alloc=function o(s){return new util$4.Array(s)};util$4.Array!==Array&&(Writer$1.alloc=util$4.pool(Writer$1.alloc,util$4.Array.prototype.subarray));Writer$1.prototype._push=function o(s,a,et){return this.tail=this.tail.next=new Op(s,a,et),this.len+=a,this};function writeByte(o,s,a){s[a]=o&255}function writeVarint32(o,s,a){for(;o>127;)s[a++]=o&127|128,o>>>=7;s[a]=o}function VarintOp(o,s){this.len=o,this.next=void 0,this.val=s}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function o(s){return this.len+=(this.tail=this.tail.next=new VarintOp((s=s>>>0)<128?1:s<16384?2:s<2097152?3:s<268435456?4:5,s)).len,this};Writer$1.prototype.int32=function o(s){return s<0?this._push(writeVarint64,10,LongBits$1.fromNumber(s)):this.uint32(s)};Writer$1.prototype.sint32=function o(s){return this.uint32((s<<1^s>>31)>>>0)};function writeVarint64(o,s,a){for(;o.hi;)s[a++]=o.lo&127|128,o.lo=(o.lo>>>7|o.hi<<25)>>>0,o.hi>>>=7;for(;o.lo>127;)s[a++]=o.lo&127|128,o.lo=o.lo>>>7;s[a++]=o.lo}Writer$1.prototype.uint64=function o(s){var a=LongBits$1.from(s);return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function o(s){var a=LongBits$1.from(s).zzEncode();return this._push(writeVarint64,a.length(),a)};Writer$1.prototype.bool=function o(s){return this._push(writeByte,1,s?1:0)};function writeFixed32(o,s,a){s[a]=o&255,s[a+1]=o>>>8&255,s[a+2]=o>>>16&255,s[a+3]=o>>>24}Writer$1.prototype.fixed32=function o(s){return this._push(writeFixed32,4,s>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function o(s){var a=LongBits$1.from(s);return this._push(writeFixed32,4,a.lo)._push(writeFixed32,4,a.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function o(s){return this._push(util$4.float.writeFloatLE,4,s)};Writer$1.prototype.double=function o(s){return this._push(util$4.float.writeDoubleLE,8,s)};var writeBytes=util$4.Array.prototype.set?function o(s,a,et){a.set(s,et)}:function o(s,a,et){for(var at=0;at<s.length;++at)a[et+at]=s[at]};Writer$1.prototype.bytes=function o(s){var a=s.length>>>0;if(!a)return this._push(writeByte,1,0);if(util$4.isString(s)){var et=Writer$1.alloc(a=base64$2.length(s));base64$2.decode(s,et,0),s=et}return this.uint32(a)._push(writeBytes,a,s)};Writer$1.prototype.string=function o(s){var a=utf8$1.length(s);return a?this.uint32(a)._push(utf8$1.write,a,s):this._push(writeByte,1,0)};Writer$1.prototype.fork=function o(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this};Writer$1.prototype.reset=function o(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this};Writer$1.prototype.ldelim=function o(){var s=this.head,a=this.tail,et=this.len;return this.reset().uint32(et),et&&(this.tail.next=s.next,this.tail=a,this.len+=et),this};Writer$1.prototype.finish=function o(){for(var s=this.head.next,a=this.constructor.alloc(this.len),et=0;s;)s.fn(s.val,a,et),et+=s.len,s=s.next;return a};Writer$1._configure=function(o){BufferWriter$1=o,Writer$1.create=create$2(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$3=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$3._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$3.Buffer&&util$3.Buffer.prototype instanceof Uint8Array&&util$3.Buffer.prototype.set.name==="set"?function(s,a,et){a.set(s,et)}:function(s,a,et){if(s.copy)s.copy(a,et,0,s.length);else for(var at=0;at<s.length;)a[et++]=s[at++]}};BufferWriter.prototype.bytes=function o(s){util$3.isString(s)&&(s=util$3._Buffer_from(s,"base64"));var a=s.length>>>0;return this.uint32(a),a&&this._push(BufferWriter.writeBytesBuffer,a,s),this};function writeStringBuffer(o,s,a){o.length<40?util$3.utf8.write(o,s,a):s.utf8Write?s.utf8Write(o,a):s.write(o,a)}BufferWriter.prototype.string=function o(s){var a=util$3.Buffer.byteLength(s);return this.uint32(a),a&&this._push(writeStringBuffer,a,s),this};BufferWriter._configure();var reader=Reader$1,util$2=requireMinimal(),BufferReader$1,LongBits=util$2.LongBits,utf8=util$2.utf8;function indexOutOfRange(o,s){return RangeError("index out of range: "+o.pos+" + "+(s||1)+" > "+o.len)}function Reader$1(o){this.buf=o,this.pos=0,this.len=o.length}var create_array=typeof Uint8Array<"u"?function o(s){if(s instanceof Uint8Array||Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")}:function o(s){if(Array.isArray(s))return new Reader$1(s);throw Error("illegal buffer")},create$1=function o(){return util$2.Buffer?function(a){return(Reader$1.create=function(at){return util$2.Buffer.isBuffer(at)?new BufferReader$1(at):create_array(at)})(a)}:create_array};Reader$1.create=create$1();Reader$1.prototype._slice=util$2.Array.prototype.subarray||util$2.Array.prototype.slice;Reader$1.prototype.uint32=function o(){var s=4294967295;return function(){if(s=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(s=(s|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(s=(s|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return s;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return s}}();Reader$1.prototype.int32=function o(){return this.uint32()|0};Reader$1.prototype.sint32=function o(){var s=this.uint32();return s>>>1^-(s&1)|0};function readLongVarint(){var o=new LongBits(0,0),s=0;if(this.len-this.pos>4){for(;s<4;++s)if(o.lo=(o.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return o;if(o.lo=(o.lo|(this.buf[this.pos]&127)<<28)>>>0,o.hi=(o.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return o;s=0}else{for(;s<3;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(o.lo=(o.lo|(this.buf[this.pos]&127)<<s*7)>>>0,this.buf[this.pos++]<128)return o}return o.lo=(o.lo|(this.buf[this.pos++]&127)<<s*7)>>>0,o}if(this.len-this.pos>4){for(;s<5;++s)if(o.hi=(o.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return o}else for(;s<5;++s){if(this.pos>=this.len)throw indexOutOfRange(this);if(o.hi=(o.hi|(this.buf[this.pos]&127)<<s*7+3)>>>0,this.buf[this.pos++]<128)return o}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function o(){return this.uint32()!==0};function readFixed32_end(o,s){return(o[s-4]|o[s-3]<<8|o[s-2]<<16|o[s-1]<<24)>>>0}Reader$1.prototype.fixed32=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function o(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readFloatLE(this.buf,this.pos);return this.pos+=4,s};Reader$1.prototype.double=function o(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var s=util$2.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,s};Reader$1.prototype.bytes=function o(){var s=this.uint32(),a=this.pos,et=this.pos+s;if(et>this.len)throw indexOutOfRange(this,s);return this.pos+=s,Array.isArray(this.buf)?this.buf.slice(a,et):a===et?new this.buf.constructor(0):this._slice.call(this.buf,a,et)};Reader$1.prototype.string=function o(){var s=this.bytes();return utf8.read(s,0,s.length)};Reader$1.prototype.skip=function o(s){if(typeof s=="number"){if(this.pos+s>this.len)throw indexOutOfRange(this,s);this.pos+=s}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(o){switch(o){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(o=this.uint32()&7)!==4;)this.skipType(o);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+o+" at offset "+this.pos)}return this};Reader$1._configure=function(o){BufferReader$1=o,Reader$1.create=create$1(),BufferReader$1._configure();var s=util$2.Long?"toLong":"toNumber";util$2.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[s](!1)},uint64:function(){return readLongVarint.call(this)[s](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[s](!1)},fixed64:function(){return readFixed64.call(this)[s](!0)},sfixed64:function(){return readFixed64.call(this)[s](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$1=requireMinimal();function BufferReader(o){Reader.call(this,o)}BufferReader._configure=function(){util$1.Buffer&&(BufferReader.prototype._slice=util$1.Buffer.prototype.slice)};BufferReader.prototype.string=function o(){var s=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+s,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+s,this.len))};BufferReader._configure();var rpc={},service=Service,util=requireMinimal();(Service.prototype=Object.create(util.EventEmitter.prototype)).constructor=Service;function Service(o,s,a){if(typeof o!="function")throw TypeError("rpcImpl must be a function");util.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!s,this.responseDelimited=!!a}Service.prototype.rpcCall=function o(s,a,et,at,lt){if(!at)throw TypeError("request must be specified");var ht=this;if(!lt)return util.asPromise(o,ht,s,a,et,at);if(!ht.rpcImpl){setTimeout(function(){lt(Error("already ended"))},0);return}try{return ht.rpcImpl(s,a[ht.requestDelimited?"encodeDelimited":"encode"](at).finish(),function(ft,vt){if(ft)return ht.emit("error",ft,s),lt(ft);if(vt===null){ht.end(!0);return}if(!(vt instanceof et))try{vt=et[ht.responseDelimited?"decodeDelimited":"decode"](vt)}catch(wt){return ht.emit("error",wt,s),lt(wt)}return ht.emit("data",vt,s),lt(null,vt)})}catch(dt){ht.emit("error",dt,s),setTimeout(function(){lt(dt)},0);return}};Service.prototype.end=function o(s){return this.rpcImpl&&(s||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(o){var s=o;s.Service=service})(rpc);var roots={};(function(o){var s=o;s.build="minimal",s.Writer=writer,s.BufferWriter=writer_buffer,s.Reader=reader,s.BufferReader=reader_buffer,s.util=requireMinimal(),s.rpc=rpc,s.roots=roots,s.configure=a;function a(){s.util._configure(),s.Writer._configure(s.BufferWriter),s.Reader._configure(s.BufferReader)}a()})(indexMinimal);(function(o){o.exports=indexMinimal})(minimal$1);const $protobuf=getDefaultExportFromCjs(minimalExports),$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots["ipfs-unixfs"]||($protobuf.roots["ipfs-unixfs"]={}),Data=$root.Data=(()=>{function o(s){if(this.blocksizes=[],s)for(var a=Object.keys(s),et=0;et<a.length;++et)s[a[et]]!=null&&(this[a[et]]=s[a[et]])}return o.prototype.Type=0,o.prototype.Data=$util.newBuffer([]),o.prototype.filesize=$util.Long?$util.Long.fromBits(0,0,!0):0,o.prototype.blocksizes=$util.emptyArray,o.prototype.hashType=$util.Long?$util.Long.fromBits(0,0,!0):0,o.prototype.fanout=$util.Long?$util.Long.fromBits(0,0,!0):0,o.prototype.mode=0,o.prototype.mtime=null,o.encode=function(a,et){if(et||(et=$Writer.create()),et.uint32(8).int32(a.Type),a.Data!=null&&Object.hasOwnProperty.call(a,"Data")&&et.uint32(18).bytes(a.Data),a.filesize!=null&&Object.hasOwnProperty.call(a,"filesize")&&et.uint32(24).uint64(a.filesize),a.blocksizes!=null&&a.blocksizes.length)for(var at=0;at<a.blocksizes.length;++at)et.uint32(32).uint64(a.blocksizes[at]);return a.hashType!=null&&Object.hasOwnProperty.call(a,"hashType")&&et.uint32(40).uint64(a.hashType),a.fanout!=null&&Object.hasOwnProperty.call(a,"fanout")&&et.uint32(48).uint64(a.fanout),a.mode!=null&&Object.hasOwnProperty.call(a,"mode")&&et.uint32(56).uint32(a.mode),a.mtime!=null&&Object.hasOwnProperty.call(a,"mtime")&&$root.UnixTime.encode(a.mtime,et.uint32(66).fork()).ldelim(),et},o.decode=function(a,et){a instanceof $Reader||(a=$Reader.create(a));for(var at=et===void 0?a.len:a.pos+et,lt=new $root.Data;a.pos<at;){var ht=a.uint32();switch(ht>>>3){case 1:lt.Type=a.int32();break;case 2:lt.Data=a.bytes();break;case 3:lt.filesize=a.uint64();break;case 4:if(lt.blocksizes&&lt.blocksizes.length||(lt.blocksizes=[]),(ht&7)===2)for(var dt=a.uint32()+a.pos;a.pos<dt;)lt.blocksizes.push(a.uint64());else lt.blocksizes.push(a.uint64());break;case 5:lt.hashType=a.uint64();break;case 6:lt.fanout=a.uint64();break;case 7:lt.mode=a.uint32();break;case 8:lt.mtime=$root.UnixTime.decode(a,a.uint32());break;default:a.skipType(ht&7);break}}if(!lt.hasOwnProperty("Type"))throw $util.ProtocolError("missing required 'Type'",{instance:lt});return lt},o.fromObject=function(a){if(a instanceof $root.Data)return a;var et=new $root.Data;switch(a.Type){case"Raw":case 0:et.Type=0;break;case"Directory":case 1:et.Type=1;break;case"File":case 2:et.Type=2;break;case"Metadata":case 3:et.Type=3;break;case"Symlink":case 4:et.Type=4;break;case"HAMTShard":case 5:et.Type=5;break}if(a.Data!=null&&(typeof a.Data=="string"?$util.base64.decode(a.Data,et.Data=$util.newBuffer($util.base64.length(a.Data)),0):a.Data.length&&(et.Data=a.Data)),a.filesize!=null&&($util.Long?(et.filesize=$util.Long.fromValue(a.filesize)).unsigned=!0:typeof a.filesize=="string"?et.filesize=parseInt(a.filesize,10):typeof a.filesize=="number"?et.filesize=a.filesize:typeof a.filesize=="object"&&(et.filesize=new $util.LongBits(a.filesize.low>>>0,a.filesize.high>>>0).toNumber(!0))),a.blocksizes){if(!Array.isArray(a.blocksizes))throw TypeError(".Data.blocksizes: array expected");et.blocksizes=[];for(var at=0;at<a.blocksizes.length;++at)$util.Long?(et.blocksizes[at]=$util.Long.fromValue(a.blocksizes[at])).unsigned=!0:typeof a.blocksizes[at]=="string"?et.blocksizes[at]=parseInt(a.blocksizes[at],10):typeof a.blocksizes[at]=="number"?et.blocksizes[at]=a.blocksizes[at]:typeof a.blocksizes[at]=="object"&&(et.blocksizes[at]=new $util.LongBits(a.blocksizes[at].low>>>0,a.blocksizes[at].high>>>0).toNumber(!0))}if(a.hashType!=null&&($util.Long?(et.hashType=$util.Long.fromValue(a.hashType)).unsigned=!0:typeof a.hashType=="string"?et.hashType=parseInt(a.hashType,10):typeof a.hashType=="number"?et.hashType=a.hashType:typeof a.hashType=="object"&&(et.hashType=new $util.LongBits(a.hashType.low>>>0,a.hashType.high>>>0).toNumber(!0))),a.fanout!=null&&($util.Long?(et.fanout=$util.Long.fromValue(a.fanout)).unsigned=!0:typeof a.fanout=="string"?et.fanout=parseInt(a.fanout,10):typeof a.fanout=="number"?et.fanout=a.fanout:typeof a.fanout=="object"&&(et.fanout=new $util.LongBits(a.fanout.low>>>0,a.fanout.high>>>0).toNumber(!0))),a.mode!=null&&(et.mode=a.mode>>>0),a.mtime!=null){if(typeof a.mtime!="object")throw TypeError(".Data.mtime: object expected");et.mtime=$root.UnixTime.fromObject(a.mtime)}return et},o.toObject=function(a,et){et||(et={});var at={};if((et.arrays||et.defaults)&&(at.blocksizes=[]),et.defaults){if(at.Type=et.enums===String?"Raw":0,et.bytes===String?at.Data="":(at.Data=[],et.bytes!==Array&&(at.Data=$util.newBuffer(at.Data))),$util.Long){var lt=new $util.Long(0,0,!0);at.filesize=et.longs===String?lt.toString():et.longs===Number?lt.toNumber():lt}else at.filesize=et.longs===String?"0":0;if($util.Long){var lt=new $util.Long(0,0,!0);at.hashType=et.longs===String?lt.toString():et.longs===Number?lt.toNumber():lt}else at.hashType=et.longs===String?"0":0;if($util.Long){var lt=new $util.Long(0,0,!0);at.fanout=et.longs===String?lt.toString():et.longs===Number?lt.toNumber():lt}else at.fanout=et.longs===String?"0":0;at.mode=0,at.mtime=null}if(a.Type!=null&&a.hasOwnProperty("Type")&&(at.Type=et.enums===String?$root.Data.DataType[a.Type]:a.Type),a.Data!=null&&a.hasOwnProperty("Data")&&(at.Data=et.bytes===String?$util.base64.encode(a.Data,0,a.Data.length):et.bytes===Array?Array.prototype.slice.call(a.Data):a.Data),a.filesize!=null&&a.hasOwnProperty("filesize")&&(typeof a.filesize=="number"?at.filesize=et.longs===String?String(a.filesize):a.filesize:at.filesize=et.longs===String?$util.Long.prototype.toString.call(a.filesize):et.longs===Number?new $util.LongBits(a.filesize.low>>>0,a.filesize.high>>>0).toNumber(!0):a.filesize),a.blocksizes&&a.blocksizes.length){at.blocksizes=[];for(var ht=0;ht<a.blocksizes.length;++ht)typeof a.blocksizes[ht]=="number"?at.blocksizes[ht]=et.longs===String?String(a.blocksizes[ht]):a.blocksizes[ht]:at.blocksizes[ht]=et.longs===String?$util.Long.prototype.toString.call(a.blocksizes[ht]):et.longs===Number?new $util.LongBits(a.blocksizes[ht].low>>>0,a.blocksizes[ht].high>>>0).toNumber(!0):a.blocksizes[ht]}return a.hashType!=null&&a.hasOwnProperty("hashType")&&(typeof a.hashType=="number"?at.hashType=et.longs===String?String(a.hashType):a.hashType:at.hashType=et.longs===String?$util.Long.prototype.toString.call(a.hashType):et.longs===Number?new $util.LongBits(a.hashType.low>>>0,a.hashType.high>>>0).toNumber(!0):a.hashType),a.fanout!=null&&a.hasOwnProperty("fanout")&&(typeof a.fanout=="number"?at.fanout=et.longs===String?String(a.fanout):a.fanout:at.fanout=et.longs===String?$util.Long.prototype.toString.call(a.fanout):et.longs===Number?new $util.LongBits(a.fanout.low>>>0,a.fanout.high>>>0).toNumber(!0):a.fanout),a.mode!=null&&a.hasOwnProperty("mode")&&(at.mode=a.mode),a.mtime!=null&&a.hasOwnProperty("mtime")&&(at.mtime=$root.UnixTime.toObject(a.mtime,et)),at},o.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},o.DataType=function(){const s={},a=Object.create(s);return a[s[0]="Raw"]=0,a[s[1]="Directory"]=1,a[s[2]="File"]=2,a[s[3]="Metadata"]=3,a[s[4]="Symlink"]=4,a[s[5]="HAMTShard"]=5,a}(),o})();$root.UnixTime=(()=>{function o(s){if(s)for(var a=Object.keys(s),et=0;et<a.length;++et)s[a[et]]!=null&&(this[a[et]]=s[a[et]])}return o.prototype.Seconds=$util.Long?$util.Long.fromBits(0,0,!1):0,o.prototype.FractionalNanoseconds=0,o.encode=function(a,et){return et||(et=$Writer.create()),et.uint32(8).int64(a.Seconds),a.FractionalNanoseconds!=null&&Object.hasOwnProperty.call(a,"FractionalNanoseconds")&&et.uint32(21).fixed32(a.FractionalNanoseconds),et},o.decode=function(a,et){a instanceof $Reader||(a=$Reader.create(a));for(var at=et===void 0?a.len:a.pos+et,lt=new $root.UnixTime;a.pos<at;){var ht=a.uint32();switch(ht>>>3){case 1:lt.Seconds=a.int64();break;case 2:lt.FractionalNanoseconds=a.fixed32();break;default:a.skipType(ht&7);break}}if(!lt.hasOwnProperty("Seconds"))throw $util.ProtocolError("missing required 'Seconds'",{instance:lt});return lt},o.fromObject=function(a){if(a instanceof $root.UnixTime)return a;var et=new $root.UnixTime;return a.Seconds!=null&&($util.Long?(et.Seconds=$util.Long.fromValue(a.Seconds)).unsigned=!1:typeof a.Seconds=="string"?et.Seconds=parseInt(a.Seconds,10):typeof a.Seconds=="number"?et.Seconds=a.Seconds:typeof a.Seconds=="object"&&(et.Seconds=new $util.LongBits(a.Seconds.low>>>0,a.Seconds.high>>>0).toNumber())),a.FractionalNanoseconds!=null&&(et.FractionalNanoseconds=a.FractionalNanoseconds>>>0),et},o.toObject=function(a,et){et||(et={});var at={};if(et.defaults){if($util.Long){var lt=new $util.Long(0,0,!1);at.Seconds=et.longs===String?lt.toString():et.longs===Number?lt.toNumber():lt}else at.Seconds=et.longs===String?"0":0;at.FractionalNanoseconds=0}return a.Seconds!=null&&a.hasOwnProperty("Seconds")&&(typeof a.Seconds=="number"?at.Seconds=et.longs===String?String(a.Seconds):a.Seconds:at.Seconds=et.longs===String?$util.Long.prototype.toString.call(a.Seconds):et.longs===Number?new $util.LongBits(a.Seconds.low>>>0,a.Seconds.high>>>0).toNumber():a.Seconds),a.FractionalNanoseconds!=null&&a.hasOwnProperty("FractionalNanoseconds")&&(at.FractionalNanoseconds=a.FractionalNanoseconds),at},o.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},o})();$root.Metadata=(()=>{function o(s){if(s)for(var a=Object.keys(s),et=0;et<a.length;++et)s[a[et]]!=null&&(this[a[et]]=s[a[et]])}return o.prototype.MimeType="",o.encode=function(a,et){return et||(et=$Writer.create()),a.MimeType!=null&&Object.hasOwnProperty.call(a,"MimeType")&&et.uint32(10).string(a.MimeType),et},o.decode=function(a,et){a instanceof $Reader||(a=$Reader.create(a));for(var at=et===void 0?a.len:a.pos+et,lt=new $root.Metadata;a.pos<at;){var ht=a.uint32();switch(ht>>>3){case 1:lt.MimeType=a.string();break;default:a.skipType(ht&7);break}}return lt},o.fromObject=function(a){if(a instanceof $root.Metadata)return a;var et=new $root.Metadata;return a.MimeType!=null&&(et.MimeType=String(a.MimeType)),et},o.toObject=function(a,et){et||(et={});var at={};return et.defaults&&(at.MimeType=""),a.MimeType!=null&&a.hasOwnProperty("MimeType")&&(at.MimeType=a.MimeType),at},o.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},o})();const PBData=Data,types=["raw","directory","file","metadata","symlink","hamt-sharded-directory"],dirTypes=["directory","hamt-sharded-directory"],DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8);function parseMode(o){if(o!=null)return typeof o=="number"?o&4095:(o=o.toString(),o.substring(0,1)==="0"?parseInt(o,8)&4095:parseInt(o,10)&4095)}function parseMtime(o){if(o==null)return;let s;if(o.secs!=null&&(s={secs:o.secs,nsecs:o.nsecs}),o.Seconds!=null&&(s={secs:o.Seconds,nsecs:o.FractionalNanoseconds}),Array.isArray(o)&&(s={secs:o[0],nsecs:o[1]}),o instanceof Date){const a=o.getTime(),et=Math.floor(a/1e3);s={secs:et,nsecs:(a-et*1e3)*1e3}}if(Object.prototype.hasOwnProperty.call(s,"secs")){if(s!=null&&s.nsecs!=null&&(s.nsecs<0||s.nsecs>999999999))throw errCode(new Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return s}}class UnixFS{static unmarshal(s){const a=PBData.decode(s),et=PBData.toObject(a,{defaults:!1,arrays:!0,longs:Number,objects:!1}),at=new UnixFS({type:types[et.Type],data:et.Data,blockSizes:et.blocksizes,mode:et.mode,mtime:et.mtime?{secs:et.mtime.Seconds,nsecs:et.mtime.FractionalNanoseconds}:void 0});return at._originalMode=et.mode||0,at}constructor(s={type:"file"}){const{type:a,data:et,blockSizes:at,hashType:lt,fanout:ht,mtime:dt,mode:ft}=s;if(a&&!types.includes(a))throw errCode(new Error("Type: "+a+" is not valid"),"ERR_INVALID_TYPE");this.type=a||"file",this.data=et,this.hashType=lt,this.fanout=ht,this.blockSizes=at||[],this._originalMode=0,this.mode=parseMode(ft),dt&&(this.mtime=parseMtime(dt),this.mtime&&!this.mtime.nsecs&&(this.mtime.nsecs=0))}set mode(s){this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE;const a=parseMode(s);a!==void 0&&(this._mode=a)}get mode(){return this._mode}isDirectory(){return!!(this.type&&dirTypes.includes(this.type))}addBlockSize(s){this.blockSizes.push(s)}removeBlockSize(s){this.blockSizes.splice(s,1)}fileSize(){if(this.isDirectory())return 0;let s=0;return this.blockSizes.forEach(a=>{s+=a}),this.data&&(s+=this.data.length),s}marshal(){let s;switch(this.type){case"raw":s=PBData.DataType.Raw;break;case"directory":s=PBData.DataType.Directory;break;case"file":s=PBData.DataType.File;break;case"metadata":s=PBData.DataType.Metadata;break;case"symlink":s=PBData.DataType.Symlink;break;case"hamt-sharded-directory":s=PBData.DataType.HAMTShard;break;default:throw errCode(new Error("Type: "+s+" is not valid"),"ERR_INVALID_TYPE")}let a=this.data;(!this.data||!this.data.length)&&(a=void 0);let et;this.mode!=null&&(et=this._originalMode&4294963200|(parseMode(this.mode)||0),et===DEFAULT_FILE_MODE&&!this.isDirectory()&&(et=void 0),et===DEFAULT_DIRECTORY_MODE&&this.isDirectory()&&(et=void 0));let at;if(this.mtime!=null){const ht=parseMtime(this.mtime);ht&&(at={Seconds:ht.secs,FractionalNanoseconds:ht.nsecs},at.FractionalNanoseconds===0&&delete at.FractionalNanoseconds)}const lt={Type:s,Data:a,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:et,mtime:at};return PBData.encode(lt).finish()}}const textDecoder=new TextDecoder;function decodeVarint(o,s){let a=0;for(let et=0;;et+=7){if(et>=64)throw new Error("protobuf: varint overflow");if(s>=o.length)throw new Error("protobuf: unexpected end of data");const at=o[s++];if(a+=et<28?(at&127)<<et:(at&127)*2**et,at<128)break}return[a,s]}function decodeBytes(o,s){let a;[a,s]=decodeVarint(o,s);const et=s+a;if(a<0||et<0)throw new Error("protobuf: invalid length");if(et>o.length)throw new Error("protobuf: unexpected end of data");return[o.subarray(s,et),et]}function decodeKey(o,s){let a;return[a,s]=decodeVarint(o,s),[a&7,a>>3,s]}function decodeLink(o){const s={},a=o.length;let et=0;for(;et<a;){let at,lt;if([at,lt,et]=decodeKey(o,et),lt===1){if(s.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(at!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${at}) for Hash`);if(s.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(s.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[s.Hash,et]=decodeBytes(o,et)}else if(lt===2){if(s.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(at!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${at}) for Name`);if(s.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let ht;[ht,et]=decodeBytes(o,et),s.Name=textDecoder.decode(ht)}else if(lt===3){if(s.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(at!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${at}) for Tsize`);[s.Tsize,et]=decodeVarint(o,et)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${lt}`)}if(et>a)throw new Error("protobuf: (PBLink) unexpected end of data");return s}function decodeNode(o){const s=o.length;let a=0,et,at=!1,lt;for(;a<s;){let dt,ft;if([dt,ft,a]=decodeKey(o,a),dt!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${dt}`);if(ft===1){if(lt)throw new Error("protobuf: (PBNode) duplicate Data section");[lt,a]=decodeBytes(o,a),et&&(at=!0)}else if(ft===2){if(at)throw new Error("protobuf: (PBNode) duplicate Links section");et||(et=[]);let vt;[vt,a]=decodeBytes(o,a),et.push(decodeLink(vt))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${ft}`)}if(a>s)throw new Error("protobuf: (PBNode) unexpected end of data");const ht={};return lt&&(ht.Data=lt),ht.Links=et||[],ht}const textEncoder$1=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(o,s){let a=s.length;if(typeof o.Tsize=="number"){if(o.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(o.Tsize))throw new Error("Tsize too large for encoding");a=encodeVarint(s,a,o.Tsize)-1,s[a]=24}if(typeof o.Name=="string"){const et=textEncoder$1.encode(o.Name);a-=et.length,s.set(et,a),a=encodeVarint(s,a,et.length)-1,s[a]=18}return o.Hash&&(a-=o.Hash.length,s.set(o.Hash,a),a=encodeVarint(s,a,o.Hash.length)-1,s[a]=10),s.length-a}function encodeNode(o){const s=sizeNode(o),a=new Uint8Array(s);let et=s;if(o.Data&&(et-=o.Data.length,a.set(o.Data,et),et=encodeVarint(a,et,o.Data.length)-1,a[et]=10),o.Links)for(let at=o.Links.length-1;at>=0;at--){const lt=encodeLink(o.Links[at],a.subarray(0,et));et-=lt,et=encodeVarint(a,et,lt)-1,a[et]=18}return a}function sizeLink(o){let s=0;if(o.Hash){const a=o.Hash.length;s+=1+a+sov(a)}if(typeof o.Name=="string"){const a=textEncoder$1.encode(o.Name).length;s+=1+a+sov(a)}return typeof o.Tsize=="number"&&(s+=1+sov(o.Tsize)),s}function sizeNode(o){let s=0;if(o.Data){const a=o.Data.length;s+=1+a+sov(a)}if(o.Links)for(const a of o.Links){const et=sizeLink(a);s+=1+et+sov(et)}return s}function encodeVarint(o,s,a){s-=sov(a);const et=s;for(;a>=maxUInt32;)o[s++]=a&127|128,a/=128;for(;a>=128;)o[s++]=a&127|128,a>>>=7;return o[s]=a,et}function sov(o){return o%2===0&&o++,Math.floor((len64(o)+6)/7)}function len64(o){let s=0;return o>=maxInt32&&(o=Math.floor(o/maxInt32),s=32),o>=1<<16&&(o>>>=16,s+=16),o>=1<<8&&(o>>>=8,s+=8),s+len8tab[o]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder=new TextEncoder;function linkComparator(o,s){if(o===s)return 0;const a=o.Name?textEncoder.encode(o.Name):[],et=s.Name?textEncoder.encode(s.Name):[];let at=a.length,lt=et.length;for(let ht=0,dt=Math.min(at,lt);ht<dt;++ht)if(a[ht]!==et[ht]){at=a[ht],lt=et[ht];break}return at<lt?-1:lt<at?1:0}function hasOnlyProperties(o,s){return!Object.keys(o).some(a=>!s.includes(a))}function asLink(o){if(typeof o.asCID=="object"){const a=CID.asCID(o);if(!a)throw new TypeError("Invalid DAG-PB form");return{Hash:a}}if(typeof o!="object"||Array.isArray(o))throw new TypeError("Invalid DAG-PB form");const s={};if(o.Hash){let a=CID.asCID(o.Hash);try{a||(typeof o.Hash=="string"?a=CID.parse(o.Hash):o.Hash instanceof Uint8Array&&(a=CID.decode(o.Hash)))}catch(et){throw new TypeError(`Invalid DAG-PB form: ${et.message}`)}a&&(s.Hash=a)}if(!s.Hash)throw new TypeError("Invalid DAG-PB form");return typeof o.Name=="string"&&(s.Name=o.Name),typeof o.Tsize=="number"&&(s.Tsize=o.Tsize),s}function prepare(o){if((o instanceof Uint8Array||typeof o=="string")&&(o={Data:o}),typeof o!="object"||Array.isArray(o))throw new TypeError("Invalid DAG-PB form");const s={};if(o.Data!==void 0)if(typeof o.Data=="string")s.Data=textEncoder.encode(o.Data);else if(o.Data instanceof Uint8Array)s.Data=o.Data;else throw new TypeError("Invalid DAG-PB form");if(o.Links!==void 0)if(Array.isArray(o.Links))s.Links=o.Links.map(asLink),s.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else s.Links=[];return s}function validate(o){if(!o||typeof o!="object"||Array.isArray(o))throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(o,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(o.Data!==void 0&&!(o.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(o.Links))throw new TypeError("Invalid DAG-PB form (Links must be an array)");for(let s=0;s<o.Links.length;s++){const a=o.Links[s];if(!a||typeof a!="object"||Array.isArray(a))throw new TypeError("Invalid DAG-PB form (bad link object)");if(!hasOnlyProperties(a,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!a.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(a.Hash.asCID!==a.Hash)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(a.Name!==void 0&&typeof a.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(a.Tsize!==void 0&&(typeof a.Tsize!="number"||a.Tsize%1!==0))throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(s>0&&linkComparator(a,o.Links[s-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(o,s=[]){return prepare({Data:o,Links:s})}function createLink(o,s,a){return asLink({Hash:a,Name:o,Tsize:s})}const name$3="dag-pb",code$4=112;function encode$4(o){validate(o);const s={};return o.Links&&(s.Links=o.Links.map(a=>{const et={};return a.Hash&&(et.Hash=a.Hash.bytes),a.Name!==void 0&&(et.Name=a.Name),a.Tsize!==void 0&&(et.Tsize=a.Tsize),et})),o.Data&&(s.Data=o.Data),encodeNode(s)}function decode$3(o){const s=decodeNode(o),a={};return s.Data&&(a.Data=s.Data),s.Links&&(a.Links=s.Links.map(et=>{const at={};try{at.Hash=CID.decode(et.Hash)}catch{}if(!at.Hash)throw new Error("Invalid Hash field found in link, expected CID");return et.Name!==void 0&&(at.Name=et.Name),et.Tsize!==void 0&&(at.Tsize=et.Tsize),at})),a}const pb=Object.freeze(Object.defineProperty({__proto__:null,code:code$4,createLink,createNode,decode:decode$3,encode:encode$4,name:name$3,prepare,validate},Symbol.toStringTag,{value:"Module"})),persist=async(o,s,a)=>{a.codec||(a.codec=pb),a.hasher||(a.hasher=sha256),a.cidVersion===void 0&&(a.cidVersion=1),a.codec===pb&&a.hasher!==sha256&&(a.cidVersion=1);const et=await a.hasher.digest(o),at=CID.create(a.cidVersion,a.codec.code,et);return a.onlyHash||await s.put(at,o,{signal:a.signal}),at},dirBuilder=async(o,s,a)=>{const et=new UnixFS({type:"directory",mtime:o.mtime,mode:o.mode}),at=encode$4(prepare({Data:et.marshal()})),lt=await persist(at,s,a),ht=o.path;return{cid:lt,path:ht,unixfs:et,size:at.length}},name$2="raw",code$3=85,encode$3=o=>coerce(o),decode$2=o=>coerce(o),raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$2,encode:encode$3,name:name$2},Symbol.toStringTag,{value:"Module"})),all=async o=>{const s=[];for await(const a of o)s.push(a);return s};var itAll=all;async function flat(o,s){return s(await itAll(o))}function balanced(o,s,a){return reduceToParents(o,s,a)}async function reduceToParents(o,s,a){const et=[];for await(const at of itBatch(o,a.maxChildrenPerNode))et.push(await s(at));return et.length>1?reduceToParents(et,s,a):et[0]}async function trickleStream(o,s,a){const et=new Root(a.layerRepeat);let at=0,lt=1,ht=et;for await(const dt of itBatch(o,a.maxChildrenPerNode))ht.isFull()&&(ht!==et&&et.addChild(await ht.reduce(s)),at&&at%a.layerRepeat===0&&lt++,ht=new SubTree(lt,a.layerRepeat,at),at++),ht.append(dt);return ht&&ht!==et&&et.addChild(await ht.reduce(s)),et.reduce(s)}class SubTree{constructor(s,a,et=0){this.maxDepth=s,this.layerRepeat=a,this.currentDepth=1,this.iteration=et,this.root=this.node=this.parent={children:[],depth:this.currentDepth,maxDepth:s,maxChildren:(this.maxDepth-this.currentDepth)*this.layerRepeat}}isFull(){if(!this.root.data)return!1;if(this.currentDepth<this.maxDepth&&this.node.maxChildren)return this._addNextNodeToParent(this.node),!1;const s=this._findParent(this.node,this.currentDepth);return s?(this._addNextNodeToParent(s),!1):!0}_addNextNodeToParent(s){this.parent=s;const a={children:[],depth:s.depth+1,parent:s,maxDepth:this.maxDepth,maxChildren:Math.floor(s.children.length/this.layerRepeat)*this.layerRepeat};s.children.push(a),this.currentDepth=a.depth,this.node=a}append(s){this.node.data=s}reduce(s){return this._reduce(this.root,s)}async _reduce(s,a){let et=[];return s.children.length&&(et=await Promise.all(s.children.filter(at=>at.data).map(at=>this._reduce(at,a)))),a((s.data||[]).concat(et))}_findParent(s,a){const et=s.parent;if(!(!et||et.depth===0))return et.children.length===et.maxChildren||!et.maxChildren?this._findParent(et,a):et}}class Root extends SubTree{constructor(s){super(0,s),this.root.depth=0,this.currentDepth=1}addChild(s){this.root.children.push(s)}reduce(s){return s((this.root.data||[]).concat(this.root.children))}}async function*bufferImporter(o,s,a){for await(let et of o.content)yield async()=>{a.progress(et.length,o.path);let at;const lt={codec:pb,cidVersion:a.cidVersion,hasher:a.hasher,onlyHash:a.onlyHash};return a.rawLeaves?(lt.codec=raw,lt.cidVersion=1):(at=new UnixFS({type:a.leafType,data:et}),et=encode$4({Data:at.marshal(),Links:[]})),{cid:await persist(et,s,lt),unixfs:at,size:et.length}}}const dagBuilders={flat,balanced,trickle:trickleStream};async function*buildFileBatch(o,s,a){let et=-1,at,lt;typeof a.bufferImporter=="function"?lt=a.bufferImporter:lt=bufferImporter;for await(const ht of itParallelBatch(lt(o,s,a),a.blockWriteConcurrency)){if(et++,et===0){at=ht;continue}else et===1&&at&&(yield at,at=null);yield ht}at&&(at.single=!0,yield at)}const reduce=(o,s,a)=>{async function et(at){if(at.length===1&&at[0].single&&a.reduceSingleLeafToSelf){const wt=at[0];if(o.mtime!==void 0||o.mode!==void 0){let Ct=await s.get(wt.cid);wt.unixfs=new UnixFS({type:"file",mtime:o.mtime,mode:o.mode,data:Ct}),Ct=encode$4(prepare({Data:wt.unixfs.marshal()})),wt.cid=await persist(Ct,s,{...a,codec:pb,hasher:a.hasher,cidVersion:a.cidVersion}),wt.size=Ct.length}return{cid:wt.cid,path:o.path,unixfs:wt.unixfs,size:wt.size}}const lt=new UnixFS({type:"file",mtime:o.mtime,mode:o.mode}),ht=at.filter(wt=>wt.cid.code===code$3&&wt.size||wt.unixfs&&!wt.unixfs.data&&wt.unixfs.fileSize()?!0:!!(wt.unixfs&&wt.unixfs.data&&wt.unixfs.data.length)).map(wt=>wt.cid.code===code$3?(lt.addBlockSize(wt.size),{Name:"",Tsize:wt.size,Hash:wt.cid}):(!wt.unixfs||!wt.unixfs.data?lt.addBlockSize(wt.unixfs&&wt.unixfs.fileSize()||0):lt.addBlockSize(wt.unixfs.data.length),{Name:"",Tsize:wt.size,Hash:wt.cid})),dt={Data:lt.marshal(),Links:ht},ft=encode$4(prepare(dt));return{cid:await persist(ft,s,a),path:o.path,unixfs:lt,size:ft.length+dt.Links.reduce((wt,Ct)=>wt+Ct.Tsize,0)}}return et};function fileBuilder(o,s,a){const et=dagBuilders[a.strategy];if(!et)throw errCode(new Error(`Unknown importer build strategy name: ${a.strategy}`),"ERR_BAD_STRATEGY");return et(buildFileBatch(o,s,a),reduce(o,s,a),a)}var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code$2.length;i<len;++i)lookup[i]=code$2[i],revLookup[code$2.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(o){var s=o.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=o.indexOf("=");a===-1&&(a=s);var et=a===s?0:4-a%4;return[a,et]}function byteLength(o){var s=getLens(o),a=s[0],et=s[1];return(a+et)*3/4-et}function _byteLength(o,s,a){return(s+a)*3/4-a}function toByteArray(o){var s,a=getLens(o),et=a[0],at=a[1],lt=new Arr(_byteLength(o,et,at)),ht=0,dt=at>0?et-4:et,ft;for(ft=0;ft<dt;ft+=4)s=revLookup[o.charCodeAt(ft)]<<18|revLookup[o.charCodeAt(ft+1)]<<12|revLookup[o.charCodeAt(ft+2)]<<6|revLookup[o.charCodeAt(ft+3)],lt[ht++]=s>>16&255,lt[ht++]=s>>8&255,lt[ht++]=s&255;return at===2&&(s=revLookup[o.charCodeAt(ft)]<<2|revLookup[o.charCodeAt(ft+1)]>>4,lt[ht++]=s&255),at===1&&(s=revLookup[o.charCodeAt(ft)]<<10|revLookup[o.charCodeAt(ft+1)]<<4|revLookup[o.charCodeAt(ft+2)]>>2,lt[ht++]=s>>8&255,lt[ht++]=s&255),lt}function tripletToBase64(o){return lookup[o>>18&63]+lookup[o>>12&63]+lookup[o>>6&63]+lookup[o&63]}function encodeChunk(o,s,a){for(var et,at=[],lt=s;lt<a;lt+=3)et=(o[lt]<<16&16711680)+(o[lt+1]<<8&65280)+(o[lt+2]&255),at.push(tripletToBase64(et));return at.join("")}function fromByteArray(o){for(var s,a=o.length,et=a%3,at=[],lt=16383,ht=0,dt=a-et;ht<dt;ht+=lt)at.push(encodeChunk(o,ht,ht+lt>dt?dt:ht+lt));return et===1?(s=o[a-1],at.push(lookup[s>>2]+lookup[s<<4&63]+"==")):et===2&&(s=(o[a-2]<<8)+o[a-1],at.push(lookup[s>>10]+lookup[s>>4&63]+lookup[s<<2&63]+"=")),at.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(o,s,a,et,at){var lt,ht,dt=at*8-et-1,ft=(1<<dt)-1,vt=ft>>1,wt=-7,Ct=a?at-1:0,xt=a?-1:1,Pt=o[s+Ct];for(Ct+=xt,lt=Pt&(1<<-wt)-1,Pt>>=-wt,wt+=dt;wt>0;lt=lt*256+o[s+Ct],Ct+=xt,wt-=8);for(ht=lt&(1<<-wt)-1,lt>>=-wt,wt+=et;wt>0;ht=ht*256+o[s+Ct],Ct+=xt,wt-=8);if(lt===0)lt=1-vt;else{if(lt===ft)return ht?NaN:(Pt?-1:1)*(1/0);ht=ht+Math.pow(2,et),lt=lt-vt}return(Pt?-1:1)*ht*Math.pow(2,lt-et)};ieee754.write=function(o,s,a,et,at,lt){var ht,dt,ft,vt=lt*8-at-1,wt=(1<<vt)-1,Ct=wt>>1,xt=at===23?Math.pow(2,-24)-Math.pow(2,-77):0,Pt=et?0:lt-1,Rt=et?1:-1,_t=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(dt=isNaN(s)?1:0,ht=wt):(ht=Math.floor(Math.log(s)/Math.LN2),s*(ft=Math.pow(2,-ht))<1&&(ht--,ft*=2),ht+Ct>=1?s+=xt/ft:s+=xt*Math.pow(2,1-Ct),s*ft>=2&&(ht++,ft/=2),ht+Ct>=wt?(dt=0,ht=wt):ht+Ct>=1?(dt=(s*ft-1)*Math.pow(2,at),ht=ht+Ct):(dt=s*Math.pow(2,Ct-1)*Math.pow(2,at),ht=0));at>=8;o[a+Pt]=dt&255,Pt+=Rt,dt/=256,at-=8);for(ht=ht<<at|dt,vt+=at;vt>0;o[a+Pt]=ht&255,Pt+=Rt,ht/=256,vt-=8);o[a+Pt-Rt]|=_t*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const s=base64Js,a=ieee754,et=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=dt,o.SlowBuffer=Nt,o.INSPECT_MAX_BYTES=50;const at=2147483647;o.kMaxLength=at,dt.TYPED_ARRAY_SUPPORT=lt(),!dt.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function lt(){try{const Qt=new Uint8Array(1),Lt={foo:function(){return 42}};return Object.setPrototypeOf(Lt,Uint8Array.prototype),Object.setPrototypeOf(Qt,Lt),Qt.foo()===42}catch{return!1}}Object.defineProperty(dt.prototype,"parent",{enumerable:!0,get:function(){if(dt.isBuffer(this))return this.buffer}}),Object.defineProperty(dt.prototype,"offset",{enumerable:!0,get:function(){if(dt.isBuffer(this))return this.byteOffset}});function ht(Qt){if(Qt>at)throw new RangeError('The value "'+Qt+'" is invalid for option "size"');const Lt=new Uint8Array(Qt);return Object.setPrototypeOf(Lt,dt.prototype),Lt}function dt(Qt,Lt,Ut){if(typeof Qt=="number"){if(typeof Lt=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Ct(Qt)}return ft(Qt,Lt,Ut)}dt.poolSize=8192;function ft(Qt,Lt,Ut){if(typeof Qt=="string")return xt(Qt,Lt);if(ArrayBuffer.isView(Qt))return Rt(Qt);if(Qt==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qt);if(Rr(Qt,ArrayBuffer)||Qt&&Rr(Qt.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Rr(Qt,SharedArrayBuffer)||Qt&&Rr(Qt.buffer,SharedArrayBuffer)))return _t(Qt,Lt,Ut);if(typeof Qt=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const nr=Qt.valueOf&&Qt.valueOf();if(nr!=null&&nr!==Qt)return dt.from(nr,Lt,Ut);const gr=St(Qt);if(gr)return gr;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Qt[Symbol.toPrimitive]=="function")return dt.from(Qt[Symbol.toPrimitive]("string"),Lt,Ut);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Qt)}dt.from=function(Qt,Lt,Ut){return ft(Qt,Lt,Ut)},Object.setPrototypeOf(dt.prototype,Uint8Array.prototype),Object.setPrototypeOf(dt,Uint8Array);function vt(Qt){if(typeof Qt!="number")throw new TypeError('"size" argument must be of type number');if(Qt<0)throw new RangeError('The value "'+Qt+'" is invalid for option "size"')}function wt(Qt,Lt,Ut){return vt(Qt),Qt<=0?ht(Qt):Lt!==void 0?typeof Ut=="string"?ht(Qt).fill(Lt,Ut):ht(Qt).fill(Lt):ht(Qt)}dt.alloc=function(Qt,Lt,Ut){return wt(Qt,Lt,Ut)};function Ct(Qt){return vt(Qt),ht(Qt<0?0:bt(Qt)|0)}dt.allocUnsafe=function(Qt){return Ct(Qt)},dt.allocUnsafeSlow=function(Qt){return Ct(Qt)};function xt(Qt,Lt){if((typeof Lt!="string"||Lt==="")&&(Lt="utf8"),!dt.isEncoding(Lt))throw new TypeError("Unknown encoding: "+Lt);const Ut=kt(Qt,Lt)|0;let nr=ht(Ut);const gr=nr.write(Qt,Lt);return gr!==Ut&&(nr=nr.slice(0,gr)),nr}function Pt(Qt){const Lt=Qt.length<0?0:bt(Qt.length)|0,Ut=ht(Lt);for(let nr=0;nr<Lt;nr+=1)Ut[nr]=Qt[nr]&255;return Ut}function Rt(Qt){if(Rr(Qt,Uint8Array)){const Lt=new Uint8Array(Qt);return _t(Lt.buffer,Lt.byteOffset,Lt.byteLength)}return Pt(Qt)}function _t(Qt,Lt,Ut){if(Lt<0||Qt.byteLength<Lt)throw new RangeError('"offset" is outside of buffer bounds');if(Qt.byteLength<Lt+(Ut||0))throw new RangeError('"length" is outside of buffer bounds');let nr;return Lt===void 0&&Ut===void 0?nr=new Uint8Array(Qt):Ut===void 0?nr=new Uint8Array(Qt,Lt):nr=new Uint8Array(Qt,Lt,Ut),Object.setPrototypeOf(nr,dt.prototype),nr}function St(Qt){if(dt.isBuffer(Qt)){const Lt=bt(Qt.length)|0,Ut=ht(Lt);return Ut.length===0||Qt.copy(Ut,0,0,Lt),Ut}if(Qt.length!==void 0)return typeof Qt.length!="number"||Nr(Qt.length)?ht(0):Pt(Qt);if(Qt.type==="Buffer"&&Array.isArray(Qt.data))return Pt(Qt.data)}function bt(Qt){if(Qt>=at)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+at.toString(16)+" bytes");return Qt|0}function Nt(Qt){return+Qt!=Qt&&(Qt=0),dt.alloc(+Qt)}dt.isBuffer=function(Lt){return Lt!=null&&Lt._isBuffer===!0&&Lt!==dt.prototype},dt.compare=function(Lt,Ut){if(Rr(Lt,Uint8Array)&&(Lt=dt.from(Lt,Lt.offset,Lt.byteLength)),Rr(Ut,Uint8Array)&&(Ut=dt.from(Ut,Ut.offset,Ut.byteLength)),!dt.isBuffer(Lt)||!dt.isBuffer(Ut))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Lt===Ut)return 0;let nr=Lt.length,gr=Ut.length;for(let Tr=0,xr=Math.min(nr,gr);Tr<xr;++Tr)if(Lt[Tr]!==Ut[Tr]){nr=Lt[Tr],gr=Ut[Tr];break}return nr<gr?-1:gr<nr?1:0},dt.isEncoding=function(Lt){switch(String(Lt).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},dt.concat=function(Lt,Ut){if(!Array.isArray(Lt))throw new TypeError('"list" argument must be an Array of Buffers');if(Lt.length===0)return dt.alloc(0);let nr;if(Ut===void 0)for(Ut=0,nr=0;nr<Lt.length;++nr)Ut+=Lt[nr].length;const gr=dt.allocUnsafe(Ut);let Tr=0;for(nr=0;nr<Lt.length;++nr){let xr=Lt[nr];if(Rr(xr,Uint8Array))Tr+xr.length>gr.length?(dt.isBuffer(xr)||(xr=dt.from(xr)),xr.copy(gr,Tr)):Uint8Array.prototype.set.call(gr,xr,Tr);else if(dt.isBuffer(xr))xr.copy(gr,Tr);else throw new TypeError('"list" argument must be an Array of Buffers');Tr+=xr.length}return gr};function kt(Qt,Lt){if(dt.isBuffer(Qt))return Qt.length;if(ArrayBuffer.isView(Qt)||Rr(Qt,ArrayBuffer))return Qt.byteLength;if(typeof Qt!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Qt);const Ut=Qt.length,nr=arguments.length>2&&arguments[2]===!0;if(!nr&&Ut===0)return 0;let gr=!1;for(;;)switch(Lt){case"ascii":case"latin1":case"binary":return Ut;case"utf8":case"utf-8":return Er(Qt).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ut*2;case"hex":return Ut>>>1;case"base64":return kr(Qt).length;default:if(gr)return nr?-1:Er(Qt).length;Lt=(""+Lt).toLowerCase(),gr=!0}}dt.byteLength=kt;function Dt(Qt,Lt,Ut){let nr=!1;if((Lt===void 0||Lt<0)&&(Lt=0),Lt>this.length||((Ut===void 0||Ut>this.length)&&(Ut=this.length),Ut<=0)||(Ut>>>=0,Lt>>>=0,Ut<=Lt))return"";for(Qt||(Qt="utf8");;)switch(Qt){case"hex":return wr(this,Lt,Ut);case"utf8":case"utf-8":return ar(this,Lt,Ut);case"ascii":return cr(this,Lt,Ut);case"latin1":case"binary":return sr(this,Lt,Ut);case"base64":return dr(this,Lt,Ut);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $r(this,Lt,Ut);default:if(nr)throw new TypeError("Unknown encoding: "+Qt);Qt=(Qt+"").toLowerCase(),nr=!0}}dt.prototype._isBuffer=!0;function jt(Qt,Lt,Ut){const nr=Qt[Lt];Qt[Lt]=Qt[Ut],Qt[Ut]=nr}dt.prototype.swap16=function(){const Lt=this.length;if(Lt%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ut=0;Ut<Lt;Ut+=2)jt(this,Ut,Ut+1);return this},dt.prototype.swap32=function(){const Lt=this.length;if(Lt%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ut=0;Ut<Lt;Ut+=4)jt(this,Ut,Ut+3),jt(this,Ut+1,Ut+2);return this},dt.prototype.swap64=function(){const Lt=this.length;if(Lt%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ut=0;Ut<Lt;Ut+=8)jt(this,Ut,Ut+7),jt(this,Ut+1,Ut+6),jt(this,Ut+2,Ut+5),jt(this,Ut+3,Ut+4);return this},dt.prototype.toString=function(){const Lt=this.length;return Lt===0?"":arguments.length===0?ar(this,0,Lt):Dt.apply(this,arguments)},dt.prototype.toLocaleString=dt.prototype.toString,dt.prototype.equals=function(Lt){if(!dt.isBuffer(Lt))throw new TypeError("Argument must be a Buffer");return this===Lt?!0:dt.compare(this,Lt)===0},dt.prototype.inspect=function(){let Lt="";const Ut=o.INSPECT_MAX_BYTES;return Lt=this.toString("hex",0,Ut).replace(/(.{2})/g,"$1 ").trim(),this.length>Ut&&(Lt+=" ... "),"<Buffer "+Lt+">"},et&&(dt.prototype[et]=dt.prototype.inspect),dt.prototype.compare=function(Lt,Ut,nr,gr,Tr){if(Rr(Lt,Uint8Array)&&(Lt=dt.from(Lt,Lt.offset,Lt.byteLength)),!dt.isBuffer(Lt))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Lt);if(Ut===void 0&&(Ut=0),nr===void 0&&(nr=Lt?Lt.length:0),gr===void 0&&(gr=0),Tr===void 0&&(Tr=this.length),Ut<0||nr>Lt.length||gr<0||Tr>this.length)throw new RangeError("out of range index");if(gr>=Tr&&Ut>=nr)return 0;if(gr>=Tr)return-1;if(Ut>=nr)return 1;if(Ut>>>=0,nr>>>=0,gr>>>=0,Tr>>>=0,this===Lt)return 0;let xr=Tr-gr,Hr=nr-Ut;const Xr=Math.min(xr,Hr),Cr=this.slice(gr,Tr),Or=Lt.slice(Ut,nr);for(let _r=0;_r<Xr;++_r)if(Cr[_r]!==Or[_r]){xr=Cr[_r],Hr=Or[_r];break}return xr<Hr?-1:Hr<xr?1:0};function Wt(Qt,Lt,Ut,nr,gr){if(Qt.length===0)return-1;if(typeof Ut=="string"?(nr=Ut,Ut=0):Ut>2147483647?Ut=2147483647:Ut<-2147483648&&(Ut=-2147483648),Ut=+Ut,Nr(Ut)&&(Ut=gr?0:Qt.length-1),Ut<0&&(Ut=Qt.length+Ut),Ut>=Qt.length){if(gr)return-1;Ut=Qt.length-1}else if(Ut<0)if(gr)Ut=0;else return-1;if(typeof Lt=="string"&&(Lt=dt.from(Lt,nr)),dt.isBuffer(Lt))return Lt.length===0?-1:Yt(Qt,Lt,Ut,nr,gr);if(typeof Lt=="number")return Lt=Lt&255,typeof Uint8Array.prototype.indexOf=="function"?gr?Uint8Array.prototype.indexOf.call(Qt,Lt,Ut):Uint8Array.prototype.lastIndexOf.call(Qt,Lt,Ut):Yt(Qt,[Lt],Ut,nr,gr);throw new TypeError("val must be string, number or Buffer")}function Yt(Qt,Lt,Ut,nr,gr){let Tr=1,xr=Qt.length,Hr=Lt.length;if(nr!==void 0&&(nr=String(nr).toLowerCase(),nr==="ucs2"||nr==="ucs-2"||nr==="utf16le"||nr==="utf-16le")){if(Qt.length<2||Lt.length<2)return-1;Tr=2,xr/=2,Hr/=2,Ut/=2}function Xr(Or,_r){return Tr===1?Or[_r]:Or.readUInt16BE(_r*Tr)}let Cr;if(gr){let Or=-1;for(Cr=Ut;Cr<xr;Cr++)if(Xr(Qt,Cr)===Xr(Lt,Or===-1?0:Cr-Or)){if(Or===-1&&(Or=Cr),Cr-Or+1===Hr)return Or*Tr}else Or!==-1&&(Cr-=Cr-Or),Or=-1}else for(Ut+Hr>xr&&(Ut=xr-Hr),Cr=Ut;Cr>=0;Cr--){let Or=!0;for(let _r=0;_r<Hr;_r++)if(Xr(Qt,Cr+_r)!==Xr(Lt,_r)){Or=!1;break}if(Or)return Cr}return-1}dt.prototype.includes=function(Lt,Ut,nr){return this.indexOf(Lt,Ut,nr)!==-1},dt.prototype.indexOf=function(Lt,Ut,nr){return Wt(this,Lt,Ut,nr,!0)},dt.prototype.lastIndexOf=function(Lt,Ut,nr){return Wt(this,Lt,Ut,nr,!1)};function Bt(Qt,Lt,Ut,nr){Ut=Number(Ut)||0;const gr=Qt.length-Ut;nr?(nr=Number(nr),nr>gr&&(nr=gr)):nr=gr;const Tr=Lt.length;nr>Tr/2&&(nr=Tr/2);let xr;for(xr=0;xr<nr;++xr){const Hr=parseInt(Lt.substr(xr*2,2),16);if(Nr(Hr))return xr;Qt[Ut+xr]=Hr}return xr}function zt(Qt,Lt,Ut,nr){return Ar(Er(Lt,Qt.length-Ut),Qt,Ut,nr)}function qt(Qt,Lt,Ut,nr){return Ar(Dr(Lt),Qt,Ut,nr)}function nn(Qt,Lt,Ut,nr){return Ar(kr(Lt),Qt,Ut,nr)}function Fn(Qt,Lt,Ut,nr){return Ar(br(Lt,Qt.length-Ut),Qt,Ut,nr)}dt.prototype.write=function(Lt,Ut,nr,gr){if(Ut===void 0)gr="utf8",nr=this.length,Ut=0;else if(nr===void 0&&typeof Ut=="string")gr=Ut,nr=this.length,Ut=0;else if(isFinite(Ut))Ut=Ut>>>0,isFinite(nr)?(nr=nr>>>0,gr===void 0&&(gr="utf8")):(gr=nr,nr=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Tr=this.length-Ut;if((nr===void 0||nr>Tr)&&(nr=Tr),Lt.length>0&&(nr<0||Ut<0)||Ut>this.length)throw new RangeError("Attempt to write outside buffer bounds");gr||(gr="utf8");let xr=!1;for(;;)switch(gr){case"hex":return Bt(this,Lt,Ut,nr);case"utf8":case"utf-8":return zt(this,Lt,Ut,nr);case"ascii":case"latin1":case"binary":return qt(this,Lt,Ut,nr);case"base64":return nn(this,Lt,Ut,nr);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Fn(this,Lt,Ut,nr);default:if(xr)throw new TypeError("Unknown encoding: "+gr);gr=(""+gr).toLowerCase(),xr=!0}},dt.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function dr(Qt,Lt,Ut){return Lt===0&&Ut===Qt.length?s.fromByteArray(Qt):s.fromByteArray(Qt.slice(Lt,Ut))}function ar(Qt,Lt,Ut){Ut=Math.min(Qt.length,Ut);const nr=[];let gr=Lt;for(;gr<Ut;){const Tr=Qt[gr];let xr=null,Hr=Tr>239?4:Tr>223?3:Tr>191?2:1;if(gr+Hr<=Ut){let Xr,Cr,Or,_r;switch(Hr){case 1:Tr<128&&(xr=Tr);break;case 2:Xr=Qt[gr+1],(Xr&192)===128&&(_r=(Tr&31)<<6|Xr&63,_r>127&&(xr=_r));break;case 3:Xr=Qt[gr+1],Cr=Qt[gr+2],(Xr&192)===128&&(Cr&192)===128&&(_r=(Tr&15)<<12|(Xr&63)<<6|Cr&63,_r>2047&&(_r<55296||_r>57343)&&(xr=_r));break;case 4:Xr=Qt[gr+1],Cr=Qt[gr+2],Or=Qt[gr+3],(Xr&192)===128&&(Cr&192)===128&&(Or&192)===128&&(_r=(Tr&15)<<18|(Xr&63)<<12|(Cr&63)<<6|Or&63,_r>65535&&_r<1114112&&(xr=_r))}}xr===null?(xr=65533,Hr=1):xr>65535&&(xr-=65536,nr.push(xr>>>10&1023|55296),xr=56320|xr&1023),nr.push(xr),gr+=Hr}return mr(nr)}const pr=4096;function mr(Qt){const Lt=Qt.length;if(Lt<=pr)return String.fromCharCode.apply(String,Qt);let Ut="",nr=0;for(;nr<Lt;)Ut+=String.fromCharCode.apply(String,Qt.slice(nr,nr+=pr));return Ut}function cr(Qt,Lt,Ut){let nr="";Ut=Math.min(Qt.length,Ut);for(let gr=Lt;gr<Ut;++gr)nr+=String.fromCharCode(Qt[gr]&127);return nr}function sr(Qt,Lt,Ut){let nr="";Ut=Math.min(Qt.length,Ut);for(let gr=Lt;gr<Ut;++gr)nr+=String.fromCharCode(Qt[gr]);return nr}function wr(Qt,Lt,Ut){const nr=Qt.length;(!Lt||Lt<0)&&(Lt=0),(!Ut||Ut<0||Ut>nr)&&(Ut=nr);let gr="";for(let Tr=Lt;Tr<Ut;++Tr)gr+=Mn[Qt[Tr]];return gr}function $r(Qt,Lt,Ut){const nr=Qt.slice(Lt,Ut);let gr="";for(let Tr=0;Tr<nr.length-1;Tr+=2)gr+=String.fromCharCode(nr[Tr]+nr[Tr+1]*256);return gr}dt.prototype.slice=function(Lt,Ut){const nr=this.length;Lt=~~Lt,Ut=Ut===void 0?nr:~~Ut,Lt<0?(Lt+=nr,Lt<0&&(Lt=0)):Lt>nr&&(Lt=nr),Ut<0?(Ut+=nr,Ut<0&&(Ut=0)):Ut>nr&&(Ut=nr),Ut<Lt&&(Ut=Lt);const gr=this.subarray(Lt,Ut);return Object.setPrototypeOf(gr,dt.prototype),gr};function Sr(Qt,Lt,Ut){if(Qt%1!==0||Qt<0)throw new RangeError("offset is not uint");if(Qt+Lt>Ut)throw new RangeError("Trying to access beyond buffer length")}dt.prototype.readUintLE=dt.prototype.readUIntLE=function(Lt,Ut,nr){Lt=Lt>>>0,Ut=Ut>>>0,nr||Sr(Lt,Ut,this.length);let gr=this[Lt],Tr=1,xr=0;for(;++xr<Ut&&(Tr*=256);)gr+=this[Lt+xr]*Tr;return gr},dt.prototype.readUintBE=dt.prototype.readUIntBE=function(Lt,Ut,nr){Lt=Lt>>>0,Ut=Ut>>>0,nr||Sr(Lt,Ut,this.length);let gr=this[Lt+--Ut],Tr=1;for(;Ut>0&&(Tr*=256);)gr+=this[Lt+--Ut]*Tr;return gr},dt.prototype.readUint8=dt.prototype.readUInt8=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,1,this.length),this[Lt]},dt.prototype.readUint16LE=dt.prototype.readUInt16LE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,2,this.length),this[Lt]|this[Lt+1]<<8},dt.prototype.readUint16BE=dt.prototype.readUInt16BE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,2,this.length),this[Lt]<<8|this[Lt+1]},dt.prototype.readUint32LE=dt.prototype.readUInt32LE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),(this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16)+this[Lt+3]*16777216},dt.prototype.readUint32BE=dt.prototype.readUInt32BE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),this[Lt]*16777216+(this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3])},dt.prototype.readBigUInt64LE=Ir(function(Lt){Lt=Lt>>>0,Zt(Lt,"offset");const Ut=this[Lt],nr=this[Lt+7];(Ut===void 0||nr===void 0)&&tn(Lt,this.length-8);const gr=Ut+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24,Tr=this[++Lt]+this[++Lt]*2**8+this[++Lt]*2**16+nr*2**24;return BigInt(gr)+(BigInt(Tr)<<BigInt(32))}),dt.prototype.readBigUInt64BE=Ir(function(Lt){Lt=Lt>>>0,Zt(Lt,"offset");const Ut=this[Lt],nr=this[Lt+7];(Ut===void 0||nr===void 0)&&tn(Lt,this.length-8);const gr=Ut*2**24+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt],Tr=this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+nr;return(BigInt(gr)<<BigInt(32))+BigInt(Tr)}),dt.prototype.readIntLE=function(Lt,Ut,nr){Lt=Lt>>>0,Ut=Ut>>>0,nr||Sr(Lt,Ut,this.length);let gr=this[Lt],Tr=1,xr=0;for(;++xr<Ut&&(Tr*=256);)gr+=this[Lt+xr]*Tr;return Tr*=128,gr>=Tr&&(gr-=Math.pow(2,8*Ut)),gr},dt.prototype.readIntBE=function(Lt,Ut,nr){Lt=Lt>>>0,Ut=Ut>>>0,nr||Sr(Lt,Ut,this.length);let gr=Ut,Tr=1,xr=this[Lt+--gr];for(;gr>0&&(Tr*=256);)xr+=this[Lt+--gr]*Tr;return Tr*=128,xr>=Tr&&(xr-=Math.pow(2,8*Ut)),xr},dt.prototype.readInt8=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,1,this.length),this[Lt]&128?(255-this[Lt]+1)*-1:this[Lt]},dt.prototype.readInt16LE=function(Lt,Ut){Lt=Lt>>>0,Ut||Sr(Lt,2,this.length);const nr=this[Lt]|this[Lt+1]<<8;return nr&32768?nr|4294901760:nr},dt.prototype.readInt16BE=function(Lt,Ut){Lt=Lt>>>0,Ut||Sr(Lt,2,this.length);const nr=this[Lt+1]|this[Lt]<<8;return nr&32768?nr|4294901760:nr},dt.prototype.readInt32LE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),this[Lt]|this[Lt+1]<<8|this[Lt+2]<<16|this[Lt+3]<<24},dt.prototype.readInt32BE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),this[Lt]<<24|this[Lt+1]<<16|this[Lt+2]<<8|this[Lt+3]},dt.prototype.readBigInt64LE=Ir(function(Lt){Lt=Lt>>>0,Zt(Lt,"offset");const Ut=this[Lt],nr=this[Lt+7];(Ut===void 0||nr===void 0)&&tn(Lt,this.length-8);const gr=this[Lt+4]+this[Lt+5]*2**8+this[Lt+6]*2**16+(nr<<24);return(BigInt(gr)<<BigInt(32))+BigInt(Ut+this[++Lt]*2**8+this[++Lt]*2**16+this[++Lt]*2**24)}),dt.prototype.readBigInt64BE=Ir(function(Lt){Lt=Lt>>>0,Zt(Lt,"offset");const Ut=this[Lt],nr=this[Lt+7];(Ut===void 0||nr===void 0)&&tn(Lt,this.length-8);const gr=(Ut<<24)+this[++Lt]*2**16+this[++Lt]*2**8+this[++Lt];return(BigInt(gr)<<BigInt(32))+BigInt(this[++Lt]*2**24+this[++Lt]*2**16+this[++Lt]*2**8+nr)}),dt.prototype.readFloatLE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),a.read(this,Lt,!0,23,4)},dt.prototype.readFloatBE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,4,this.length),a.read(this,Lt,!1,23,4)},dt.prototype.readDoubleLE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,8,this.length),a.read(this,Lt,!0,52,8)},dt.prototype.readDoubleBE=function(Lt,Ut){return Lt=Lt>>>0,Ut||Sr(Lt,8,this.length),a.read(this,Lt,!1,52,8)};function en(Qt,Lt,Ut,nr,gr,Tr){if(!dt.isBuffer(Qt))throw new TypeError('"buffer" argument must be a Buffer instance');if(Lt>gr||Lt<Tr)throw new RangeError('"value" argument is out of bounds');if(Ut+nr>Qt.length)throw new RangeError("Index out of range")}dt.prototype.writeUintLE=dt.prototype.writeUIntLE=function(Lt,Ut,nr,gr){if(Lt=+Lt,Ut=Ut>>>0,nr=nr>>>0,!gr){const Hr=Math.pow(2,8*nr)-1;en(this,Lt,Ut,nr,Hr,0)}let Tr=1,xr=0;for(this[Ut]=Lt&255;++xr<nr&&(Tr*=256);)this[Ut+xr]=Lt/Tr&255;return Ut+nr},dt.prototype.writeUintBE=dt.prototype.writeUIntBE=function(Lt,Ut,nr,gr){if(Lt=+Lt,Ut=Ut>>>0,nr=nr>>>0,!gr){const Hr=Math.pow(2,8*nr)-1;en(this,Lt,Ut,nr,Hr,0)}let Tr=nr-1,xr=1;for(this[Ut+Tr]=Lt&255;--Tr>=0&&(xr*=256);)this[Ut+Tr]=Lt/xr&255;return Ut+nr},dt.prototype.writeUint8=dt.prototype.writeUInt8=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,1,255,0),this[Ut]=Lt&255,Ut+1},dt.prototype.writeUint16LE=dt.prototype.writeUInt16LE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,2,65535,0),this[Ut]=Lt&255,this[Ut+1]=Lt>>>8,Ut+2},dt.prototype.writeUint16BE=dt.prototype.writeUInt16BE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,2,65535,0),this[Ut]=Lt>>>8,this[Ut+1]=Lt&255,Ut+2},dt.prototype.writeUint32LE=dt.prototype.writeUInt32LE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,4,4294967295,0),this[Ut+3]=Lt>>>24,this[Ut+2]=Lt>>>16,this[Ut+1]=Lt>>>8,this[Ut]=Lt&255,Ut+4},dt.prototype.writeUint32BE=dt.prototype.writeUInt32BE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,4,4294967295,0),this[Ut]=Lt>>>24,this[Ut+1]=Lt>>>16,this[Ut+2]=Lt>>>8,this[Ut+3]=Lt&255,Ut+4};function Kt(Qt,Lt,Ut,nr,gr){Xt(Lt,nr,gr,Qt,Ut,7);let Tr=Number(Lt&BigInt(4294967295));Qt[Ut++]=Tr,Tr=Tr>>8,Qt[Ut++]=Tr,Tr=Tr>>8,Qt[Ut++]=Tr,Tr=Tr>>8,Qt[Ut++]=Tr;let xr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Qt[Ut++]=xr,xr=xr>>8,Qt[Ut++]=xr,xr=xr>>8,Qt[Ut++]=xr,xr=xr>>8,Qt[Ut++]=xr,Ut}function Gt(Qt,Lt,Ut,nr,gr){Xt(Lt,nr,gr,Qt,Ut,7);let Tr=Number(Lt&BigInt(4294967295));Qt[Ut+7]=Tr,Tr=Tr>>8,Qt[Ut+6]=Tr,Tr=Tr>>8,Qt[Ut+5]=Tr,Tr=Tr>>8,Qt[Ut+4]=Tr;let xr=Number(Lt>>BigInt(32)&BigInt(4294967295));return Qt[Ut+3]=xr,xr=xr>>8,Qt[Ut+2]=xr,xr=xr>>8,Qt[Ut+1]=xr,xr=xr>>8,Qt[Ut]=xr,Ut+8}dt.prototype.writeBigUInt64LE=Ir(function(Lt,Ut=0){return Kt(this,Lt,Ut,BigInt(0),BigInt("0xffffffffffffffff"))}),dt.prototype.writeBigUInt64BE=Ir(function(Lt,Ut=0){return Gt(this,Lt,Ut,BigInt(0),BigInt("0xffffffffffffffff"))}),dt.prototype.writeIntLE=function(Lt,Ut,nr,gr){if(Lt=+Lt,Ut=Ut>>>0,!gr){const Xr=Math.pow(2,8*nr-1);en(this,Lt,Ut,nr,Xr-1,-Xr)}let Tr=0,xr=1,Hr=0;for(this[Ut]=Lt&255;++Tr<nr&&(xr*=256);)Lt<0&&Hr===0&&this[Ut+Tr-1]!==0&&(Hr=1),this[Ut+Tr]=(Lt/xr>>0)-Hr&255;return Ut+nr},dt.prototype.writeIntBE=function(Lt,Ut,nr,gr){if(Lt=+Lt,Ut=Ut>>>0,!gr){const Xr=Math.pow(2,8*nr-1);en(this,Lt,Ut,nr,Xr-1,-Xr)}let Tr=nr-1,xr=1,Hr=0;for(this[Ut+Tr]=Lt&255;--Tr>=0&&(xr*=256);)Lt<0&&Hr===0&&this[Ut+Tr+1]!==0&&(Hr=1),this[Ut+Tr]=(Lt/xr>>0)-Hr&255;return Ut+nr},dt.prototype.writeInt8=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,1,127,-128),Lt<0&&(Lt=255+Lt+1),this[Ut]=Lt&255,Ut+1},dt.prototype.writeInt16LE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,2,32767,-32768),this[Ut]=Lt&255,this[Ut+1]=Lt>>>8,Ut+2},dt.prototype.writeInt16BE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,2,32767,-32768),this[Ut]=Lt>>>8,this[Ut+1]=Lt&255,Ut+2},dt.prototype.writeInt32LE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,4,2147483647,-2147483648),this[Ut]=Lt&255,this[Ut+1]=Lt>>>8,this[Ut+2]=Lt>>>16,this[Ut+3]=Lt>>>24,Ut+4},dt.prototype.writeInt32BE=function(Lt,Ut,nr){return Lt=+Lt,Ut=Ut>>>0,nr||en(this,Lt,Ut,4,2147483647,-2147483648),Lt<0&&(Lt=4294967295+Lt+1),this[Ut]=Lt>>>24,this[Ut+1]=Lt>>>16,this[Ut+2]=Lt>>>8,this[Ut+3]=Lt&255,Ut+4},dt.prototype.writeBigInt64LE=Ir(function(Lt,Ut=0){return Kt(this,Lt,Ut,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),dt.prototype.writeBigInt64BE=Ir(function(Lt,Ut=0){return Gt(this,Lt,Ut,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function mn(Qt,Lt,Ut,nr,gr,Tr){if(Ut+nr>Qt.length)throw new RangeError("Index out of range");if(Ut<0)throw new RangeError("Index out of range")}function Jt(Qt,Lt,Ut,nr,gr){return Lt=+Lt,Ut=Ut>>>0,gr||mn(Qt,Lt,Ut,4),a.write(Qt,Lt,Ut,nr,23,4),Ut+4}dt.prototype.writeFloatLE=function(Lt,Ut,nr){return Jt(this,Lt,Ut,!0,nr)},dt.prototype.writeFloatBE=function(Lt,Ut,nr){return Jt(this,Lt,Ut,!1,nr)};function rr(Qt,Lt,Ut,nr,gr){return Lt=+Lt,Ut=Ut>>>0,gr||mn(Qt,Lt,Ut,8),a.write(Qt,Lt,Ut,nr,52,8),Ut+8}dt.prototype.writeDoubleLE=function(Lt,Ut,nr){return rr(this,Lt,Ut,!0,nr)},dt.prototype.writeDoubleBE=function(Lt,Ut,nr){return rr(this,Lt,Ut,!1,nr)},dt.prototype.copy=function(Lt,Ut,nr,gr){if(!dt.isBuffer(Lt))throw new TypeError("argument should be a Buffer");if(nr||(nr=0),!gr&&gr!==0&&(gr=this.length),Ut>=Lt.length&&(Ut=Lt.length),Ut||(Ut=0),gr>0&&gr<nr&&(gr=nr),gr===nr||Lt.length===0||this.length===0)return 0;if(Ut<0)throw new RangeError("targetStart out of bounds");if(nr<0||nr>=this.length)throw new RangeError("Index out of range");if(gr<0)throw new RangeError("sourceEnd out of bounds");gr>this.length&&(gr=this.length),Lt.length-Ut<gr-nr&&(gr=Lt.length-Ut+nr);const Tr=gr-nr;return this===Lt&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Ut,nr,gr):Uint8Array.prototype.set.call(Lt,this.subarray(nr,gr),Ut),Tr},dt.prototype.fill=function(Lt,Ut,nr,gr){if(typeof Lt=="string"){if(typeof Ut=="string"?(gr=Ut,Ut=0,nr=this.length):typeof nr=="string"&&(gr=nr,nr=this.length),gr!==void 0&&typeof gr!="string")throw new TypeError("encoding must be a string");if(typeof gr=="string"&&!dt.isEncoding(gr))throw new TypeError("Unknown encoding: "+gr);if(Lt.length===1){const xr=Lt.charCodeAt(0);(gr==="utf8"&&xr<128||gr==="latin1")&&(Lt=xr)}}else typeof Lt=="number"?Lt=Lt&255:typeof Lt=="boolean"&&(Lt=Number(Lt));if(Ut<0||this.length<Ut||this.length<nr)throw new RangeError("Out of range index");if(nr<=Ut)return this;Ut=Ut>>>0,nr=nr===void 0?this.length:nr>>>0,Lt||(Lt=0);let Tr;if(typeof Lt=="number")for(Tr=Ut;Tr<nr;++Tr)this[Tr]=Lt;else{const xr=dt.isBuffer(Lt)?Lt:dt.from(Lt,gr),Hr=xr.length;if(Hr===0)throw new TypeError('The value "'+Lt+'" is invalid for argument "value"');for(Tr=0;Tr<nr-Ut;++Tr)this[Tr+Ut]=xr[Tr%Hr]}return this};const Tn={};function fr(Qt,Lt,Ut){Tn[Qt]=class extends Ut{constructor(){super(),Object.defineProperty(this,"message",{value:Lt.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Qt}]`,this.stack,delete this.name}get code(){return Qt}set code(gr){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:gr,writable:!0})}toString(){return`${this.name} [${Qt}]: ${this.message}`}}}fr("ERR_BUFFER_OUT_OF_BOUNDS",function(Qt){return Qt?`${Qt} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),fr("ERR_INVALID_ARG_TYPE",function(Qt,Lt){return`The "${Qt}" argument must be of type number. Received type ${typeof Lt}`},TypeError),fr("ERR_OUT_OF_RANGE",function(Qt,Lt,Ut){let nr=`The value of "${Qt}" is out of range.`,gr=Ut;return Number.isInteger(Ut)&&Math.abs(Ut)>2**32?gr=ur(String(Ut)):typeof Ut=="bigint"&&(gr=String(Ut),(Ut>BigInt(2)**BigInt(32)||Ut<-(BigInt(2)**BigInt(32)))&&(gr=ur(gr)),gr+="n"),nr+=` It must be ${Lt}. Received ${gr}`,nr},RangeError);function ur(Qt){let Lt="",Ut=Qt.length;const nr=Qt[0]==="-"?1:0;for(;Ut>=nr+4;Ut-=3)Lt=`_${Qt.slice(Ut-3,Ut)}${Lt}`;return`${Qt.slice(0,Ut)}${Lt}`}function Ht(Qt,Lt,Ut){Zt(Lt,"offset"),(Qt[Lt]===void 0||Qt[Lt+Ut]===void 0)&&tn(Lt,Qt.length-(Ut+1))}function Xt(Qt,Lt,Ut,nr,gr,Tr){if(Qt>Ut||Qt<Lt){const xr=typeof Lt=="bigint"?"n":"";let Hr;throw Tr>3?Lt===0||Lt===BigInt(0)?Hr=`>= 0${xr} and < 2${xr} ** ${(Tr+1)*8}${xr}`:Hr=`>= -(2${xr} ** ${(Tr+1)*8-1}${xr}) and < 2 ** ${(Tr+1)*8-1}${xr}`:Hr=`>= ${Lt}${xr} and <= ${Ut}${xr}`,new Tn.ERR_OUT_OF_RANGE("value",Hr,Qt)}Ht(nr,gr,Tr)}function Zt(Qt,Lt){if(typeof Qt!="number")throw new Tn.ERR_INVALID_ARG_TYPE(Lt,"number",Qt)}function tn(Qt,Lt,Ut){throw Math.floor(Qt)!==Qt?(Zt(Qt,Ut),new Tn.ERR_OUT_OF_RANGE(Ut||"offset","an integer",Qt)):Lt<0?new Tn.ERR_BUFFER_OUT_OF_BOUNDS:new Tn.ERR_OUT_OF_RANGE(Ut||"offset",`>= ${Ut?1:0} and <= ${Lt}`,Qt)}const $n=/[^+/0-9A-Za-z-_]/g;function lr(Qt){if(Qt=Qt.split("=")[0],Qt=Qt.trim().replace($n,""),Qt.length<2)return"";for(;Qt.length%4!==0;)Qt=Qt+"=";return Qt}function Er(Qt,Lt){Lt=Lt||1/0;let Ut;const nr=Qt.length;let gr=null;const Tr=[];for(let xr=0;xr<nr;++xr){if(Ut=Qt.charCodeAt(xr),Ut>55295&&Ut<57344){if(!gr){if(Ut>56319){(Lt-=3)>-1&&Tr.push(239,191,189);continue}else if(xr+1===nr){(Lt-=3)>-1&&Tr.push(239,191,189);continue}gr=Ut;continue}if(Ut<56320){(Lt-=3)>-1&&Tr.push(239,191,189),gr=Ut;continue}Ut=(gr-55296<<10|Ut-56320)+65536}else gr&&(Lt-=3)>-1&&Tr.push(239,191,189);if(gr=null,Ut<128){if((Lt-=1)<0)break;Tr.push(Ut)}else if(Ut<2048){if((Lt-=2)<0)break;Tr.push(Ut>>6|192,Ut&63|128)}else if(Ut<65536){if((Lt-=3)<0)break;Tr.push(Ut>>12|224,Ut>>6&63|128,Ut&63|128)}else if(Ut<1114112){if((Lt-=4)<0)break;Tr.push(Ut>>18|240,Ut>>12&63|128,Ut>>6&63|128,Ut&63|128)}else throw new Error("Invalid code point")}return Tr}function Dr(Qt){const Lt=[];for(let Ut=0;Ut<Qt.length;++Ut)Lt.push(Qt.charCodeAt(Ut)&255);return Lt}function br(Qt,Lt){let Ut,nr,gr;const Tr=[];for(let xr=0;xr<Qt.length&&!((Lt-=2)<0);++xr)Ut=Qt.charCodeAt(xr),nr=Ut>>8,gr=Ut%256,Tr.push(gr),Tr.push(nr);return Tr}function kr(Qt){return s.toByteArray(lr(Qt))}function Ar(Qt,Lt,Ut,nr){let gr;for(gr=0;gr<nr&&!(gr+Ut>=Lt.length||gr>=Qt.length);++gr)Lt[gr+Ut]=Qt[gr];return gr}function Rr(Qt,Lt){return Qt instanceof Lt||Qt!=null&&Qt.constructor!=null&&Qt.constructor.name!=null&&Qt.constructor.name===Lt.name}function Nr(Qt){return Qt!==Qt}const Mn=function(){const Qt="0123456789abcdef",Lt=new Array(256);for(let Ut=0;Ut<16;++Ut){const nr=Ut*16;for(let gr=0;gr<16;++gr)Lt[nr+gr]=Qt[Ut]+Qt[gr]}return Lt}();function Ir(Qt){return typeof BigInt>"u"?zr:Qt}function zr(){throw new Error("BigInt not supported")}})(buffer);const{Buffer:Buffer$1}=buffer,symbol=Symbol.for("BufferList");function BufferList(o){if(!(this instanceof BufferList))return new BufferList(o);BufferList._init.call(this,o)}BufferList._init=function o(s){Object.defineProperty(this,symbol,{value:!0}),this._bufs=[],this.length=0,s&&this.append(s)};BufferList.prototype._new=function o(s){return new BufferList(s)};BufferList.prototype._offset=function o(s){if(s===0)return[0,0];let a=0;for(let et=0;et<this._bufs.length;et++){const at=a+this._bufs[et].length;if(s<at||et===this._bufs.length-1)return[et,s-a];a=at}};BufferList.prototype._reverseOffset=function(o){const s=o[0];let a=o[1];for(let et=0;et<s;et++)a+=this._bufs[et].length;return a};BufferList.prototype.get=function o(s){if(s>this.length||s<0)return;const a=this._offset(s);return this._bufs[a[0]][a[1]]};BufferList.prototype.slice=function o(s,a){return typeof s=="number"&&s<0&&(s+=this.length),typeof a=="number"&&a<0&&(a+=this.length),this.copy(null,0,s,a)};BufferList.prototype.copy=function o(s,a,et,at){if((typeof et!="number"||et<0)&&(et=0),(typeof at!="number"||at>this.length)&&(at=this.length),et>=this.length||at<=0)return s||Buffer$1.alloc(0);const lt=!!s,ht=this._offset(et),dt=at-et;let ft=dt,vt=lt&&a||0,wt=ht[1];if(et===0&&at===this.length){if(!lt)return this._bufs.length===1?this._bufs[0]:Buffer$1.concat(this._bufs,this.length);for(let Ct=0;Ct<this._bufs.length;Ct++)this._bufs[Ct].copy(s,vt),vt+=this._bufs[Ct].length;return s}if(ft<=this._bufs[ht[0]].length-wt)return lt?this._bufs[ht[0]].copy(s,a,wt,wt+ft):this._bufs[ht[0]].slice(wt,wt+ft);lt||(s=Buffer$1.allocUnsafe(dt));for(let Ct=ht[0];Ct<this._bufs.length;Ct++){const xt=this._bufs[Ct].length-wt;if(ft>xt)this._bufs[Ct].copy(s,vt,wt),vt+=xt;else{this._bufs[Ct].copy(s,vt,wt,wt+ft),vt+=xt;break}ft-=xt,wt&&(wt=0)}return s.length>vt?s.slice(0,vt):s};BufferList.prototype.shallowSlice=function o(s,a){if(s=s||0,a=typeof a!="number"?this.length:a,s<0&&(s+=this.length),a<0&&(a+=this.length),s===a)return this._new();const et=this._offset(s),at=this._offset(a),lt=this._bufs.slice(et[0],at[0]+1);return at[1]===0?lt.pop():lt[lt.length-1]=lt[lt.length-1].slice(0,at[1]),et[1]!==0&&(lt[0]=lt[0].slice(et[1])),this._new(lt)};BufferList.prototype.toString=function o(s,a,et){return this.slice(a,et).toString(s)};BufferList.prototype.consume=function o(s){if(s=Math.trunc(s),Number.isNaN(s)||s<=0)return this;for(;this._bufs.length;)if(s>=this._bufs[0].length)s-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(s),this.length-=s;break}return this};BufferList.prototype.duplicate=function o(){const s=this._new();for(let a=0;a<this._bufs.length;a++)s.append(this._bufs[a]);return s};BufferList.prototype.append=function o(s){if(s==null)return this;if(s.buffer)this._appendBuffer(Buffer$1.from(s.buffer,s.byteOffset,s.byteLength));else if(Array.isArray(s))for(let a=0;a<s.length;a++)this.append(s[a]);else if(this._isBufferList(s))for(let a=0;a<s._bufs.length;a++)this.append(s._bufs[a]);else typeof s=="number"&&(s=s.toString()),this._appendBuffer(Buffer$1.from(s));return this};BufferList.prototype._appendBuffer=function o(s){this._bufs.push(s),this.length+=s.length};BufferList.prototype.indexOf=function(o,s,a){if(a===void 0&&typeof s=="string"&&(a=s,s=void 0),typeof o=="function"||Array.isArray(o))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof o=="number"?o=Buffer$1.from([o]):typeof o=="string"?o=Buffer$1.from(o,a):this._isBufferList(o)?o=o.slice():Array.isArray(o.buffer)?o=Buffer$1.from(o.buffer,o.byteOffset,o.byteLength):Buffer$1.isBuffer(o)||(o=Buffer$1.from(o)),s=Number(s||0),isNaN(s)&&(s=0),s<0&&(s=this.length+s),s<0&&(s=0),o.length===0)return s>this.length?this.length:s;const et=this._offset(s);let at=et[0],lt=et[1];for(;at<this._bufs.length;at++){const ht=this._bufs[at];for(;lt<ht.length;)if(ht.length-lt>=o.length){const ft=ht.indexOf(o,lt);if(ft!==-1)return this._reverseOffset([at,ft]);lt=ht.length-o.length+1}else{const ft=this._reverseOffset([at,lt]);if(this._match(ft,o))return ft;lt++}lt=0}return-1};BufferList.prototype._match=function(o,s){if(this.length-o<s.length)return!1;for(let a=0;a<s.length;a++)if(this.get(o+a)!==s[a])return!1;return!0};(function(){const o={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const s in o)(function(a){o[a]===null?BufferList.prototype[a]=function(et,at){return this.slice(et,et+at)[a](0,at)}:BufferList.prototype[a]=function(et=0){return this.slice(et,et+o[a])[a](0)}})(s)})();BufferList.prototype._isBufferList=function o(s){return s instanceof BufferList||BufferList.isBufferList(s)};BufferList.isBufferList=function o(s){return s!=null&&s[symbol]};var BufferList_1=BufferList;let Rabin$1=class{constructor(s,a=12,et=8*1024,at=32*1024,lt=64,ht){this.bits=a,this.min=et,this.max=at,this.asModule=s,this.rabin=new s.Rabin(a,et,at,lt,ht),this.polynomial=ht}fingerprint(s){const{__retain:a,__release:et,__allocArray:at,__getInt32Array:lt,Int32Array_ID:ht,Uint8Array_ID:dt}=this.asModule,ft=new Int32Array(Math.ceil(s.length/this.min)),vt=a(at(ht,ft)),wt=a(at(dt,s)),Ct=this.rabin.fingerprint(wt,vt),xt=lt(Ct);et(wt),et(vt);const Pt=xt.indexOf(0);return Pt>=0?xt.subarray(0,Pt):xt}};var rabin$1=Rabin$1,loader={};const ID_OFFSET=-8,SIZE_OFFSET=-4,ARRAYBUFFER_ID=0,STRING_ID=1,ARRAYBUFFERVIEW=1<<0,ARRAY=1<<1,VAL_ALIGN_OFFSET=5,VAL_SIGNED=1<<10,VAL_FLOAT=1<<11,VAL_MANAGED=1<<13,ARRAYBUFFERVIEW_BUFFER_OFFSET=0,ARRAYBUFFERVIEW_DATASTART_OFFSET=4,ARRAYBUFFERVIEW_DATALENGTH_OFFSET=8,ARRAYBUFFERVIEW_SIZE=12,ARRAY_LENGTH_OFFSET=12,ARRAY_SIZE=16,BIGINT=typeof BigUint64Array<"u",THIS=Symbol(),CHUNKSIZE=1024;function getStringImpl(o,s){const a=new Uint32Array(o),et=new Uint16Array(o);var at=a[s+SIZE_OFFSET>>>2]>>>1,lt=s>>>1;if(at<=CHUNKSIZE)return String.fromCharCode.apply(String,et.subarray(lt,lt+at));const ht=[];do{const dt=et[lt+CHUNKSIZE-1],ft=dt>=55296&&dt<56320?CHUNKSIZE-1:CHUNKSIZE;ht.push(String.fromCharCode.apply(String,et.subarray(lt,lt+=ft))),at-=ft}while(at>CHUNKSIZE);return ht.join("")+String.fromCharCode.apply(String,et.subarray(lt,lt+at))}function preInstantiate(o){const s={};function a(at,lt){return at?getStringImpl(at.buffer,lt):"<yet unknown>"}const et=o.env=o.env||{};return et.abort=et.abort||function(lt,ht,dt,ft){const vt=s.memory||et.memory;throw Error("abort: "+a(vt,lt)+" at "+a(vt,ht)+":"+dt+":"+ft)},et.trace=et.trace||function(lt,ht){const dt=s.memory||et.memory;console.log("trace: "+a(dt,lt)+(ht?" ":"")+Array.prototype.slice.call(arguments,2,2+ht).join(", "))},o.Math=o.Math||Math,o.Date=o.Date||Date,s}function postInstantiate(o,s){const a=s.exports,et=a.memory,at=a.table,lt=a.__alloc,ht=a.__retain,dt=a.__rtti_base||-1;function ft(jt){const Wt=new Uint32Array(et.buffer),Yt=Wt[dt>>>2];if((jt>>>=0)>=Yt)throw Error("invalid id: "+jt);return Wt[(dt+4>>>2)+jt*2]}function vt(jt){const Wt=new Uint32Array(et.buffer),Yt=Wt[dt>>>2];if((jt>>>=0)>=Yt)throw Error("invalid id: "+jt);return Wt[(dt+4>>>2)+jt*2+1]}function wt(jt){return 31-Math.clz32(jt>>>VAL_ALIGN_OFFSET&31)}function Ct(jt){const Wt=jt.length,Yt=lt(Wt<<1,STRING_ID),Bt=new Uint16Array(et.buffer);for(var zt=0,qt=Yt>>>1;zt<Wt;++zt)Bt[qt+zt]=jt.charCodeAt(zt);return Yt}o.__allocString=Ct;function xt(jt){const Wt=et.buffer;if(new Uint32Array(Wt)[jt+ID_OFFSET>>>2]!==STRING_ID)throw Error("not a string: "+jt);return getStringImpl(Wt,jt)}o.__getString=xt;function Pt(jt,Wt,Yt){const Bt=et.buffer;if(Yt)switch(jt){case 2:return new Float32Array(Bt);case 3:return new Float64Array(Bt)}else switch(jt){case 0:return new(Wt?Int8Array:Uint8Array)(Bt);case 1:return new(Wt?Int16Array:Uint16Array)(Bt);case 2:return new(Wt?Int32Array:Uint32Array)(Bt);case 3:return new(Wt?BigInt64Array:BigUint64Array)(Bt)}throw Error("unsupported align: "+jt)}function Rt(jt,Wt){const Yt=ft(jt);if(!(Yt&(ARRAYBUFFERVIEW|ARRAY)))throw Error("not an array: "+jt+" @ "+Yt);const Bt=wt(Yt),zt=Wt.length,qt=lt(zt<<Bt,ARRAYBUFFER_ID),nn=lt(Yt&ARRAY?ARRAY_SIZE:ARRAYBUFFERVIEW_SIZE,jt),Fn=new Uint32Array(et.buffer);Fn[nn+ARRAYBUFFERVIEW_BUFFER_OFFSET>>>2]=ht(qt),Fn[nn+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2]=qt,Fn[nn+ARRAYBUFFERVIEW_DATALENGTH_OFFSET>>>2]=zt<<Bt,Yt&ARRAY&&(Fn[nn+ARRAY_LENGTH_OFFSET>>>2]=zt);const dr=Pt(Bt,Yt&VAL_SIGNED,Yt&VAL_FLOAT);if(Yt&VAL_MANAGED)for(let ar=0;ar<zt;++ar)dr[(qt>>>Bt)+ar]=ht(Wt[ar]);else dr.set(Wt,qt>>>Bt);return nn}o.__allocArray=Rt;function _t(jt){const Wt=new Uint32Array(et.buffer),Yt=Wt[jt+ID_OFFSET>>>2],Bt=ft(Yt);if(!(Bt&ARRAYBUFFERVIEW))throw Error("not an array: "+Yt);const zt=wt(Bt);var qt=Wt[jt+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];const nn=Bt&ARRAY?Wt[jt+ARRAY_LENGTH_OFFSET>>>2]:Wt[qt+SIZE_OFFSET>>>2]>>>zt;return Pt(zt,Bt&VAL_SIGNED,Bt&VAL_FLOAT).subarray(qt>>>=zt,qt+nn)}o.__getArrayView=_t;function St(jt){const Wt=_t(jt),Yt=Wt.length,Bt=new Array(Yt);for(let zt=0;zt<Yt;zt++)Bt[zt]=Wt[zt];return Bt}o.__getArray=St;function bt(jt){const Wt=et.buffer,Yt=new Uint32Array(Wt)[jt+SIZE_OFFSET>>>2];return Wt.slice(jt,jt+Yt)}o.__getArrayBuffer=bt;function Nt(jt,Wt,Yt){return new jt(kt(jt,Wt,Yt))}function kt(jt,Wt,Yt){const Bt=et.buffer,zt=new Uint32Array(Bt),qt=zt[Yt+ARRAYBUFFERVIEW_DATASTART_OFFSET>>>2];return new jt(Bt,qt,zt[qt+SIZE_OFFSET>>>2]>>>Wt)}o.__getInt8Array=Nt.bind(null,Int8Array,0),o.__getInt8ArrayView=kt.bind(null,Int8Array,0),o.__getUint8Array=Nt.bind(null,Uint8Array,0),o.__getUint8ArrayView=kt.bind(null,Uint8Array,0),o.__getUint8ClampedArray=Nt.bind(null,Uint8ClampedArray,0),o.__getUint8ClampedArrayView=kt.bind(null,Uint8ClampedArray,0),o.__getInt16Array=Nt.bind(null,Int16Array,1),o.__getInt16ArrayView=kt.bind(null,Int16Array,1),o.__getUint16Array=Nt.bind(null,Uint16Array,1),o.__getUint16ArrayView=kt.bind(null,Uint16Array,1),o.__getInt32Array=Nt.bind(null,Int32Array,2),o.__getInt32ArrayView=kt.bind(null,Int32Array,2),o.__getUint32Array=Nt.bind(null,Uint32Array,2),o.__getUint32ArrayView=kt.bind(null,Uint32Array,2),BIGINT&&(o.__getInt64Array=Nt.bind(null,BigInt64Array,3),o.__getInt64ArrayView=kt.bind(null,BigInt64Array,3),o.__getUint64Array=Nt.bind(null,BigUint64Array,3),o.__getUint64ArrayView=kt.bind(null,BigUint64Array,3)),o.__getFloat32Array=Nt.bind(null,Float32Array,2),o.__getFloat32ArrayView=kt.bind(null,Float32Array,2),o.__getFloat64Array=Nt.bind(null,Float64Array,3),o.__getFloat64ArrayView=kt.bind(null,Float64Array,3);function Dt(jt,Wt){const Yt=new Uint32Array(et.buffer);var Bt=Yt[jt+ID_OFFSET>>>2];if(Bt<=Yt[dt>>>2])do if(Bt==Wt)return!0;while(Bt=vt(Bt));return!1}return o.__instanceof=Dt,o.memory=o.memory||et,o.table=o.table||at,demangle(a,o)}function isResponse(o){return typeof Response<"u"&&o instanceof Response}async function instantiate$1(o,s){return isResponse(o=await o)?instantiateStreaming(o,s):postInstantiate(preInstantiate(s||(s={})),await WebAssembly.instantiate(o instanceof WebAssembly.Module?o:await WebAssembly.compile(o),s))}loader.instantiate=instantiate$1;function instantiateSync(o,s){return postInstantiate(preInstantiate(s||(s={})),new WebAssembly.Instance(o instanceof WebAssembly.Module?o:new WebAssembly.Module(o),s))}loader.instantiateSync=instantiateSync;async function instantiateStreaming(o,s){return WebAssembly.instantiateStreaming?postInstantiate(preInstantiate(s||(s={})),(await WebAssembly.instantiateStreaming(o,s)).instance):instantiate$1(isResponse(o=await o)?o.arrayBuffer():o,s)}loader.instantiateStreaming=instantiateStreaming;function demangle(o,s){var a=s?Object.create(s):{},et=o.__argumentsLength?function(at){o.__argumentsLength.value=at}:o.__setArgumentsLength||o.__setargc||function(){};for(let at in o){if(!Object.prototype.hasOwnProperty.call(o,at))continue;const lt=o[at];let ht=at.split("."),dt=a;for(;ht.length>1;){let wt=ht.shift();Object.prototype.hasOwnProperty.call(dt,wt)||(dt[wt]={}),dt=dt[wt]}let ft=ht[0],vt=ft.indexOf("#");if(vt>=0){let wt=ft.substring(0,vt),Ct=dt[wt];if(typeof Ct>"u"||!Ct.prototype){let xt=function(...Pt){return xt.wrap(xt.prototype.constructor(0,...Pt))};xt.prototype={valueOf:function(){return this[THIS]}},xt.wrap=function(Pt){return Object.create(xt.prototype,{[THIS]:{value:Pt,writable:!1}})},Ct&&Object.getOwnPropertyNames(Ct).forEach(Pt=>Object.defineProperty(xt,Pt,Object.getOwnPropertyDescriptor(Ct,Pt))),dt[wt]=xt}if(ft=ft.substring(vt+1),dt=dt[wt].prototype,/^(get|set):/.test(ft)){if(!Object.prototype.hasOwnProperty.call(dt,ft=ft.substring(4))){let xt=o[at.replace("set:","get:")],Pt=o[at.replace("get:","set:")];Object.defineProperty(dt,ft,{get:function(){return xt(this[THIS])},set:function(Rt){Pt(this[THIS],Rt)},enumerable:!0})}}else ft==="constructor"?(dt[ft]=(...xt)=>(et(xt.length),lt(...xt))).original=lt:(dt[ft]=function(...xt){return et(xt.length),lt(this[THIS],...xt)}).original=lt}else/^(get|set):/.test(ft)?Object.prototype.hasOwnProperty.call(dt,ft=ft.substring(4))||Object.defineProperty(dt,ft,{get:o[at.replace("set:","get:")],set:o[at.replace("get:","set:")],enumerable:!0}):typeof lt=="function"&&lt!==et?(dt[ft]=(...wt)=>(et(wt.length),lt(...wt))).original=lt:dt[ft]=lt}return a}loader.demangle=demangle;const{instantiate}=loader;loadWebAssembly.supported=typeof WebAssembly<"u";function loadWebAssembly(o={}){if(!loadWebAssembly.supported)return null;var s=new Uint8Array([0,97,115,109,1,0,0,0,1,78,14,96,2,127,126,0,96,1,127,1,126,96,2,127,127,0,96,1,127,1,127,96,1,127,0,96,2,127,127,1,127,96,3,127,127,127,1,127,96,0,0,96,3,127,127,127,0,96,0,1,127,96,4,127,127,127,127,0,96,5,127,127,127,127,127,1,127,96,1,126,1,127,96,2,126,126,1,126,2,13,1,3,101,110,118,5,97,98,111,114,116,0,10,3,54,53,2,2,8,9,3,5,2,8,6,5,3,4,2,6,9,12,13,2,5,11,3,2,3,2,3,2,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,6,7,7,4,4,5,3,1,0,1,6,47,9,127,1,65,0,11,127,1,65,0,11,127,0,65,3,11,127,0,65,4,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,0,65,240,2,11,127,0,65,6,11,7,240,5,41,6,109,101,109,111,114,121,2,0,7,95,95,97,108,108,111,99,0,10,8,95,95,114,101,116,97,105,110,0,11,9,95,95,114,101,108,101,97,115,101,0,12,9,95,95,99,111,108,108,101,99,116,0,51,11,95,95,114,116,116,105,95,98,97,115,101,3,7,13,73,110,116,51,50,65,114,114,97,121,95,73,68,3,2,13,85,105,110,116,56,65,114,114,97,121,95,73,68,3,3,6,100,101,103,114,101,101,0,16,3,109,111,100,0,17,5,82,97,98,105,110,3,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,21,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,22,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,23,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,24,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,25,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,26,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,27,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,28,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,29,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,30,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,31,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,32,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,33,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,34,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,35,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,36,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,37,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,38,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,39,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,40,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,41,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,42,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,43,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,44,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,45,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,46,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,47,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,48,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,20,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,49,8,1,50,10,165,31,53,199,1,1,4,127,32,1,40,2,0,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,3,65,4,107,118,65,16,115,33,4,32,3,65,7,107,11,33,3,32,1,40,2,20,33,2,32,1,40,2,16,34,5,4,64,32,5,32,2,54,2,20,11,32,2,4,64,32,2,32,5,54,2,16,11,32,1,32,0,32,4,32,3,65,4,116,106,65,2,116,106,40,2,96,70,4,64,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,2,54,2,96,32,2,69,4,64,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,65,127,115,113,34,1,54,2,4,32,1,69,4,64,32,0,32,0,40,2,0,65,1,32,3,116,65,127,115,113,54,2,0,11,11,11,11,226,2,1,6,127,32,1,40,2,0,33,3,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,34,5,65,1,113,4,64,32,3,65,124,113,65,16,106,32,5,65,124,113,106,34,2,65,240,255,255,255,3,73,4,64,32,0,32,4,16,1,32,1,32,2,32,3,65,3,113,114,34,3,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,34,4,40,2,0,33,5,11,11,32,3,65,2,113,4,64,32,1,65,4,107,40,2,0,34,2,40,2,0,34,6,65,124,113,65,16,106,32,3,65,124,113,106,34,7,65,240,255,255,255,3,73,4,64,32,0,32,2,16,1,32,2,32,7,32,6,65,3,113,114,34,3,54,2,0,32,2,33,1,11,11,32,4,32,5,65,2,114,54,2,0,32,4,65,4,107,32,1,54,2,0,32,0,32,3,65,124,113,34,2,65,128,2,73,4,127,32,2,65,4,118,33,4,65,0,5,32,2,65,31,32,2,103,107,34,2,65,4,107,118,65,16,115,33,4,32,2,65,7,107,11,34,3,65,4,116,32,4,106,65,2,116,106,40,2,96,33,2,32,1,65,0,54,2,16,32,1,32,2,54,2,20,32,2,4,64,32,2,32,1,54,2,16,11,32,0,32,4,32,3,65,4,116,106,65,2,116,106,32,1,54,2,96,32,0,32,0,40,2,0,65,1,32,3,116,114,54,2,0,32,0,32,3,65,2,116,106,32,0,32,3,65,2,116,106,40,2,4,65,1,32,4,116,114,54,2,4,11,119,1,1,127,32,2,2,127,32,0,40,2,160,12,34,2,4,64,32,2,32,1,65,16,107,70,4,64,32,2,40,2,0,33,3,32,1,65,16,107,33,1,11,11,32,1,11,107,34,2,65,48,73,4,64,15,11,32,1,32,3,65,2,113,32,2,65,32,107,65,1,114,114,54,2,0,32,1,65,0,54,2,16,32,1,65,0,54,2,20,32,1,32,2,106,65,16,107,34,2,65,2,54,2,0,32,0,32,2,54,2,160,12,32,0,32,1,16,2,11,155,1,1,3,127,35,0,34,0,69,4,64,65,1,63,0,34,0,74,4,127,65,1,32,0,107,64,0,65,0,72,5,65,0,11,4,64,0,11,65,176,3,34,0,65,0,54,2,0,65,208,15,65,0,54,2,0,3,64,32,1,65,23,73,4,64,32,1,65,2,116,65,176,3,106,65,0,54,2,4,65,0,33,2,3,64,32,2,65,16,73,4,64,32,1,65,4,116,32,2,106,65,2,116,65,176,3,106,65,0,54,2,96,32,2,65,1,106,33,2,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,65,176,3,65,224,15,63,0,65,16,116,16,3,65,176,3,36,0,11,32,0,11,45,0,32,0,65,240,255,255,255,3,79,4,64,65,32,65,224,0,65,201,3,65,29,16,0,0,11,32,0,65,15,106,65,112,113,34,0,65,16,32,0,65,16,75,27,11,169,1,1,1,127,32,0,32,1,65,128,2,73,4,127,32,1,65,4,118,33,1,65,0,5,32,1,65,248,255,255,255,1,73,4,64,32,1,65,1,65,27,32,1,103,107,116,106,65,1,107,33,1,11,32,1,65,31,32,1,103,107,34,2,65,4,107,118,65,16,115,33,1,32,2,65,7,107,11,34,2,65,2,116,106,40,2,4,65,127,32,1,116,113,34,1,4,127,32,0,32,1,104,32,2,65,4,116,106,65,2,116,106,40,2,96,5,32,0,40,2,0,65,127,32,2,65,1,106,116,113,34,1,4,127,32,0,32,0,32,1,104,34,0,65,2,116,106,40,2,4,104,32,0,65,4,116,106,65,2,116,106,40,2,96,5,65,0,11,11,11,111,1,1,127,63,0,34,2,32,1,65,248,255,255,255,1,73,4,127,32,1,65,1,65,27,32,1,103,107,116,65,1,107,106,5,32,1,11,65,16,32,0,40,2,160,12,32,2,65,16,116,65,16,107,71,116,106,65,255,255,3,106,65,128,128,124,113,65,16,118,34,1,32,2,32,1,74,27,64,0,65,0,72,4,64,32,1,64,0,65,0,72,4,64,0,11,11,32,0,32,2,65,16,116,63,0,65,16,116,16,3,11,113,1,2,127,32,1,40,2,0,34,3,65,124,113,32,2,107,34,4,65,32,79,4,64,32,1,32,2,32,3,65,2,113,114,54,2,0,32,2,32,1,65,16,106,106,34,1,32,4,65,16,107,65,1,114,54,2,0,32,0,32,1,16,2,5,32,1,32,3,65,126,113,54,2,0,32,1,65,16,106,32,1,40,2,0,65,124,113,106,32,1,65,16,106,32,1,40,2,0,65,124,113,106,40,2,0,65,125,113,54,2,0,11,11,91,1,2,127,32,0,32,1,16,5,34,4,16,6,34,3,69,4,64,65,1,36,1,65,0,36,1,32,0,32,4,16,6,34,3,69,4,64,32,0,32,4,16,7,32,0,32,4,16,6,33,3,11,11,32,3,65,0,54,2,4,32,3,32,2,54,2,8,32,3,32,1,54,2,12,32,0,32,3,16,1,32,0,32,3,32,4,16,8,32,3,11,13,0,16,4,32,0,32,1,16,9,65,16,106,11,33,1,1,127,32,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,18,0,32,0,65,172,3,75,4,64,32,0,65,16,107,16,52,11,11,140,3,1,1,127,2,64,32,1,69,13,0,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,13,0,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,13,0,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,13,0,32,1,65,0,32,0,107,65,3,113,34,1,107,33,2,32,0,32,1,106,34,0,65,0,54,2,0,32,0,32,2,65,124,113,34,1,106,65,4,107,65,0,54,2,0,32,1,65,8,77,13,0,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,13,0,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,32,0,65,4,113,65,24,106,34,2,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,11,178,1,1,3,127,32,1,65,240,255,255,255,3,32,2,118,75,4,64,65,144,1,65,192,1,65,23,65,56,16,0,0,11,32,1,32,2,116,34,3,65,0,16,10,34,2,32,3,16,13,32,0,69,4,64,65,12,65,2,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,2,34,1,32,0,40,2,0,34,4,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,32,4,16,12,11,32,0,32,1,54,2,0,32,0,32,2,54,2,4,32,0,32,3,54,2,8,32,0,11,46,1,2,127,65,12,65,5,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,65,128,2,65,3,16,14,11,9,0,65,63,32,0,121,167,107,11,49,1,2,127,65,63,32,1,121,167,107,33,2,3,64,65,63,32,0,121,167,107,32,2,107,34,3,65,0,78,4,64,32,0,32,1,32,3,172,134,133,33,0,12,1,11,11,32,0,11,40,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,163,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,65,0,58,0,0,11,38,0,32,1,32,0,40,2,8,79,4,64,65,128,2,65,192,2,65,152,1,65,44,16,0,0,11,32,1,32,0,40,2,4,106,45,0,0,11,254,5,2,1,127,4,126,32,0,69,4,64,65,232,0,65,6,16,10,34,0,65,172,3,75,4,64,32,0,65,16,107,34,5,32,5,40,2,4,65,1,106,54,2,4,11,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,32,2,173,55,3,80,32,0,32,3,173,55,3,88,65,12,65,4,16,10,34,2,65,172,3,75,4,64,32,2,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,32,4,65,0,16,14,33,2,32,0,40,2,0,16,12,32,0,32,2,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,1,173,134,66,1,125,55,3,96,32,0,66,243,130,183,218,216,230,232,30,55,3,72,35,4,69,4,64,65,0,33,2,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,65,0,33,4,3,64,32,4,32,0,40,2,4,65,1,107,72,4,64,32,6,66,8,134,33,6,32,0,41,3,72,34,7,33,8,65,63,32,7,121,167,107,33,1,3,64,65,63,32,6,121,167,107,32,1,107,34,3,65,0,78,4,64,32,6,32,8,32,3,172,134,133,33,6,12,1,11,11,32,4,65,1,106,33,4,12,1,11,11,35,6,40,2,4,32,2,65,3,116,106,32,6,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,63,32,0,41,3,72,121,167,107,172,33,7,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,5,33,1,32,2,172,32,7,134,34,8,33,6,65,63,32,0,41,3,72,34,9,121,167,107,33,3,3,64,65,63,32,6,121,167,107,32,3,107,34,4,65,0,78,4,64,32,6,32,9,32,4,172,134,133,33,6,12,1,11,11,32,1,40,2,4,32,2,65,3,116,106,32,6,32,8,132,55,3,0,32,2,65,1,106,33,2,12,1,11,11,65,1,36,4,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,16,18,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,6,66,45,136,167,65,3,116,106,41,3,0,32,6,66,8,134,66,1,132,133,55,3,40,32,0,11,38,1,1,127,32,0,40,2,0,34,0,65,172,3,75,4,64,32,0,65,16,107,34,1,32,1,40,2,4,65,1,106,54,2,4,11,32,0,11,55,1,2,127,32,1,32,0,40,2,0,34,2,71,4,64,32,1,65,172,3,75,4,64,32,1,65,16,107,34,3,32,3,40,2,4,65,1,106,54,2,4,11,32,2,16,12,11,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,172,4,2,5,127,1,126,32,2,65,172,3,75,4,64,32,2,65,16,107,34,4,32,4,40,2,4,65,1,106,54,2,4,11,32,2,33,4,65,0,33,2,32,1,40,2,8,33,5,32,1,40,2,4,33,6,3,64,2,127,65,0,33,3,3,64,32,3,32,5,72,4,64,32,3,32,6,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,19,33,7,32,0,40,2,8,32,0,40,2,0,40,2,4,106,32,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,7,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,1,173,32,8,66,8,134,132,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,32,0,41,3,16,32,0,41,3,80,90,4,127,32,0,41,3,40,32,0,41,3,96,131,80,5,65,0,11,4,127,65,1,5,32,0,41,3,16,32,0,41,3,88,90,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,16,18,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,19,33,1,32,0,40,2,8,32,0,40,2,0,40,2,4,106,65,1,58,0,0,32,0,32,0,41,3,40,35,6,40,2,4,32,1,65,3,116,106,41,3,0,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,35,5,40,2,4,32,0,41,3,40,34,8,66,45,136,167,65,3,116,106,41,3,0,32,8,66,8,134,66,1,132,133,55,3,40,32,3,65,1,106,12,3,11,32,3,65,1,106,33,3,12,1,11,11,65,127,11,34,1,65,0,78,4,64,32,5,32,1,107,33,5,32,1,32,6,106,33,6,32,2,34,1,65,1,106,33,2,32,4,40,2,4,32,1,65,2,116,106,32,0,41,3,56,62,2,0,12,1,11,11,32,4,11,10,0,16,15,36,5,16,15,36,6,11,3,0,1,11,73,1,2,127,32,0,40,2,4,34,1,65,255,255,255,255,0,113,34,2,65,1,70,4,64,32,0,65,16,106,16,53,32,0,32,0,40,2,0,65,1,114,54,2,0,35,0,32,0,16,2,5,32,0,32,2,65,1,107,32,1,65,128,128,128,128,127,113,114,54,2,4,11,11,58,0,2,64,2,64,2,64,32,0,65,8,107,40,2,0,14,7,0,0,1,1,1,1,1,2,11,15,11,32,0,40,2,0,34,0,4,64,32,0,65,172,3,79,4,64,32,0,65,16,107,16,52,11,11,15,11,0,11,11,137,3,7,0,65,16,11,55,40,0,0,0,1,0,0,0,1,0,0,0,40,0,0,0,97,0,108,0,108,0,111,0,99,0,97,0,116,0,105,0,111,0,110,0,32,0,116,0,111,0,111,0,32,0,108,0,97,0,114,0,103,0,101,0,65,208,0,11,45,30,0,0,0,1,0,0,0,1,0,0,0,30,0,0,0,126,0,108,0,105,0,98,0,47,0,114,0,116,0,47,0,116,0,108,0,115,0,102,0,46,0,116,0,115,0,65,128,1,11,43,28,0,0,0,1,0,0,0,1,0,0,0,28,0,0,0,73,0,110,0,118,0,97,0,108,0,105,0,100,0,32,0,108,0,101,0,110,0,103,0,116,0,104,0,65,176,1,11,53,38,0,0,0,1,0,0,0,1,0,0,0,38,0,0,0,126,0,108,0,105,0,98,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,65,240,1,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,73,0,110,0,100,0,101,0,120,0,32,0,111,0,117,0,116,0,32,0,111,0,102,0,32,0,114,0,97,0,110,0,103,0,101,0,65,176,2,11,51,36,0,0,0,1,0,0,0,1,0,0,0,36,0,0,0,126,0,108,0,105,0,98,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,240,2,11,53,7,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,145,4,0,0,2,0,0,0,49,0,0,0,2,0,0,0,17,1,0,0,2,0,0,0,16,0,34,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,16,46,47,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return instantiate(new Response(new Blob([s],{type:"application/wasm"})),o)}var rabinWasm=loadWebAssembly;const Rabin=rabin$1,getRabin=rabinWasm,create=async(o,s,a,et,at)=>{const lt=await getRabin();return new Rabin(lt,o,s,a,et,at)};var src$1={Rabin,create};async function*rabinChunker(o,s){let a,et,at;if(s.minChunkSize&&s.maxChunkSize&&s.avgChunkSize)at=s.avgChunkSize,a=s.minChunkSize,et=s.maxChunkSize;else if(s.avgChunkSize)at=s.avgChunkSize,a=at/3,et=at+at/2;else throw errCode(new Error("please specify an average chunk size"),"ERR_INVALID_AVG_CHUNK_SIZE");if(a<16)throw errCode(new Error("rabin min must be greater than 16"),"ERR_INVALID_MIN_CHUNK_SIZE");et<a&&(et=a),at<a&&(at=a);const lt=Math.floor(Math.log2(at));for await(const ht of rabin(o,{min:a,max:et,bits:lt,window:s.window,polynomial:s.polynomial}))yield ht}async function*rabin(o,s){const a=await src$1.create(s.bits,s.min,s.max,s.window),et=new BufferList_1;for await(const at of o){et.append(at);const lt=a.fingerprint(at);for(let ht=0;ht<lt.length;ht++){const dt=lt[ht],ft=et.slice(0,dt);et.consume(dt),yield ft}}et.length&&(yield et.slice(0))}async function*fixedSizeChunker(o,s){let a=new BufferList_1,et=0,at=!1;const lt=s.maxChunkSize;for await(const ht of o)for(a.append(ht),et+=ht.length;et>=lt;)if(yield a.slice(0,lt),at=!0,lt===a.length)a=new BufferList_1,et=0;else{const dt=new BufferList_1;dt.append(a.shallowSlice(lt)),a=dt,et-=lt}(!at||et)&&(yield a.slice(0,et))}const identity$1=from$1({prefix:"\0",name:"identity",encode:o=>toString$1(o),decode:o=>fromString$3(o)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$1},Symbol.toStringTag,{value:"Module"})),base2=rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$1=Object.freeze(Object.defineProperty({__proto__:null,base64,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from(""),alphabetBytesToChars=alphabet.reduce((o,s,a)=>(o[a]=s,o),[]),alphabetCharsToBytes=alphabet.reduce((o,s,a)=>(o[s.codePointAt(0)]=a,o),[]);function encode$2(o){return o.reduce((s,a)=>(s+=alphabetBytesToChars[a],s),"")}function decode$1(o){const s=[];for(const a of o){const et=alphabetCharsToBytes[a.codePointAt(0)];if(et===void 0)throw new Error(`Non-base256emoji character: ${a}`);s.push(et)}return new Uint8Array(s)}const base256emoji=from$1({prefix:"",name:"base256emoji",encode:encode$2,decode:decode$1}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),code$1=0,name$1="identity",encode$1=coerce,digest=o=>create$4(code$1,encode$1(o)),identity={code:code$1,name:name$1,encode:encode$1,digest};new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$1,...base36$1,...base58,...base64$1,...base256emoji$1};function asUint8Array(o){return globalThis.Buffer!=null?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o}function allocUnsafe(o=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(o)):new Uint8Array(o)}function createCodec(o,s,a,et){return{name:o,prefix:s,encoder:{name:o,prefix:s,encode:a},decoder:{decode:et}}}const string=createCodec("utf8","u",o=>"u"+new TextDecoder("utf8").decode(o),o=>new TextEncoder().encode(o.substring(1))),ascii=createCodec("ascii","a",o=>{let s="a";for(let a=0;a<o.length;a++)s+=String.fromCharCode(o[a]);return s},o=>{o=o.substring(1);const s=allocUnsafe(o.length);for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return s}),BASES={utf8:string,"utf-8":string,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString(o,s="utf8"){const a=BASES[s];if(!a)throw new Error(`Unsupported encoding "${s}"`);return(s==="utf8"||s==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(o,"utf-8")):a.decoder.decode(`${a.prefix}${o}`)}const fromString$1=Object.freeze(Object.defineProperty({__proto__:null,fromString},Symbol.toStringTag,{value:"Module"}));async function*validateChunks(o){for await(const s of o){if(s.length===void 0)throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT");if(typeof s=="string"||s instanceof String)yield fromString(s.toString());else if(Array.isArray(s))yield Uint8Array.from(s);else if(s instanceof Uint8Array)yield s;else throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}}function isIterable(o){return Symbol.iterator in o}function isAsyncIterable(o){return Symbol.asyncIterator in o}function contentAsAsyncIterable(o){try{if(o instanceof Uint8Array)return async function*(){yield o}();if(isIterable(o))return async function*(){yield*o}();if(isAsyncIterable(o))return o}catch{throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}throw errCode(new Error("Content was invalid"),"ERR_INVALID_CONTENT")}async function*dagBuilder(o,s,a){for await(const et of o)if(et.path&&(et.path.substring(0,2)==="./"&&(a.wrapWithDirectory=!0),et.path=et.path.split("/").filter(at=>at&&at!==".").join("/")),et.content){let at;typeof a.chunker=="function"?at=a.chunker:a.chunker==="rabin"?at=rabinChunker:at=fixedSizeChunker;let lt;typeof a.chunkValidator=="function"?lt=a.chunkValidator:lt=validateChunks;const ht={path:et.path,mtime:et.mtime,mode:et.mode,content:at(lt(contentAsAsyncIterable(et.content),a),a)};yield()=>fileBuilder(ht,s,a)}else if(et.path){const at={path:et.path,mtime:et.mtime,mode:et.mode};yield()=>dirBuilder(at,s,a)}else throw new Error("Import candidate must have content or path or both")}class Dir{constructor(s,a){this.options=a||{},this.root=s.root,this.dir=s.dir,this.path=s.path,this.dirty=s.dirty,this.flat=s.flat,this.parent=s.parent,this.parentKey=s.parentKey,this.unixfs=s.unixfs,this.mode=s.mode,this.mtime=s.mtime,this.cid=void 0,this.size=void 0}async put(s,a){}get(s){return Promise.resolve(this)}async*eachChildSeries(){}async*flush(s){}}class DirFlat extends Dir{constructor(s,a){super(s,a),this._children={}}async put(s,a){this.cid=void 0,this.size=void 0,this._children[s]=a}get(s){return Promise.resolve(this._children[s])}childCount(){return Object.keys(this._children).length}directChildrenCount(){return this.childCount()}onlyChild(){return this._children[Object.keys(this._children)[0]]}async*eachChildSeries(){const s=Object.keys(this._children);for(let a=0;a<s.length;a++){const et=s[a];yield{key:et,child:this._children[et]}}}async*flush(s){const a=Object.keys(this._children),et=[];for(let vt=0;vt<a.length;vt++){let wt=this._children[a[vt]];if(wt instanceof Dir)for await(const Ct of wt.flush(s))wt=Ct,yield wt;wt.size!=null&&wt.cid&&et.push({Name:a[vt],Tsize:wt.size,Hash:wt.cid})}const at=new UnixFS({type:"directory",mtime:this.mtime,mode:this.mode}),lt={Data:at.marshal(),Links:et},ht=encode$4(prepare(lt)),dt=await persist(ht,s,this.options),ft=ht.length+lt.Links.reduce((vt,wt)=>vt+(wt.Tsize==null?0:wt.Tsize),0);this.cid=dt,this.size=ft,yield{cid:dt,unixfs:at,path:this.path,size:ft}}}const BITS_PER_BYTE=7;var sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(s,a){let et=this._internalPositionFor(s,!1);if(a===void 0)et!==-1&&(this._unsetInternalPos(et),this._unsetBit(s),this._changedLength=!0,this._changedData=!0);else{let at=!1;et===-1?(et=this._data.length,this._setBit(s),this._changedData=!0):at=!0,this._setInternalPos(et,s,a,at),this._changedLength=!0}}unset(s){this.set(s,void 0)}get(s){this._sortData();const a=this._internalPositionFor(s,!0);if(a!==-1)return this._data[a][1]}push(s){return this.set(this.length,s),this.length}get length(){if(this._sortData(),this._changedLength){const s=this._data[this._data.length-1];this._length=s?s[0]+1:0,this._changedLength=!1}return this._length}forEach(s){let a=0;for(;a<this.length;)s(this.get(a),a,this),a++}map(s){let a=0,et=new Array(this.length);for(;a<this.length;)et[a]=s(this.get(a),a,this),a++;return et}reduce(s,a){let et=0,at=a;for(;et<this.length;){const lt=this.get(et);at=s(at,lt,et),et++}return at}find(s){let a=0,et,at;for(;a<this.length&&!et;)at=this.get(a),et=s(at),a++;return et?at:void 0}_internalPositionFor(s,a){const et=this._bytePosFor(s,a);if(et>=this._bitArrays.length)return-1;const at=this._bitArrays[et],lt=s-et*BITS_PER_BYTE;if(!((at&1<<lt)>0))return-1;const dt=this._bitArrays.slice(0,et).reduce(popCountReduce,0),ft=~(4294967295<<lt+1),vt=popCount(at&ft);return dt+vt-1}_bytePosFor(s,a){const et=Math.floor(s/BITS_PER_BYTE),at=et+1;for(;!a&&this._bitArrays.length<at;)this._bitArrays.push(0);return et}_setBit(s){const a=this._bytePosFor(s,!1);this._bitArrays[a]|=1<<s-a*BITS_PER_BYTE}_unsetBit(s){const a=this._bytePosFor(s,!1);this._bitArrays[a]&=~(1<<s-a*BITS_PER_BYTE)}_setInternalPos(s,a,et,at){const lt=this._data,ht=[a,et];if(at)this._sortData(),lt[s]=ht;else{if(lt.length)if(lt[lt.length-1][0]>=a)lt.push(ht);else if(lt[0][0]<=a)lt.unshift(ht);else{const dt=Math.round(lt.length/2);this._data=lt.slice(0,dt).concat(ht).concat(lt.slice(dt))}else this._data.push(ht);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(s){this._data.splice(s,1)}_sortData(){this._changedData&&this._data.sort(sortInternal),this._changedData=!1}bitField(){const s=[];let a=8,et=0,at=0,lt;const ht=this._bitArrays.slice();for(;ht.length||et;){et===0&&(lt=ht.shift(),et=7);const ft=Math.min(et,a),vt=~(255<<ft),wt=lt&vt;at|=wt<<8-a,lt=lt>>>ft,et-=ft,a-=ft,(!a||!et&&!ht.length)&&(s.push(at),at=0,a=8)}for(var dt=s.length-1;dt>0&&s[dt]===0;dt--)s.pop();return s}compactArray(){return this._sortData(),this._data.map(valueOnly)}};function popCountReduce(o,s){return o+popCount(s)}function popCount(o){let s=o;return s=s-(s>>1&1431655765),s=(s&858993459)+(s>>2&858993459),(s+(s>>4)&252645135)*16843009>>24}function sortInternal(o,s){return o[0]-s[0]}function valueOnly(o){return o[1]}const require$$1$1=getAugmentedNamespace(fromString$1),SparseArray=sparseArray,{fromString:uint8ArrayFromString}=require$$1$1;let Bucket$1=class fo{constructor(s,a,et=0){this._options=s,this._popCount=0,this._parent=a,this._posAtParent=et,this._children=new SparseArray,this.key=null}async put(s,a){const et=await this._findNewBucketAndPos(s);await et.bucket._putAt(et,s,a)}async get(s){const a=await this._findChild(s);if(a)return a.value}async del(s){const a=await this._findPlace(s),et=a.bucket._at(a.pos);et&&et.key===s&&a.bucket._delAt(a.pos)}leafCount(){return this._children.compactArray().reduce((a,et)=>et instanceof fo?a+et.leafCount():a+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const s=this._children.compactArray();for(const a of s)a instanceof fo?yield*a.eachLeafSeries():yield a;return[]}serialize(s,a){const et=[];return a(this._children.reduce((at,lt,ht)=>(lt&&(lt instanceof fo?at.push(lt.serialize(s,a)):at.push(s(lt,ht))),at),et))}asyncTransform(s,a){return asyncTransformBucket(this,s,a)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(s){const a=await this._findPlace(s),et=a.bucket._at(a.pos);if(!(et instanceof fo)&&et&&et.key===s)return et}async _findPlace(s){const a=this._options.hash(typeof s=="string"?uint8ArrayFromString(s):s),et=await a.take(this._options.bits),at=this._children.get(et);return at instanceof fo?at._findPlace(a):{bucket:this,pos:et,hash:a,existingChild:at}}async _findNewBucketAndPos(s){const a=await this._findPlace(s);if(a.existingChild&&a.existingChild.key!==s){const et=new fo(this._options,a.bucket,a.pos);a.bucket._putObjectAt(a.pos,et);const at=await et._findPlace(a.existingChild.hash);return at.bucket._putAt(at,a.existingChild.key,a.existingChild.value),et._findNewBucketAndPos(a.hash)}return a}_putAt(s,a,et){this._putObjectAt(s.pos,{key:a,value:et,hash:s.hash})}_putObjectAt(s,a){this._children.get(s)||this._popCount++,this._children.set(s,a)}_delAt(s){if(s===-1)throw new Error("Invalid position");this._children.get(s)&&this._popCount--,this._children.unset(s),this._level()}_level(){if(this._parent&&this._popCount<=1)if(this._popCount===1){const s=this._children.find(exists);if(s&&!(s instanceof fo)){const a=s.hash;a.untake(this._options.bits);const et={pos:this._posAtParent,hash:a,bucket:this._parent};this._parent._putAt(et,s.key,s.value)}}else this._parent._delAt(this._posAtParent)}_at(s){return this._children.get(s)}};function exists(o){return!!o}function mapNode(o,s){return o.key}function reduceNodes(o){return o}async function asyncTransformBucket(o,s,a){const et=[];for(const at of o._children.compactArray())if(at instanceof Bucket$1)await asyncTransformBucket(at,s,a);else{const lt=await s(at);et.push({bitField:o._children.bitField(),children:lt})}return a(et)}var bucket=Bucket$1,consumableHashExports={},consumableHash={get exports(){return consumableHashExports},set exports(o){consumableHashExports=o}};const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];var consumableBuffer=class{constructor(s){this._value=s,this._currentBytePos=s.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(s){let a=s,et=0;for(;a&&this._haveBits();){const at=this._value[this._currentBytePos],lt=this._currentBitPos+1,ht=Math.min(lt,a),dt=byteBitsToInt(at,lt-ht,ht);et=(et<<ht)+dt,a-=ht,this._currentBitPos-=ht,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return et}untake(s){for(this._currentBitPos+=s;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt(o,s,a){const et=maskFor(s,a);return(o&et)>>>s}function maskFor(o,s){return START_MASKS[o]&STOP_MASKS[Math.min(s+o-1,7)]}function concat(o,s){s||(s=o.reduce((at,lt)=>at+lt.length,0));const a=allocUnsafe(s);let et=0;for(const at of o)a.set(at,et),et+=at.length;return asUint8Array(a)}const concat$1=Object.freeze(Object.defineProperty({__proto__:null,concat},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(concat$1),ConsumableBuffer=consumableBuffer,{concat:uint8ArrayConcat}=require$$1;function wrapHash$1(o){function s(a){return a instanceof InfiniteHash?a:new InfiniteHash(a,o)}return s}class InfiniteHash{constructor(s,a){if(!(s instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=s,this._hashFn=a,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(s){let a=s;for(;this._availableBits<a;)await this._produceMoreBits();let et=0;for(;a>0;){const at=this._buffers[this._currentBufferIndex],lt=Math.min(at.availableBits(),a),ht=at.take(lt);et=(et<<lt)+ht,a-=lt,this._availableBits-=lt,at.availableBits()===0&&this._currentBufferIndex++}return et}untake(s){let a=s;for(;a>0;){const et=this._buffers[this._currentBufferIndex],at=Math.min(et.totalBits()-et.availableBits(),a);et.untake(at),a-=at,this._availableBits+=at,this._currentBufferIndex>0&&et.totalBits()===et.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const s=this._depth?uint8ArrayConcat([this._value,Uint8Array.from([this._depth])]):this._value,a=await this._hashFn(s),et=new ConsumableBuffer(a);this._buffers.push(et),this._availableBits+=et.availableBits()}}consumableHash.exports=wrapHash$1;consumableHashExports.InfiniteHash=InfiniteHash;const Bucket=bucket,wrapHash=consumableHashExports;function createHAMT(o){if(!o||!o.hashFn)throw new Error("please define an options.hashFn");const s={bits:o.bits||8,hash:wrapHash(o.hashFn)};return new Bucket(s)}var src={createHAMT,Bucket};class DirSharded extends Dir{constructor(s,a){super(s,a),this._bucket=src.createHAMT({hashFn:a.hamtHashFn,bits:a.hamtBucketBits})}async put(s,a){await this._bucket.put(s,a)}get(s){return this._bucket.get(s)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:s,value:a}of this._bucket.eachLeafSeries())yield{key:s,child:a}}async*flush(s){for await(const a of flush(this._bucket,s,this,this.options))yield{...a,path:this.path}}}async function*flush(o,s,a,et){const at=o._children,lt=[];let ht=0;for(let Pt=0;Pt<at.length;Pt++){const Rt=at.get(Pt);if(!Rt)continue;const _t=Pt.toString(16).toUpperCase().padStart(2,"0");if(Rt instanceof src.Bucket){let St;for await(const bt of await flush(Rt,s,null,et))St=bt;if(!St)throw new Error("Could not flush sharded directory, no subshard found");lt.push({Name:_t,Tsize:St.size,Hash:St.cid}),ht+=St.size}else if(typeof Rt.value.flush=="function"){const St=Rt.value;let bt;for await(const kt of St.flush(s))bt=kt,yield bt;const Nt=_t+Rt.key;lt.push({Name:Nt,Tsize:bt.size,Hash:bt.cid}),ht+=bt.size}else{const St=Rt.value;if(!St.cid)continue;const bt=_t+Rt.key,Nt=St.size;lt.push({Name:bt,Tsize:Nt,Hash:St.cid}),ht+=Nt}}const dt=Uint8Array.from(at.bitField().reverse()),ft=new UnixFS({type:"hamt-sharded-directory",data:dt,fanout:o.tableSize(),hashType:et.hamtHashCode,mtime:a&&a.mtime,mode:a&&a.mode}),vt={Data:ft.marshal(),Links:lt},wt=encode$4(prepare(vt)),Ct=await persist(wt,s,et),xt=wt.length+ht;yield{cid:Ct,unixfs:ft,size:xt}}async function flatToShard(o,s,a,et){let at=s;s instanceof DirFlat&&s.directChildrenCount()>=a&&(at=await convertToShard(s,et));const lt=at.parent;if(lt){if(at!==s){if(o&&(o.parent=at),!at.parentKey)throw new Error("No parent key found");await lt.put(at.parentKey,at)}return flatToShard(at,lt,a,et)}return at}async function convertToShard(o,s){const a=new DirSharded({root:o.root,dir:!0,parent:o.parent,parentKey:o.parentKey,path:o.path,dirty:o.dirty,flat:!1,mtime:o.mtime,mode:o.mode},s);for await(const{key:et,child:at}of o.eachChildSeries())await a.put(et,at);return a}const toPathComponents$1=(o="")=>(o.trim().match(/([^\\/]|\\\/)+/g)||[]).filter(Boolean);async function addToTree(o,s,a){const et=toPathComponents$1(o.path||""),at=et.length-1;let lt=s,ht="";for(let dt=0;dt<et.length;dt++){const ft=et[dt];ht+=`${ht?"/":""}${ft}`;const vt=dt===at;if(lt.dirty=!0,lt.cid=void 0,lt.size=void 0,vt)await lt.put(ft,o),s=await flatToShard(null,lt,a.shardSplitThreshold,a);else{let wt=await lt.get(ft);(!wt||!(wt instanceof Dir))&&(wt=new DirFlat({root:!1,dir:!0,parent:lt,parentKey:ft,path:ht,dirty:!0,flat:!0,mtime:wt&&wt.unixfs&&wt.unixfs.mtime,mode:wt&&wt.unixfs&&wt.unixfs.mode},a)),await lt.put(ft,wt),lt=wt}}return s}async function*flushAndYield(o,s){if(!(o instanceof Dir)){o&&o.unixfs&&o.unixfs.isDirectory()&&(yield o);return}yield*o.flush(s)}async function*treeBuilder(o,s,a){let et=new DirFlat({root:!0,dir:!0,path:"",dirty:!0,flat:!0},a);for await(const at of o)at&&(et=await addToTree(at,et,a),(!at.unixfs||!at.unixfs.isDirectory())&&(yield at));if(a.wrapWithDirectory)yield*flushAndYield(et,s);else for await(const at of et.eachChildSeries())at&&(yield*flushAndYield(at.child,s))}async function*importer(o,s,a={}){const et=defaultOptions$1(a);let at;typeof a.dagBuilder=="function"?at=a.dagBuilder:at=dagBuilder;let lt;typeof a.treeBuilder=="function"?lt=a.treeBuilder:lt=treeBuilder;let ht;Symbol.asyncIterator in o||Symbol.iterator in o?ht=o:ht=[o];for await(const dt of lt(itParallelBatch(at(ht,s,et),et.fileImportConcurrency),s,et))yield{cid:dt.cid,path:dt.path,unixfs:dt.unixfs,size:dt.size}}async function*browserReadableStreamToIt$1(o,s={}){const a=o.getReader();try{for(;;){const et=await a.read();if(et.done)return;yield et.value}}finally{s.preventCancel!==!0&&a.cancel(),a.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt$1;const browserReadableStreamToIt=browserReadablestreamToIt;function blobToIt(o){return typeof o.stream=="function"?browserReadableStreamToIt(o.stream()):browserReadableStreamToIt(new Response(o).body)}var blobToIt_1=blobToIt;function peekableIterator(o){const[s,a]=o[Symbol.asyncIterator]?[o[Symbol.asyncIterator](),Symbol.asyncIterator]:[o[Symbol.iterator](),Symbol.iterator],et=[];return{peek:()=>s.next(),push:at=>{et.push(at)},next:()=>et.length?{done:!1,value:et.shift()}:s.next(),[a](){return this}}}var itPeekable=peekableIterator;const map=async function*(o,s){for await(const a of o)yield s(a)};var itMap=map;function isBytes$1(o){return ArrayBuffer.isView(o)||o instanceof ArrayBuffer}function isBlob$2(o){return o.constructor&&(o.constructor.name==="Blob"||o.constructor.name==="File")&&typeof o.stream=="function"}function isFileObject(o){return typeof o=="object"&&(o.path||o.content)}const isReadableStream=o=>o&&typeof o.getReader=="function";async function*toAsyncIterable(o){yield o}async function normaliseContent(o){if(isBytes$1(o))return toAsyncIterable(toBytes(o));if(typeof o=="string"||o instanceof String)return toAsyncIterable(toBytes(o.toString()));if(isBlob$2(o))return blobToIt_1(o);if(isReadableStream(o)&&(o=browserReadablestreamToIt(o)),Symbol.iterator in o||Symbol.asyncIterator in o){const s=itPeekable(o),{value:a,done:et}=await s.peek();if(et)return toAsyncIterable(new Uint8Array(0));if(s.push(a),Number.isInteger(a))return toAsyncIterable(Uint8Array.from(await itAll(s)));if(isBytes$1(a)||typeof a=="string"||a instanceof String)return itMap(s,toBytes)}throw errCode(new Error(`Unexpected input: ${o}`),"ERR_UNEXPECTED_INPUT")}function toBytes(o){return o instanceof Uint8Array?o:ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?new Uint8Array(o):Array.isArray(o)?Uint8Array.from(o):fromString(o.toString())}async function*normaliseCandidateSingle(o,s){if(o==null)throw errCode(new Error(`Unexpected input: ${o}`),"ERR_UNEXPECTED_INPUT");if(typeof o=="string"||o instanceof String){yield toFileObject$1(o.toString(),s);return}if(isBytes$1(o)||isBlob$2(o)){yield toFileObject$1(o,s);return}if(isReadableStream(o)&&(o=browserReadablestreamToIt(o)),Symbol.iterator in o||Symbol.asyncIterator in o){const a=itPeekable(o),{value:et,done:at}=await a.peek();if(at){yield{content:[]};return}if(a.push(et),Number.isInteger(et)||isBytes$1(et)||typeof et=="string"||et instanceof String){yield toFileObject$1(a,s);return}throw errCode(new Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(isFileObject(o)){yield toFileObject$1(o,s);return}throw errCode(new Error('Unexpected input: cannot convert "'+typeof o+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function toFileObject$1(o,s){const{path:a,mode:et,mtime:at,content:lt}=o,ht={path:a||"",mode:parseMode(et),mtime:parseMtime(at)};return lt?ht.content=await s(lt):a||(ht.content=await s(o)),ht}function normaliseInput$1(o){return normaliseCandidateSingle(o,normaliseContent)}async function*normaliseCandidateMultiple(o,s){if(typeof o=="string"||o instanceof String||isBytes$1(o)||isBlob$2(o)||o._readableState)throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(isReadableStream(o)&&(o=browserReadablestreamToIt(o)),Symbol.iterator in o||Symbol.asyncIterator in o){const a=itPeekable(o),{value:et,done:at}=await a.peek();if(at){yield*[];return}if(a.push(et),Number.isInteger(et))throw errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(et._readableState){yield*itMap(a,lt=>toFileObject({content:lt},s));return}if(isBytes$1(et)){yield toFileObject({content:a},s);return}if(isFileObject(et)||et[Symbol.iterator]||et[Symbol.asyncIterator]||isReadableStream(et)||isBlob$2(et)){yield*itMap(a,lt=>toFileObject(lt,s));return}}throw isFileObject(o)?errCode(new Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT"):errCode(new Error("Unexpected input: "+typeof o),"ERR_UNEXPECTED_INPUT")}async function toFileObject(o,s){const{path:a,mode:et,mtime:at,content:lt}=o,ht={path:a||"",mode:parseMode(et),mtime:parseMtime(at)};return lt?ht.content=await s(lt):a||(ht.content=await s(o)),ht}function normaliseInput(o){return normaliseCandidateMultiple(o,normaliseContent)}function isBytes(o){return ArrayBuffer.isView(o)||o instanceof ArrayBuffer}function isBlob$1(o){return!!o.constructor&&(o.constructor.name==="Blob"||o.constructor.name==="File")&&typeof o.stream=="function"}function isSingle(o){return typeof o=="string"||o instanceof String||isBytes(o)||isBlob$1(o)||"_readableState"in o}function getNormaliser(o){return isSingle(o)?normaliseInput$1(o):normaliseInput(o)}const drain=async o=>{for await(const s of o);};var itDrain=drain;const filter=async function*(o,s){for await(const a of o)await s(a)&&(yield a)};var itFilter=filter;const take=async function*(o,s){let a=0;if(!(s<1)){for await(const et of o)if(yield et,a++,a===s)return}};var itTake=take;const sortAll=(o,s)=>async function*(){yield*(await itAll(o)).sort(s)}();class BaseBlockstore{open(){return Promise.reject(new Error(".open is not implemented"))}close(){return Promise.reject(new Error(".close is not implemented"))}put(s,a,et){return Promise.reject(new Error(".put is not implemented"))}get(s,a){return Promise.reject(new Error(".get is not implemented"))}has(s,a){return Promise.reject(new Error(".has is not implemented"))}delete(s,a){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(s,a={}){for await(const{key:et,value:at}of s)await this.put(et,at,a),yield{key:et,value:at}}async*getMany(s,a={}){for await(const et of s)yield this.get(et,a)}async*deleteMany(s,a={}){for await(const et of s)await this.delete(et,a),yield et}batch(){let s=[],a=[];return{put(et,at){s.push({key:et,value:at})},delete(et){a.push(et)},commit:async et=>{await itDrain(this.putMany(s,et)),s=[],await itDrain(this.deleteMany(a,et)),a=[]}}}async*_all(s,a){throw new Error("._all is not implemented")}async*_allKeys(s,a){throw new Error("._allKeys is not implemented")}query(s,a){let et=this._all(s,a);if(s.prefix!=null&&(et=itFilter(et,at=>at.key.toString().startsWith(s.prefix||""))),Array.isArray(s.filters)&&(et=s.filters.reduce((at,lt)=>itFilter(at,lt),et)),Array.isArray(s.orders)&&(et=s.orders.reduce((at,lt)=>sortAll(at,lt),et)),s.offset!=null){let at=0;et=itFilter(et,()=>at++>=(s.offset||0))}return s.limit!=null&&(et=itTake(et,s.limit)),et}queryKeys(s,a){let et=this._allKeys(s,a);if(s.prefix!=null&&(et=itFilter(et,at=>at.toString().startsWith(s.prefix||""))),Array.isArray(s.filters)&&(et=s.filters.reduce((at,lt)=>itFilter(at,lt),et)),Array.isArray(s.orders)&&(et=s.orders.reduce((at,lt)=>sortAll(at,lt),et)),s.offset!=null){let at=0;et=itFilter(et,()=>at++>=s.offset)}return s.limit!=null&&(et=itTake(et,s.limit)),et}}class MemoryBlockStore extends BaseBlockstore{constructor(){super(),this.store=new Map}async*blocks(){for(const[s,a]of this.store.entries())yield{cid:CID.parse(s),bytes:a}}put(s,a){return this.store.set(s.toString(),a),Promise.resolve()}get(s){const a=this.store.get(s.toString());if(!a)throw new Error(`block with cid ${s.toString()} no found`);return Promise.resolve(a)}has(s){return Promise.resolve(this.store.has(s.toString()))}close(){return this.store.clear(),Promise.resolve()}}const unixfsImporterOptionsDefault={cidVersion:1,chunker:"fixed",maxChunkSize:262144,hasher:sha256,rawLeaves:!0,wrapWithDirectory:!0,maxChildrenPerNode:174};async function pack({input:o,blockstore:s,hasher:a,maxChunkSize:et,maxChildrenPerNode:at,wrapWithDirectory:lt,rawLeaves:ht}){if(!o||Array.isArray(o)&&!o.length)throw new Error("missing input file(s)");const dt=s||new MemoryBlockStore,ft=await itLast(itPipeExports(getNormaliser(o),St=>importer(St,dt,{...unixfsImporterOptionsDefault,hasher:a||unixfsImporterOptionsDefault.hasher,maxChunkSize:et||unixfsImporterOptionsDefault.maxChunkSize,maxChildrenPerNode:at||unixfsImporterOptionsDefault.maxChildrenPerNode,wrapWithDirectory:lt===!1?!1:unixfsImporterOptionsDefault.wrapWithDirectory,rawLeaves:ht??unixfsImporterOptionsDefault.rawLeaves})));if(!ft||!ft.cid)throw new Error("given input could not be parsed correctly");const vt=ft.cid,{writer:wt,out:Ct}=await CarWriter.create([vt]),xt=Ct[Symbol.asyncIterator]();let Pt;const Rt=async()=>{for await(const St of dt.blocks())await wt.put(St);await wt.close(),s||await dt.close()},_t={[Symbol.asyncIterator](){if(Pt!=null)throw new Error("Multiple iterator not supported");return Pt=Rt(),{async next(){const St=await xt.next();return St.done&&await Pt,St}}}};return{root:vt,out:_t}}const MAX_HEADER_LENGTH=2e3,THROW_ON_MAX_HEADER_LENGTH_EXCEEDED=!1;function hasRel(o){return o&&o.rel}function intoRels(o,s){function a(et){o[et]=Object.assign({},s,{rel:et})}return s.rel.split(/\s+/).forEach(a),o}function createObjects(o,s){const a=s.match(/\s*(.+)\s*=\s*"?([^"]+)"?/);return a&&(o[a[1]]=a[2]),o}function parseLink(o){try{const s=o.match(/<?([^>]*)>(.*)/),a=s[1],et=s[2].split(";"),at={},lt=new URL(a,"https://example.com");for(const[dt,ft]of lt.searchParams)at[dt]=ft;et.shift();let ht=et.reduce(createObjects,{});return ht=Object.assign({},at,ht),ht.url=a,ht}catch{return null}}function checkHeader(o,s){if(!o)return!1;s=s||{};const a=s.maxHeaderLength||MAX_HEADER_LENGTH,et=s.throwOnMaxHeaderLengthExceeded||THROW_ON_MAX_HEADER_LENGTH_EXCEEDED;if(o.length>a){if(et)throw new Error("Input string too long, it should be under "+a+" characters.");return!1}return!0}function parseLinkHeader(o,s){return checkHeader(o,s)?o.split(/,\s*</).map(parseLink).filter(hasRel).reduce(intoRels,{}):null}const hashFn=async function(o){return(await murmur3128.encode(o)).slice(0,8).reverse()},addLinksToHamtBucket=(o,s,a)=>Promise.all(o.map(et=>{if(et.Name==null)throw new Error("Unexpected Link without a Name");if(et.Name.length===2){const at=parseInt(et.Name,16);return s._putObjectAt(at,new src.Bucket({hash:a._options.hash,bits:a._options.bits},s,at))}return a.put(et.Name.substring(2),!0)})),toPrefix=o=>o.toString(16).toUpperCase().padStart(2,"0").substring(0,2),toBucketPath=o=>{let s=o.bucket;const a=[];for(;s._parent;)a.push(s),s=s._parent;return a.push(s),a.reverse()},findShardCid=async(o,s,a,et,at)=>{if(!et){const wt=src.createHAMT({hashFn});et={rootBucket:wt,hamtDepth:1,lastBucket:wt}}await addLinksToHamtBucket(o.Links,et.lastBucket,et.rootBucket);const lt=await et.rootBucket._findNewBucketAndPos(s);let ht=toPrefix(lt.pos);const dt=toBucketPath(lt);dt.length>et.hamtDepth&&(et.lastBucket=dt[et.hamtDepth],ht=toPrefix(et.lastBucket._posAtParent));const ft=o.Links.find(wt=>{if(wt.Name==null)return!1;const Ct=wt.Name.substring(0,2),xt=wt.Name.substring(2);return!(Ct!==ht||xt&&xt!==s)});if(!ft)return null;if(ft.Name!=null&&ft.Name.substring(2)===s)return ft.Hash;et.hamtDepth++;const vt=await a.get(ft.Hash,at);return o=decode$3(vt),findShardCid(o,s,a,et,at)};function extractDataFromBlock(o,s,a,et){const at=o.length,lt=s+at;return a>=lt||et<s?new Uint8Array(0):(et>=s&&et<lt&&(o=o.slice(0,et-s)),a>=s&&a<lt&&(o=o.slice(a-s)),o)}const validateOffsetAndLength=(o,s,a)=>{if(s||(s=0),s<0)throw errCode(new Error("Offset must be greater than or equal to 0"),"ERR_INVALID_PARAMS");if(s>o)throw errCode(new Error("Offset must be less than the file size"),"ERR_INVALID_PARAMS");if(!a&&a!==0&&(a=o-s),a<0)throw errCode(new Error("Length must be greater than or equal to 0"),"ERR_INVALID_PARAMS");return s+a>o&&(a=o-s),{offset:s,length:a}};async function*emitBytes(o,s,a,et,at=0,lt){if(s instanceof Uint8Array){const ft=extractDataFromBlock(s,at,a,et);return ft.length&&(yield ft),at+=ft.length,at}if(s.Data==null)throw errCode(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");let ht;try{ht=UnixFS.unmarshal(s.Data)}catch(ft){throw errCode(ft,"ERR_NOT_UNIXFS")}if(ht.data&&ht.data.length){const ft=extractDataFromBlock(ht.data,at,a,et);ft.length&&(yield ft),at+=ht.data.length}let dt=at;for(let ft=0;ft<s.Links.length;ft++){const vt=s.Links[ft],wt=at+ht.blockSizes[ft];if(a>=dt&&a<wt||et>dt&&et<=wt||a<dt&&et>wt){const Ct=await o.get(vt.Hash,{signal:lt.signal});let xt;switch(vt.Hash.code){case code$4:xt=await decode$3(Ct);break;case code$3:xt=Ct;break;case code$5:xt=await decode$4(Ct);break;default:throw Error(`Unsupported codec: ${vt.Hash.code}`)}for await(const Pt of emitBytes(o,xt,a,et,at,lt))at+=Pt.length,yield Pt}at=wt,dt=wt+1}}const fileContent=(o,s,a,et,at,lt,ht)=>{function dt(ft={}){const vt=a.fileSize();if(vt===void 0)throw new Error("File was a directory");const{offset:wt,length:Ct}=validateOffsetAndLength(vt,ft.offset,ft.length),xt=wt,Pt=wt+Ct;return emitBytes(ht,s,xt,Pt,0,ft)}return dt},directoryContent=(o,s,a,et,at,lt,ht)=>{async function*dt(ft={}){const vt=ft.offset||0,wt=ft.length||s.Links.length,Ct=s.Links.slice(vt,wt);for(const xt of Ct){const Pt=await at(xt.Hash,xt.Name||"",`${et}/${xt.Name||""}`,[],lt+1,ht,ft);Pt.entry&&(yield Pt.entry)}}return dt},hamtShardedDirectoryContent=(o,s,a,et,at,lt,ht)=>{function dt(ft={}){return listDirectory(s,et,at,lt,ht,ft)}return dt};async function*listDirectory(o,s,a,et,at,lt){const ht=o.Links;for(const dt of ht){const ft=dt.Name!=null?dt.Name.substring(2):null;if(ft)yield(await a(dt.Hash,ft,`${s}/${ft}`,[],et+1,at,lt)).entry;else{const vt=await at.get(dt.Hash);o=decode$3(vt);for await(const wt of listDirectory(o,s,a,et,at,lt))yield wt}}}const findLinkCid=(o,s)=>{const a=o.Links.find(et=>et.Name===s);return a&&a.Hash},contentExporters={raw:fileContent,file:fileContent,directory:directoryContent,"hamt-sharded-directory":hamtShardedDirectoryContent,metadata:(o,s,a,et,at,lt,ht)=>()=>[],symlink:(o,s,a,et,at,lt,ht)=>()=>[]},unixFsResolver=async(o,s,a,et,at,lt,ht,dt)=>{const ft=await ht.get(o,dt),vt=decode$3(ft);let wt,Ct;if(s||(s=o.toString()),vt.Data==null)throw errCode(new Error("no data in PBNode"),"ERR_NOT_UNIXFS");try{wt=UnixFS.unmarshal(vt.Data)}catch(xt){throw errCode(xt,"ERR_NOT_UNIXFS")}if(a||(a=s),et.length){let xt;if(wt&&wt.type==="hamt-sharded-directory"?xt=await findShardCid(vt,et[0],ht):xt=findLinkCid(vt,et[0]),!xt)throw errCode(new Error("file does not exist"),"ERR_NOT_FOUND");const Pt=et.shift(),Rt=`${a}/${Pt}`;Ct={cid:xt,toResolve:et,name:Pt||"",path:Rt}}return{entry:{type:wt.isDirectory()?"directory":"file",name:s,path:a,cid:o,content:contentExporters[wt.type](o,vt,wt,a,at,lt,ht),unixfs:wt,depth:lt,node:vt,size:wt.fileSize()},next:Ct}},rawContent$1=o=>{async function*s(a={}){const{offset:et,length:at}=validateOffsetAndLength(o.length,a.offset,a.length);yield extractDataFromBlock(o,0,et,et+at)}return s},resolve$3=async(o,s,a,et,at,lt,ht,dt)=>{if(et.length)throw errCode(new Error(`No link named ${a} found in raw node ${o}`),"ERR_NOT_FOUND");const ft=await ht.get(o,dt);return{entry:{type:"raw",name:s,path:a,cid:o,content:rawContent$1(ft),depth:lt,size:ft.length,node:ft}}},resolve$2=async(o,s,a,et,at,lt,ht,dt)=>{const ft=await ht.get(o),vt=decode$4(ft);let wt=vt,Ct=a;for(;et.length;){const xt=et[0];if(xt in wt){et.shift(),Ct=`${Ct}/${xt}`;const Pt=CID.asCID(wt[xt]);if(Pt)return{entry:{type:"object",name:s,path:a,cid:o,node:ft,depth:lt,size:ft.length,content:async function*(){yield vt}},next:{cid:Pt,name:xt,path:Ct,toResolve:et}};wt=wt[xt]}else throw errCode(new Error(`No property named ${xt} found in cbor node ${o}`),"ERR_NO_PROP")}return{entry:{type:"object",name:s,path:a,cid:o,node:ft,depth:lt,size:ft.length,content:async function*(){yield vt}}}},rawContent=o=>{async function*s(a={}){const{offset:et,length:at}=validateOffsetAndLength(o.length,a.offset,a.length);yield extractDataFromBlock(o,0,et,et+at)}return s},resolve$1=async(o,s,a,et,at,lt,ht,dt)=>{if(et.length)throw errCode(new Error(`No link named ${a} found in raw node ${o}`),"ERR_NOT_FOUND");const ft=await decode$7(o.multihash.bytes);return{entry:{type:"identity",name:s,path:a,cid:o,content:rawContent(ft.digest),depth:lt,size:ft.digest.length,node:ft.digest}}},resolvers={[code$4]:unixFsResolver,[code$3]:resolve$3,[code$5]:resolve$2,[identity.code]:resolve$1};function resolve(o,s,a,et,at,lt,ht){const dt=resolvers[o.code];if(!dt)throw errCode(new Error(`No resolver for code ${o.code}`),"ERR_NO_RESOLVER");return dt(o,s,a,et,resolve,at,lt,ht)}const toPathComponents=(o="")=>(o.trim().match(/([^\\^/]|\\\/)+/g)||[]).filter(Boolean),cidAndRest=o=>{if(o instanceof Uint8Array)return{cid:CID.decode(o),toResolve:[]};const s=CID.asCID(o);if(s)return{cid:s,toResolve:[]};if(typeof o=="string"){o.indexOf("/ipfs/")===0&&(o=o.substring(6));const a=toPathComponents(o);return{cid:CID.parse(a[0]),toResolve:a.slice(1)}}throw errCode(new Error(`Unknown path type ${o}`),"ERR_BAD_PATH")};async function*walkPath(o,s,a={}){let{cid:et,toResolve:at}=cidAndRest(o),lt=et.toString(),ht=lt;const dt=at.length;for(;;){const ft=await resolve(et,lt,ht,at,dt,s,a);if(!ft.entry&&!ft.next)throw errCode(new Error(`Could not resolve ${o}`),"ERR_NOT_FOUND");if(ft.entry&&(yield ft.entry),!ft.next)return;at=ft.next.toResolve,et=ft.next.cid,lt=ft.next.name,ht=ft.next.path}}async function exporter(o,s,a={}){const et=await itLast(walkPath(o,s,a));if(!et)throw errCode(new Error(`Could not resolve ${o}`),"ERR_NOT_FOUND");return et}async function*recursive(o,s,a={}){const et=await exporter(o,s,a);if(!et)return;if(yield et,et.type==="directory")for await(const lt of at(et,a))yield lt;async function*at(lt,ht){for await(const dt of lt.content(ht))yield dt,!(dt instanceof Uint8Array)&&dt.type==="directory"&&(yield*at(dt,ht))}}function equals(o,s){if(o===s)return!0;if(o.byteLength!==s.byteLength)return!1;for(let a=0;a<o.byteLength;a++)if(o[a]!==s[a])return!1;return!0}class VerifyingGetOnlyBlockStore extends BaseBlockstore{constructor(s){super(),this.store=s}async get(s){const a=await this.store.get(s);if(!a)throw new Error(`Incomplete CAR. Block missing for CID ${s}`);if(!isValid({cid:s,bytes:a}))throw new Error(`Invalid CAR. Hash of block data does not match CID ${s}`);return a}static fromBlockstore(s){return new VerifyingGetOnlyBlockStore(s)}static fromCarReader(s){return new VerifyingGetOnlyBlockStore({get:async a=>{const et=await s.get(a);return et==null?void 0:et.bytes}})}}async function isValid({cid:o,bytes:s}){const a=await sha256.digest(s);return equals(a.digest,o.multihash.digest)}async function*unpackStream(o,{roots:s,blockstore:a}={}){const et=await CarBlockIterator.fromIterable(asAsyncIterable(o)),at=a||new MemoryBlockStore;for await(const ht of et)await at.put(ht.cid,ht.bytes);const lt=VerifyingGetOnlyBlockStore.fromBlockstore(at);(!s||s.length===0)&&(s=await et.getRoots());for(const ht of s)yield*recursive(ht,lt)}function asAsyncIterable(o){return Symbol.asyncIterator in o?o:browserReadablestreamToIt(o)}const readonly=({enumerable:o=!0,configurable:s=!1}={})=>({enumerable:o,configurable:s,writable:!1}),links=function*(o,s){if(o!=null&&!(o instanceof Uint8Array))for(const[a,et]of Object.entries(o)){const at=[...s,a];if(et!=null&&typeof et=="object")if(Array.isArray(et))for(const[lt,ht]of et.entries()){const dt=[...at,lt],ft=CID.asCID(ht);ft?yield[dt.join("/"),ft]:typeof ht=="object"&&(yield*links(ht,dt))}else{const lt=CID.asCID(et);lt?yield[at.join("/"),lt]:yield*links(et,at)}}},tree=function*(o,s){if(o!=null)for(const[a,et]of Object.entries(o)){const at=[...s,a];if(yield at.join("/"),et!=null&&!(et instanceof Uint8Array)&&typeof et=="object"&&!CID.asCID(et))if(Array.isArray(et))for(const[lt,ht]of et.entries()){const dt=[...at,lt];yield dt.join("/"),typeof ht=="object"&&!CID.asCID(ht)&&(yield*tree(ht,dt))}else yield*tree(et,at)}},get=(o,s)=>{let a=o;for(const[et,at]of s.entries()){if(a=a[at],a==null)throw new Error(`Object has no property at ${s.slice(0,et+1).map(ht=>`[${JSON.stringify(ht)}]`).join("")}`);const lt=CID.asCID(a);if(lt)return{value:lt,remaining:s.slice(et+1).join("/")}}return{value:a}};class Block{constructor({cid:s,bytes:a,value:et}){if(!s||!a||typeof et>"u")throw new Error("Missing required argument");this.cid=s,this.bytes=a,this.value=et,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(s="/"){return get(this.value,s.split("/").filter(Boolean))}}const CID_CBOR_TAG=42;function cidEncoder(o){if(o.asCID!==o)return null;const s=CID.asCID(o);if(!s)return null;const a=new Uint8Array(s.bytes.byteLength+1);return a.set(s.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,a)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(o){if(Number.isNaN(o))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(o===1/0||o===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(o){if(o[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID.decode(o.subarray(1))}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code=113,encode=o=>encode$6(o,encodeOptions),decode=o=>decode$5(o,decodeOptions),cbor=Object.freeze(Object.defineProperty({__proto__:null,code,decode,encode,name},Symbol.toStringTag,{value:"Module"}));class TreewalkCarSplitter{constructor(s,a,et={}){if(typeof a!="number"||a<=0)throw new Error("invalid target chunk size");this._reader=s,this._targetSize=a,this._decoders=[pb,raw,cbor,...et.decoders||[]]}async*cars(){const s=await this._reader.getRoots();if(s.length!==1)throw new Error(`unexpected number of roots: ${s.length}`);let a;for await(const et of this._cars(s[0]))a=et.channel,et.out&&(yield et.out);if(!a)throw new Error("missing CAR writer channel");a.writer.close(),yield a.out}async _get(s){const a=await this._reader.get(s);if(!a)throw new Error(`missing block for ${s}`);const{bytes:et}=a,at=this._decoders.find(lt=>lt.code===s.code);if(!at)throw new Error(`missing decoder for ${s.code}`);return new Block({cid:s,bytes:et,value:at.decode(et)})}async*_cars(s,a=[],et=void 0){const at=await this._get(s);if(et=et||Object.assign(CarWriter.create(s),{size:0}),et.size>0&&et.size+at.bytes.byteLength>=this._targetSize){et.writer.close();const{out:lt}=et;et=newCar(a),yield{channel:et,out:lt}}a=a.concat(at),et.size+=at.bytes.byteLength,et.writer.put(at);for(const[,lt]of at.links())for await(const ht of this._cars(lt,a,et))et=ht.channel,yield ht;if(!et)throw new Error("missing CAR writer channel");yield{channel:et}}static async fromIterable(s,a,et){const at=await CarReader.fromIterable(s);return new TreewalkCarSplitter(at,a,et)}static async fromBlob(s,a,et){const at=await s.arrayBuffer(),lt=await CarReader.fromBytes(new Uint8Array(at));return new TreewalkCarSplitter(lt,a,et)}}function newCar(o){const s=Object.assign(CarWriter.create(o[0].cid),{size:o.reduce((a,et)=>a+et.bytes.byteLength,0)});for(const a of o)s.writer.put(a);return s}var throttledQueueExports={},throttledQueue$1={get exports(){return throttledQueueExports},set exports(o){throttledQueueExports=o}};(function(o,s){Object.defineProperty(s,"__esModule",{value:!0});function a(et,at,lt){lt===void 0&&(lt=!1),lt&&(at=at/et,et=1);var ht=[],dt=0,ft=0,vt,wt=function(){var Ct=dt+at,xt=Date.now();if(xt<Ct){vt!==void 0&&clearTimeout(vt),vt=setTimeout(wt,Ct-xt);return}dt=xt,ft=0;for(var Pt=0,Rt=ht.splice(0,et);Pt<Rt.length;Pt++){var _t=Rt[Pt];ft++,_t()}ht.length?vt=setTimeout(wt,at):vt=void 0};return function(Ct){return new Promise(function(xt,Pt){var Rt=function(){return Promise.resolve().then(Ct).then(xt).catch(Pt)},_t=Date.now();vt===void 0&&_t-dt>at&&(dt=_t,ft=0),ft++<et?Rt():(ht.push(Rt),vt===void 0&&(vt=setTimeout(wt,dt+at-_t)))})}}o.exports=a,s.default=a})(throttledQueue$1,throttledQueueExports);const throttledQueue=getDefaultExportFromCjs(throttledQueueExports),fetch$1=globalThis.fetch,Blob$1=globalThis.Blob,File$1=globalThis.File,Blockstore=MemoryBlockStore,MAX_PUT_RETRIES=5,MAX_CONCURRENT_UPLOADS=3,DEFAULT_CHUNK_SIZE=1024*1024*50,MAX_BLOCK_SIZE=1048576,MAX_CHUNK_SIZE=104857600,RATE_LIMIT_REQUESTS=30,RATE_LIMIT_PERIOD=10*1e3;function createRateLimiter(){const o=throttledQueue(RATE_LIMIT_REQUESTS,RATE_LIMIT_PERIOD);return()=>o(()=>{})}const globalRateLimiter=createRateLimiter();class Web3Storage{constructor({token:s,endpoint:a=new URL("https://api.web3.storage"),rateLimiter:et,fetch:at=fetch$1}){this.token=s,this.endpoint=a,this.rateLimiter=et||createRateLimiter(),this.fetch=at}static headers(s){if(!s)throw new Error("missing token");return{Authorization:`Bearer ${s}`,"X-Client":"web3.storage/js"}}static async put({endpoint:s,token:a,rateLimiter:et=globalRateLimiter,fetch:at=fetch$1},lt,{onRootCidReady:ht,onStoredChunk:dt,maxRetries:ft=MAX_PUT_RETRIES,maxChunkSize:vt=DEFAULT_CHUNK_SIZE,wrapWithDirectory:wt=!0,name:Ct,signal:xt}={}){if(vt>=MAX_CHUNK_SIZE||vt<MAX_BLOCK_SIZE)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const Pt=new Blockstore;try{const{out:Rt,root:_t}=await pack({input:Array.from(lt).map(toImportCandidate),blockstore:Pt,wrapWithDirectory:wt,maxChunkSize:MAX_BLOCK_SIZE,maxChildrenPerNode:1024});ht&&ht(_t.toString());const St=await CarReader.fromIterable(Rt);return await Web3Storage.putCar({endpoint:s,token:a,rateLimiter:et,fetch:at},St,{onStoredChunk:dt,maxRetries:ft,maxChunkSize:vt,name:Ct,signal:xt})}finally{await Pt.close()}}static async putCar({endpoint:s,token:a,rateLimiter:et=globalRateLimiter,fetch:at=fetch$1},lt,{name:ht,onStoredChunk:dt,maxRetries:ft=MAX_PUT_RETRIES,maxChunkSize:vt=DEFAULT_CHUNK_SIZE,decoders:wt,signal:Ct}={}){if(vt>=MAX_CHUNK_SIZE||vt<MAX_BLOCK_SIZE)throw new Error("maximum chunk size must be less than 100MiB and greater than or equal to 1MB");const xt=vt,Pt=new URL("car",s);let Rt=Web3Storage.headers(a);ht&&(Rt={...Rt,"X-Name":encodeURIComponent(ht)});const _t=await lt.getRoots();if(_t[0]==null)throw new Error("missing root CID");if(_t.length>1)throw new Error("too many roots");const St=_t[0].toString(),bt=new TreewalkCarSplitter(lt,xt,{decoders:wt}),kt=transform(MAX_CONCURRENT_UPLOADS,async Dt=>{const jt=[];for await(const Bt of Dt)jt.push(Bt);const Wt=new Blob$1(jt,{type:"application/vnd.ipld.car"}),Yt=await pRetryExports(async()=>{await et();let Bt;try{Bt=await at(Pt.toString(),{method:"POST",headers:Rt,body:Wt,signal:Ct})}catch(qt){throw Ct&&Ct.aborted?new AbortError_1(qt):qt}if(Bt.status===429)throw new Error("rate limited");const zt=await Bt.json();if(!Bt.ok)throw new Error(zt.message);if(zt.cid!==St)throw new Error(`root CID mismatch, expected: ${St}, received: ${zt.cid}`);return zt.cid},{retries:ft});return dt&&dt(Wt.size),Yt});for await(const Dt of kt(bt.cars()));return St}static async get({endpoint:s,token:a,rateLimiter:et=globalRateLimiter,fetch:at=fetch$1},lt,ht={}){const dt=new URL(`car/${lt}`,s);await et();const ft=await at(dt.toString(),{method:"GET",headers:Web3Storage.headers(a),signal:ht.signal});if(ft.status===429)throw new Error("rate limited");return toWeb3Response(ft)}static async delete({endpoint:s,token:a,rateLimiter:et=globalRateLimiter},at,lt={}){throw console.log("Not deleting",at,s,a,et,lt),Error(".delete not implemented yet")}static async status({endpoint:s,token:a,rateLimiter:et=globalRateLimiter,fetch:at=fetch$1},lt,ht={}){const dt=new URL(`status/${lt}`,s);await et();const ft=await at(dt.toString(),{method:"GET",headers:Web3Storage.headers(a),signal:ht.signal});if(ft.status===429)throw new Error("rate limited");if(ft.status!==404){if(!ft.ok)throw new Error(ft.statusText);return ft.json()}}static async*list(s,{before:a=new Date().toISOString(),maxResults:et=1/0,signal:at}={}){async function lt({endpoint:ft,token:vt,rateLimiter:wt=globalRateLimiter,fetch:Ct=fetch$1},{before:xt,size:Pt}){const Rt=new URLSearchParams({before:xt,size:Pt.toString()}),_t=new URL(`user/uploads?${Rt}`,ft);return await wt(),Ct(_t.toString(),{method:"GET",headers:{...Web3Storage.headers(vt),"Access-Control-Request-Headers":"Link"},signal:at})}let ht=0;const dt=et>100?100:et;for await(const ft of paginator(lt,s,{before:a,size:dt})){if(!ft.ok){if(ft.status===429)throw new Error("rate limited");const wt=await ft.json();throw new Error(`${ft.status} ${ft.statusText} ${wt?"- "+wt.message:""}`)}const vt=await ft.json();for(const wt of vt){if(++ht>et)return;yield wt}}}put(s,a){return Web3Storage.put(this,s,a)}putCar(s,a){return Web3Storage.putCar(this,s,a)}get(s,a){return Web3Storage.get(this,s,a)}delete(s,a){return Web3Storage.delete(this,s,a)}status(s,a){return Web3Storage.status(this,s,a)}list(s){return Web3Storage.list(this,s)}}async function toWeb3File({content:o,path:s,cid:a}){const et=[];for await(const lt of o())et.push(lt);const at=new File$1(et,toFilenameWithPath(s));return Object.assign(at,{cid:a.toString()})}function toFilenameWithPath(o){const s=o.indexOf("/");return s===-1?o:o.substring(s+1)}function toWeb3Response(o){const s=Object.assign(o,{unixFsIterator:async function*(){if(!o.ok)throw new Error(`Response was not ok: ${o.status} ${o.statusText} - Check for { "ok": false } on the Response object before calling .unixFsIterator`);if(!o.body)throw new Error("No body on response");const a=new Blockstore;try{for await(const et of unpackStream(o.body,{blockstore:a}))yield et}finally{await a.close()}},files:async()=>{if(!o.ok)throw new Error(`Response was not ok: ${o.status} ${o.statusText} - Check for { "ok": false } on the Response object before calling .files`);const a=[];for await(const et of s.unixFsIterator()){if(et.type==="directory")continue;const at=await toWeb3File(et);a.push(at)}return a}});return s}function toImportCandidate(o){let s;return{path:o.name,get content(){return s=s||o.stream(),s}}}async function*paginator(o,s,a){let et=await o(s,a);yield et;let at=parseLinkHeader(et.headers.get("Link")||"");for(;at&&at.next;)et=await o(s,at.next),yield et,at=parseLinkHeader(et.headers.get("Link")||"")}const Web3Context=reactExports.createContext(),Web3ContextProvider=({children:o})=>{const s=new Web3Storage({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkaWQ6ZXRocjoweDM3QjVkQ0ZlMmM4RmQyODk1QTlCNmJENWU4ODRCYkI5YTQzZTVlYUUiLCJpc3MiOiJ3ZWIzLXN0b3JhZ2UiLCJpYXQiOjE2ODEyMzA0MjYwMzUsIm5hbWUiOiJ1bml2ZXJzYWxNZWRpY2FsUmVjb3JkIn0.YVpCNOAnmZyjh-5dW4OdIU53BgARVYCXVh_VhH0zn58"});async function a(at){return await s.put(at,{name:at.name,maxRetries:3})}async function et(at,lt){const ht=`https://${at}.ipfs.w3s.link/${lt}`;return await(await fetch(ht)).blob()}return jsx(Web3Context.Provider,{value:{uploadFile:a,retrieveFile:et},children:o})};function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdfExports={},pdf={get exports(){return pdfExports},set exports(o){pdfExports=o}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(s,a){module.exports=a()})(globalThis,()=>(()=>{var __webpack_modules__=[,(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.VerbosityLevel=s.Util=s.UnknownErrorException=s.UnexpectedResponseException=s.UNSUPPORTED_FEATURES=s.TextRenderingMode=s.StreamType=s.RenderingIntentFlag=s.PermissionFlag=s.PasswordResponses=s.PasswordException=s.PageActionEventType=s.OPS=s.MissingPDFException=s.LINE_FACTOR=s.LINE_DESCENT_FACTOR=s.InvalidPDFException=s.ImageKind=s.IDENTITY_MATRIX=s.FormatError=s.FontType=s.FeatureTest=s.FONT_IDENTITY_MATRIX=s.DocumentActionEventType=s.CMapCompressionType=s.BaseException=s.AnnotationType=s.AnnotationStateModelType=s.AnnotationReviewState=s.AnnotationReplyType=s.AnnotationMode=s.AnnotationMarkedState=s.AnnotationFlag=s.AnnotationFieldFlag=s.AnnotationEditorType=s.AnnotationEditorPrefix=s.AnnotationEditorParamsType=s.AnnotationBorderStyleType=s.AnnotationActionEventType=s.AbortException=void 0,s.arrayByteLength=Er,s.arraysToBytes=Dr,s.assert=Kt,s.bytesToString=$n,s.createPromiseCapability=Or,s.createValidAbsoluteUrl=mn,s.escapeString=Ut,s.getModificationDate=Cr,s.getVerbosityLevel=wr,s.info=$r,s.isArrayBuffer=Hr,s.isArrayEqual=Xr,s.isAscii=nr,s.objectFromMap=Ar,s.objectSize=kr,s.setVerbosityLevel=sr,s.shadow=Jt,s.string32=br,s.stringToBytes=lr,s.stringToPDFString=Lt,s.stringToUTF16BEString=gr,s.stringToUTF8String=Tr,s.unreachable=en,s.utf8StringToString=xr,s.warn=Sr,a(2);const et=[1,0,0,1,0,0];s.IDENTITY_MATRIX=et;const at=[.001,0,0,.001,0,0];s.FONT_IDENTITY_MATRIX=at;const lt=1.35;s.LINE_FACTOR=lt;const ht=.35;s.LINE_DESCENT_FACTOR=ht;const dt={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};s.RenderingIntentFlag=dt;const ft={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};s.AnnotationMode=ft;const vt="pdfjs_internal_editor_";s.AnnotationEditorPrefix=vt;const wt={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};s.AnnotationEditorType=wt;const Ct={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};s.AnnotationEditorParamsType=Ct;const xt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};s.PermissionFlag=xt;const Pt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};s.TextRenderingMode=Pt;const Rt={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};s.ImageKind=Rt;const _t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};s.AnnotationType=_t;const St={MARKED:"Marked",REVIEW:"Review"};s.AnnotationStateModelType=St;const bt={MARKED:"Marked",UNMARKED:"Unmarked"};s.AnnotationMarkedState=bt;const Nt={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};s.AnnotationReviewState=Nt;const kt={GROUP:"Group",REPLY:"R"};s.AnnotationReplyType=kt;const Dt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};s.AnnotationFlag=Dt;const jt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};s.AnnotationFieldFlag=jt;const Wt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};s.AnnotationBorderStyleType=Wt;const Yt={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};s.AnnotationActionEventType=Yt;const Bt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};s.DocumentActionEventType=Bt;const zt={O:"PageOpen",C:"PageClose"};s.PageActionEventType=zt;const qt={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};s.StreamType=qt;const nn={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};s.FontType=nn;const Fn={ERRORS:0,WARNINGS:1,INFOS:5};s.VerbosityLevel=Fn;const dr={NONE:0,BINARY:1,STREAM:2};s.CMapCompressionType=dr;const ar={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};s.OPS=ar;const pr={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};s.UNSUPPORTED_FEATURES=pr;const mr={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};s.PasswordResponses=mr;let cr=Fn.WARNINGS;function sr(_r){Number.isInteger(_r)&&(cr=_r)}function wr(){return cr}function $r(_r){cr>=Fn.INFOS&&console.log(`Info: ${_r}`)}function Sr(_r){cr>=Fn.WARNINGS&&console.log(`Warning: ${_r}`)}function en(_r){throw new Error(_r)}function Kt(_r,yr){_r||en(yr)}function Gt(_r){if(!_r)return!1;switch(_r.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function mn(_r,yr=null,vr=null){if(!_r)return null;try{if(vr&&typeof _r=="string"){if(vr.addDefaultProtocol&&_r.startsWith("www.")){const jr=_r.match(/\./g);jr&&jr.length>=2&&(_r=`http://${_r}`)}if(vr.tryConvertEncoding)try{_r=Tr(_r)}catch{}}const Mr=yr?new URL(_r,yr):new URL(_r);if(Gt(Mr))return Mr}catch{}return null}function Jt(_r,yr,vr){return Object.defineProperty(_r,yr,{value:vr,enumerable:!0,configurable:!0,writable:!1}),vr}const rr=function(){function yr(vr,Mr){this.constructor===yr&&en("Cannot initialize BaseException."),this.message=vr,this.name=Mr}return yr.prototype=new Error,yr.constructor=yr,yr}();s.BaseException=rr;class Tn extends rr{constructor(yr,vr){super(yr,"PasswordException"),this.code=vr}}s.PasswordException=Tn;class fr extends rr{constructor(yr,vr){super(yr,"UnknownErrorException"),this.details=vr}}s.UnknownErrorException=fr;class ur extends rr{constructor(yr){super(yr,"InvalidPDFException")}}s.InvalidPDFException=ur;class Ht extends rr{constructor(yr){super(yr,"MissingPDFException")}}s.MissingPDFException=Ht;class Xt extends rr{constructor(yr,vr){super(yr,"UnexpectedResponseException"),this.status=vr}}s.UnexpectedResponseException=Xt;class Zt extends rr{constructor(yr){super(yr,"FormatError")}}s.FormatError=Zt;class tn extends rr{constructor(yr){super(yr,"AbortException")}}s.AbortException=tn;function $n(_r){(typeof _r!="object"||_r===null||_r.length===void 0)&&en("Invalid argument for bytesToString");const yr=_r.length,vr=8192;if(yr<vr)return String.fromCharCode.apply(null,_r);const Mr=[];for(let jr=0;jr<yr;jr+=vr){const Vr=Math.min(jr+vr,yr),Wr=_r.subarray(jr,Vr);Mr.push(String.fromCharCode.apply(null,Wr))}return Mr.join("")}function lr(_r){typeof _r!="string"&&en("Invalid argument for stringToBytes");const yr=_r.length,vr=new Uint8Array(yr);for(let Mr=0;Mr<yr;++Mr)vr[Mr]=_r.charCodeAt(Mr)&255;return vr}function Er(_r){if(_r.length!==void 0)return _r.length;if(_r.byteLength!==void 0)return _r.byteLength;en("Invalid argument for arrayByteLength")}function Dr(_r){const yr=_r.length;if(yr===1&&_r[0]instanceof Uint8Array)return _r[0];let vr=0;for(let Vr=0;Vr<yr;Vr++)vr+=Er(_r[Vr]);let Mr=0;const jr=new Uint8Array(vr);for(let Vr=0;Vr<yr;Vr++){let Wr=_r[Vr];Wr instanceof Uint8Array||(typeof Wr=="string"?Wr=lr(Wr):Wr=new Uint8Array(Wr));const Gr=Wr.byteLength;jr.set(Wr,Mr),Mr+=Gr}return jr}function br(_r){return String.fromCharCode(_r>>24&255,_r>>16&255,_r>>8&255,_r&255)}function kr(_r){return Object.keys(_r).length}function Ar(_r){const yr=Object.create(null);for(const[vr,Mr]of _r)yr[vr]=Mr;return yr}function Rr(){const _r=new Uint8Array(4);return _r[0]=1,new Uint32Array(_r.buffer,0,1)[0]===1}function Nr(){try{return new Function(""),!0}catch{return!1}}class Mn{static get isLittleEndian(){return Jt(this,"isLittleEndian",Rr())}static get isEvalSupported(){return Jt(this,"isEvalSupported",Nr())}static get isOffscreenCanvasSupported(){return Jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}s.FeatureTest=Mn;const Ir=[...Array(256).keys()].map(_r=>_r.toString(16).padStart(2,"0"));class zr{static makeHexColor(yr,vr,Mr){return`#${Ir[yr]}${Ir[vr]}${Ir[Mr]}`}static scaleMinMax(yr,vr){let Mr;yr[0]?(yr[0]<0&&(Mr=vr[0],vr[0]=vr[1],vr[1]=Mr),vr[0]*=yr[0],vr[1]*=yr[0],yr[3]<0&&(Mr=vr[2],vr[2]=vr[3],vr[3]=Mr),vr[2]*=yr[3],vr[3]*=yr[3]):(Mr=vr[0],vr[0]=vr[2],vr[2]=Mr,Mr=vr[1],vr[1]=vr[3],vr[3]=Mr,yr[1]<0&&(Mr=vr[2],vr[2]=vr[3],vr[3]=Mr),vr[2]*=yr[1],vr[3]*=yr[1],yr[2]<0&&(Mr=vr[0],vr[0]=vr[1],vr[1]=Mr),vr[0]*=yr[2],vr[1]*=yr[2]),vr[0]+=yr[4],vr[1]+=yr[4],vr[2]+=yr[5],vr[3]+=yr[5]}static transform(yr,vr){return[yr[0]*vr[0]+yr[2]*vr[1],yr[1]*vr[0]+yr[3]*vr[1],yr[0]*vr[2]+yr[2]*vr[3],yr[1]*vr[2]+yr[3]*vr[3],yr[0]*vr[4]+yr[2]*vr[5]+yr[4],yr[1]*vr[4]+yr[3]*vr[5]+yr[5]]}static applyTransform(yr,vr){const Mr=yr[0]*vr[0]+yr[1]*vr[2]+vr[4],jr=yr[0]*vr[1]+yr[1]*vr[3]+vr[5];return[Mr,jr]}static applyInverseTransform(yr,vr){const Mr=vr[0]*vr[3]-vr[1]*vr[2],jr=(yr[0]*vr[3]-yr[1]*vr[2]+vr[2]*vr[5]-vr[4]*vr[3])/Mr,Vr=(-yr[0]*vr[1]+yr[1]*vr[0]+vr[4]*vr[1]-vr[5]*vr[0])/Mr;return[jr,Vr]}static getAxialAlignedBoundingBox(yr,vr){const Mr=zr.applyTransform(yr,vr),jr=zr.applyTransform(yr.slice(2,4),vr),Vr=zr.applyTransform([yr[0],yr[3]],vr),Wr=zr.applyTransform([yr[2],yr[1]],vr);return[Math.min(Mr[0],jr[0],Vr[0],Wr[0]),Math.min(Mr[1],jr[1],Vr[1],Wr[1]),Math.max(Mr[0],jr[0],Vr[0],Wr[0]),Math.max(Mr[1],jr[1],Vr[1],Wr[1])]}static inverseTransform(yr){const vr=yr[0]*yr[3]-yr[1]*yr[2];return[yr[3]/vr,-yr[1]/vr,-yr[2]/vr,yr[0]/vr,(yr[2]*yr[5]-yr[4]*yr[3])/vr,(yr[4]*yr[1]-yr[5]*yr[0])/vr]}static apply3dTransform(yr,vr){return[yr[0]*vr[0]+yr[1]*vr[1]+yr[2]*vr[2],yr[3]*vr[0]+yr[4]*vr[1]+yr[5]*vr[2],yr[6]*vr[0]+yr[7]*vr[1]+yr[8]*vr[2]]}static singularValueDecompose2dScale(yr){const vr=[yr[0],yr[2],yr[1],yr[3]],Mr=yr[0]*vr[0]+yr[1]*vr[2],jr=yr[0]*vr[1]+yr[1]*vr[3],Vr=yr[2]*vr[0]+yr[3]*vr[2],Wr=yr[2]*vr[1]+yr[3]*vr[3],Gr=(Mr+Wr)/2,Jr=Math.sqrt((Mr+Wr)**2-4*(Mr*Wr-Vr*jr))/2,Yr=Gr+Jr||1,qr=Gr-Jr||1;return[Math.sqrt(Yr),Math.sqrt(qr)]}static normalizeRect(yr){const vr=yr.slice(0);return yr[0]>yr[2]&&(vr[0]=yr[2],vr[2]=yr[0]),yr[1]>yr[3]&&(vr[1]=yr[3],vr[3]=yr[1]),vr}static intersect(yr,vr){const Mr=Math.max(Math.min(yr[0],yr[2]),Math.min(vr[0],vr[2])),jr=Math.min(Math.max(yr[0],yr[2]),Math.max(vr[0],vr[2]));if(Mr>jr)return null;const Vr=Math.max(Math.min(yr[1],yr[3]),Math.min(vr[1],vr[3])),Wr=Math.min(Math.max(yr[1],yr[3]),Math.max(vr[1],vr[3]));return Vr>Wr?null:[Mr,Vr,jr,Wr]}static bezierBoundingBox(yr,vr,Mr,jr,Vr,Wr,Gr,Jr){const Yr=[],qr=[[],[]];let Xs,Zr,no,Kr,eo,io,uo,ho;for(let po=0;po<2;++po){if(po===0?(Zr=6*yr-12*Mr+6*Vr,Xs=-3*yr+9*Mr-9*Vr+3*Gr,no=3*Mr-3*yr):(Zr=6*vr-12*jr+6*Wr,Xs=-3*vr+9*jr-9*Wr+3*Jr,no=3*jr-3*vr),Math.abs(Xs)<1e-12){if(Math.abs(Zr)<1e-12)continue;Kr=-no/Zr,0<Kr&&Kr<1&&Yr.push(Kr);continue}uo=Zr*Zr-4*no*Xs,ho=Math.sqrt(uo),!(uo<0)&&(eo=(-Zr+ho)/(2*Xs),0<eo&&eo<1&&Yr.push(eo),io=(-Zr-ho)/(2*Xs),0<io&&io<1&&Yr.push(io))}let ao=Yr.length,to;const oo=ao;for(;ao--;)Kr=Yr[ao],to=1-Kr,qr[0][ao]=to*to*to*yr+3*to*to*Kr*Mr+3*to*Kr*Kr*Vr+Kr*Kr*Kr*Gr,qr[1][ao]=to*to*to*vr+3*to*to*Kr*jr+3*to*Kr*Kr*Wr+Kr*Kr*Kr*Jr;return qr[0][oo]=yr,qr[1][oo]=vr,qr[0][oo+1]=Gr,qr[1][oo+1]=Jr,qr[0].length=qr[1].length=oo+2,[Math.min(...qr[0]),Math.min(...qr[1]),Math.max(...qr[0]),Math.max(...qr[1])]}}s.Util=zr;const Qt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Lt(_r){if(_r[0]>=""){let vr;if(_r[0]===""&&_r[1]===""?vr="utf-16be":_r[0]===""&&_r[1]===""?vr="utf-16le":_r[0]===""&&_r[1]===""&&_r[2]===""&&(vr="utf-8"),vr)try{const Mr=new TextDecoder(vr,{fatal:!0}),jr=lr(_r);return Mr.decode(jr)}catch(Mr){Sr(`stringToPDFString: "${Mr}".`)}}const yr=[];for(let vr=0,Mr=_r.length;vr<Mr;vr++){const jr=Qt[_r.charCodeAt(vr)];yr.push(jr?String.fromCharCode(jr):_r.charAt(vr))}return yr.join("")}function Ut(_r){return _r.replace(/([()\\\n\r])/g,yr=>yr===`
`?"\\n":yr==="\r"?"\\r":`\\${yr}`)}function nr(_r){return/^[\x00-\x7F]*$/.test(_r)}function gr(_r){const yr=[""];for(let vr=0,Mr=_r.length;vr<Mr;vr++){const jr=_r.charCodeAt(vr);yr.push(String.fromCharCode(jr>>8&255),String.fromCharCode(jr&255))}return yr.join("")}function Tr(_r){return decodeURIComponent(escape(_r))}function xr(_r){return unescape(encodeURIComponent(_r))}function Hr(_r){return typeof _r=="object"&&_r!==null&&_r.byteLength!==void 0}function Xr(_r,yr){if(_r.length!==yr.length)return!1;for(let vr=0,Mr=_r.length;vr<Mr;vr++)if(_r[vr]!==yr[vr])return!1;return!0}function Cr(_r=new Date){return[_r.getUTCFullYear().toString(),(_r.getUTCMonth()+1).toString().padStart(2,"0"),_r.getUTCDate().toString().padStart(2,"0"),_r.getUTCHours().toString().padStart(2,"0"),_r.getUTCMinutes().toString().padStart(2,"0"),_r.getUTCSeconds().toString().padStart(2,"0")].join("")}function Or(){const _r=Object.create(null);let yr=!1;return Object.defineProperty(_r,"settled",{get(){return yr}}),_r.promise=new Promise(function(vr,Mr){_r.resolve=function(jr){yr=!0,vr(jr)},_r.reject=function(jr){yr=!0,Mr(jr)}}),_r}},(o,s,a)=>{a(3)},(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.isNodeJS=void 0;const a=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");s.isNodeJS=a},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var o,a,et,at,lt,ht,dt,ft,vt,Ko,Ct,xt;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Rt,NodeCMapReaderFactory:_t,NodeStandardFontDataFactory:St}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=Rt,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=_t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=St}let createPDFNetworkStream;function setPDFNetworkStreamFactory(Rt){createPDFNetworkStream=Rt}function getDocument(Rt){const _t=new PDFDocumentLoadingTask;let St;if(typeof Rt=="string"||Rt instanceof URL)St={url:Rt};else if((0,_util.isArrayBuffer)(Rt))St={data:Rt};else if(Rt instanceof PDFDataRangeTransport)St={range:Rt};else{if(typeof Rt!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!Rt.url&&!Rt.data&&!Rt.range)throw new Error("Invalid parameter object: need either .data, .range or .url");St=Rt}const bt=Object.create(null);let Nt=null,kt=null;for(const jt in St){const Wt=St[jt];switch(jt){case"url":if(typeof window<"u")try{bt[jt]=new URL(Wt,window.location).href;continue}catch(Yt){(0,_util.warn)(`Cannot create valid URL: "${Yt}".`)}else if(typeof Wt=="string"||Wt instanceof URL){bt[jt]=Wt.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":Nt=Wt;continue;case"worker":kt=Wt;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&Wt instanceof Buffer)bt[jt]=new Uint8Array(Wt);else{if(Wt instanceof Uint8Array)break;if(typeof Wt=="string")bt[jt]=(0,_util.stringToBytes)(Wt);else if(typeof Wt=="object"&&Wt!==null&&!isNaN(Wt.length))bt[jt]=new Uint8Array(Wt);else if((0,_util.isArrayBuffer)(Wt))bt[jt]=new Uint8Array(Wt);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}bt[jt]=Wt}if(bt.CMapReaderFactory=bt.CMapReaderFactory||DefaultCMapReaderFactory,bt.StandardFontDataFactory=bt.StandardFontDataFactory||DefaultStandardFontDataFactory,bt.ignoreErrors=bt.stopAtErrors!==!0,bt.fontExtraProperties=bt.fontExtraProperties===!0,bt.pdfBug=bt.pdfBug===!0,bt.enableXfa=bt.enableXfa===!0,(!Number.isInteger(bt.rangeChunkSize)||bt.rangeChunkSize<1)&&(bt.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof bt.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(bt.docBaseUrl))&&(bt.docBaseUrl=null),(!Number.isInteger(bt.maxImageSize)||bt.maxImageSize<-1)&&(bt.maxImageSize=-1),typeof bt.cMapUrl!="string"&&(bt.cMapUrl=null),typeof bt.standardFontDataUrl!="string"&&(bt.standardFontDataUrl=null),typeof bt.useWorkerFetch!="boolean"&&(bt.useWorkerFetch=bt.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&bt.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof bt.isEvalSupported!="boolean"&&(bt.isEvalSupported=!0),typeof bt.disableFontFace!="boolean"&&(bt.disableFontFace=_is_node.isNodeJS),typeof bt.useSystemFonts!="boolean"&&(bt.useSystemFonts=!_is_node.isNodeJS&&!bt.disableFontFace),(typeof bt.ownerDocument!="object"||bt.ownerDocument===null)&&(bt.ownerDocument=globalThis.document),typeof bt.disableRange!="boolean"&&(bt.disableRange=!1),typeof bt.disableStream!="boolean"&&(bt.disableStream=!1),typeof bt.disableAutoFetch!="boolean"&&(bt.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(bt.verbosity),!kt){const jt={verbosity:bt.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};kt=jt.port?PDFWorker.fromPort(jt):new PDFWorker(jt),_t._worker=kt}const Dt=_t.docId;return kt.promise.then(function(){if(_t.destroyed)throw new Error("Loading aborted");const jt=_fetchDocument(kt,bt,Nt,Dt),Wt=new Promise(function(Yt){let Bt;Nt?Bt=new _transport_stream.PDFDataTransportStream({length:bt.length,initialData:bt.initialData,progressiveDone:bt.progressiveDone,contentDispositionFilename:bt.contentDispositionFilename,disableRange:bt.disableRange,disableStream:bt.disableStream},Nt):bt.data||(Bt=createPDFNetworkStream({url:bt.url,length:bt.length,httpHeaders:bt.httpHeaders,withCredentials:bt.withCredentials,rangeChunkSize:bt.rangeChunkSize,disableRange:bt.disableRange,disableStream:bt.disableStream})),Yt(Bt)});return Promise.all([jt,Wt]).then(function([Yt,Bt]){if(_t.destroyed)throw new Error("Loading aborted");const zt=new _message_handler.MessageHandler(Dt,Yt,kt.port),qt=new WorkerTransport(zt,_t,Bt,bt);_t._transport=qt,zt.send("Ready",null)})}).catch(_t._capability.reject),_t}async function _fetchDocument(Rt,_t,St,bt){if(Rt.destroyed)throw new Error("Worker was destroyed");St&&(_t.length=St.length,_t.initialData=St.initialData,_t.progressiveDone=St.progressiveDone,_t.contentDispositionFilename=St.contentDispositionFilename);const Nt=await Rt.messageHandler.sendWithPromise("GetDocRequest",{docId:bt,apiVersion:"2.16.105",source:{data:_t.data,url:_t.url,password:_t.password,disableAutoFetch:_t.disableAutoFetch,rangeChunkSize:_t.rangeChunkSize,length:_t.length},maxImageSize:_t.maxImageSize,disableFontFace:_t.disableFontFace,docBaseUrl:_t.docBaseUrl,ignoreErrors:_t.ignoreErrors,isEvalSupported:_t.isEvalSupported,fontExtraProperties:_t.fontExtraProperties,enableXfa:_t.enableXfa,useSystemFonts:_t.useSystemFonts,cMapUrl:_t.useWorkerFetch?_t.cMapUrl:null,standardFontDataUrl:_t.useWorkerFetch?_t.standardFontDataUrl:null});if(_t.data&&(_t.data=null),Rt.destroyed)throw new Error("Worker was destroyed");return Nt}const s=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${Mo(s,o)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var _t;this.destroyed=!0,await((_t=this._transport)==null?void 0:_t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=s;o=new WeakMap,Pr(PDFDocumentLoadingTask,o,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(_t,St,bt=!1,Nt=null){this.length=_t,this.initialData=St,this.progressiveDone=bt,this.contentDispositionFilename=Nt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(_t){this._rangeListeners.push(_t)}addProgressListener(_t){this._progressListeners.push(_t)}addProgressiveReadListener(_t){this._progressiveReadListeners.push(_t)}addProgressiveDoneListener(_t){this._progressiveDoneListeners.push(_t)}onDataRange(_t,St){for(const bt of this._rangeListeners)bt(_t,St)}onDataProgress(_t,St){this._readyCapability.promise.then(()=>{for(const bt of this._progressListeners)bt(_t,St)})}onDataProgressiveRead(_t){this._readyCapability.promise.then(()=>{for(const St of this._progressiveReadListeners)St(_t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const _t of this._progressiveDoneListeners)_t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(_t,St){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(_t,St){this._pdfInfo=_t,this._transport=St,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(_t){return this._transport.getPage(_t)}getPageIndex(_t){return this._transport.getPageIndex(_t)}getDestinations(){return this._transport.getDestinations()}getDestination(_t){return this._transport.getDestination(_t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(_t=!1){return this._transport.startCleanup(_t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(_t,St,bt,Nt,kt=!1){this._pageIndex=_t,this._pageInfo=St,this._ownerDocument=Nt,this._transport=bt,this._stats=kt?new _display_utils.StatTimer:null,this._pdfBug=kt,this.commonObjs=bt.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:_t,rotation:St=this.rotate,offsetX:bt=0,offsetY:Nt=0,dontFlip:kt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:_t,rotation:St,offsetX:bt,offsetY:Nt,dontFlip:kt})}getAnnotations({intent:_t="display"}={}){const St=this._transport.getRenderingIntent(_t);let bt=this._annotationPromises.get(St.cacheKey);return bt||(bt=this._transport.getAnnotations(this._pageIndex,St.renderingIntent),this._annotationPromises.set(St.cacheKey,bt),bt=bt.then(Nt=>{for(const kt of Nt)kt.titleObj!==void 0&&Object.defineProperty(kt,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),kt.titleObj.str}}),kt.contentsObj!==void 0&&Object.defineProperty(kt,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),kt.contentsObj.str}});return Nt})),bt}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var _t;return((_t=this._transport._htmlForXfa)==null?void 0:_t.children[this._pageIndex])||null}render({canvasContext:_t,viewport:St,intent:bt="display",annotationMode:Nt=_util.AnnotationMode.ENABLE,transform:kt=null,imageLayer:Dt=null,canvasFactory:jt=null,background:Wt=null,optionalContentConfigPromise:Yt=null,annotationCanvasMap:Bt=null,pageColors:zt=null,printAnnotationStorage:qt=null}){var sr,wr;((sr=arguments[0])==null?void 0:sr.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&Nt===_util.AnnotationMode.ENABLE&&(Nt=_util.AnnotationMode.ENABLE_FORMS)),((wr=arguments[0])==null?void 0:wr.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&Nt===_util.AnnotationMode.ENABLE&&(Nt=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const nn=this._transport.getRenderingIntent(bt,Nt,qt);this.pendingCleanup=!1,Yt||(Yt=this._transport.getOptionalContentConfig());let Fn=this._intentStates.get(nn.cacheKey);Fn||(Fn=Object.create(null),this._intentStates.set(nn.cacheKey,Fn)),Fn.streamReaderCancelTimeout&&(clearTimeout(Fn.streamReaderCancelTimeout),Fn.streamReaderCancelTimeout=null);const dr=jt||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),ar=!!(nn.renderingIntent&_util.RenderingIntentFlag.PRINT);Fn.displayReadyCapability||(Fn.displayReadyCapability=(0,_util.createPromiseCapability)(),Fn.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(nn));const pr=$r=>{Fn.renderTasks.delete(mr),(this.cleanupAfterRender||ar)&&(this.pendingCleanup=!0),this._tryCleanup(),$r?(mr.capability.reject($r),this._abortOperatorList({intentState:Fn,reason:$r instanceof Error?$r:new Error($r)})):mr.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},mr=new InternalRenderTask({callback:pr,params:{canvasContext:_t,viewport:St,transform:kt,imageLayer:Dt,background:Wt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Bt,operatorList:Fn.operatorList,pageIndex:this._pageIndex,canvasFactory:dr,useRequestAnimationFrame:!ar,pdfBug:this._pdfBug,pageColors:zt});(Fn.renderTasks||(Fn.renderTasks=new Set)).add(mr);const cr=mr.task;return Promise.all([Fn.displayReadyCapability.promise,Yt]).then(([$r,Sr])=>{if(this.pendingCleanup){pr();return}this._stats&&this._stats.time("Rendering"),mr.initializeGraphics({transparency:$r,optionalContentConfig:Sr}),mr.operatorListChanged()}).catch(pr),cr}getOperatorList({intent:_t="display",annotationMode:St=_util.AnnotationMode.ENABLE,printAnnotationStorage:bt=null}={}){function Nt(){Dt.operatorList.lastChunk&&(Dt.opListReadCapability.resolve(Dt.operatorList),Dt.renderTasks.delete(jt))}const kt=this._transport.getRenderingIntent(_t,St,bt,!0);let Dt=this._intentStates.get(kt.cacheKey);Dt||(Dt=Object.create(null),this._intentStates.set(kt.cacheKey,Dt));let jt;return Dt.opListReadCapability||(jt=Object.create(null),jt.operatorListChanged=Nt,Dt.opListReadCapability=(0,_util.createPromiseCapability)(),(Dt.renderTasks||(Dt.renderTasks=new Set)).add(jt),Dt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(kt)),Dt.opListReadCapability.promise}streamTextContent({disableCombineTextItems:_t=!1,includeMarkedContent:St=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:_t!==!0,includeMarkedContent:St===!0},{highWaterMark:100,size(Nt){return Nt.items.length}})}getTextContent(_t={}){if(this._transport._htmlForXfa)return this.getXfa().then(bt=>_xfa_text.XfaText.textContent(bt));const St=this.streamTextContent(_t);return new Promise(function(bt,Nt){function kt(){Dt.read().then(function({value:Wt,done:Yt}){if(Yt){bt(jt);return}Object.assign(jt.styles,Wt.styles),jt.items.push(...Wt.items),kt()},Nt)}const Dt=St.getReader(),jt={items:[],styles:Object.create(null)};kt()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const _t=[];for(const St of this._intentStates.values())if(this._abortOperatorList({intentState:St,reason:new Error("Page was destroyed."),force:!0}),!St.opListReadCapability)for(const bt of St.renderTasks)_t.push(bt.completed),bt.cancel();this.objs.clear();for(const St of this._bitmaps)St.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(_t)}cleanup(_t=!1){return this.pendingCleanup=!0,this._tryCleanup(_t)}_tryCleanup(_t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:St,operatorList:bt}of this._intentStates.values())if(St.size>0||!bt.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,_t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const St of this._bitmaps)St.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(_t,St){const bt=this._intentStates.get(St);bt&&(this._stats&&this._stats.timeEnd("Page Request"),bt.displayReadyCapability&&bt.displayReadyCapability.resolve(_t))}_renderPageChunk(_t,St){for(let bt=0,Nt=_t.length;bt<Nt;bt++)St.operatorList.fnArray.push(_t.fnArray[bt]),St.operatorList.argsArray.push(_t.argsArray[bt]);St.operatorList.lastChunk=_t.lastChunk,St.operatorList.separateAnnots=_t.separateAnnots;for(const bt of St.renderTasks)bt.operatorListChanged();_t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:_t,cacheKey:St,annotationStorageMap:bt}){const kt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:_t,cacheKey:St,annotationStorage:bt}).getReader(),Dt=this._intentStates.get(St);Dt.streamReader=kt;const jt=()=>{kt.read().then(({value:Wt,done:Yt})=>{if(Yt){Dt.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Wt,Dt),jt())},Wt=>{if(Dt.streamReader=null,!this._transport.destroyed){if(Dt.operatorList){Dt.operatorList.lastChunk=!0;for(const Yt of Dt.renderTasks)Yt.operatorListChanged();this._tryCleanup()}if(Dt.displayReadyCapability)Dt.displayReadyCapability.reject(Wt);else if(Dt.opListReadCapability)Dt.opListReadCapability.reject(Wt);else throw Wt}})};jt()}_abortOperatorList({intentState:_t,reason:St,force:bt=!1}){if(_t.streamReader){if(!bt){if(_t.renderTasks.size>0)return;if(St instanceof _display_utils.RenderingCancelledException){_t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:_t,reason:St,force:!0}),_t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(_t.streamReader.cancel(new _util.AbortException(St.message)).catch(()=>{}),_t.streamReader=null,!this._transport.destroyed){for(const[Nt,kt]of this._intentStates)if(kt===_t){this._intentStates.delete(Nt);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(_t,St){const bt={data:structuredClone(_t,St)};this._deferred.then(()=>{for(const Nt of this._listeners)Nt.call(this,bt)})}addEventListener(_t,St){this._listeners.push(St)}removeEventListener(_t,St){const bt=this._listeners.indexOf(St);this._listeners.splice(bt,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Rt=(a=document==null?void 0:document.currentScript)==null?void 0:a.src;Rt&&(PDFWorkerUtil.fallbackWorkerSrc=Rt.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Rt,_t){let St;try{if(St=new URL(Rt),!St.origin||St.origin==="null")return!1}catch{return!1}const bt=new URL(_t,St);return St.origin===bt.origin},PDFWorkerUtil.createCDNWrapper=function(Rt){const _t=`importScripts("${Rt}");`;return URL.createObjectURL(new Blob([_t]))}}const _PDFWorker=class{constructor({name:Rt=null,port:_t=null,verbosity:St=(0,_util.getVerbosityLevel)()}={}){if(_t&&ir(_PDFWorker,et).has(_t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Rt,this.destroyed=!1,this.verbosity=St,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,_t){ir(_PDFWorker,et).set(_t,this),this._initializeFromPort(_t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Rt){this._port=Rt,this._messageHandler=new _message_handler.MessageHandler("main","worker",Rt),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Rt}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Rt)||(Rt=PDFWorkerUtil.createCDNWrapper(new URL(Rt,window.location).href));const _t=new Worker(Rt),St=new _message_handler.MessageHandler("main","worker",_t),bt=()=>{_t.removeEventListener("error",Nt),St.destroy(),_t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Nt=()=>{this._webWorker||bt()};_t.addEventListener("error",Nt),St.on("test",Dt=>{if(_t.removeEventListener("error",Nt),this.destroyed){bt();return}Dt?(this._messageHandler=St,this._port=_t,this._webWorker=_t,this._readyCapability.resolve(),St.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),St.destroy(),_t.terminate())}),St.on("ready",Dt=>{if(_t.removeEventListener("error",Nt),this.destroyed){bt();return}try{kt()}catch{this._setupFakeWorker()}});const kt=()=>{const Dt=new Uint8Array;St.send("test",Dt,[Dt.buffer])};kt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Rt=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const _t=new LoopbackPort;this._port=_t;const St=`fake${PDFWorkerUtil.fakeWorkerId++}`,bt=new _message_handler.MessageHandler(St+"_worker",St,_t);Rt.setup(bt,_t);const Nt=new _message_handler.MessageHandler(St,St+"_worker",_t);this._messageHandler=Nt,this._readyCapability.resolve(),Nt.send("configure",{verbosity:this.verbosity})}).catch(Rt=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Rt.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),ir(_PDFWorker,et).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Rt){if(!(Rt!=null&&Rt.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return ir(this,et).has(Rt.port)?ir(this,et).get(Rt.port):new _PDFWorker(Rt)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Rt;try{return((Rt=globalThis.pdfjsWorker)==null?void 0:Rt.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;et=new WeakMap,Pr(PDFWorker,et,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(_t,St,bt,Nt){Pr(this,at,null);Pr(this,lt,new Map);Pr(this,ht,new Map);Pr(this,dt,null);this.messageHandler=_t,this.loadingTask=St,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:St.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:Nt.ownerDocument,styleElement:Nt.styleElement}),this._params=Nt,Nt.useWorkerFetch||(this.CMapReaderFactory=new Nt.CMapReaderFactory({baseUrl:Nt.cMapUrl,isCompressed:Nt.cMapPacked}),this.StandardFontDataFactory=new Nt.StandardFontDataFactory({baseUrl:Nt.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=bt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return ir(this,at)}getRenderingIntent(_t,St=_util.AnnotationMode.ENABLE,bt=null,Nt=!1){let kt=_util.RenderingIntentFlag.DISPLAY,Dt=null;switch(_t){case"any":kt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":kt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${_t}`)}switch(St){case _util.AnnotationMode.DISABLE:kt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:kt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:kt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Dt=(kt&_util.RenderingIntentFlag.PRINT&&bt instanceof _annotation_storage.PrintAnnotationStorage?bt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${St}`)}return Nt&&(kt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:kt,cacheKey:`${kt}_${_annotation_storage.AnnotationStorage.getHash(Dt)}`,annotationStorageMap:Dt}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const _t=[];for(const bt of ir(this,lt).values())_t.push(bt._destroy());ir(this,lt).clear(),ir(this,ht).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const St=this.messageHandler.sendWithPromise("Terminate",null);return _t.push(St),Promise.all(_t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Ur(this,dt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:_t,loadingTask:St}=this;_t.on("GetReader",(bt,Nt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=kt=>{this._lastProgress={loaded:kt.loaded,total:kt.total}},Nt.onPull=()=>{this._fullReader.read().then(function({value:kt,done:Dt}){if(Dt){Nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(kt),"GetReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(kt),1,[kt])}).catch(kt=>{Nt.error(kt)})},Nt.onCancel=kt=>{this._fullReader.cancel(kt),Nt.ready.catch(Dt=>{if(!this.destroyed)throw Dt})}}),_t.on("ReaderHeadersReady",bt=>{const Nt=(0,_util.createPromiseCapability)(),kt=this._fullReader;return kt.headersReady.then(()=>{var Dt;(!kt.isStreamingSupported||!kt.isRangeSupported)&&(this._lastProgress&&((Dt=St.onProgress)==null||Dt.call(St,this._lastProgress)),kt.onProgress=jt=>{var Wt;(Wt=St.onProgress)==null||Wt.call(St,{loaded:jt.loaded,total:jt.total})}),Nt.resolve({isStreamingSupported:kt.isStreamingSupported,isRangeSupported:kt.isRangeSupported,contentLength:kt.contentLength})},Nt.reject),Nt.promise}),_t.on("GetRangeReader",(bt,Nt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const kt=this._networkStream.getRangeReader(bt.begin,bt.end);if(!kt){Nt.close();return}Nt.onPull=()=>{kt.read().then(function({value:Dt,done:jt}){if(jt){Nt.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(Dt),"GetRangeReader - expected an ArrayBuffer."),Nt.enqueue(new Uint8Array(Dt),1,[Dt])}).catch(Dt=>{Nt.error(Dt)})},Nt.onCancel=Dt=>{kt.cancel(Dt),Nt.ready.catch(jt=>{if(!this.destroyed)throw jt})}}),_t.on("GetDoc",({pdfInfo:bt})=>{this._numPages=bt.numPages,this._htmlForXfa=bt.htmlForXfa,delete bt.htmlForXfa,St._capability.resolve(new PDFDocumentProxy(bt,this))}),_t.on("DocException",function(bt){let Nt;switch(bt.name){case"PasswordException":Nt=new _util.PasswordException(bt.message,bt.code);break;case"InvalidPDFException":Nt=new _util.InvalidPDFException(bt.message);break;case"MissingPDFException":Nt=new _util.MissingPDFException(bt.message);break;case"UnexpectedResponseException":Nt=new _util.UnexpectedResponseException(bt.message,bt.status);break;case"UnknownErrorException":Nt=new _util.UnknownErrorException(bt.message,bt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}St._capability.reject(Nt)}),_t.on("PasswordRequest",bt=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),St.onPassword){const Nt=kt=>{kt instanceof Error?this._passwordCapability.reject(kt):this._passwordCapability.resolve({password:kt})};try{St.onPassword(Nt,bt.code)}catch(kt){this._passwordCapability.reject(kt)}}else this._passwordCapability.reject(new _util.PasswordException(bt.message,bt.code));return this._passwordCapability.promise}),_t.on("DataLoaded",bt=>{var Nt;(Nt=St.onProgress)==null||Nt.call(St,{loaded:bt.length,total:bt.length}),this.downloadInfoCapability.resolve(bt)}),_t.on("StartRenderPage",bt=>{if(this.destroyed)return;ir(this,lt).get(bt.pageIndex)._startRenderPage(bt.transparency,bt.cacheKey)}),_t.on("commonobj",([bt,Nt,kt])=>{var Dt;if(!this.destroyed&&!this.commonObjs.has(bt))switch(Nt){case"Font":const jt=this._params;if("error"in kt){const Bt=kt.error;(0,_util.warn)(`Error during font loading: ${Bt}`),this.commonObjs.resolve(bt,Bt);break}let Wt=null;jt.pdfBug&&((Dt=globalThis.FontInspector)!=null&&Dt.enabled)&&(Wt={registerFont(Bt,zt){globalThis.FontInspector.fontAdded(Bt,zt)}});const Yt=new _font_loader.FontFaceObject(kt,{isEvalSupported:jt.isEvalSupported,disableFontFace:jt.disableFontFace,ignoreErrors:jt.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:Wt});this.fontLoader.bind(Yt).catch(Bt=>_t.sendWithPromise("FontFallback",{id:bt})).finally(()=>{!jt.fontExtraProperties&&Yt.data&&(Yt.data=null),this.commonObjs.resolve(bt,Yt)});break;case"FontPath":case"Image":this.commonObjs.resolve(bt,kt);break;default:throw new Error(`Got unknown common object type ${Nt}`)}}),_t.on("obj",([bt,Nt,kt,Dt])=>{var Wt;if(this.destroyed)return;const jt=ir(this,lt).get(Nt);if(!jt.objs.has(bt))switch(kt){case"Image":jt.objs.resolve(bt,Dt);const Yt=8e6;if(Dt){let Bt;if(Dt.bitmap){const{bitmap:zt,width:qt,height:nn}=Dt;Bt=qt*nn*4,jt._bitmaps.add(zt)}else Bt=((Wt=Dt.data)==null?void 0:Wt.length)||0;Bt>Yt&&(jt.cleanupAfterRender=!0)}break;case"Pattern":jt.objs.resolve(bt,Dt);break;default:throw new Error(`Got unknown object type ${kt}`)}}),_t.on("DocProgress",bt=>{var Nt;this.destroyed||(Nt=St.onProgress)==null||Nt.call(St,{loaded:bt.loaded,total:bt.total})}),_t.on("DocStats",bt=>{this.destroyed||Ur(this,at,Object.freeze({streamTypes:Object.freeze(bt.streamTypes),fontTypes:Object.freeze(bt.fontTypes)}))}),_t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),_t.on("FetchBuiltInCMap",bt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(bt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),_t.on("FetchStandardFontData",bt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(bt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:_t}){var St,bt;this.destroyed||(bt=(St=this.loadingTask).onUnsupportedFeature)==null||bt.call(St,_t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(_t){if(!Number.isInteger(_t)||_t<=0||_t>this._numPages)return Promise.reject(new Error("Invalid page request."));const St=_t-1,bt=ir(this,ht).get(St);if(bt)return bt;const Nt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:St}).then(kt=>{if(this.destroyed)throw new Error("Transport destroyed");const Dt=new PDFPageProxy(St,kt,this,this._params.ownerDocument,this._params.pdfBug);return ir(this,lt).set(St,Dt),Dt});return ir(this,ht).set(St,Nt),Nt}getPageIndex(_t){return typeof _t!="object"||_t===null||!Number.isInteger(_t.num)||_t.num<0||!Number.isInteger(_t.gen)||_t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:_t.num,gen:_t.gen})}getAnnotations(_t,St){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:_t,intent:St})}saveDocument(){var _t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((_t=this._fullReader)==null?void 0:_t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(_t){return typeof _t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:_t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(_t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:_t})}getStructTree(_t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:_t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(_t=>new _optional_content_config.OptionalContentConfig(_t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return ir(this,dt)||Ur(this,dt,this.messageHandler.sendWithPromise("GetMetadata",null).then(_t=>{var St,bt;return{info:_t[0],metadata:_t[1]?new _metadata.Metadata(_t[1]):null,contentDispositionFilename:((St=this._fullReader)==null?void 0:St.filename)??null,contentLength:((bt=this._fullReader)==null?void 0:bt.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(_t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const St of ir(this,lt).values())if(!St.cleanup())throw new Error(`startCleanup: Page ${St.pageNumber} is currently rendering.`);this.commonObjs.clear(),_t||this.fontLoader.clear(),Ur(this,dt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const _t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:_t.disableAutoFetch,enableXfa:_t.enableXfa})}}at=new WeakMap,lt=new WeakMap,ht=new WeakMap,dt=new WeakMap;class PDFObjects{constructor(){Pr(this,vt);Pr(this,ft,Object.create(null))}get(_t,St=null){if(St){const Nt=Fr(this,vt,Ko).call(this,_t);return Nt.capability.promise.then(()=>St(Nt.data)),null}const bt=ir(this,ft)[_t];if(!(bt!=null&&bt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${_t}.`);return bt.data}has(_t){const St=ir(this,ft)[_t];return(St==null?void 0:St.capability.settled)||!1}resolve(_t,St=null){const bt=Fr(this,vt,Ko).call(this,_t);bt.data=St,bt.capability.resolve()}clear(){Ur(this,ft,Object.create(null))}}ft=new WeakMap,vt=new WeakSet,Ko=function(_t){const St=ir(this,ft)[_t];return St||(ir(this,ft)[_t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(_t){Pr(this,Ct,null);Ur(this,Ct,_t),this.onContinue=null}get promise(){return ir(this,Ct).capability.promise}cancel(){ir(this,Ct).cancel()}get separateAnnots(){const{separateAnnots:_t}=ir(this,Ct).operatorList;if(!_t)return!1;const{annotationCanvasMap:St}=ir(this,Ct);return _t.form||_t.canvas&&(St==null?void 0:St.size)>0}}Ct=new WeakMap,exports.RenderTask=RenderTask;const Pt=class{constructor({callback:_t,params:St,objs:bt,commonObjs:Nt,annotationCanvasMap:kt,operatorList:Dt,pageIndex:jt,canvasFactory:Wt,useRequestAnimationFrame:Yt=!1,pdfBug:Bt=!1,pageColors:zt=null}){this.callback=_t,this.params=St,this.objs=bt,this.commonObjs=Nt,this.annotationCanvasMap=kt,this.operatorListIdx=null,this.operatorList=Dt,this._pageIndex=jt,this.canvasFactory=Wt,this._pdfBug=Bt,this.pageColors=zt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Yt===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=St.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:_t=!1,optionalContentConfig:St}){var Wt;if(this.cancelled)return;if(this._canvas){if(ir(Pt,xt).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ir(Pt,xt).add(this._canvas)}this._pdfBug&&((Wt=globalThis.StepperManager)!=null&&Wt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:bt,viewport:Nt,transform:kt,imageLayer:Dt,background:jt}=this.params;this.gfx=new _canvas.CanvasGraphics(bt,this.commonObjs,this.objs,this.canvasFactory,Dt,St,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:kt,viewport:Nt,transparency:_t,background:jt}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(_t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&ir(Pt,xt).delete(this._canvas),this.callback(_t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&ir(Pt,xt).delete(this._canvas),this.callback())))}};let InternalRenderTask=Pt;xt=new WeakMap,Pr(InternalRenderTask,xt,new WeakSet);const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(o,s,a)=>{var ft,Xl,wt;Object.defineProperty(s,"__esModule",{value:!0}),s.PrintAnnotationStorage=s.AnnotationStorage=void 0;var et=a(1),at=a(6),lt=a(10);class ht{constructor(){Pr(this,ft);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(xt,Pt){const Rt=this._storage.get(xt);return Rt===void 0?Pt:Object.assign(Pt,Rt)}getRawValue(xt){return this._storage.get(xt)}remove(xt){if(this._storage.delete(xt),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Pt of this._storage.values())if(Pt instanceof at.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(xt,Pt){const Rt=this._storage.get(xt);let _t=!1;if(Rt!==void 0)for(const[St,bt]of Object.entries(Pt))Rt[St]!==bt&&(_t=!0,Rt[St]=bt);else _t=!0,this._storage.set(xt,Pt);_t&&Fr(this,ft,Xl).call(this),Pt instanceof at.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Pt.constructor._type)}has(xt){return this._storage.has(xt)}getAll(){return this._storage.size>0?(0,et.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new dt(this)}get serializable(){if(this._storage.size===0)return null;const xt=new Map;for(const[Pt,Rt]of this._storage){const _t=Rt instanceof at.AnnotationEditor?Rt.serialize():Rt;_t&&xt.set(Pt,_t)}return xt}static getHash(xt){if(!xt)return"";const Pt=new lt.MurmurHash3_64;for(const[Rt,_t]of xt)Pt.update(`${Rt}:${JSON.stringify(_t)}`);return Pt.hexdigest()}}ft=new WeakSet,Xl=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},s.AnnotationStorage=ht;class dt extends ht{constructor(Pt){super();Pr(this,wt,null);Ur(this,wt,structuredClone(Pt.serializable))}get print(){(0,et.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return ir(this,wt)}}wt=new WeakMap,s.PrintAnnotationStorage=dt},(o,s,a)=>{var ht,dt,ft,vt,wt,Ct;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditor=void 0;var et=a(7),at=a(1);const xt=class{constructor(Rt){Pr(this,ht,this.focusin.bind(this));Pr(this,dt,this.focusout.bind(this));Pr(this,ft,!1);Pr(this,vt,!1);Pr(this,wt,!1);Pr(this,Ct,xt._zIndex++);this.constructor===xt&&(0,at.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Rt.parent,this.id=Rt.id,this.width=this.height=null,this.pageIndex=Rt.parent.pageIndex,this.name=Rt.name,this.div=null;const[_t,St]=this.parent.viewportBaseDimensions;this.x=Rt.x/_t,this.y=Rt.y/St,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,at.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=ir(this,Ct)}focusin(Rt){ir(this,ft)?Ur(this,ft,!1):this.parent.setSelected(this)}focusout(Rt){if(!this.isAttachedToDOM)return;const _t=Rt.relatedTarget;_t!=null&&_t.closest(`#${this.id}`)||(Rt.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(Rt){const _t=this.parent.div.getBoundingClientRect();this.startX=Rt.clientX-_t.x,this.startY=Rt.clientY-_t.y,Rt.dataTransfer.setData("text/plain",this.id),Rt.dataTransfer.effectAllowed="move"}setAt(Rt,_t,St,bt){const[Nt,kt]=this.parent.viewportBaseDimensions;[St,bt]=this.screenToPageTranslation(St,bt),this.x=(Rt+St)/Nt,this.y=(_t+bt)/kt,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(Rt,_t){const[St,bt]=this.parent.viewportBaseDimensions;[Rt,_t]=this.screenToPageTranslation(Rt,_t),this.x+=Rt/St,this.y+=_t/bt,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(Rt,_t){const{rotation:St}=this.parent.viewport;switch(St){case 90:return[_t,-Rt];case 180:return[-Rt,-_t];case 270:return[-_t,Rt];default:return[Rt,_t]}}setDims(Rt,_t){const[St,bt]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*Rt/St}%`,this.div.style.height=`${100*_t/bt}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",ir(this,ht)),this.div.addEventListener("focusout",ir(this,dt));const[Rt,_t]=this.getInitialTranslation();return this.translate(Rt,_t),(0,et.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(Rt){const _t=et.KeyboardManager.platform.isMac;if(Rt.button!==0||Rt.ctrlKey&&_t){Rt.preventDefault();return}Rt.ctrlKey&&!_t||Rt.shiftKey||Rt.metaKey&&_t?this.parent.toggleSelected(this):this.parent.setSelected(this),Ur(this,ft,!0)}getRect(Rt,_t){const[St,bt]=this.parent.viewportBaseDimensions,[Nt,kt]=this.parent.pageDimensions,Dt=Nt*Rt/St,jt=kt*_t/bt,Wt=this.x*Nt,Yt=this.y*kt,Bt=this.width*Nt,zt=this.height*kt;switch(this.rotation){case 0:return[Wt+Dt,kt-Yt-jt-zt,Wt+Dt+Bt,kt-Yt-jt];case 90:return[Wt+jt,kt-Yt+Dt,Wt+jt+zt,kt-Yt+Dt+Bt];case 180:return[Wt-Dt-Bt,kt-Yt+jt,Wt-Dt,kt-Yt+jt+zt];case 270:return[Wt-jt-zt,kt-Yt-Dt-Bt,Wt-jt,kt-Yt-Dt];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Rt,_t){const[St,bt,Nt,kt]=Rt,Dt=Nt-St,jt=kt-bt;switch(this.rotation){case 0:return[St,_t-kt,Dt,jt];case 90:return[St,_t-bt,jt,Dt];case 180:return[Nt,_t-bt,Dt,jt];case 270:return[Nt,_t-kt,jt,Dt];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ur(this,wt,!0)}disableEditMode(){Ur(this,wt,!1)}isInEditMode(){return ir(this,wt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Rt;(Rt=this.div)==null||Rt.addEventListener("focusin",ir(this,ht))}serialize(){(0,at.unreachable)("An editor must be serializable")}static deserialize(Rt,_t){const St=new this.prototype.constructor({parent:_t,id:_t.getNextId()});St.rotation=Rt.rotation;const[bt,Nt]=_t.pageDimensions,[kt,Dt,jt,Wt]=St.getRectInCurrentCoords(Rt.rect,Nt);return St.x=kt/bt,St.y=Dt/Nt,St.width=jt/bt,St.height=Wt/Nt,St}remove(){this.div.removeEventListener("focusin",ir(this,ht)),this.div.removeEventListener("focusout",ir(this,dt)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var Rt;(Rt=this.div)==null||Rt.classList.add("selectedEditor")}unselect(){var Rt;(Rt=this.div)==null||Rt.classList.remove("selectedEditor")}updateParams(Rt,_t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return ir(this,vt)}set isEditing(Rt){Ur(this,vt,Rt),Rt?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let lt=xt;ht=new WeakMap,dt=new WeakMap,ft=new WeakMap,vt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,Qr(lt,"_colorManager",new et.ColorManager),Qr(lt,"_zIndex",1),s.AnnotationEditor=lt},(o,s,a)=>{var Pt,Rt,_t,St,bt,Nt,Zl,jt,Yt,Bt,zt,qt,nn,Fn,dr,ar,pr,mr,cr,sr,wr,$r,Sr,en,Kt,Gt,iu,Jt,yl,Tn,ro,ur,yo,Xt,su,tn,ou,lr,El,Dr,wo,kr,Eo;Object.defineProperty(s,"__esModule",{value:!0}),s.KeyboardManager=s.CommandManager=s.ColorManager=s.AnnotationEditorUIManager=void 0,s.bindEvents=lt,s.opacityToHex=ht;var et=a(1),at=a(8);function lt(Nr,Mn,Ir){for(const zr of Ir)Mn.addEventListener(zr,Nr[zr].bind(Nr))}function ht(Nr){return Math.round(Math.min(255,Math.max(1,255*Nr))).toString(16).padStart(2,"0")}class dt{constructor(){Pr(this,Pt,0)}getId(){return`${et.AnnotationEditorPrefix}${Mo(this,Pt)._++}`}}Pt=new WeakMap;class ft{constructor(Mn=128){Pr(this,Rt,[]);Pr(this,_t,!1);Pr(this,St,void 0);Pr(this,bt,-1);Ur(this,St,Mn)}add({cmd:Mn,undo:Ir,mustExec:zr,type:Qt=NaN,overwriteIfSameType:Lt=!1,keepUndo:Ut=!1}){if(zr&&Mn(),ir(this,_t))return;const nr={cmd:Mn,undo:Ir,type:Qt};if(ir(this,bt)===-1){ir(this,Rt).length>0&&(ir(this,Rt).length=0),Ur(this,bt,0),ir(this,Rt).push(nr);return}if(Lt&&ir(this,Rt)[ir(this,bt)].type===Qt){Ut&&(nr.undo=ir(this,Rt)[ir(this,bt)].undo),ir(this,Rt)[ir(this,bt)]=nr;return}const gr=ir(this,bt)+1;gr===ir(this,St)?ir(this,Rt).splice(0,1):(Ur(this,bt,gr),gr<ir(this,Rt).length&&ir(this,Rt).splice(gr)),ir(this,Rt).push(nr)}undo(){ir(this,bt)!==-1&&(Ur(this,_t,!0),ir(this,Rt)[ir(this,bt)].undo(),Ur(this,_t,!1),Ur(this,bt,ir(this,bt)-1))}redo(){ir(this,bt)<ir(this,Rt).length-1&&(Ur(this,bt,ir(this,bt)+1),Ur(this,_t,!0),ir(this,Rt)[ir(this,bt)].cmd(),Ur(this,_t,!1))}hasSomethingToUndo(){return ir(this,bt)!==-1}hasSomethingToRedo(){return ir(this,bt)<ir(this,Rt).length-1}destroy(){Ur(this,Rt,null)}}Rt=new WeakMap,_t=new WeakMap,St=new WeakMap,bt=new WeakMap,s.CommandManager=ft;const Dt=class{constructor(Mn){Pr(this,Nt);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const Ir=Dt.platform.isMac;for(const[zr,Qt]of Mn)for(const Lt of zr){const Ut=Lt.startsWith("mac+");Ir&&Ut?(this.callbacks.set(Lt.slice(4),Qt),this.allKeys.add(Lt.split("+").at(-1))):!Ir&&!Ut&&(this.callbacks.set(Lt,Qt),this.allKeys.add(Lt.split("+").at(-1)))}}static get platform(){const Mn=typeof navigator<"u"?navigator.platform:"";return(0,et.shadow)(this,"platform",{isWin:Mn.includes("Win"),isMac:Mn.includes("Mac")})}exec(Mn,Ir){if(!this.allKeys.has(Ir.key))return;const zr=this.callbacks.get(Fr(this,Nt,Zl).call(this,Ir));zr&&(zr.bind(Mn)(),Ir.stopPropagation(),Ir.preventDefault())}};let vt=Dt;Nt=new WeakSet,Zl=function(Mn){Mn.altKey&&this.buffer.push("alt"),Mn.ctrlKey&&this.buffer.push("ctrl"),Mn.metaKey&&this.buffer.push("meta"),Mn.shiftKey&&this.buffer.push("shift"),this.buffer.push(Mn.key);const Ir=this.buffer.join("+");return this.buffer.length=0,Ir},s.KeyboardManager=vt;class wt{constructor(){Pr(this,jt,null)}copy(Mn){Mn&&(Array.isArray(Mn)?Ur(this,jt,Mn.map(Ir=>Ir.serialize())):Ur(this,jt,[Mn.serialize()]),Ur(this,jt,ir(this,jt).filter(Ir=>!!Ir)),ir(this,jt).length===0&&Ur(this,jt,null))}paste(){return ir(this,jt)}isEmpty(){return ir(this,jt)===null}destroy(){Ur(this,jt,null)}}jt=new WeakMap;const Wt=class{get _colors(){const Mn=new Map([["CanvasText",null],["Canvas",null]]);return(0,at.getColorValues)(Mn),(0,et.shadow)(this,"_colors",Mn)}convert(Mn){const Ir=(0,at.getRGB)(Mn);if(!window.matchMedia("(forced-colors: active)").matches)return Ir;for(const[zr,Qt]of this._colors)if(Qt.every((Lt,Ut)=>Lt===Ir[Ut]))return Wt._colorsMapping.get(zr);return Ir}getHexCode(Mn){const Ir=this._colors.get(Mn);return Ir?et.Util.makeHexColor(...Ir):Mn}};let Ct=Wt;Qr(Ct,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),s.ColorManager=Ct;const Rr=class{constructor(Mn,Ir){Pr(this,Gt);Pr(this,Jt);Pr(this,Tn);Pr(this,ur);Pr(this,Xt);Pr(this,tn);Pr(this,lr);Pr(this,Dr);Pr(this,kr);Pr(this,Yt,null);Pr(this,Bt,new Map);Pr(this,zt,new Map);Pr(this,qt,new wt);Pr(this,nn,new ft);Pr(this,Fn,0);Pr(this,dr,null);Pr(this,ar,null);Pr(this,pr,new dt);Pr(this,mr,!1);Pr(this,cr,et.AnnotationEditorType.NONE);Pr(this,sr,new Set);Pr(this,wr,this.keydown.bind(this));Pr(this,$r,this.onEditingAction.bind(this));Pr(this,Sr,this.onPageChanging.bind(this));Pr(this,en,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});Pr(this,Kt,null);Ur(this,Kt,Mn),Ur(this,ar,Ir),ir(this,ar)._on("editingaction",ir(this,$r)),ir(this,ar)._on("pagechanging",ir(this,Sr))}destroy(){Fr(this,Jt,yl).call(this),ir(this,ar)._off("editingaction",ir(this,$r)),ir(this,ar)._off("pagechanging",ir(this,Sr));for(const Mn of ir(this,zt).values())Mn.destroy();ir(this,zt).clear(),ir(this,Bt).clear(),Ur(this,Yt,null),ir(this,sr).clear(),ir(this,qt).destroy(),ir(this,nn).destroy()}onPageChanging({pageNumber:Mn}){Ur(this,Fn,Mn-1)}focusMainContainer(){ir(this,Kt).focus()}keydown(Mn){var Ir;(Ir=this.getActive())!=null&&Ir.shouldGetKeyboardEvents()||Rr._keyboardManager.exec(this,Mn)}onEditingAction(Mn){["undo","redo","cut","copy","paste","delete","selectAll"].includes(Mn.name)&&this[Mn.name]()}setEditingState(Mn){Mn?(Fr(this,Gt,iu).call(this),Fr(this,Tn,ro).call(this,{isEditing:ir(this,cr)!==et.AnnotationEditorType.NONE,isEmpty:Fr(this,Dr,wo).call(this),hasSomethingToUndo:ir(this,nn).hasSomethingToUndo(),hasSomethingToRedo:ir(this,nn).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:ir(this,qt).isEmpty()})):(Fr(this,Jt,yl).call(this),Fr(this,Tn,ro).call(this,{isEditing:!1}))}registerEditorTypes(Mn){Ur(this,dr,Mn);for(const Ir of ir(this,dr))Fr(this,ur,yo).call(this,Ir.defaultPropertiesToUpdate)}getId(){return ir(this,pr).getId()}addLayer(Mn){ir(this,zt).set(Mn.pageIndex,Mn),ir(this,mr)?Mn.enable():Mn.disable()}removeLayer(Mn){ir(this,zt).delete(Mn.pageIndex)}updateMode(Mn){if(Ur(this,cr,Mn),Mn===et.AnnotationEditorType.NONE)this.setEditingState(!1),Fr(this,tn,ou).call(this);else{this.setEditingState(!0),Fr(this,Xt,su).call(this);for(const Ir of ir(this,zt).values())Ir.updateMode(Mn)}}updateToolbar(Mn){Mn!==ir(this,cr)&&ir(this,ar).dispatch("switchannotationeditormode",{source:this,mode:Mn})}updateParams(Mn,Ir){for(const zr of ir(this,sr))zr.updateParams(Mn,Ir);for(const zr of ir(this,dr))zr.updateDefaultParams(Mn,Ir)}getEditors(Mn){const Ir=[];for(const zr of ir(this,Bt).values())zr.pageIndex===Mn&&Ir.push(zr);return Ir}getEditor(Mn){return ir(this,Bt).get(Mn)}addEditor(Mn){ir(this,Bt).set(Mn.id,Mn)}removeEditor(Mn){ir(this,Bt).delete(Mn.id),this.unselect(Mn)}setActiveEditor(Mn){ir(this,Yt)!==Mn&&(Ur(this,Yt,Mn),Mn&&Fr(this,ur,yo).call(this,Mn.propertiesToUpdate))}toggleSelected(Mn){if(ir(this,sr).has(Mn)){ir(this,sr).delete(Mn),Mn.unselect(),Fr(this,Tn,ro).call(this,{hasSelectedEditor:this.hasSelection});return}ir(this,sr).add(Mn),Mn.select(),Fr(this,ur,yo).call(this,Mn.propertiesToUpdate),Fr(this,Tn,ro).call(this,{hasSelectedEditor:!0})}setSelected(Mn){for(const Ir of ir(this,sr))Ir!==Mn&&Ir.unselect();ir(this,sr).clear(),ir(this,sr).add(Mn),Mn.select(),Fr(this,ur,yo).call(this,Mn.propertiesToUpdate),Fr(this,Tn,ro).call(this,{hasSelectedEditor:!0})}isSelected(Mn){return ir(this,sr).has(Mn)}unselect(Mn){Mn.unselect(),ir(this,sr).delete(Mn),Fr(this,Tn,ro).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return ir(this,sr).size!==0}undo(){ir(this,nn).undo(),Fr(this,Tn,ro).call(this,{hasSomethingToUndo:ir(this,nn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Fr(this,Dr,wo).call(this)})}redo(){ir(this,nn).redo(),Fr(this,Tn,ro).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:ir(this,nn).hasSomethingToRedo(),isEmpty:Fr(this,Dr,wo).call(this)})}addCommands(Mn){ir(this,nn).add(Mn),Fr(this,Tn,ro).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Fr(this,Dr,wo).call(this)})}delete(){if(ir(this,Yt)&&ir(this,Yt).commitOrRemove(),!this.hasSelection)return;const Mn=[...ir(this,sr)],Ir=()=>{for(const Qt of Mn)Qt.remove()},zr=()=>{for(const Qt of Mn)Fr(this,lr,El).call(this,Qt)};this.addCommands({cmd:Ir,undo:zr,mustExec:!0})}copy(){if(ir(this,Yt)&&ir(this,Yt).commitOrRemove(),this.hasSelection){const Mn=[];for(const Ir of ir(this,sr))Ir.isEmpty()||Mn.push(Ir);if(Mn.length===0)return;ir(this,qt).copy(Mn),Fr(this,Tn,ro).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(ir(this,qt).isEmpty())return;this.unselectAll();const Mn=ir(this,zt).get(ir(this,Fn)),Ir=ir(this,qt).paste().map(Lt=>Mn.deserialize(Lt)),zr=()=>{for(const Lt of Ir)Fr(this,lr,El).call(this,Lt);Fr(this,kr,Eo).call(this,Ir)},Qt=()=>{for(const Lt of Ir)Lt.remove()};this.addCommands({cmd:zr,undo:Qt,mustExec:!0})}selectAll(){for(const Mn of ir(this,sr))Mn.commit();Fr(this,kr,Eo).call(this,ir(this,Bt).values())}unselectAll(){if(ir(this,Yt)){ir(this,Yt).commitOrRemove();return}if(Fr(this,kr,Eo).size!==0){for(const Mn of ir(this,sr))Mn.unselect();ir(this,sr).clear(),Fr(this,Tn,ro).call(this,{hasSelectedEditor:!1})}}isActive(Mn){return ir(this,Yt)===Mn}getActive(){return ir(this,Yt)}getMode(){return ir(this,cr)}};let xt=Rr;Yt=new WeakMap,Bt=new WeakMap,zt=new WeakMap,qt=new WeakMap,nn=new WeakMap,Fn=new WeakMap,dr=new WeakMap,ar=new WeakMap,pr=new WeakMap,mr=new WeakMap,cr=new WeakMap,sr=new WeakMap,wr=new WeakMap,$r=new WeakMap,Sr=new WeakMap,en=new WeakMap,Kt=new WeakMap,Gt=new WeakSet,iu=function(){ir(this,Kt).addEventListener("keydown",ir(this,wr))},Jt=new WeakSet,yl=function(){ir(this,Kt).removeEventListener("keydown",ir(this,wr))},Tn=new WeakSet,ro=function(Mn){Object.entries(Mn).some(([zr,Qt])=>ir(this,en)[zr]!==Qt)&&ir(this,ar).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(ir(this,en),Mn)})},ur=new WeakSet,yo=function(Mn){ir(this,ar).dispatch("annotationeditorparamschanged",{source:this,details:Mn})},Xt=new WeakSet,su=function(){if(!ir(this,mr)){Ur(this,mr,!0);for(const Mn of ir(this,zt).values())Mn.enable()}},tn=new WeakSet,ou=function(){if(this.unselectAll(),ir(this,mr)){Ur(this,mr,!1);for(const Mn of ir(this,zt).values())Mn.disable()}},lr=new WeakSet,El=function(Mn){const Ir=ir(this,zt).get(Mn.pageIndex);Ir?Ir.addOrRebuild(Mn):this.addEditor(Mn)},Dr=new WeakSet,wo=function(){if(ir(this,Bt).size===0)return!0;if(ir(this,Bt).size===1)for(const Mn of ir(this,Bt).values())return Mn.isEmpty();return!1},kr=new WeakSet,Eo=function(Mn){ir(this,sr).clear();for(const Ir of Mn)Ir.isEmpty()||(ir(this,sr).add(Ir),Ir.select());Fr(this,Tn,ro).call(this,{hasSelectedEditor:!0})},Qr(xt,"_keyboardManager",new vt([[["ctrl+a","mac+meta+a"],Rr.prototype.selectAll],[["ctrl+c","mac+meta+c"],Rr.prototype.copy],[["ctrl+v","mac+meta+v"],Rr.prototype.paste],[["ctrl+x","mac+meta+x"],Rr.prototype.cut],[["ctrl+z","mac+meta+z"],Rr.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],Rr.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],Rr.prototype.delete],[["Escape","mac+Escape"],Rr.prototype.unselectAll]])),s.AnnotationEditorUIManager=xt},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StatTimer=s.RenderingCancelledException=s.PixelsPerInch=s.PageViewport=s.PDFDateString=s.DOMStandardFontDataFactory=s.DOMSVGFactory=s.DOMCanvasFactory=s.DOMCMapReaderFactory=s.AnnotationPrefix=void 0,s.deprecated=Wt,s.getColorValues=nn,s.getCurrentTransform=Fn,s.getCurrentTransformInverse=dr,s.getFilenameFromUrl=bt,s.getPdfFilenameFromUrl=Nt,s.getRGB=qt,s.getXfaPageViewport=zt,s.isDataScheme=_t,s.isPdfFile=St,s.isValidFetchUrl=Dt,s.loadScript=jt;var et=a(9),at=a(1);const lt="http://www.w3.org/2000/svg",ht="pdfjs_internal_id_";s.AnnotationPrefix=ht;const ar=class{};let dt=ar;Qr(dt,"CSS",96),Qr(dt,"PDF",72),Qr(dt,"PDF_TO_CSS_UNITS",ar.CSS/ar.PDF),s.PixelsPerInch=dt;class ft extends et.BaseCanvasFactory{constructor({ownerDocument:mr=globalThis.document}={}){super(),this._document=mr}_createCanvas(mr,cr){const sr=this._document.createElement("canvas");return sr.width=mr,sr.height=cr,sr}}s.DOMCanvasFactory=ft;async function vt(pr,mr=!1){if(Dt(pr,document.baseURI)){const cr=await fetch(pr);if(!cr.ok)throw new Error(cr.statusText);return mr?new Uint8Array(await cr.arrayBuffer()):(0,at.stringToBytes)(await cr.text())}return new Promise((cr,sr)=>{const wr=new XMLHttpRequest;wr.open("GET",pr,!0),mr&&(wr.responseType="arraybuffer"),wr.onreadystatechange=()=>{if(wr.readyState===XMLHttpRequest.DONE){if(wr.status===200||wr.status===0){let $r;if(mr&&wr.response?$r=new Uint8Array(wr.response):!mr&&wr.responseText&&($r=(0,at.stringToBytes)(wr.responseText)),$r){cr($r);return}}sr(new Error(wr.statusText))}},wr.send(null)})}class wt extends et.BaseCMapReaderFactory{_fetchData(mr,cr){return vt(mr,this.isCompressed).then(sr=>({cMapData:sr,compressionType:cr}))}}s.DOMCMapReaderFactory=wt;class Ct extends et.BaseStandardFontDataFactory{_fetchData(mr){return vt(mr,!0)}}s.DOMStandardFontDataFactory=Ct;class xt extends et.BaseSVGFactory{_createSVG(mr){return document.createElementNS(lt,mr)}}s.DOMSVGFactory=xt;class Pt{constructor({viewBox:mr,scale:cr,rotation:sr,offsetX:wr=0,offsetY:$r=0,dontFlip:Sr=!1}){this.viewBox=mr,this.scale=cr,this.rotation=sr,this.offsetX=wr,this.offsetY=$r;const en=(mr[2]+mr[0])/2,Kt=(mr[3]+mr[1])/2;let Gt,mn,Jt,rr;switch(sr%=360,sr<0&&(sr+=360),sr){case 180:Gt=-1,mn=0,Jt=0,rr=1;break;case 90:Gt=0,mn=1,Jt=1,rr=0;break;case 270:Gt=0,mn=-1,Jt=-1,rr=0;break;case 0:Gt=1,mn=0,Jt=0,rr=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Sr&&(Jt=-Jt,rr=-rr);let Tn,fr,ur,Ht;Gt===0?(Tn=Math.abs(Kt-mr[1])*cr+wr,fr=Math.abs(en-mr[0])*cr+$r,ur=Math.abs(mr[3]-mr[1])*cr,Ht=Math.abs(mr[2]-mr[0])*cr):(Tn=Math.abs(en-mr[0])*cr+wr,fr=Math.abs(Kt-mr[1])*cr+$r,ur=Math.abs(mr[2]-mr[0])*cr,Ht=Math.abs(mr[3]-mr[1])*cr),this.transform=[Gt*cr,mn*cr,Jt*cr,rr*cr,Tn-Gt*cr*en-Jt*cr*Kt,fr-mn*cr*en-rr*cr*Kt],this.width=ur,this.height=Ht}clone({scale:mr=this.scale,rotation:cr=this.rotation,offsetX:sr=this.offsetX,offsetY:wr=this.offsetY,dontFlip:$r=!1}={}){return new Pt({viewBox:this.viewBox.slice(),scale:mr,rotation:cr,offsetX:sr,offsetY:wr,dontFlip:$r})}convertToViewportPoint(mr,cr){return at.Util.applyTransform([mr,cr],this.transform)}convertToViewportRectangle(mr){const cr=at.Util.applyTransform([mr[0],mr[1]],this.transform),sr=at.Util.applyTransform([mr[2],mr[3]],this.transform);return[cr[0],cr[1],sr[0],sr[1]]}convertToPdfPoint(mr,cr){return at.Util.applyInverseTransform([mr,cr],this.transform)}}s.PageViewport=Pt;class Rt extends at.BaseException{constructor(mr,cr){super(mr,"RenderingCancelledException"),this.type=cr}}s.RenderingCancelledException=Rt;function _t(pr){const mr=pr.length;let cr=0;for(;cr<mr&&pr[cr].trim()==="";)cr++;return pr.substring(cr,cr+5).toLowerCase()==="data:"}function St(pr){return typeof pr=="string"&&/\.pdf$/i.test(pr)}function bt(pr){const mr=pr.indexOf("#"),cr=pr.indexOf("?"),sr=Math.min(mr>0?mr:pr.length,cr>0?cr:pr.length);return pr.substring(pr.lastIndexOf("/",sr)+1,sr)}function Nt(pr,mr="document.pdf"){if(typeof pr!="string")return mr;if(_t(pr))return(0,at.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),mr;const cr=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,sr=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,wr=cr.exec(pr);let $r=sr.exec(wr[1])||sr.exec(wr[2])||sr.exec(wr[3]);if($r&&($r=$r[0],$r.includes("%")))try{$r=sr.exec(decodeURIComponent($r))[0]}catch{}return $r||mr}class kt{constructor(){this.started=Object.create(null),this.times=[]}time(mr){mr in this.started&&(0,at.warn)(`Timer is already running for ${mr}`),this.started[mr]=Date.now()}timeEnd(mr){mr in this.started||(0,at.warn)(`Timer has not been started for ${mr}`),this.times.push({name:mr,start:this.started[mr],end:Date.now()}),delete this.started[mr]}toString(){const mr=[];let cr=0;for(const sr of this.times){const wr=sr.name;wr.length>cr&&(cr=wr.length)}for(const sr of this.times){const wr=sr.end-sr.start;mr.push(`${sr.name.padEnd(cr)} ${wr}ms
`)}return mr.join("")}}s.StatTimer=kt;function Dt(pr,mr){try{const{protocol:cr}=mr?new URL(pr,mr):new URL(pr);return cr==="http:"||cr==="https:"}catch{return!1}}function jt(pr,mr=!1){return new Promise((cr,sr)=>{const wr=document.createElement("script");wr.src=pr,wr.onload=function($r){mr&&wr.remove(),cr($r)},wr.onerror=function(){sr(new Error(`Cannot load script at: ${wr.src}`))},(document.head||document.documentElement).append(wr)})}function Wt(pr){console.log("Deprecated API usage: "+pr)}let Yt;class Bt{static toDateObject(mr){if(!mr||typeof mr!="string")return null;Yt||(Yt=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const cr=Yt.exec(mr);if(!cr)return null;const sr=parseInt(cr[1],10);let wr=parseInt(cr[2],10);wr=wr>=1&&wr<=12?wr-1:0;let $r=parseInt(cr[3],10);$r=$r>=1&&$r<=31?$r:1;let Sr=parseInt(cr[4],10);Sr=Sr>=0&&Sr<=23?Sr:0;let en=parseInt(cr[5],10);en=en>=0&&en<=59?en:0;let Kt=parseInt(cr[6],10);Kt=Kt>=0&&Kt<=59?Kt:0;const Gt=cr[7]||"Z";let mn=parseInt(cr[8],10);mn=mn>=0&&mn<=23?mn:0;let Jt=parseInt(cr[9],10)||0;return Jt=Jt>=0&&Jt<=59?Jt:0,Gt==="-"?(Sr+=mn,en+=Jt):Gt==="+"&&(Sr-=mn,en-=Jt),new Date(Date.UTC(sr,wr,$r,Sr,en,Kt))}}s.PDFDateString=Bt;function zt(pr,{scale:mr=1,rotation:cr=0}){const{width:sr,height:wr}=pr.attributes.style,$r=[0,0,parseInt(sr),parseInt(wr)];return new Pt({viewBox:$r,scale:mr,rotation:cr})}function qt(pr){if(pr.startsWith("#")){const mr=parseInt(pr.slice(1),16);return[(mr&16711680)>>16,(mr&65280)>>8,mr&255]}return pr.startsWith("rgb(")?pr.slice(4,-1).split(",").map(mr=>parseInt(mr)):pr.startsWith("rgba(")?pr.slice(5,-1).split(",").map(mr=>parseInt(mr)).slice(0,3):((0,at.warn)(`Not a valid color format: "${pr}"`),[0,0,0])}function nn(pr){const mr=document.createElement("span");mr.style.visibility="hidden",document.body.append(mr);for(const cr of pr.keys()){mr.style.color=cr;const sr=window.getComputedStyle(mr).color;pr.set(cr,qt(sr))}mr.remove()}function Fn(pr){const{a:mr,b:cr,c:sr,d:wr,e:$r,f:Sr}=pr.getTransform();return[mr,cr,sr,wr,$r,Sr]}function dr(pr){const{a:mr,b:cr,c:sr,d:wr,e:$r,f:Sr}=pr.getTransform().invertSelf();return[mr,cr,sr,wr,$r,Sr]}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.BaseStandardFontDataFactory=s.BaseSVGFactory=s.BaseCanvasFactory=s.BaseCMapReaderFactory=void 0;var et=a(1);class at{constructor(){this.constructor===at&&(0,et.unreachable)("Cannot initialize BaseCanvasFactory.")}create(vt,wt){if(vt<=0||wt<=0)throw new Error("Invalid canvas size");const Ct=this._createCanvas(vt,wt);return{canvas:Ct,context:Ct.getContext("2d")}}reset(vt,wt,Ct){if(!vt.canvas)throw new Error("Canvas is not specified");if(wt<=0||Ct<=0)throw new Error("Invalid canvas size");vt.canvas.width=wt,vt.canvas.height=Ct}destroy(vt){if(!vt.canvas)throw new Error("Canvas is not specified");vt.canvas.width=0,vt.canvas.height=0,vt.canvas=null,vt.context=null}_createCanvas(vt,wt){(0,et.unreachable)("Abstract method `_createCanvas` called.")}}s.BaseCanvasFactory=at;class lt{constructor({baseUrl:vt=null,isCompressed:wt=!1}){this.constructor===lt&&(0,et.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=vt,this.isCompressed=wt}async fetch({name:vt}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!vt)throw new Error("CMap name must be specified.");const wt=this.baseUrl+vt+(this.isCompressed?".bcmap":""),Ct=this.isCompressed?et.CMapCompressionType.BINARY:et.CMapCompressionType.NONE;return this._fetchData(wt,Ct).catch(xt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${wt}`)})}_fetchData(vt,wt){(0,et.unreachable)("Abstract method `_fetchData` called.")}}s.BaseCMapReaderFactory=lt;class ht{constructor({baseUrl:vt=null}){this.constructor===ht&&(0,et.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=vt}async fetch({filename:vt}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!vt)throw new Error("Font filename must be specified.");const wt=`${this.baseUrl}${vt}`;return this._fetchData(wt).catch(Ct=>{throw new Error(`Unable to load font data at: ${wt}`)})}_fetchData(vt){(0,et.unreachable)("Abstract method `_fetchData` called.")}}s.BaseStandardFontDataFactory=ht;class dt{constructor(){this.constructor===dt&&(0,et.unreachable)("Cannot initialize BaseSVGFactory.")}create(vt,wt,Ct=!1){if(vt<=0||wt<=0)throw new Error("Invalid SVG dimensions");const xt=this._createSVG("svg:svg");return xt.setAttribute("version","1.1"),Ct||(xt.setAttribute("width",`${vt}px`),xt.setAttribute("height",`${wt}px`)),xt.setAttribute("preserveAspectRatio","none"),xt.setAttribute("viewBox",`0 0 ${vt} ${wt}`),xt}createElement(vt){if(typeof vt!="string")throw new Error("Invalid SVG element type");return this._createSVG(vt)}_createSVG(vt){(0,et.unreachable)("Abstract method `_createSVG` called.")}}s.BaseSVGFactory=dt},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MurmurHash3_64=void 0;var et=a(1);const at=3285377520,lt=4294901760,ht=65535;class dt{constructor(vt){this.h1=vt?vt&4294967295:at,this.h2=vt?vt&4294967295:at}update(vt){let wt,Ct;if(typeof vt=="string"){wt=new Uint8Array(vt.length*2),Ct=0;for(let Yt=0,Bt=vt.length;Yt<Bt;Yt++){const zt=vt.charCodeAt(Yt);zt<=255?wt[Ct++]=zt:(wt[Ct++]=zt>>>8,wt[Ct++]=zt&255)}}else if((0,et.isArrayBuffer)(vt))wt=vt.slice(),Ct=wt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const xt=Ct>>2,Pt=Ct-xt*4,Rt=new Uint32Array(wt.buffer,0,xt);let _t=0,St=0,bt=this.h1,Nt=this.h2;const kt=3432918353,Dt=461845907,jt=kt&ht,Wt=Dt&ht;for(let Yt=0;Yt<xt;Yt++)Yt&1?(_t=Rt[Yt],_t=_t*kt&lt|_t*jt&ht,_t=_t<<15|_t>>>17,_t=_t*Dt&lt|_t*Wt&ht,bt^=_t,bt=bt<<13|bt>>>19,bt=bt*5+3864292196):(St=Rt[Yt],St=St*kt&lt|St*jt&ht,St=St<<15|St>>>17,St=St*Dt&lt|St*Wt&ht,Nt^=St,Nt=Nt<<13|Nt>>>19,Nt=Nt*5+3864292196);switch(_t=0,Pt){case 3:_t^=wt[xt*4+2]<<16;case 2:_t^=wt[xt*4+1]<<8;case 1:_t^=wt[xt*4],_t=_t*kt&lt|_t*jt&ht,_t=_t<<15|_t>>>17,_t=_t*Dt&lt|_t*Wt&ht,xt&1?bt^=_t:Nt^=_t}this.h1=bt,this.h2=Nt}hexdigest(){let vt=this.h1,wt=this.h2;vt^=wt>>>1,vt=vt*3981806797&lt|vt*36045&ht,wt=wt*4283543511&lt|((wt<<16|vt>>>16)*2950163797&lt)>>>16,vt^=wt>>>1,vt=vt*444984403&lt|vt*60499&ht,wt=wt*3301882366&lt|((wt<<16|vt>>>16)*3120437893&lt)>>>16,vt^=wt>>>1;const Ct=(vt>>>0).toString(16),xt=(wt>>>0).toString(16);return Ct.padStart(8,"0")+xt.padStart(8,"0")}}s.MurmurHash3_64=dt},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.FontLoader=s.FontFaceObject=void 0;var et=a(1);class at{constructor({docId:ft,onUnsupportedFeature:vt,ownerDocument:wt=globalThis.document,styleElement:Ct=null}){this.constructor===at&&(0,et.unreachable)("Cannot initialize BaseFontLoader."),this.docId=ft,this._onUnsupportedFeature=vt,this._document=wt,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(ft){this.nativeFontFaces.push(ft),this._document.fonts.add(ft)}insertRule(ft){let vt=this.styleElement;vt||(vt=this.styleElement=this._document.createElement("style"),vt.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(vt));const wt=vt.sheet;wt.insertRule(ft,wt.cssRules.length)}clear(){for(const ft of this.nativeFontFaces)this._document.fonts.delete(ft);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(ft){if(ft.attached||ft.missingFile)return;if(ft.attached=!0,this.isFontLoadingAPISupported){const wt=ft.createNativeFontFace();if(wt){this.addNativeFontFace(wt);try{await wt.loaded}catch(Ct){throw this._onUnsupportedFeature({featureId:et.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,et.warn)(`Failed to load font '${wt.family}': '${Ct}'.`),ft.disableFontFace=!0,Ct}}return}const vt=ft.createFontFaceRule();if(vt){if(this.insertRule(vt),this.isSyncFontLoadingSupported)return;await new Promise(wt=>{const Ct=this._queueLoadingCallback(wt);this._prepareFontLoadEvent([vt],[ft],Ct)})}}_queueLoadingCallback(ft){(0,et.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var vt;const ft=!!((vt=this._document)!=null&&vt.fonts);return(0,et.shadow)(this,"isFontLoadingAPISupported",ft)}get isSyncFontLoadingSupported(){(0,et.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,et.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(ft,vt,wt){(0,et.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let lt;s.FontLoader=lt,s.FontLoader=lt=class extends at{constructor(ft){super(ft),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let ft=!1;if(typeof navigator>"u")ft=!0;else{const vt=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(vt==null?void 0:vt[1])>=14&&(ft=!0)}return(0,et.shadow)(this,"isSyncFontLoadingSupported",ft)}_queueLoadingCallback(ft){function vt(){for((0,et.assert)(!Ct.done,"completeRequest() cannot be called twice."),Ct.done=!0;wt.requests.length>0&&wt.requests[0].done;){const xt=wt.requests.shift();setTimeout(xt.callback,0)}}const wt=this.loadingContext,Ct={id:`pdfjs-font-loading-${wt.nextRequestId++}`,done:!1,complete:vt,callback:ft};return wt.requests.push(Ct),Ct}get _loadTestFont(){const ft=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,et.shadow)(this,"_loadTestFont",ft())}_prepareFontLoadEvent(ft,vt,wt){function Ct(dr,ar){return dr.charCodeAt(ar)<<24|dr.charCodeAt(ar+1)<<16|dr.charCodeAt(ar+2)<<8|dr.charCodeAt(ar+3)&255}function xt(dr,ar,pr,mr){const cr=dr.substring(0,ar),sr=dr.substring(ar+pr);return cr+mr+sr}let Pt,Rt;const _t=this._document.createElement("canvas");_t.width=1,_t.height=1;const St=_t.getContext("2d");let bt=0;function Nt(dr,ar){if(bt++,bt>30){(0,et.warn)("Load test font never loaded."),ar();return}if(St.font="30px "+dr,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){ar();return}setTimeout(Nt.bind(null,dr,ar))}const kt=`lt${Date.now()}${this.loadTestFontId++}`;let Dt=this._loadTestFont;Dt=xt(Dt,976,kt.length,kt);const Wt=16,Yt=1482184792;let Bt=Ct(Dt,Wt);for(Pt=0,Rt=kt.length-3;Pt<Rt;Pt+=4)Bt=Bt-Yt+Ct(kt,Pt)|0;Pt<kt.length&&(Bt=Bt-Yt+Ct(kt+"XXX",Pt)|0),Dt=xt(Dt,Wt,4,(0,et.string32)(Bt));const zt=`url(data:font/opentype;base64,${btoa(Dt)});`,qt=`@font-face {font-family:"${kt}";src:${zt}}`;this.insertRule(qt);const nn=[];for(const dr of vt)nn.push(dr.loadedName);nn.push(kt);const Fn=this._document.createElement("div");Fn.style.visibility="hidden",Fn.style.width=Fn.style.height="10px",Fn.style.position="absolute",Fn.style.top=Fn.style.left="0px";for(const dr of nn){const ar=this._document.createElement("span");ar.textContent="Hi",ar.style.fontFamily=dr,Fn.append(ar)}this._document.body.append(Fn),Nt(kt,()=>{Fn.remove(),wt.complete()})}};class ht{constructor(ft,{isEvalSupported:vt=!0,disableFontFace:wt=!1,ignoreErrors:Ct=!1,onUnsupportedFeature:xt,fontRegistry:Pt=null}){this.compiledGlyphs=Object.create(null);for(const Rt in ft)this[Rt]=ft[Rt];this.isEvalSupported=vt!==!1,this.disableFontFace=wt===!0,this.ignoreErrors=Ct===!0,this._onUnsupportedFeature=xt,this.fontRegistry=Pt}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let ft;if(!this.cssFontInfo)ft=new FontFace(this.loadedName,this.data,{});else{const vt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(vt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ft=new FontFace(this.cssFontInfo.fontFamily,this.data,vt)}return this.fontRegistry&&this.fontRegistry.registerFont(this),ft}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const ft=(0,et.bytesToString)(this.data),vt=`url(data:${this.mimetype};base64,${btoa(ft)});`;let wt;if(!this.cssFontInfo)wt=`@font-face {font-family:"${this.loadedName}";src:${vt}}`;else{let Ct=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(Ct+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),wt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${Ct}src:${vt}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,vt),wt}getPathGenerator(ft,vt){if(this.compiledGlyphs[vt]!==void 0)return this.compiledGlyphs[vt];let wt;try{wt=ft.get(this.loadedName+"_path_"+vt)}catch(Ct){if(!this.ignoreErrors)throw Ct;return this._onUnsupportedFeature({featureId:et.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,et.warn)(`getPathGenerator - ignoring character: "${Ct}".`),this.compiledGlyphs[vt]=function(xt,Pt){}}if(this.isEvalSupported&&et.FeatureTest.isEvalSupported){const Ct=[];for(const xt of wt){const Pt=xt.args!==void 0?xt.args.join(","):"";Ct.push("c.",xt.cmd,"(",Pt,`);
`)}return this.compiledGlyphs[vt]=new Function("c","size",Ct.join(""))}return this.compiledGlyphs[vt]=function(Ct,xt){for(const Pt of wt)Pt.cmd==="scale"&&(Pt.args=[xt,-xt]),Ct[Pt.cmd].apply(Ct,Pt.args)}}}s.FontFaceObject=ht},(o,s,a)=>{var wr,Sl;Object.defineProperty(s,"__esModule",{value:!0}),s.CanvasGraphics=void 0;var et=a(8),at=a(1),lt=a(13),ht=a(14),dt=a(3);const ft=16,vt=100,wt=4096,Ct=15,xt=10,Pt=dt.isNodeJS&&typeof Path2D>"u"?-1:1e3,Rt=16;function _t(en,Kt){if(en._removeMirroring)throw new Error("Context is already forwarding operations.");en.__originalSave=en.save,en.__originalRestore=en.restore,en.__originalRotate=en.rotate,en.__originalScale=en.scale,en.__originalTranslate=en.translate,en.__originalTransform=en.transform,en.__originalSetTransform=en.setTransform,en.__originalResetTransform=en.resetTransform,en.__originalClip=en.clip,en.__originalMoveTo=en.moveTo,en.__originalLineTo=en.lineTo,en.__originalBezierCurveTo=en.bezierCurveTo,en.__originalRect=en.rect,en.__originalClosePath=en.closePath,en.__originalBeginPath=en.beginPath,en._removeMirroring=()=>{en.save=en.__originalSave,en.restore=en.__originalRestore,en.rotate=en.__originalRotate,en.scale=en.__originalScale,en.translate=en.__originalTranslate,en.transform=en.__originalTransform,en.setTransform=en.__originalSetTransform,en.resetTransform=en.__originalResetTransform,en.clip=en.__originalClip,en.moveTo=en.__originalMoveTo,en.lineTo=en.__originalLineTo,en.bezierCurveTo=en.__originalBezierCurveTo,en.rect=en.__originalRect,en.closePath=en.__originalClosePath,en.beginPath=en.__originalBeginPath,delete en._removeMirroring},en.save=function(){Kt.save(),this.__originalSave()},en.restore=function(){Kt.restore(),this.__originalRestore()},en.translate=function(mn,Jt){Kt.translate(mn,Jt),this.__originalTranslate(mn,Jt)},en.scale=function(mn,Jt){Kt.scale(mn,Jt),this.__originalScale(mn,Jt)},en.transform=function(mn,Jt,rr,Tn,fr,ur){Kt.transform(mn,Jt,rr,Tn,fr,ur),this.__originalTransform(mn,Jt,rr,Tn,fr,ur)},en.setTransform=function(mn,Jt,rr,Tn,fr,ur){Kt.setTransform(mn,Jt,rr,Tn,fr,ur),this.__originalSetTransform(mn,Jt,rr,Tn,fr,ur)},en.resetTransform=function(){Kt.resetTransform(),this.__originalResetTransform()},en.rotate=function(mn){Kt.rotate(mn),this.__originalRotate(mn)},en.clip=function(mn){Kt.clip(mn),this.__originalClip(mn)},en.moveTo=function(Gt,mn){Kt.moveTo(Gt,mn),this.__originalMoveTo(Gt,mn)},en.lineTo=function(Gt,mn){Kt.lineTo(Gt,mn),this.__originalLineTo(Gt,mn)},en.bezierCurveTo=function(Gt,mn,Jt,rr,Tn,fr){Kt.bezierCurveTo(Gt,mn,Jt,rr,Tn,fr),this.__originalBezierCurveTo(Gt,mn,Jt,rr,Tn,fr)},en.rect=function(Gt,mn,Jt,rr){Kt.rect(Gt,mn,Jt,rr),this.__originalRect(Gt,mn,Jt,rr)},en.closePath=function(){Kt.closePath(),this.__originalClosePath()},en.beginPath=function(){Kt.beginPath(),this.__originalBeginPath()}}class St{constructor(Kt){this.canvasFactory=Kt,this.cache=Object.create(null)}getCanvas(Kt,Gt,mn){let Jt;return this.cache[Kt]!==void 0?(Jt=this.cache[Kt],this.canvasFactory.reset(Jt,Gt,mn)):(Jt=this.canvasFactory.create(Gt,mn),this.cache[Kt]=Jt),Jt}delete(Kt){delete this.cache[Kt]}clear(){for(const Kt in this.cache){const Gt=this.cache[Kt];this.canvasFactory.destroy(Gt),delete this.cache[Kt]}}}function bt(en,Kt,Gt,mn,Jt,rr,Tn,fr,ur,Ht){const[Xt,Zt,tn,$n,lr,Er]=(0,et.getCurrentTransform)(en);if(Zt===0&&tn===0){const kr=Tn*Xt+lr,Ar=Math.round(kr),Rr=fr*$n+Er,Nr=Math.round(Rr),Mn=(Tn+ur)*Xt+lr,Ir=Math.abs(Math.round(Mn)-Ar)||1,zr=(fr+Ht)*$n+Er,Qt=Math.abs(Math.round(zr)-Nr)||1;return en.setTransform(Math.sign(Xt),0,0,Math.sign($n),Ar,Nr),en.drawImage(Kt,Gt,mn,Jt,rr,0,0,Ir,Qt),en.setTransform(Xt,Zt,tn,$n,lr,Er),[Ir,Qt]}if(Xt===0&&$n===0){const kr=fr*tn+lr,Ar=Math.round(kr),Rr=Tn*Zt+Er,Nr=Math.round(Rr),Mn=(fr+Ht)*tn+lr,Ir=Math.abs(Math.round(Mn)-Ar)||1,zr=(Tn+ur)*Zt+Er,Qt=Math.abs(Math.round(zr)-Nr)||1;return en.setTransform(0,Math.sign(Zt),Math.sign(tn),0,Ar,Nr),en.drawImage(Kt,Gt,mn,Jt,rr,0,0,Qt,Ir),en.setTransform(Xt,Zt,tn,$n,lr,Er),[Qt,Ir]}en.drawImage(Kt,Gt,mn,Jt,rr,Tn,fr,ur,Ht);const Dr=Math.hypot(Xt,Zt),br=Math.hypot(tn,$n);return[Dr*ur,br*Ht]}function Nt(en){const{width:Kt,height:Gt}=en;if(Kt>Pt||Gt>Pt)return null;const mn=1e3,Jt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),rr=Kt+1;let Tn=new Uint8Array(rr*(Gt+1)),fr,ur,Ht;const Xt=Kt+7&-8;let Zt=new Uint8Array(Xt*Gt),tn=0;for(const br of en.data){let kr=128;for(;kr>0;)Zt[tn++]=br&kr?0:255,kr>>=1}let $n=0;for(tn=0,Zt[tn]!==0&&(Tn[0]=1,++$n),ur=1;ur<Kt;ur++)Zt[tn]!==Zt[tn+1]&&(Tn[ur]=Zt[tn]?2:1,++$n),tn++;for(Zt[tn]!==0&&(Tn[ur]=2,++$n),fr=1;fr<Gt;fr++){tn=fr*Xt,Ht=fr*rr,Zt[tn-Xt]!==Zt[tn]&&(Tn[Ht]=Zt[tn]?1:8,++$n);let br=(Zt[tn]?4:0)+(Zt[tn-Xt]?8:0);for(ur=1;ur<Kt;ur++)br=(br>>2)+(Zt[tn+1]?4:0)+(Zt[tn-Xt+1]?8:0),Jt[br]&&(Tn[Ht+ur]=Jt[br],++$n),tn++;if(Zt[tn-Xt]!==Zt[tn]&&(Tn[Ht+ur]=Zt[tn]?2:4,++$n),$n>mn)return null}for(tn=Xt*(Gt-1),Ht=fr*rr,Zt[tn]!==0&&(Tn[Ht]=8,++$n),ur=1;ur<Kt;ur++)Zt[tn]!==Zt[tn+1]&&(Tn[Ht+ur]=Zt[tn]?4:8,++$n),tn++;if(Zt[tn]!==0&&(Tn[Ht+ur]=4,++$n),$n>mn)return null;const lr=new Int32Array([0,rr,-1,0,-rr,0,0,0,1]),Er=new Path2D;for(fr=0;$n&&fr<=Gt;fr++){let br=fr*rr;const kr=br+Kt;for(;br<kr&&!Tn[br];)br++;if(br===kr)continue;Er.moveTo(br%rr,fr);const Ar=br;let Rr=Tn[br];do{const Nr=lr[Rr];do br+=Nr;while(!Tn[br]);const Mn=Tn[br];Mn!==5&&Mn!==10?(Rr=Mn,Tn[br]=0):(Rr=Mn&51*Rr>>4,Tn[br]&=Rr>>2|Rr<<2),Er.lineTo(br%rr,br/rr|0),Tn[br]||--$n}while(Ar!==br);--fr}return Zt=null,Tn=null,function(br){br.save(),br.scale(1/Kt,-1/Gt),br.translate(0,-Gt),br.fill(Er),br.beginPath(),br.restore()}}class kt{constructor(Kt,Gt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=at.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=at.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=at.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,Kt,Gt])}clone(){const Kt=Object.create(this);return Kt.clipBox=this.clipBox.slice(),Kt}setCurrentPoint(Kt,Gt){this.x=Kt,this.y=Gt}updatePathMinMax(Kt,Gt,mn){[Gt,mn]=at.Util.applyTransform([Gt,mn],Kt),this.minX=Math.min(this.minX,Gt),this.minY=Math.min(this.minY,mn),this.maxX=Math.max(this.maxX,Gt),this.maxY=Math.max(this.maxY,mn)}updateRectMinMax(Kt,Gt){const mn=at.Util.applyTransform(Gt,Kt),Jt=at.Util.applyTransform(Gt.slice(2),Kt);this.minX=Math.min(this.minX,mn[0],Jt[0]),this.minY=Math.min(this.minY,mn[1],Jt[1]),this.maxX=Math.max(this.maxX,mn[0],Jt[0]),this.maxY=Math.max(this.maxY,mn[1],Jt[1])}updateScalingPathMinMax(Kt,Gt){at.Util.scaleMinMax(Kt,Gt),this.minX=Math.min(this.minX,Gt[0]),this.maxX=Math.max(this.maxX,Gt[1]),this.minY=Math.min(this.minY,Gt[2]),this.maxY=Math.max(this.maxY,Gt[3])}updateCurvePathMinMax(Kt,Gt,mn,Jt,rr,Tn,fr,ur,Ht,Xt){const Zt=at.Util.bezierBoundingBox(Gt,mn,Jt,rr,Tn,fr,ur,Ht);if(Xt){Xt[0]=Math.min(Xt[0],Zt[0],Zt[2]),Xt[1]=Math.max(Xt[1],Zt[0],Zt[2]),Xt[2]=Math.min(Xt[2],Zt[1],Zt[3]),Xt[3]=Math.max(Xt[3],Zt[1],Zt[3]);return}this.updateRectMinMax(Kt,Zt)}getPathBoundingBox(Kt=lt.PathType.FILL,Gt=null){const mn=[this.minX,this.minY,this.maxX,this.maxY];if(Kt===lt.PathType.STROKE){Gt||(0,at.unreachable)("Stroke bounding box must include transform.");const Jt=at.Util.singularValueDecompose2dScale(Gt),rr=Jt[0]*this.lineWidth/2,Tn=Jt[1]*this.lineWidth/2;mn[0]-=rr,mn[1]-=Tn,mn[2]+=rr,mn[3]+=Tn}return mn}updateClipFromPath(){const Kt=at.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Kt||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Kt){this.clipBox=Kt,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Kt=lt.PathType.FILL,Gt=null){return at.Util.intersect(this.clipBox,this.getPathBoundingBox(Kt,Gt))}}function Dt(en,Kt,Gt=null){if(typeof ImageData<"u"&&Kt instanceof ImageData){en.putImageData(Kt,0,0);return}const mn=Kt.height,Jt=Kt.width,rr=mn%Rt,Tn=(mn-rr)/Rt,fr=rr===0?Tn:Tn+1,ur=en.createImageData(Jt,Rt);let Ht=0,Xt;const Zt=Kt.data,tn=ur.data;let $n,lr,Er,Dr,br,kr,Ar,Rr;if(Gt)switch(Gt.length){case 1:br=Gt[0],kr=Gt[0],Ar=Gt[0],Rr=Gt[0];break;case 4:br=Gt[0],kr=Gt[1],Ar=Gt[2],Rr=Gt[3];break}if(Kt.kind===at.ImageKind.GRAYSCALE_1BPP){const Nr=Zt.byteLength,Mn=new Uint32Array(tn.buffer,0,tn.byteLength>>2),Ir=Mn.length,zr=Jt+7>>3;let Qt=4294967295,Lt=at.FeatureTest.isLittleEndian?4278190080:255;for(Rr&&Rr[0]===255&&Rr[255]===0&&([Qt,Lt]=[Lt,Qt]),$n=0;$n<fr;$n++){for(Er=$n<Tn?Rt:rr,Xt=0,lr=0;lr<Er;lr++){const Ut=Nr-Ht;let nr=0;const gr=Ut>zr?Jt:Ut*8-7,Tr=gr&-8;let xr=0,Hr=0;for(;nr<Tr;nr+=8)Hr=Zt[Ht++],Mn[Xt++]=Hr&128?Qt:Lt,Mn[Xt++]=Hr&64?Qt:Lt,Mn[Xt++]=Hr&32?Qt:Lt,Mn[Xt++]=Hr&16?Qt:Lt,Mn[Xt++]=Hr&8?Qt:Lt,Mn[Xt++]=Hr&4?Qt:Lt,Mn[Xt++]=Hr&2?Qt:Lt,Mn[Xt++]=Hr&1?Qt:Lt;for(;nr<gr;nr++)xr===0&&(Hr=Zt[Ht++],xr=128),Mn[Xt++]=Hr&xr?Qt:Lt,xr>>=1}for(;Xt<Ir;)Mn[Xt++]=0;en.putImageData(ur,0,$n*Rt)}}else if(Kt.kind===at.ImageKind.RGBA_32BPP){const Nr=!!(br||kr||Ar);for(lr=0,Dr=Jt*Rt*4,$n=0;$n<Tn;$n++){if(tn.set(Zt.subarray(Ht,Ht+Dr)),Ht+=Dr,Nr)for(let Mn=0;Mn<Dr;Mn+=4)br&&(tn[Mn+0]=br[tn[Mn+0]]),kr&&(tn[Mn+1]=kr[tn[Mn+1]]),Ar&&(tn[Mn+2]=Ar[tn[Mn+2]]);en.putImageData(ur,0,lr),lr+=Rt}if($n<fr){if(Dr=Jt*rr*4,tn.set(Zt.subarray(Ht,Ht+Dr)),Nr)for(let Mn=0;Mn<Dr;Mn+=4)br&&(tn[Mn+0]=br[tn[Mn+0]]),kr&&(tn[Mn+1]=kr[tn[Mn+1]]),Ar&&(tn[Mn+2]=Ar[tn[Mn+2]]);en.putImageData(ur,0,lr)}}else if(Kt.kind===at.ImageKind.RGB_24BPP){const Nr=!!(br||kr||Ar);for(Er=Rt,Dr=Jt*Er,$n=0;$n<fr;$n++){for($n>=Tn&&(Er=rr,Dr=Jt*Er),Xt=0,lr=Dr;lr--;)tn[Xt++]=Zt[Ht++],tn[Xt++]=Zt[Ht++],tn[Xt++]=Zt[Ht++],tn[Xt++]=255;if(Nr)for(let Mn=0;Mn<Xt;Mn+=4)br&&(tn[Mn+0]=br[tn[Mn+0]]),kr&&(tn[Mn+1]=kr[tn[Mn+1]]),Ar&&(tn[Mn+2]=Ar[tn[Mn+2]]);en.putImageData(ur,0,$n*Rt)}}else throw new Error(`bad image kind: ${Kt.kind}`)}function jt(en,Kt){if(Kt.bitmap){en.drawImage(Kt.bitmap,0,0);return}const Gt=Kt.height,mn=Kt.width,Jt=Gt%Rt,rr=(Gt-Jt)/Rt,Tn=Jt===0?rr:rr+1,fr=en.createImageData(mn,Rt);let ur=0;const Ht=Kt.data,Xt=fr.data;for(let Zt=0;Zt<Tn;Zt++){const tn=Zt<rr?Rt:Jt;({srcPos:ur}=(0,ht.applyMaskImageData)({src:Ht,srcPos:ur,dest:Xt,width:mn,height:tn})),en.putImageData(fr,0,Zt*Rt)}}function Wt(en,Kt){const Gt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let mn=0,Jt=Gt.length;mn<Jt;mn++){const rr=Gt[mn];en[rr]!==void 0&&(Kt[rr]=en[rr])}en.setLineDash!==void 0&&(Kt.setLineDash(en.getLineDash()),Kt.lineDashOffset=en.lineDashOffset)}function Yt(en,Kt){en.strokeStyle=en.fillStyle=Kt||"#000000",en.fillRule="nonzero",en.globalAlpha=1,en.lineWidth=1,en.lineCap="butt",en.lineJoin="miter",en.miterLimit=10,en.globalCompositeOperation="source-over",en.font="10px sans-serif",en.setLineDash!==void 0&&(en.setLineDash([]),en.lineDashOffset=0)}function Bt(en,Kt,Gt,mn){const Jt=en.length;for(let rr=3;rr<Jt;rr+=4){const Tn=en[rr];if(Tn===0)en[rr-3]=Kt,en[rr-2]=Gt,en[rr-1]=mn;else if(Tn<255){const fr=255-Tn;en[rr-3]=en[rr-3]*Tn+Kt*fr>>8,en[rr-2]=en[rr-2]*Tn+Gt*fr>>8,en[rr-1]=en[rr-1]*Tn+mn*fr>>8}}}function zt(en,Kt,Gt){const mn=en.length,Jt=1/255;for(let rr=3;rr<mn;rr+=4){const Tn=Gt?Gt[en[rr]]:en[rr];Kt[rr]=Kt[rr]*Tn*Jt|0}}function qt(en,Kt,Gt){const mn=en.length;for(let Jt=3;Jt<mn;Jt+=4){const rr=en[Jt-3]*77+en[Jt-2]*152+en[Jt-1]*28;Kt[Jt]=Gt?Kt[Jt]*Gt[rr>>8]>>8:Kt[Jt]*rr>>16}}function nn(en,Kt,Gt,mn,Jt,rr,Tn,fr,ur,Ht,Xt){const Zt=!!rr,tn=Zt?rr[0]:0,$n=Zt?rr[1]:0,lr=Zt?rr[2]:0;let Er;Jt==="Luminosity"?Er=qt:Er=zt;const br=Math.min(mn,Math.ceil(1048576/Gt));for(let kr=0;kr<mn;kr+=br){const Ar=Math.min(br,mn-kr),Rr=en.getImageData(fr-Ht,kr+(ur-Xt),Gt,Ar),Nr=Kt.getImageData(fr,kr+ur,Gt,Ar);Zt&&Bt(Rr.data,tn,$n,lr),Er(Rr.data,Nr.data,Tn),Kt.putImageData(Nr,fr,kr+ur)}}function Fn(en,Kt,Gt,mn){const Jt=mn[0],rr=mn[1],Tn=mn[2]-Jt,fr=mn[3]-rr;Tn===0||fr===0||(nn(Kt.context,Gt,Tn,fr,Kt.subtype,Kt.backdrop,Kt.transferMap,Jt,rr,Kt.offsetX,Kt.offsetY),en.save(),en.globalAlpha=1,en.globalCompositeOperation="source-over",en.setTransform(1,0,0,1,0,0),en.drawImage(Gt.canvas,0,0),en.restore())}function dr(en,Kt){const Gt=at.Util.singularValueDecompose2dScale(en);Gt[0]=Math.fround(Gt[0]),Gt[1]=Math.fround(Gt[1]);const mn=Math.fround((globalThis.devicePixelRatio||1)*et.PixelsPerInch.PDF_TO_CSS_UNITS);return Kt!==void 0?Kt:Gt[0]<=mn||Gt[1]<=mn}const ar=["butt","round","square"],pr=["miter","round","bevel"],mr={},cr={},Sr=class{constructor(Kt,Gt,mn,Jt,rr,Tn,fr,ur){Pr(this,wr);this.ctx=Kt,this.current=new kt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Gt,this.objs=mn,this.canvasFactory=Jt,this.imageLayer=rr,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=Tn,this.cachedCanvases=new St(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=fr,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(ur==null?void 0:ur.background)||null,this.foregroundColor=(ur==null?void 0:ur.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Kt,Gt=null){return typeof Kt=="string"?Kt.startsWith("g_")?this.commonObjs.get(Kt):this.objs.get(Kt):Gt}beginDrawing({transform:Kt,viewport:Gt,transparency:mn=!1,background:Jt=null}){const rr=this.ctx.canvas.width,Tn=this.ctx.canvas.height,fr=Jt||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const ur=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const Ht=this.backgroundColor=this.ctx.fillStyle;let Xt=!0,Zt=fr;if(this.ctx.fillStyle=fr,Zt=this.ctx.fillStyle,Xt=typeof Zt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Zt),ur==="#000000"&&Ht==="#ffffff"||ur===Ht||!Xt)this.foregroundColor=this.backgroundColor=null;else{const[tn,$n,lr]=(0,et.getRGB)(Zt),Er=br=>(br/=255,br<=.03928?br/12.92:((br+.055)/1.055)**2.4),Dr=Math.round(.2126*Er(tn)+.7152*Er($n)+.0722*Er(lr));this.selectColor=(br,kr,Ar)=>{const Rr=.2126*Er(br)+.7152*Er(kr)+.0722*Er(Ar);return Math.round(Rr)===Dr?Ht:ur}}}if(this.ctx.fillStyle=this.backgroundColor||fr,this.ctx.fillRect(0,0,rr,Tn),this.ctx.restore(),mn){const ur=this.cachedCanvases.getCanvas("transparent",rr,Tn);this.compositeCtx=this.ctx,this.transparentCanvas=ur.canvas,this.ctx=ur.context,this.ctx.save(),this.ctx.transform(...(0,et.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Yt(this.ctx,this.foregroundColor),Kt&&(this.ctx.transform(...Kt),this.outputScaleX=Kt[0],this.outputScaleY=Kt[0]),this.ctx.transform(...Gt.transform),this.viewportScale=Gt.scale,this.baseTransform=(0,et.getCurrentTransform)(this.ctx),this.imageLayer&&((0,et.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(Kt,Gt,mn,Jt){const rr=Kt.argsArray,Tn=Kt.fnArray;let fr=Gt||0;const ur=rr.length;if(ur===fr)return fr;const Ht=ur-fr>xt&&typeof mn=="function",Xt=Ht?Date.now()+Ct:0;let Zt=0;const tn=this.commonObjs,$n=this.objs;let lr;for(;;){if(Jt!==void 0&&fr===Jt.nextBreakPoint)return Jt.breakIt(fr,mn),fr;if(lr=Tn[fr],lr!==at.OPS.dependency)this[lr].apply(this,rr[fr]);else for(const Er of rr[fr]){const Dr=Er.startsWith("g_")?tn:$n;if(!Dr.has(Er))return Dr.get(Er,mn),fr}if(fr++,fr===ur)return fr;if(Ht&&++Zt>xt){if(Date.now()>Xt)return mn(),fr;Zt=0}}}endDrawing(){Fr(this,wr,Sl).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Kt of this._cachedBitmapsMap.values()){for(const Gt of Kt.values())typeof HTMLCanvasElement<"u"&&Gt instanceof HTMLCanvasElement&&(Gt.width=Gt.height=0);Kt.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(Kt,Gt){const mn=Kt.width,Jt=Kt.height;let rr=Math.max(Math.hypot(Gt[0],Gt[1]),1),Tn=Math.max(Math.hypot(Gt[2],Gt[3]),1),fr=mn,ur=Jt,Ht="prescale1",Xt,Zt;for(;rr>2&&fr>1||Tn>2&&ur>1;){let tn=fr,$n=ur;rr>2&&fr>1&&(tn=Math.ceil(fr/2),rr/=fr/tn),Tn>2&&ur>1&&($n=Math.ceil(ur/2),Tn/=ur/$n),Xt=this.cachedCanvases.getCanvas(Ht,tn,$n),Zt=Xt.context,Zt.clearRect(0,0,tn,$n),Zt.drawImage(Kt,0,0,fr,ur,0,0,tn,$n),Kt=Xt.canvas,fr=tn,ur=$n,Ht=Ht==="prescale1"?"prescale2":"prescale1"}return{img:Kt,paintWidth:fr,paintHeight:ur}}_createMaskCanvas(Kt){const Gt=this.ctx,{width:mn,height:Jt}=Kt,rr=this.current.fillColor,Tn=this.current.patternFill,fr=(0,et.getCurrentTransform)(Gt);let ur,Ht,Xt,Zt;if((Kt.bitmap||Kt.data)&&Kt.count>1){const Ir=Kt.bitmap||Kt.data.buffer,zr=fr.slice(0,4);Ht=JSON.stringify(Tn?zr:[zr,rr]),ur=this._cachedBitmapsMap.get(Ir),ur||(ur=new Map,this._cachedBitmapsMap.set(Ir,ur));const Qt=ur.get(Ht);if(Qt&&!Tn){const Lt=Math.round(Math.min(fr[0],fr[2])+fr[4]),Ut=Math.round(Math.min(fr[1],fr[3])+fr[5]);return{canvas:Qt,offsetX:Lt,offsetY:Ut}}Xt=Qt}Xt||(Zt=this.cachedCanvases.getCanvas("maskCanvas",mn,Jt),jt(Zt.context,Kt));let tn=at.Util.transform(fr,[1/mn,0,0,-1/Jt,0,0]);tn=at.Util.transform(tn,[1,0,0,1,0,-Jt]);const $n=at.Util.applyTransform([0,0],tn),lr=at.Util.applyTransform([mn,Jt],tn),Er=at.Util.normalizeRect([$n[0],$n[1],lr[0],lr[1]]),Dr=Math.round(Er[2]-Er[0])||1,br=Math.round(Er[3]-Er[1])||1,kr=this.cachedCanvases.getCanvas("fillCanvas",Dr,br),Ar=kr.context,Rr=Math.min($n[0],lr[0]),Nr=Math.min($n[1],lr[1]);Ar.translate(-Rr,-Nr),Ar.transform(...tn),Xt||(Xt=this._scaleImage(Zt.canvas,(0,et.getCurrentTransformInverse)(Ar)),Xt=Xt.img,ur&&Tn&&ur.set(Ht,Xt)),Ar.imageSmoothingEnabled=dr((0,et.getCurrentTransform)(Ar),Kt.interpolate),bt(Ar,Xt,0,0,Xt.width,Xt.height,0,0,mn,Jt),Ar.globalCompositeOperation="source-in";const Mn=at.Util.transform((0,et.getCurrentTransformInverse)(Ar),[1,0,0,1,-Rr,-Nr]);return Ar.fillStyle=Tn?rr.getPattern(Gt,this,Mn,lt.PathType.FILL):rr,Ar.fillRect(0,0,mn,Jt),ur&&!Tn&&(this.cachedCanvases.delete("fillCanvas"),ur.set(Ht,kr.canvas)),{canvas:kr.canvas,offsetX:Math.round(Rr),offsetY:Math.round(Nr)}}setLineWidth(Kt){Kt!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=Kt,this.ctx.lineWidth=Kt}setLineCap(Kt){this.ctx.lineCap=ar[Kt]}setLineJoin(Kt){this.ctx.lineJoin=pr[Kt]}setMiterLimit(Kt){this.ctx.miterLimit=Kt}setDash(Kt,Gt){const mn=this.ctx;mn.setLineDash!==void 0&&(mn.setLineDash(Kt),mn.lineDashOffset=Gt)}setRenderingIntent(Kt){}setFlatness(Kt){}setGState(Kt){for(let Gt=0,mn=Kt.length;Gt<mn;Gt++){const Jt=Kt[Gt],rr=Jt[0],Tn=Jt[1];switch(rr){case"LW":this.setLineWidth(Tn);break;case"LC":this.setLineCap(Tn);break;case"LJ":this.setLineJoin(Tn);break;case"ML":this.setMiterLimit(Tn);break;case"D":this.setDash(Tn[0],Tn[1]);break;case"RI":this.setRenderingIntent(Tn);break;case"FL":this.setFlatness(Tn);break;case"Font":this.setFont(Tn[0],Tn[1]);break;case"CA":this.current.strokeAlpha=Jt[1];break;case"ca":this.current.fillAlpha=Jt[1],this.ctx.globalAlpha=Jt[1];break;case"BM":this.ctx.globalCompositeOperation=Tn;break;case"SMask":this.current.activeSMask=Tn?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=Tn}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Kt=this.inSMaskMode;this.current.activeSMask&&!Kt?this.beginSMaskMode():!this.current.activeSMask&&Kt&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Kt=this.ctx.canvas.width,Gt=this.ctx.canvas.height,mn="smaskGroupAt"+this.groupLevel,Jt=this.cachedCanvases.getCanvas(mn,Kt,Gt);this.suspendedCtx=this.ctx,this.ctx=Jt.context;const rr=this.ctx;rr.setTransform(...(0,et.getCurrentTransform)(this.suspendedCtx)),Wt(this.suspendedCtx,rr),_t(rr,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Wt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Kt){if(!this.current.activeSMask)return;Kt?(Kt[0]=Math.floor(Kt[0]),Kt[1]=Math.floor(Kt[1]),Kt[2]=Math.ceil(Kt[2]),Kt[3]=Math.ceil(Kt[3])):Kt=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Gt=this.current.activeSMask,mn=this.suspendedCtx;Fn(mn,Gt,this.ctx,Kt),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Wt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Kt=this.current;this.stateStack.push(Kt),this.current=Kt.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Wt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(Kt,Gt,mn,Jt,rr,Tn){this.ctx.transform(Kt,Gt,mn,Jt,rr,Tn),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(Kt,Gt,mn){const Jt=this.ctx,rr=this.current;let Tn=rr.x,fr=rr.y,ur,Ht;const Xt=(0,et.getCurrentTransform)(Jt),Zt=Xt[0]===0&&Xt[3]===0||Xt[1]===0&&Xt[2]===0,tn=Zt?mn.slice(0):null;for(let $n=0,lr=0,Er=Kt.length;$n<Er;$n++)switch(Kt[$n]|0){case at.OPS.rectangle:Tn=Gt[lr++],fr=Gt[lr++];const Dr=Gt[lr++],br=Gt[lr++],kr=Tn+Dr,Ar=fr+br;Jt.moveTo(Tn,fr),Dr===0||br===0?Jt.lineTo(kr,Ar):(Jt.lineTo(kr,fr),Jt.lineTo(kr,Ar),Jt.lineTo(Tn,Ar)),Zt||rr.updateRectMinMax(Xt,[Tn,fr,kr,Ar]),Jt.closePath();break;case at.OPS.moveTo:Tn=Gt[lr++],fr=Gt[lr++],Jt.moveTo(Tn,fr),Zt||rr.updatePathMinMax(Xt,Tn,fr);break;case at.OPS.lineTo:Tn=Gt[lr++],fr=Gt[lr++],Jt.lineTo(Tn,fr),Zt||rr.updatePathMinMax(Xt,Tn,fr);break;case at.OPS.curveTo:ur=Tn,Ht=fr,Tn=Gt[lr+4],fr=Gt[lr+5],Jt.bezierCurveTo(Gt[lr],Gt[lr+1],Gt[lr+2],Gt[lr+3],Tn,fr),rr.updateCurvePathMinMax(Xt,ur,Ht,Gt[lr],Gt[lr+1],Gt[lr+2],Gt[lr+3],Tn,fr,tn),lr+=6;break;case at.OPS.curveTo2:ur=Tn,Ht=fr,Jt.bezierCurveTo(Tn,fr,Gt[lr],Gt[lr+1],Gt[lr+2],Gt[lr+3]),rr.updateCurvePathMinMax(Xt,ur,Ht,Tn,fr,Gt[lr],Gt[lr+1],Gt[lr+2],Gt[lr+3],tn),Tn=Gt[lr+2],fr=Gt[lr+3],lr+=4;break;case at.OPS.curveTo3:ur=Tn,Ht=fr,Tn=Gt[lr+2],fr=Gt[lr+3],Jt.bezierCurveTo(Gt[lr],Gt[lr+1],Tn,fr,Tn,fr),rr.updateCurvePathMinMax(Xt,ur,Ht,Gt[lr],Gt[lr+1],Tn,fr,Tn,fr,tn),lr+=4;break;case at.OPS.closePath:Jt.closePath();break}Zt&&rr.updateScalingPathMinMax(Xt,tn),rr.setCurrentPoint(Tn,fr)}closePath(){this.ctx.closePath()}stroke(Kt){Kt=typeof Kt<"u"?Kt:!0;const Gt=this.ctx,mn=this.current.strokeColor;Gt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof mn=="object"&&(mn!=null&&mn.getPattern)?(Gt.save(),Gt.strokeStyle=mn.getPattern(Gt,this,(0,et.getCurrentTransformInverse)(Gt),lt.PathType.STROKE),this.rescaleAndStroke(!1),Gt.restore()):this.rescaleAndStroke(!0)),Kt&&this.consumePath(this.current.getClippedPathBoundingBox()),Gt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Kt){Kt=typeof Kt<"u"?Kt:!0;const Gt=this.ctx,mn=this.current.fillColor,Jt=this.current.patternFill;let rr=!1;Jt&&(Gt.save(),Gt.fillStyle=mn.getPattern(Gt,this,(0,et.getCurrentTransformInverse)(Gt),lt.PathType.FILL),rr=!0);const Tn=this.current.getClippedPathBoundingBox();this.contentVisible&&Tn!==null&&(this.pendingEOFill?(Gt.fill("evenodd"),this.pendingEOFill=!1):Gt.fill()),rr&&Gt.restore(),Kt&&this.consumePath(Tn)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=mr}eoClip(){this.pendingClip=cr}beginText(){this.current.textMatrix=at.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Kt=this.pendingTextPaths,Gt=this.ctx;if(Kt===void 0){Gt.beginPath();return}Gt.save(),Gt.beginPath();for(const mn of Kt)Gt.setTransform(...mn.transform),Gt.translate(mn.x,mn.y),mn.addToPath(Gt,mn.fontSize);Gt.restore(),Gt.clip(),Gt.beginPath(),delete this.pendingTextPaths}setCharSpacing(Kt){this.current.charSpacing=Kt}setWordSpacing(Kt){this.current.wordSpacing=Kt}setHScale(Kt){this.current.textHScale=Kt/100}setLeading(Kt){this.current.leading=-Kt}setFont(Kt,Gt){const mn=this.commonObjs.get(Kt),Jt=this.current;if(!mn)throw new Error(`Can't find font for ${Kt}`);if(Jt.fontMatrix=mn.fontMatrix||at.FONT_IDENTITY_MATRIX,(Jt.fontMatrix[0]===0||Jt.fontMatrix[3]===0)&&(0,at.warn)("Invalid font matrix for font "+Kt),Gt<0?(Gt=-Gt,Jt.fontDirection=-1):Jt.fontDirection=1,this.current.font=mn,this.current.fontSize=Gt,mn.isType3Font)return;const rr=mn.loadedName||"sans-serif";let Tn="normal";mn.black?Tn="900":mn.bold&&(Tn="bold");const fr=mn.italic?"italic":"normal",ur=`"${rr}", ${mn.fallbackName}`;let Ht=Gt;Gt<ft?Ht=ft:Gt>vt&&(Ht=vt),this.current.fontSizeScale=Gt/Ht,this.ctx.font=`${fr} ${Tn} ${Ht}px ${ur}`}setTextRenderingMode(Kt){this.current.textRenderingMode=Kt}setTextRise(Kt){this.current.textRise=Kt}moveText(Kt,Gt){this.current.x=this.current.lineX+=Kt,this.current.y=this.current.lineY+=Gt}setLeadingMoveText(Kt,Gt){this.setLeading(-Gt),this.moveText(Kt,Gt)}setTextMatrix(Kt,Gt,mn,Jt,rr,Tn){this.current.textMatrix=[Kt,Gt,mn,Jt,rr,Tn],this.current.textMatrixScale=Math.hypot(Kt,Gt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Kt,Gt,mn,Jt){const rr=this.ctx,Tn=this.current,fr=Tn.font,ur=Tn.textRenderingMode,Ht=Tn.fontSize/Tn.fontSizeScale,Xt=ur&at.TextRenderingMode.FILL_STROKE_MASK,Zt=!!(ur&at.TextRenderingMode.ADD_TO_PATH_FLAG),tn=Tn.patternFill&&!fr.missingFile;let $n;(fr.disableFontFace||Zt||tn)&&($n=fr.getPathGenerator(this.commonObjs,Kt)),fr.disableFontFace||tn?(rr.save(),rr.translate(Gt,mn),rr.beginPath(),$n(rr,Ht),Jt&&rr.setTransform(...Jt),(Xt===at.TextRenderingMode.FILL||Xt===at.TextRenderingMode.FILL_STROKE)&&rr.fill(),(Xt===at.TextRenderingMode.STROKE||Xt===at.TextRenderingMode.FILL_STROKE)&&rr.stroke(),rr.restore()):((Xt===at.TextRenderingMode.FILL||Xt===at.TextRenderingMode.FILL_STROKE)&&rr.fillText(Kt,Gt,mn),(Xt===at.TextRenderingMode.STROKE||Xt===at.TextRenderingMode.FILL_STROKE)&&rr.strokeText(Kt,Gt,mn)),Zt&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,et.getCurrentTransform)(rr),x:Gt,y:mn,fontSize:Ht,addToPath:$n})}get isFontSubpixelAAEnabled(){const{context:Kt}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Kt.scale(1.5,1),Kt.fillText("I",0,10);const Gt=Kt.getImageData(0,0,10,10).data;let mn=!1;for(let Jt=3;Jt<Gt.length;Jt+=4)if(Gt[Jt]>0&&Gt[Jt]<255){mn=!0;break}return(0,at.shadow)(this,"isFontSubpixelAAEnabled",mn)}showText(Kt){const Gt=this.current,mn=Gt.font;if(mn.isType3Font)return this.showType3Text(Kt);const Jt=Gt.fontSize;if(Jt===0)return;const rr=this.ctx,Tn=Gt.fontSizeScale,fr=Gt.charSpacing,ur=Gt.wordSpacing,Ht=Gt.fontDirection,Xt=Gt.textHScale*Ht,Zt=Kt.length,tn=mn.vertical,$n=tn?1:-1,lr=mn.defaultVMetrics,Er=Jt*Gt.fontMatrix[0],Dr=Gt.textRenderingMode===at.TextRenderingMode.FILL&&!mn.disableFontFace&&!Gt.patternFill;rr.save(),rr.transform(...Gt.textMatrix),rr.translate(Gt.x,Gt.y+Gt.textRise),Ht>0?rr.scale(Xt,-1):rr.scale(Xt,1);let br;if(Gt.patternFill){rr.save();const Mn=Gt.fillColor.getPattern(rr,this,(0,et.getCurrentTransformInverse)(rr),lt.PathType.FILL);br=(0,et.getCurrentTransform)(rr),rr.restore(),rr.fillStyle=Mn}let kr=Gt.lineWidth;const Ar=Gt.textMatrixScale;if(Ar===0||kr===0){const Mn=Gt.textRenderingMode&at.TextRenderingMode.FILL_STROKE_MASK;(Mn===at.TextRenderingMode.STROKE||Mn===at.TextRenderingMode.FILL_STROKE)&&(kr=this.getSinglePixelWidth())}else kr/=Ar;Tn!==1&&(rr.scale(Tn,Tn),kr/=Tn),rr.lineWidth=kr;let Rr=0,Nr;for(Nr=0;Nr<Zt;++Nr){const Mn=Kt[Nr];if(typeof Mn=="number"){Rr+=$n*Mn*Jt/1e3;continue}let Ir=!1;const zr=(Mn.isSpace?ur:0)+fr,Qt=Mn.fontChar,Lt=Mn.accent;let Ut,nr,gr=Mn.width;if(tn){const xr=Mn.vmetric||lr,Hr=-(Mn.vmetric?xr[1]:gr*.5)*Er,Xr=xr[2]*Er;gr=xr?-xr[0]:gr,Ut=Hr/Tn,nr=(Rr+Xr)/Tn}else Ut=Rr/Tn,nr=0;if(mn.remeasure&&gr>0){const xr=rr.measureText(Qt).width*1e3/Jt*Tn;if(gr<xr&&this.isFontSubpixelAAEnabled){const Hr=gr/xr;Ir=!0,rr.save(),rr.scale(Hr,1),Ut/=Hr}else gr!==xr&&(Ut+=(gr-xr)/2e3*Jt/Tn)}if(this.contentVisible&&(Mn.isInFont||mn.missingFile)){if(Dr&&!Lt)rr.fillText(Qt,Ut,nr);else if(this.paintChar(Qt,Ut,nr,br),Lt){const xr=Ut+Jt*Lt.offset.x/Tn,Hr=nr-Jt*Lt.offset.y/Tn;this.paintChar(Lt.fontChar,xr,Hr,br)}}let Tr;tn?Tr=gr*Er-zr*Ht:Tr=gr*Er+zr*Ht,Rr+=Tr,Ir&&rr.restore()}tn?Gt.y-=Rr:Gt.x+=Rr*Xt,rr.restore(),this.compose()}showType3Text(Kt){const Gt=this.ctx,mn=this.current,Jt=mn.font,rr=mn.fontSize,Tn=mn.fontDirection,fr=Jt.vertical?1:-1,ur=mn.charSpacing,Ht=mn.wordSpacing,Xt=mn.textHScale*Tn,Zt=mn.fontMatrix||at.FONT_IDENTITY_MATRIX,tn=Kt.length,$n=mn.textRenderingMode===at.TextRenderingMode.INVISIBLE;let lr,Er,Dr,br;if(!($n||rr===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,Gt.save(),Gt.transform(...mn.textMatrix),Gt.translate(mn.x,mn.y),Gt.scale(Xt,Tn),lr=0;lr<tn;++lr){if(Er=Kt[lr],typeof Er=="number"){br=fr*Er*rr/1e3,this.ctx.translate(br,0),mn.x+=br*Xt;continue}const kr=(Er.isSpace?Ht:0)+ur,Ar=Jt.charProcOperatorList[Er.operatorListId];if(!Ar){(0,at.warn)(`Type3 character "${Er.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Er,this.save(),Gt.scale(rr,rr),Gt.transform(...Zt),this.executeOperatorList(Ar),this.restore()),Dr=at.Util.applyTransform([Er.width,0],Zt)[0]*rr+kr,Gt.translate(Dr,0),mn.x+=Dr*Xt}Gt.restore(),this.processingType3=null}}setCharWidth(Kt,Gt){}setCharWidthAndBounds(Kt,Gt,mn,Jt,rr,Tn){this.ctx.rect(mn,Jt,rr-mn,Tn-Jt),this.ctx.clip(),this.endPath()}getColorN_Pattern(Kt){let Gt;if(Kt[0]==="TilingPattern"){const mn=Kt[1],Jt=this.baseTransform||(0,et.getCurrentTransform)(this.ctx),rr={createCanvasGraphics:Tn=>new Sr(Tn,this.commonObjs,this.objs,this.canvasFactory)};Gt=new lt.TilingPattern(Kt,mn,this.ctx,rr,Jt)}else Gt=this._getPattern(Kt[1],Kt[2]);return Gt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Kt,Gt,mn){var rr;const Jt=((rr=this.selectColor)==null?void 0:rr.call(this,Kt,Gt,mn))||at.Util.makeHexColor(Kt,Gt,mn);this.ctx.strokeStyle=Jt,this.current.strokeColor=Jt}setFillRGBColor(Kt,Gt,mn){var rr;const Jt=((rr=this.selectColor)==null?void 0:rr.call(this,Kt,Gt,mn))||at.Util.makeHexColor(Kt,Gt,mn);this.ctx.fillStyle=Jt,this.current.fillColor=Jt,this.current.patternFill=!1}_getPattern(Kt,Gt=null){let mn;return this.cachedPatterns.has(Kt)?mn=this.cachedPatterns.get(Kt):(mn=(0,lt.getShadingPattern)(this.objs.get(Kt)),this.cachedPatterns.set(Kt,mn)),Gt&&(mn.matrix=Gt),mn}shadingFill(Kt){if(!this.contentVisible)return;const Gt=this.ctx;this.save();const mn=this._getPattern(Kt);Gt.fillStyle=mn.getPattern(Gt,this,(0,et.getCurrentTransformInverse)(Gt),lt.PathType.SHADING);const Jt=(0,et.getCurrentTransformInverse)(Gt);if(Jt){const rr=Gt.canvas,Tn=rr.width,fr=rr.height,ur=at.Util.applyTransform([0,0],Jt),Ht=at.Util.applyTransform([0,fr],Jt),Xt=at.Util.applyTransform([Tn,0],Jt),Zt=at.Util.applyTransform([Tn,fr],Jt),tn=Math.min(ur[0],Ht[0],Xt[0],Zt[0]),$n=Math.min(ur[1],Ht[1],Xt[1],Zt[1]),lr=Math.max(ur[0],Ht[0],Xt[0],Zt[0]),Er=Math.max(ur[1],Ht[1],Xt[1],Zt[1]);this.ctx.fillRect(tn,$n,lr-tn,Er-$n)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,at.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,at.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Kt,Gt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Kt)&&Kt.length===6&&this.transform(...Kt),this.baseTransform=(0,et.getCurrentTransform)(this.ctx),Gt)){const mn=Gt[2]-Gt[0],Jt=Gt[3]-Gt[1];this.ctx.rect(Gt[0],Gt[1],mn,Jt),this.current.updateRectMinMax((0,et.getCurrentTransform)(this.ctx),Gt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Kt){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Gt=this.ctx;Kt.isolated||(0,at.info)("TODO: Support non-isolated groups."),Kt.knockout&&(0,at.warn)("Knockout groups not supported.");const mn=(0,et.getCurrentTransform)(Gt);if(Kt.matrix&&Gt.transform(...Kt.matrix),!Kt.bbox)throw new Error("Bounding box is required.");let Jt=at.Util.getAxialAlignedBoundingBox(Kt.bbox,(0,et.getCurrentTransform)(Gt));const rr=[0,0,Gt.canvas.width,Gt.canvas.height];Jt=at.Util.intersect(Jt,rr)||[0,0,0,0];const Tn=Math.floor(Jt[0]),fr=Math.floor(Jt[1]);let ur=Math.max(Math.ceil(Jt[2])-Tn,1),Ht=Math.max(Math.ceil(Jt[3])-fr,1),Xt=1,Zt=1;ur>wt&&(Xt=ur/wt,ur=wt),Ht>wt&&(Zt=Ht/wt,Ht=wt),this.current.startNewPathAndClipBox([0,0,ur,Ht]);let tn="groupAt"+this.groupLevel;Kt.smask&&(tn+="_smask_"+this.smaskCounter++%2);const $n=this.cachedCanvases.getCanvas(tn,ur,Ht),lr=$n.context;lr.scale(1/Xt,1/Zt),lr.translate(-Tn,-fr),lr.transform(...mn),Kt.smask?this.smaskStack.push({canvas:$n.canvas,context:lr,offsetX:Tn,offsetY:fr,scaleX:Xt,scaleY:Zt,subtype:Kt.smask.subtype,backdrop:Kt.smask.backdrop,transferMap:Kt.smask.transferMap||null,startTransformInverse:null}):(Gt.setTransform(1,0,0,1,0,0),Gt.translate(Tn,fr),Gt.scale(Xt,Zt),Gt.save()),Wt(Gt,lr),this.ctx=lr,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Gt),this.groupLevel++}endGroup(Kt){if(!this.contentVisible)return;this.groupLevel--;const Gt=this.ctx,mn=this.groupStack.pop();if(this.ctx=mn,this.ctx.imageSmoothingEnabled=!1,Kt.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Jt=(0,et.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Jt);const rr=at.Util.getAxialAlignedBoundingBox([0,0,Gt.canvas.width,Gt.canvas.height],Jt);this.ctx.drawImage(Gt.canvas,0,0),this.ctx.restore(),this.compose(rr)}}beginAnnotation(Kt,Gt,mn,Jt,rr){if(Fr(this,wr,Sl).call(this),Yt(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Gt)&&Gt.length===4){const Tn=Gt[2]-Gt[0],fr=Gt[3]-Gt[1];if(rr&&this.annotationCanvasMap){mn=mn.slice(),mn[4]-=Gt[0],mn[5]-=Gt[1],Gt=Gt.slice(),Gt[0]=Gt[1]=0,Gt[2]=Tn,Gt[3]=fr;const[ur,Ht]=at.Util.singularValueDecompose2dScale((0,et.getCurrentTransform)(this.ctx)),{viewportScale:Xt}=this,Zt=Math.ceil(Tn*this.outputScaleX*Xt),tn=Math.ceil(fr*this.outputScaleY*Xt);this.annotationCanvas=this.canvasFactory.create(Zt,tn);const{canvas:$n,context:lr}=this.annotationCanvas;this.annotationCanvasMap.set(Kt,$n),this.annotationCanvas.savedCtx=this.ctx,this.ctx=lr,this.ctx.setTransform(ur,0,0,-Ht,0,fr*Ht),Yt(this.ctx,this.foregroundColor)}else Yt(this.ctx,this.foregroundColor),this.ctx.rect(Gt[0],Gt[1],Tn,fr),this.ctx.clip(),this.endPath()}this.current=new kt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...mn),this.transform(...Jt)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Kt){if(!this.contentVisible)return;const Gt=Kt.count;Kt=this.getObject(Kt.data,Kt),Kt.count=Gt;const mn=this.ctx,Jt=this.processingType3;if(Jt&&(Jt.compiled===void 0&&(Jt.compiled=Nt(Kt)),Jt.compiled)){Jt.compiled(mn);return}const rr=this._createMaskCanvas(Kt),Tn=rr.canvas;mn.save(),mn.setTransform(1,0,0,1,0,0),mn.drawImage(Tn,rr.offsetX,rr.offsetY),mn.restore(),this.compose()}paintImageMaskXObjectRepeat(Kt,Gt,mn=0,Jt=0,rr,Tn){if(!this.contentVisible)return;Kt=this.getObject(Kt.data,Kt);const fr=this.ctx;fr.save();const ur=(0,et.getCurrentTransform)(fr);fr.transform(Gt,mn,Jt,rr,0,0);const Ht=this._createMaskCanvas(Kt);fr.setTransform(1,0,0,1,0,0);for(let Xt=0,Zt=Tn.length;Xt<Zt;Xt+=2){const tn=at.Util.transform(ur,[Gt,mn,Jt,rr,Tn[Xt],Tn[Xt+1]]),[$n,lr]=at.Util.applyTransform([0,0],tn);fr.drawImage(Ht.canvas,$n,lr)}fr.restore(),this.compose()}paintImageMaskXObjectGroup(Kt){if(!this.contentVisible)return;const Gt=this.ctx,mn=this.current.fillColor,Jt=this.current.patternFill;for(const rr of Kt){const{data:Tn,width:fr,height:ur,transform:Ht}=rr,Xt=this.cachedCanvases.getCanvas("maskCanvas",fr,ur),Zt=Xt.context;Zt.save();const tn=this.getObject(Tn,rr);jt(Zt,tn),Zt.globalCompositeOperation="source-in",Zt.fillStyle=Jt?mn.getPattern(Zt,this,(0,et.getCurrentTransformInverse)(Gt),lt.PathType.FILL):mn,Zt.fillRect(0,0,fr,ur),Zt.restore(),Gt.save(),Gt.transform(...Ht),Gt.scale(1,-1),bt(Gt,Xt.canvas,0,0,fr,ur,0,-1,1,1),Gt.restore()}this.compose()}paintImageXObject(Kt){if(!this.contentVisible)return;const Gt=this.getObject(Kt);if(!Gt){(0,at.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Gt)}paintImageXObjectRepeat(Kt,Gt,mn,Jt){if(!this.contentVisible)return;const rr=this.getObject(Kt);if(!rr){(0,at.warn)("Dependent image isn't ready yet");return}const Tn=rr.width,fr=rr.height,ur=[];for(let Ht=0,Xt=Jt.length;Ht<Xt;Ht+=2)ur.push({transform:[Gt,0,0,mn,Jt[Ht],Jt[Ht+1]],x:0,y:0,w:Tn,h:fr});this.paintInlineImageXObjectGroup(rr,ur)}paintInlineImageXObject(Kt){if(!this.contentVisible)return;const Gt=Kt.width,mn=Kt.height,Jt=this.ctx;this.save(),Jt.scale(1/Gt,-1/mn);let rr;if(typeof HTMLElement=="function"&&Kt instanceof HTMLElement||!Kt.data)rr=Kt;else{const Ht=this.cachedCanvases.getCanvas("inlineImage",Gt,mn),Xt=Ht.context;Dt(Xt,Kt,this.current.transferMaps),rr=Ht.canvas}const Tn=this._scaleImage(rr,(0,et.getCurrentTransformInverse)(Jt));Jt.imageSmoothingEnabled=dr((0,et.getCurrentTransform)(Jt),Kt.interpolate);const[fr,ur]=bt(Jt,Tn.img,0,0,Tn.paintWidth,Tn.paintHeight,0,-mn,Gt,mn);if(this.imageLayer){const[Ht,Xt]=at.Util.applyTransform([0,-mn],(0,et.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:Kt,left:Ht,top:Xt,width:fr,height:ur})}this.compose(),this.restore()}paintInlineImageXObjectGroup(Kt,Gt){if(!this.contentVisible)return;const mn=this.ctx,Jt=Kt.width,rr=Kt.height,Tn=this.cachedCanvases.getCanvas("inlineImage",Jt,rr),fr=Tn.context;Dt(fr,Kt,this.current.transferMaps);for(const ur of Gt){if(mn.save(),mn.transform(...ur.transform),mn.scale(1,-1),bt(mn,Tn.canvas,ur.x,ur.y,ur.w,ur.h,0,-1,1,1),this.imageLayer){const[Ht,Xt]=at.Util.applyTransform([ur.x,ur.y],(0,et.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:Kt,left:Ht,top:Xt,width:Jt,height:rr})}mn.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Kt){}markPointProps(Kt,Gt){}beginMarkedContent(Kt){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Kt,Gt){Kt==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Gt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Kt){const Gt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Kt);const mn=this.ctx;this.pendingClip&&(Gt||(this.pendingClip===cr?mn.clip("evenodd"):mn.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),mn.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Kt=(0,et.getCurrentTransform)(this.ctx);if(Kt[1]===0&&Kt[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Kt[0]),Math.abs(Kt[3]));else{const Gt=Math.abs(Kt[0]*Kt[3]-Kt[2]*Kt[1]),mn=Math.hypot(Kt[0],Kt[2]),Jt=Math.hypot(Kt[1],Kt[3]);this._cachedGetSinglePixelWidth=Math.max(mn,Jt)/Gt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:Kt}=this.current,Gt=(0,et.getCurrentTransform)(this.ctx);let mn,Jt;if(Gt[1]===0&&Gt[2]===0){const rr=Math.abs(Gt[0]),Tn=Math.abs(Gt[3]);if(Kt===0)mn=1/rr,Jt=1/Tn;else{const fr=rr*Kt,ur=Tn*Kt;mn=fr<1?1/fr:1,Jt=ur<1?1/ur:1}}else{const rr=Math.abs(Gt[0]*Gt[3]-Gt[2]*Gt[1]),Tn=Math.hypot(Gt[0],Gt[1]),fr=Math.hypot(Gt[2],Gt[3]);if(Kt===0)mn=fr/rr,Jt=Tn/rr;else{const ur=Kt*rr;mn=fr>ur?fr/ur:1,Jt=Tn>ur?Tn/ur:1}}this._cachedScaleForStroking=[mn,Jt]}return this._cachedScaleForStroking}rescaleAndStroke(Kt){const{ctx:Gt}=this,{lineWidth:mn}=this.current,[Jt,rr]=this.getScaleForStroking();if(Gt.lineWidth=mn||1,Jt===1&&rr===1){Gt.stroke();return}let Tn,fr,ur;Kt&&(Tn=(0,et.getCurrentTransform)(Gt),fr=Gt.getLineDash().slice(),ur=Gt.lineDashOffset),Gt.scale(Jt,rr);const Ht=Math.max(Jt,rr);Gt.setLineDash(Gt.getLineDash().map(Xt=>Xt/Ht)),Gt.lineDashOffset/=Ht,Gt.stroke(),Kt&&(Gt.setTransform(...Tn),Gt.setLineDash(fr),Gt.lineDashOffset=ur)}isContentVisible(){for(let Kt=this.markedContentStack.length-1;Kt>=0;Kt--)if(!this.markedContentStack[Kt].visible)return!1;return!0}};let sr=Sr;wr=new WeakSet,Sl=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},s.CanvasGraphics=sr;for(const en in at.OPS)sr.prototype[en]!==void 0&&(sr.prototype[at.OPS[en]]=sr.prototype[en])},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TilingPattern=s.PathType=void 0,s.getShadingPattern=Rt;var et=a(1),at=a(8),lt=a(3);const ht={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};s.PathType=ht;function dt(bt,Nt){if(!Nt||lt.isNodeJS)return;const kt=Nt[2]-Nt[0],Dt=Nt[3]-Nt[1],jt=new Path2D;jt.rect(Nt[0],Nt[1],kt,Dt),bt.clip(jt)}class ft{constructor(){this.constructor===ft&&(0,et.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,et.unreachable)("Abstract method `getPattern` called.")}}class vt extends ft{constructor(Nt){super(),this._type=Nt[1],this._bbox=Nt[2],this._colorStops=Nt[3],this._p0=Nt[4],this._p1=Nt[5],this._r0=Nt[6],this._r1=Nt[7],this.matrix=null}_createGradient(Nt){let kt;this._type==="axial"?kt=Nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(kt=Nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Dt of this._colorStops)kt.addColorStop(Dt[0],Dt[1]);return kt}getPattern(Nt,kt,Dt,jt){let Wt;if(jt===ht.STROKE||jt===ht.FILL){const Yt=kt.current.getClippedPathBoundingBox(jt,(0,at.getCurrentTransform)(Nt))||[0,0,0,0],Bt=Math.ceil(Yt[2]-Yt[0])||1,zt=Math.ceil(Yt[3]-Yt[1])||1,qt=kt.cachedCanvases.getCanvas("pattern",Bt,zt,!0),nn=qt.context;nn.clearRect(0,0,nn.canvas.width,nn.canvas.height),nn.beginPath(),nn.rect(0,0,nn.canvas.width,nn.canvas.height),nn.translate(-Yt[0],-Yt[1]),Dt=et.Util.transform(Dt,[1,0,0,1,Yt[0],Yt[1]]),nn.transform(...kt.baseTransform),this.matrix&&nn.transform(...this.matrix),dt(nn,this._bbox),nn.fillStyle=this._createGradient(nn),nn.fill(),Wt=Nt.createPattern(qt.canvas,"no-repeat");const Fn=new DOMMatrix(Dt);try{Wt.setTransform(Fn)}catch(dr){(0,et.warn)(`RadialAxialShadingPattern.getPattern: "${dr==null?void 0:dr.message}".`)}}else dt(Nt,this._bbox),Wt=this._createGradient(Nt);return Wt}}function wt(bt,Nt,kt,Dt,jt,Wt,Yt,Bt){const zt=Nt.coords,qt=Nt.colors,nn=bt.data,Fn=bt.width*4;let dr;zt[kt+1]>zt[Dt+1]&&(dr=kt,kt=Dt,Dt=dr,dr=Wt,Wt=Yt,Yt=dr),zt[Dt+1]>zt[jt+1]&&(dr=Dt,Dt=jt,jt=dr,dr=Yt,Yt=Bt,Bt=dr),zt[kt+1]>zt[Dt+1]&&(dr=kt,kt=Dt,Dt=dr,dr=Wt,Wt=Yt,Yt=dr);const ar=(zt[kt]+Nt.offsetX)*Nt.scaleX,pr=(zt[kt+1]+Nt.offsetY)*Nt.scaleY,mr=(zt[Dt]+Nt.offsetX)*Nt.scaleX,cr=(zt[Dt+1]+Nt.offsetY)*Nt.scaleY,sr=(zt[jt]+Nt.offsetX)*Nt.scaleX,wr=(zt[jt+1]+Nt.offsetY)*Nt.scaleY;if(pr>=wr)return;const $r=qt[Wt],Sr=qt[Wt+1],en=qt[Wt+2],Kt=qt[Yt],Gt=qt[Yt+1],mn=qt[Yt+2],Jt=qt[Bt],rr=qt[Bt+1],Tn=qt[Bt+2],fr=Math.round(pr),ur=Math.round(wr);let Ht,Xt,Zt,tn,$n,lr,Er,Dr;for(let br=fr;br<=ur;br++){if(br<cr){let Mn;br<pr?Mn=0:Mn=(pr-br)/(pr-cr),Ht=ar-(ar-mr)*Mn,Xt=$r-($r-Kt)*Mn,Zt=Sr-(Sr-Gt)*Mn,tn=en-(en-mn)*Mn}else{let Mn;br>wr?Mn=1:cr===wr?Mn=0:Mn=(cr-br)/(cr-wr),Ht=mr-(mr-sr)*Mn,Xt=Kt-(Kt-Jt)*Mn,Zt=Gt-(Gt-rr)*Mn,tn=mn-(mn-Tn)*Mn}let kr;br<pr?kr=0:br>wr?kr=1:kr=(pr-br)/(pr-wr),$n=ar-(ar-sr)*kr,lr=$r-($r-Jt)*kr,Er=Sr-(Sr-rr)*kr,Dr=en-(en-Tn)*kr;const Ar=Math.round(Math.min(Ht,$n)),Rr=Math.round(Math.max(Ht,$n));let Nr=Fn*br+Ar*4;for(let Mn=Ar;Mn<=Rr;Mn++)kr=(Ht-Mn)/(Ht-$n),kr<0?kr=0:kr>1&&(kr=1),nn[Nr++]=Xt-(Xt-lr)*kr|0,nn[Nr++]=Zt-(Zt-Er)*kr|0,nn[Nr++]=tn-(tn-Dr)*kr|0,nn[Nr++]=255}}function Ct(bt,Nt,kt){const Dt=Nt.coords,jt=Nt.colors;let Wt,Yt;switch(Nt.type){case"lattice":const Bt=Nt.verticesPerRow,zt=Math.floor(Dt.length/Bt)-1,qt=Bt-1;for(Wt=0;Wt<zt;Wt++){let nn=Wt*Bt;for(let Fn=0;Fn<qt;Fn++,nn++)wt(bt,kt,Dt[nn],Dt[nn+1],Dt[nn+Bt],jt[nn],jt[nn+1],jt[nn+Bt]),wt(bt,kt,Dt[nn+Bt+1],Dt[nn+1],Dt[nn+Bt],jt[nn+Bt+1],jt[nn+1],jt[nn+Bt])}break;case"triangles":for(Wt=0,Yt=Dt.length;Wt<Yt;Wt+=3)wt(bt,kt,Dt[Wt],Dt[Wt+1],Dt[Wt+2],jt[Wt],jt[Wt+1],jt[Wt+2]);break;default:throw new Error("illegal figure")}}class xt extends ft{constructor(Nt){super(),this._coords=Nt[2],this._colors=Nt[3],this._figures=Nt[4],this._bounds=Nt[5],this._bbox=Nt[7],this._background=Nt[8],this.matrix=null}_createMeshCanvas(Nt,kt,Dt){const Bt=Math.floor(this._bounds[0]),zt=Math.floor(this._bounds[1]),qt=Math.ceil(this._bounds[2])-Bt,nn=Math.ceil(this._bounds[3])-zt,Fn=Math.min(Math.ceil(Math.abs(qt*Nt[0]*1.1)),3e3),dr=Math.min(Math.ceil(Math.abs(nn*Nt[1]*1.1)),3e3),ar=qt/Fn,pr=nn/dr,mr={coords:this._coords,colors:this._colors,offsetX:-Bt,offsetY:-zt,scaleX:1/ar,scaleY:1/pr},cr=Fn+2*2,sr=dr+2*2,wr=Dt.getCanvas("mesh",cr,sr,!1),$r=wr.context,Sr=$r.createImageData(Fn,dr);if(kt){const Kt=Sr.data;for(let Gt=0,mn=Kt.length;Gt<mn;Gt+=4)Kt[Gt]=kt[0],Kt[Gt+1]=kt[1],Kt[Gt+2]=kt[2],Kt[Gt+3]=255}for(const Kt of this._figures)Ct(Sr,Kt,mr);return $r.putImageData(Sr,2,2),{canvas:wr.canvas,offsetX:Bt-2*ar,offsetY:zt-2*pr,scaleX:ar,scaleY:pr}}getPattern(Nt,kt,Dt,jt){dt(Nt,this._bbox);let Wt;if(jt===ht.SHADING)Wt=et.Util.singularValueDecompose2dScale((0,at.getCurrentTransform)(Nt));else if(Wt=et.Util.singularValueDecompose2dScale(kt.baseTransform),this.matrix){const Bt=et.Util.singularValueDecompose2dScale(this.matrix);Wt=[Wt[0]*Bt[0],Wt[1]*Bt[1]]}const Yt=this._createMeshCanvas(Wt,jt===ht.SHADING?null:this._background,kt.cachedCanvases);return jt!==ht.SHADING&&(Nt.setTransform(...kt.baseTransform),this.matrix&&Nt.transform(...this.matrix)),Nt.translate(Yt.offsetX,Yt.offsetY),Nt.scale(Yt.scaleX,Yt.scaleY),Nt.createPattern(Yt.canvas,"no-repeat")}}class Pt extends ft{getPattern(){return"hotpink"}}function Rt(bt){switch(bt[0]){case"RadialAxial":return new vt(bt);case"Mesh":return new xt(bt);case"Dummy":return new Pt}throw new Error(`Unknown IR type: ${bt[0]}`)}const _t={COLORED:1,UNCOLORED:2};class St{static get MAX_PATTERN_SIZE(){return(0,et.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(Nt,kt,Dt,jt,Wt){this.operatorList=Nt[2],this.matrix=Nt[3]||[1,0,0,1,0,0],this.bbox=Nt[4],this.xstep=Nt[5],this.ystep=Nt[6],this.paintType=Nt[7],this.tilingType=Nt[8],this.color=kt,this.ctx=Dt,this.canvasGraphicsFactory=jt,this.baseTransform=Wt}createPatternCanvas(Nt){const kt=this.operatorList,Dt=this.bbox,jt=this.xstep,Wt=this.ystep,Yt=this.paintType,Bt=this.tilingType,zt=this.color,qt=this.canvasGraphicsFactory;(0,et.info)("TilingType: "+Bt);const nn=Dt[0],Fn=Dt[1],dr=Dt[2],ar=Dt[3],pr=et.Util.singularValueDecompose2dScale(this.matrix),mr=et.Util.singularValueDecompose2dScale(this.baseTransform),cr=[pr[0]*mr[0],pr[1]*mr[1]],sr=this.getSizeAndScale(jt,this.ctx.canvas.width,cr[0]),wr=this.getSizeAndScale(Wt,this.ctx.canvas.height,cr[1]),$r=Nt.cachedCanvases.getCanvas("pattern",sr.size,wr.size,!0),Sr=$r.context,en=qt.createCanvasGraphics(Sr);en.groupLevel=Nt.groupLevel,this.setFillAndStrokeStyleToContext(en,Yt,zt);let Kt=nn,Gt=Fn,mn=dr,Jt=ar;return nn<0&&(Kt=0,mn+=Math.abs(nn)),Fn<0&&(Gt=0,Jt+=Math.abs(Fn)),Sr.translate(-(sr.scale*Kt),-(wr.scale*Gt)),en.transform(sr.scale,0,0,wr.scale,0,0),Sr.save(),this.clipBbox(en,Kt,Gt,mn,Jt),en.baseTransform=(0,at.getCurrentTransform)(en.ctx),en.executeOperatorList(kt),en.endDrawing(),{canvas:$r.canvas,scaleX:sr.scale,scaleY:wr.scale,offsetX:Kt,offsetY:Gt}}getSizeAndScale(Nt,kt,Dt){Nt=Math.abs(Nt);const jt=Math.max(St.MAX_PATTERN_SIZE,kt);let Wt=Math.ceil(Nt*Dt);return Wt>=jt?Wt=jt:Dt=Wt/Nt,{scale:Dt,size:Wt}}clipBbox(Nt,kt,Dt,jt,Wt){const Yt=jt-kt,Bt=Wt-Dt;Nt.ctx.rect(kt,Dt,Yt,Bt),Nt.current.updateRectMinMax((0,at.getCurrentTransform)(Nt.ctx),[kt,Dt,jt,Wt]),Nt.clip(),Nt.endPath()}setFillAndStrokeStyleToContext(Nt,kt,Dt){const jt=Nt.ctx,Wt=Nt.current;switch(kt){case _t.COLORED:const Yt=this.ctx;jt.fillStyle=Yt.fillStyle,jt.strokeStyle=Yt.strokeStyle,Wt.fillColor=Yt.fillStyle,Wt.strokeColor=Yt.strokeStyle;break;case _t.UNCOLORED:const Bt=et.Util.makeHexColor(Dt[0],Dt[1],Dt[2]);jt.fillStyle=Bt,jt.strokeStyle=Bt,Wt.fillColor=Bt,Wt.strokeColor=Bt;break;default:throw new et.FormatError(`Unsupported paint type: ${kt}`)}}getPattern(Nt,kt,Dt,jt){let Wt=Dt;jt!==ht.SHADING&&(Wt=et.Util.transform(Wt,kt.baseTransform),this.matrix&&(Wt=et.Util.transform(Wt,this.matrix)));const Yt=this.createPatternCanvas(kt);let Bt=new DOMMatrix(Wt);Bt=Bt.translate(Yt.offsetX,Yt.offsetY),Bt=Bt.scale(1/Yt.scaleX,1/Yt.scaleY);const zt=Nt.createPattern(Yt.canvas,"repeat");try{zt.setTransform(Bt)}catch(qt){(0,et.warn)(`TilingPattern.getPattern: "${qt==null?void 0:qt.message}".`)}return zt}}s.TilingPattern=St},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.applyMaskImageData=at;var et=a(1);function at({src:lt,srcPos:ht=0,dest:dt,destPos:ft=0,width:vt,height:wt,inverseDecode:Ct=!1}){const xt=et.FeatureTest.isLittleEndian?4278190080:255,[Pt,Rt]=Ct?[0,xt]:[xt,0],_t=vt>>3,St=vt&7,bt=lt.length;dt=new Uint32Array(dt.buffer);for(let Nt=0;Nt<wt;Nt++){for(const Dt=ht+_t;ht<Dt;ht++){const jt=ht<bt?lt[ht]:255;dt[ft++]=jt&128?Rt:Pt,dt[ft++]=jt&64?Rt:Pt,dt[ft++]=jt&32?Rt:Pt,dt[ft++]=jt&16?Rt:Pt,dt[ft++]=jt&8?Rt:Pt,dt[ft++]=jt&4?Rt:Pt,dt[ft++]=jt&2?Rt:Pt,dt[ft++]=jt&1?Rt:Pt}if(St===0)continue;const kt=ht<bt?lt[ht++]:255;for(let Dt=0;Dt<St;Dt++)dt[ft++]=kt&1<<7-Dt?Rt:Pt}return{srcPos:ht,destPos:ft}}},(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GlobalWorkerOptions=void 0;const a=Object.create(null);s.GlobalWorkerOptions=a,a.workerPort=a.workerPort===void 0?null:a.workerPort,a.workerSrc=a.workerSrc===void 0?"":a.workerSrc},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.MessageHandler=void 0;var et=a(1);const at={UNKNOWN:0,DATA:1,ERROR:2},lt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ht(ft){switch(ft instanceof Error||typeof ft=="object"&&ft!==null||(0,et.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),ft.name){case"AbortException":return new et.AbortException(ft.message);case"MissingPDFException":return new et.MissingPDFException(ft.message);case"PasswordException":return new et.PasswordException(ft.message,ft.code);case"UnexpectedResponseException":return new et.UnexpectedResponseException(ft.message,ft.status);case"UnknownErrorException":return new et.UnknownErrorException(ft.message,ft.details);default:return new et.UnknownErrorException(ft.message,ft.toString())}}class dt{constructor(vt,wt,Ct){this.sourceName=vt,this.targetName=wt,this.comObj=Ct,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=xt=>{const Pt=xt.data;if(Pt.targetName!==this.sourceName)return;if(Pt.stream){this._processStreamMessage(Pt);return}if(Pt.callback){const _t=Pt.callbackId,St=this.callbackCapabilities[_t];if(!St)throw new Error(`Cannot resolve callback ${_t}`);if(delete this.callbackCapabilities[_t],Pt.callback===at.DATA)St.resolve(Pt.data);else if(Pt.callback===at.ERROR)St.reject(ht(Pt.reason));else throw new Error("Unexpected callback case");return}const Rt=this.actionHandler[Pt.action];if(!Rt)throw new Error(`Unknown action from worker: ${Pt.action}`);if(Pt.callbackId){const _t=this.sourceName,St=Pt.sourceName;new Promise(function(bt){bt(Rt(Pt.data))}).then(function(bt){Ct.postMessage({sourceName:_t,targetName:St,callback:at.DATA,callbackId:Pt.callbackId,data:bt})},function(bt){Ct.postMessage({sourceName:_t,targetName:St,callback:at.ERROR,callbackId:Pt.callbackId,reason:ht(bt)})});return}if(Pt.streamId){this._createStreamSink(Pt);return}Rt(Pt.data)},Ct.addEventListener("message",this._onComObjOnMessage)}on(vt,wt){const Ct=this.actionHandler;if(Ct[vt])throw new Error(`There is already an actionName called "${vt}"`);Ct[vt]=wt}send(vt,wt,Ct){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:vt,data:wt},Ct)}sendWithPromise(vt,wt,Ct){const xt=this.callbackId++,Pt=(0,et.createPromiseCapability)();this.callbackCapabilities[xt]=Pt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:vt,callbackId:xt,data:wt},Ct)}catch(Rt){Pt.reject(Rt)}return Pt.promise}sendWithStream(vt,wt,Ct,xt){const Pt=this.streamId++,Rt=this.sourceName,_t=this.targetName,St=this.comObj;return new ReadableStream({start:bt=>{const Nt=(0,et.createPromiseCapability)();return this.streamControllers[Pt]={controller:bt,startCall:Nt,pullCall:null,cancelCall:null,isClosed:!1},St.postMessage({sourceName:Rt,targetName:_t,action:vt,streamId:Pt,data:wt,desiredSize:bt.desiredSize},xt),Nt.promise},pull:bt=>{const Nt=(0,et.createPromiseCapability)();return this.streamControllers[Pt].pullCall=Nt,St.postMessage({sourceName:Rt,targetName:_t,stream:lt.PULL,streamId:Pt,desiredSize:bt.desiredSize}),Nt.promise},cancel:bt=>{(0,et.assert)(bt instanceof Error,"cancel must have a valid reason");const Nt=(0,et.createPromiseCapability)();return this.streamControllers[Pt].cancelCall=Nt,this.streamControllers[Pt].isClosed=!0,St.postMessage({sourceName:Rt,targetName:_t,stream:lt.CANCEL,streamId:Pt,reason:ht(bt)}),Nt.promise}},Ct)}_createStreamSink(vt){const wt=vt.streamId,Ct=this.sourceName,xt=vt.sourceName,Pt=this.comObj,Rt=this,_t=this.actionHandler[vt.action],St={enqueue(bt,Nt=1,kt){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=Nt,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=(0,et.createPromiseCapability)(),this.ready=this.sinkCapability.promise),Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.ENQUEUE,streamId:wt,chunk:bt},kt)},close(){this.isCancelled||(this.isCancelled=!0,Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.CLOSE,streamId:wt}),delete Rt.streamSinks[wt])},error(bt){(0,et.assert)(bt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.ERROR,streamId:wt,reason:ht(bt)}))},sinkCapability:(0,et.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:vt.desiredSize,ready:null};St.sinkCapability.resolve(),St.ready=St.sinkCapability.promise,this.streamSinks[wt]=St,new Promise(function(bt){bt(_t(vt.data,St))}).then(function(){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.START_COMPLETE,streamId:wt,success:!0})},function(bt){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.START_COMPLETE,streamId:wt,reason:ht(bt)})})}_processStreamMessage(vt){const wt=vt.streamId,Ct=this.sourceName,xt=vt.sourceName,Pt=this.comObj,Rt=this.streamControllers[wt],_t=this.streamSinks[wt];switch(vt.stream){case lt.START_COMPLETE:vt.success?Rt.startCall.resolve():Rt.startCall.reject(ht(vt.reason));break;case lt.PULL_COMPLETE:vt.success?Rt.pullCall.resolve():Rt.pullCall.reject(ht(vt.reason));break;case lt.PULL:if(!_t){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.PULL_COMPLETE,streamId:wt,success:!0});break}_t.desiredSize<=0&&vt.desiredSize>0&&_t.sinkCapability.resolve(),_t.desiredSize=vt.desiredSize,new Promise(function(St){St(_t.onPull&&_t.onPull())}).then(function(){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.PULL_COMPLETE,streamId:wt,success:!0})},function(St){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.PULL_COMPLETE,streamId:wt,reason:ht(St)})});break;case lt.ENQUEUE:if((0,et.assert)(Rt,"enqueue should have stream controller"),Rt.isClosed)break;Rt.controller.enqueue(vt.chunk);break;case lt.CLOSE:if((0,et.assert)(Rt,"close should have stream controller"),Rt.isClosed)break;Rt.isClosed=!0,Rt.controller.close(),this._deleteStreamController(Rt,wt);break;case lt.ERROR:(0,et.assert)(Rt,"error should have stream controller"),Rt.controller.error(ht(vt.reason)),this._deleteStreamController(Rt,wt);break;case lt.CANCEL_COMPLETE:vt.success?Rt.cancelCall.resolve():Rt.cancelCall.reject(ht(vt.reason)),this._deleteStreamController(Rt,wt);break;case lt.CANCEL:if(!_t)break;new Promise(function(St){St(_t.onCancel&&_t.onCancel(ht(vt.reason)))}).then(function(){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.CANCEL_COMPLETE,streamId:wt,success:!0})},function(St){Pt.postMessage({sourceName:Ct,targetName:xt,stream:lt.CANCEL_COMPLETE,streamId:wt,reason:ht(St)})}),_t.sinkCapability.reject(ht(vt.reason)),_t.isCancelled=!0,delete this.streamSinks[wt];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(vt,wt){await Promise.allSettled([vt.startCall&&vt.startCall.promise,vt.pullCall&&vt.pullCall.promise,vt.cancelCall&&vt.cancelCall.promise]),delete this.streamControllers[wt]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}s.MessageHandler=dt},(o,s,a)=>{var lt,ht;Object.defineProperty(s,"__esModule",{value:!0}),s.Metadata=void 0;var et=a(1);class at{constructor({parsedData:ft,rawData:vt}){Pr(this,lt,void 0);Pr(this,ht,void 0);Ur(this,lt,ft),Ur(this,ht,vt)}getRaw(){return ir(this,ht)}get(ft){return ir(this,lt).get(ft)??null}getAll(){return(0,et.objectFromMap)(ir(this,lt))}has(ft){return ir(this,lt).has(ft)}}lt=new WeakMap,ht=new WeakMap,s.Metadata=at},(o,s,a)=>{var dt,ft,vt,wt,Ct,xt,Al;Object.defineProperty(s,"__esModule",{value:!0}),s.OptionalContentConfig=void 0;var et=a(1);const at=Symbol("INTERNAL");class lt{constructor(_t,St){Pr(this,dt,!0);this.name=_t,this.intent=St}get visible(){return ir(this,dt)}_setVisible(_t,St){_t!==at&&(0,et.unreachable)("Internal method `_setVisible` called."),Ur(this,dt,St)}}dt=new WeakMap;class ht{constructor(_t){Pr(this,xt);Pr(this,ft,!0);Pr(this,vt,new Map);Pr(this,wt,null);Pr(this,Ct,null);if(this.name=null,this.creator=null,_t!==null){this.name=_t.name,this.creator=_t.creator,Ur(this,Ct,_t.order);for(const St of _t.groups)ir(this,vt).set(St.id,new lt(St.name,St.intent));if(_t.baseState==="OFF")for(const St of ir(this,vt).values())St._setVisible(at,!1);for(const St of _t.on)ir(this,vt).get(St)._setVisible(at,!0);for(const St of _t.off)ir(this,vt).get(St)._setVisible(at,!1);Ur(this,wt,new Map);for(const[St,bt]of ir(this,vt))ir(this,wt).set(St,bt.visible)}}isVisible(_t){if(ir(this,vt).size===0)return!0;if(!_t)return(0,et.warn)("Optional content group not defined."),!0;if(_t.type==="OCG")return ir(this,vt).has(_t.id)?ir(this,vt).get(_t.id).visible:((0,et.warn)(`Optional content group not found: ${_t.id}`),!0);if(_t.type==="OCMD"){if(_t.expression)return Fr(this,xt,Al).call(this,_t.expression);if(!_t.policy||_t.policy==="AnyOn"){for(const St of _t.ids){if(!ir(this,vt).has(St))return(0,et.warn)(`Optional content group not found: ${St}`),!0;if(ir(this,vt).get(St).visible)return!0}return!1}else if(_t.policy==="AllOn"){for(const St of _t.ids){if(!ir(this,vt).has(St))return(0,et.warn)(`Optional content group not found: ${St}`),!0;if(!ir(this,vt).get(St).visible)return!1}return!0}else if(_t.policy==="AnyOff"){for(const St of _t.ids){if(!ir(this,vt).has(St))return(0,et.warn)(`Optional content group not found: ${St}`),!0;if(!ir(this,vt).get(St).visible)return!0}return!1}else if(_t.policy==="AllOff"){for(const St of _t.ids){if(!ir(this,vt).has(St))return(0,et.warn)(`Optional content group not found: ${St}`),!0;if(ir(this,vt).get(St).visible)return!1}return!0}return(0,et.warn)(`Unknown optional content policy ${_t.policy}.`),!0}return(0,et.warn)(`Unknown group type ${_t.type}.`),!0}setVisibility(_t,St=!0){if(!ir(this,vt).has(_t)){(0,et.warn)(`Optional content group not found: ${_t}`);return}ir(this,vt).get(_t)._setVisible(at,!!St),Ur(this,ft,null)}get hasInitialVisibility(){if(ir(this,ft)!==null)return ir(this,ft);for(const[_t,St]of ir(this,vt)){const bt=ir(this,wt).get(_t);if(St.visible!==bt)return Ur(this,ft,!1)}return Ur(this,ft,!0)}getOrder(){return ir(this,vt).size?ir(this,Ct)?ir(this,Ct).slice():[...ir(this,vt).keys()]:null}getGroups(){return ir(this,vt).size>0?(0,et.objectFromMap)(ir(this,vt)):null}getGroup(_t){return ir(this,vt).get(_t)||null}}ft=new WeakMap,vt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,xt=new WeakSet,Al=function(_t){const St=_t.length;if(St<2)return!0;const bt=_t[0];for(let Nt=1;Nt<St;Nt++){const kt=_t[Nt];let Dt;if(Array.isArray(kt))Dt=Fr(this,xt,Al).call(this,kt);else if(ir(this,vt).has(kt))Dt=ir(this,vt).get(kt).visible;else return(0,et.warn)(`Optional content group not found: ${kt}`),!0;switch(bt){case"And":if(!Dt)return!1;break;case"Or":if(Dt)return!0;break;case"Not":return!Dt;default:return!0}}return bt==="And"},s.OptionalContentConfig=ht},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFDataTransportStream=void 0;var et=a(1),at=a(8);class lt{constructor(vt,wt){(0,et.assert)(wt,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=vt.progressiveDone||!1,this._contentDispositionFilename=vt.contentDispositionFilename||null;const Ct=vt.initialData;if((Ct==null?void 0:Ct.length)>0){const xt=new Uint8Array(Ct).buffer;this._queuedChunks.push(xt)}this._pdfDataRangeTransport=wt,this._isStreamingSupported=!vt.disableStream,this._isRangeSupported=!vt.disableRange,this._contentLength=vt.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((xt,Pt)=>{this._onReceiveData({begin:xt,chunk:Pt})}),this._pdfDataRangeTransport.addProgressListener((xt,Pt)=>{this._onProgress({loaded:xt,total:Pt})}),this._pdfDataRangeTransport.addProgressiveReadListener(xt=>{this._onReceiveData({chunk:xt})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(vt){const wt=new Uint8Array(vt.chunk).buffer;if(vt.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(wt):this._queuedChunks.push(wt);else{const Ct=this._rangeReaders.some(function(xt){return xt._begin!==vt.begin?!1:(xt._enqueue(wt),!0)});(0,et.assert)(Ct,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var vt;return((vt=this._fullRequestReader)==null?void 0:vt._loaded)??0}_onProgress(vt){if(vt.total===void 0){const wt=this._rangeReaders[0];wt!=null&&wt.onProgress&&wt.onProgress({loaded:vt.loaded})}else{const wt=this._fullRequestReader;wt!=null&&wt.onProgress&&wt.onProgress({loaded:vt.loaded,total:vt.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(vt){const wt=this._rangeReaders.indexOf(vt);wt>=0&&this._rangeReaders.splice(wt,1)}getFullReader(){(0,et.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const vt=this._queuedChunks;return this._queuedChunks=null,new ht(this,vt,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(vt,wt){if(wt<=this._progressiveDataLength)return null;const Ct=new dt(this,vt,wt);return this._pdfDataRangeTransport.requestDataRange(vt,wt),this._rangeReaders.push(Ct),Ct}cancelAllRequests(vt){this._fullRequestReader&&this._fullRequestReader.cancel(vt);for(const wt of this._rangeReaders.slice(0))wt.cancel(vt);this._pdfDataRangeTransport.abort()}}s.PDFDataTransportStream=lt;class ht{constructor(vt,wt,Ct=!1,xt=null){this._stream=vt,this._done=Ct||!1,this._filename=(0,at.isPdfFile)(xt)?xt:null,this._queuedChunks=wt||[],this._loaded=0;for(const Pt of this._queuedChunks)this._loaded+=Pt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),vt._fullRequestReader=this,this.onProgress=null}_enqueue(vt){this._done||(this._requests.length>0?this._requests.shift().resolve({value:vt,done:!1}):this._queuedChunks.push(vt),this._loaded+=vt.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const vt=(0,et.createPromiseCapability)();return this._requests.push(vt),vt.promise}cancel(vt){this._done=!0;for(const wt of this._requests)wt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dt{constructor(vt,wt,Ct){this._stream=vt,this._begin=wt,this._end=Ct,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(vt){if(!this._done){if(this._requests.length===0)this._queuedChunk=vt;else{this._requests.shift().resolve({value:vt,done:!1});for(const Ct of this._requests)Ct.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const wt=this._queuedChunk;return this._queuedChunk=null,{value:wt,done:!1}}if(this._done)return{value:void 0,done:!0};const vt=(0,et.createPromiseCapability)();return this._requests.push(vt),vt.promise}cancel(vt){this._done=!0;for(const wt of this._requests)wt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaText=void 0;class a{static textContent(at){const lt=[],ht={items:lt,styles:Object.create(null)};function dt(ft){var Ct;if(!ft)return;let vt=null;const wt=ft.name;if(wt==="#text")vt=ft.value;else if(a.shouldBuildText(wt))(Ct=ft==null?void 0:ft.attributes)!=null&&Ct.textContent?vt=ft.attributes.textContent:ft.value&&(vt=ft.value);else return;if(vt!==null&&lt.push({str:vt}),!!ft.children)for(const xt of ft.children)dt(xt)}return dt(at),ht}static shouldBuildText(at){return!(at==="textarea"||at==="input"||at==="option"||at==="select")}}s.XfaText=a},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NodeStandardFontDataFactory=s.NodeCanvasFactory=s.NodeCMapReaderFactory=void 0;var et=a(9);const at=function(ft){return new Promise((vt,wt)=>{require$$5.readFile(ft,(xt,Pt)=>{if(xt||!Pt){wt(new Error(xt));return}vt(new Uint8Array(Pt))})})};class lt extends et.BaseCanvasFactory{_createCanvas(vt,wt){return require$$5.createCanvas(vt,wt)}}s.NodeCanvasFactory=lt;class ht extends et.BaseCMapReaderFactory{_fetchData(vt,wt){return at(vt).then(Ct=>({cMapData:Ct,compressionType:wt}))}}s.NodeCMapReaderFactory=ht;class dt extends et.BaseStandardFontDataFactory{_fetchData(vt){return at(vt)}}s.NodeStandardFontDataFactory=dt},(o,s,a)=>{var ft,vt,wt,Ct,xt,Pt,Rt,_t,St,Tl,Nt,au,Dt,Il,Wt,lu;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayer=void 0;var et=a(7),at=a(1),lt=a(23),ht=a(24);const Bt=class{constructor(qt){Pr(this,St);Pr(this,Nt);Pr(this,Dt);Pr(this,Wt);Pr(this,ft,void 0);Pr(this,vt,!1);Pr(this,wt,this.pointerup.bind(this));Pr(this,Ct,this.pointerdown.bind(this));Pr(this,xt,new Map);Pr(this,Pt,!1);Pr(this,Rt,!1);Pr(this,_t,void 0);Bt._initialized||(Bt._initialized=!0,lt.FreeTextEditor.initialize(qt.l10n),ht.InkEditor.initialize(qt.l10n),qt.uiManager.registerEditorTypes([lt.FreeTextEditor,ht.InkEditor])),Ur(this,_t,qt.uiManager),this.annotationStorage=qt.annotationStorage,this.pageIndex=qt.pageIndex,this.div=qt.div,Ur(this,ft,qt.accessibilityManager),ir(this,_t).addLayer(this)}updateToolbar(qt){ir(this,_t).updateToolbar(qt)}updateMode(qt=ir(this,_t).getMode()){Fr(this,Wt,lu).call(this),qt===at.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),ir(this,_t).unselectAll()}addInkEditorIfNeeded(qt){if(!qt&&ir(this,_t).getMode()!==at.AnnotationEditorType.INK)return;if(!qt){for(const Fn of ir(this,xt).values())if(Fn.isEmpty()){Fn.setInBackground();return}}Fr(this,Dt,Il).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(qt){ir(this,_t).setEditingState(qt)}addCommands(qt){ir(this,_t).addCommands(qt)}enable(){this.div.style.pointerEvents="auto";for(const qt of ir(this,xt).values())qt.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const qt of ir(this,xt).values())qt.disableEditing()}setActiveEditor(qt){ir(this,_t).getActive()!==qt&&ir(this,_t).setActiveEditor(qt)}enableClick(){this.div.addEventListener("pointerdown",ir(this,Ct)),this.div.addEventListener("pointerup",ir(this,wt))}disableClick(){this.div.removeEventListener("pointerdown",ir(this,Ct)),this.div.removeEventListener("pointerup",ir(this,wt))}attach(qt){ir(this,xt).set(qt.id,qt)}detach(qt){var nn;ir(this,xt).delete(qt.id),(nn=ir(this,ft))==null||nn.removePointerInTextLayer(qt.contentDiv)}remove(qt){ir(this,_t).removeEditor(qt),this.detach(qt),this.annotationStorage.remove(qt.id),qt.div.style.display="none",setTimeout(()=>{qt.div.style.display="",qt.div.remove(),qt.isAttachedToDOM=!1,document.activeElement===document.body&&ir(this,_t).focusMainContainer()},0),ir(this,Rt)||this.addInkEditorIfNeeded(!1)}add(qt){if(Fr(this,St,Tl).call(this,qt),ir(this,_t).addEditor(qt),this.attach(qt),!qt.isAttachedToDOM){const nn=qt.render();this.div.append(nn),qt.isAttachedToDOM=!0}this.moveEditorInDOM(qt),qt.onceAdded(),this.addToAnnotationStorage(qt)}moveEditorInDOM(qt){var nn;(nn=ir(this,ft))==null||nn.moveElementInDOM(this.div,qt.div,qt.contentDiv,!0)}addToAnnotationStorage(qt){!qt.isEmpty()&&!this.annotationStorage.has(qt.id)&&this.annotationStorage.setValue(qt.id,qt)}addOrRebuild(qt){qt.needsToBeRebuilt()?qt.rebuild():this.add(qt)}addANewEditor(qt){const nn=()=>{this.addOrRebuild(qt)},Fn=()=>{qt.remove()};this.addCommands({cmd:nn,undo:Fn,mustExec:!0})}addUndoableEditor(qt){const nn=()=>{this.addOrRebuild(qt)},Fn=()=>{qt.remove()};this.addCommands({cmd:nn,undo:Fn,mustExec:!1})}getNextId(){return ir(this,_t).getId()}deserialize(qt){switch(qt.annotationType){case at.AnnotationEditorType.FREETEXT:return lt.FreeTextEditor.deserialize(qt,this);case at.AnnotationEditorType.INK:return ht.InkEditor.deserialize(qt,this)}return null}setSelected(qt){ir(this,_t).setSelected(qt)}toggleSelected(qt){ir(this,_t).toggleSelected(qt)}isSelected(qt){return ir(this,_t).isSelected(qt)}unselect(qt){ir(this,_t).unselect(qt)}pointerup(qt){const nn=et.KeyboardManager.platform.isMac;if(!(qt.button!==0||qt.ctrlKey&&nn)&&qt.target===this.div&&ir(this,Pt)){if(Ur(this,Pt,!1),!ir(this,vt)){Ur(this,vt,!0);return}Fr(this,Dt,Il).call(this,qt)}}pointerdown(qt){const nn=et.KeyboardManager.platform.isMac;if(qt.button!==0||qt.ctrlKey&&nn||qt.target!==this.div)return;Ur(this,Pt,!0);const Fn=ir(this,_t).getActive();Ur(this,vt,!Fn||Fn.isEmpty())}drop(qt){const nn=qt.dataTransfer.getData("text/plain"),Fn=ir(this,_t).getEditor(nn);if(!Fn)return;qt.preventDefault(),qt.dataTransfer.dropEffect="move",Fr(this,St,Tl).call(this,Fn);const dr=this.div.getBoundingClientRect(),ar=qt.clientX-dr.x,pr=qt.clientY-dr.y;Fn.translate(ar-Fn.startX,pr-Fn.startY),this.moveEditorInDOM(Fn),Fn.div.focus()}dragover(qt){qt.preventDefault()}destroy(){var qt,nn;((qt=ir(this,_t).getActive())==null?void 0:qt.parent)===this&&ir(this,_t).setActiveEditor(null);for(const Fn of ir(this,xt).values())(nn=ir(this,ft))==null||nn.removePointerInTextLayer(Fn.contentDiv),Fn.isAttachedToDOM=!1,Fn.div.remove(),Fn.parent=null;this.div=null,ir(this,xt).clear(),ir(this,_t).removeLayer(this)}render(qt){this.viewport=qt.viewport,(0,et.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const nn of ir(this,_t).getEditors(this.pageIndex))this.add(nn);this.updateMode()}update(qt){this.viewport=qt.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[qt,nn,Fn,dr]=this.viewport.viewBox,ar=Fn-qt,pr=dr-nn;return[ar,pr]}get viewportBaseDimensions(){const{width:qt,height:nn,rotation:Fn}=this.viewport;return Fn%180===0?[qt,nn]:[nn,qt]}setDimensions(){const{width:qt,height:nn,rotation:Fn}=this.viewport,dr=Fn%180!==0,ar=Math.floor(qt)+"px",pr=Math.floor(nn)+"px";this.div.style.width=dr?pr:ar,this.div.style.height=dr?ar:pr,this.div.setAttribute("data-main-rotation",Fn)}};let dt=Bt;ft=new WeakMap,vt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,_t=new WeakMap,St=new WeakSet,Tl=function(qt){var nn;qt.parent!==this&&(this.attach(qt),qt.pageIndex=this.pageIndex,(nn=qt.parent)==null||nn.detach(qt),qt.parent=this,qt.div&&qt.isAttachedToDOM&&(qt.div.remove(),this.div.append(qt.div)))},Nt=new WeakSet,au=function(qt){switch(ir(this,_t).getMode()){case at.AnnotationEditorType.FREETEXT:return new lt.FreeTextEditor(qt);case at.AnnotationEditorType.INK:return new ht.InkEditor(qt)}return null},Dt=new WeakSet,Il=function(qt){const nn=this.getNextId(),Fn=Fr(this,Nt,au).call(this,{parent:this,id:nn,x:qt.offsetX,y:qt.offsetY});return Fn&&this.add(Fn),Fn},Wt=new WeakSet,lu=function(){Ur(this,Rt,!0);for(const qt of ir(this,xt).values())qt.isEmpty()&&qt.remove();Ur(this,Rt,!1)},Qr(dt,"_initialized",!1),s.AnnotationEditorLayer=dt},(o,s,a)=>{var dt,ft,vt,wt,Ct,xt,Pt,Rt,cu,St,uu,Nt,hu,Dt,Rl;Object.defineProperty(s,"__esModule",{value:!0}),s.FreeTextEditor=void 0;var et=a(1),at=a(7),lt=a(6);const Wt=class extends lt.AnnotationEditor{constructor(zt){super({...zt,name:"freeTextEditor"});Pr(this,Rt);Pr(this,St);Pr(this,Nt);Pr(this,Dt);Pr(this,dt,this.editorDivBlur.bind(this));Pr(this,ft,this.editorDivFocus.bind(this));Pr(this,vt,this.editorDivKeydown.bind(this));Pr(this,wt,void 0);Pr(this,Ct,"");Pr(this,xt,!1);Pr(this,Pt,void 0);Ur(this,wt,zt.color||Wt._defaultColor||lt.AnnotationEditor._defaultLineColor),Ur(this,Pt,zt.fontSize||Wt._defaultFontSize)}static initialize(zt){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(nn=>[nn,zt.get(nn)]));const qt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(qt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(zt,qt){switch(zt){case et.AnnotationEditorParamsType.FREETEXT_SIZE:Wt._defaultFontSize=qt;break;case et.AnnotationEditorParamsType.FREETEXT_COLOR:Wt._defaultColor=qt;break}}updateParams(zt,qt){switch(zt){case et.AnnotationEditorParamsType.FREETEXT_SIZE:Fr(this,Rt,cu).call(this,qt);break;case et.AnnotationEditorParamsType.FREETEXT_COLOR:Fr(this,St,uu).call(this,qt);break}}static get defaultPropertiesToUpdate(){return[[et.AnnotationEditorParamsType.FREETEXT_SIZE,Wt._defaultFontSize],[et.AnnotationEditorParamsType.FREETEXT_COLOR,Wt._defaultColor||lt.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[et.AnnotationEditorParamsType.FREETEXT_SIZE,ir(this,Pt)],[et.AnnotationEditorParamsType.FREETEXT_COLOR,ir(this,wt)]]}getInitialTranslation(){return[-Wt._internalPadding*this.parent.scaleFactor,-(Wt._internalPadding+ir(this,Pt))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(et.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",ir(this,vt)),this.editorDiv.addEventListener("focus",ir(this,ft)),this.editorDiv.addEventListener("blur",ir(this,dt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",ir(this,vt)),this.editorDiv.removeEventListener("focus",ir(this,ft)),this.editorDiv.removeEventListener("blur",ir(this,dt)),this.div.focus(),this.isEditing=!1)}focusin(zt){super.focusin(zt),zt.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),ir(this,xt)||(Ur(this,xt,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),Ur(this,Ct,Fr(this,Nt,hu).call(this).trimEnd()),Fr(this,Dt,Rl).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(zt){this.enableEditMode(),this.editorDiv.focus()}keydown(zt){zt.target===this.div&&zt.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(zt){Wt._keyboardManager.exec(this,zt)}editorDivFocus(zt){this.isEditing=!0}editorDivBlur(zt){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let zt,qt;this.width&&(zt=this.x,qt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),Wt._l10nPromise.get("editor_free_text_aria_label").then(Fn=>{var dr;return(dr=this.editorDiv)==null?void 0:dr.setAttribute("aria-label",Fn)}),Wt._l10nPromise.get("free_text_default_content").then(Fn=>{var dr;return(dr=this.editorDiv)==null?void 0:dr.setAttribute("default-content",Fn)}),this.editorDiv.contentEditable=!0;const{style:nn}=this.editorDiv;if(nn.fontSize=`calc(${ir(this,Pt)}px * var(--scale-factor))`,nn.color=ir(this,wt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,at.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[Fn,dr]=this.parent.viewportBaseDimensions;this.setAt(zt*Fn,qt*dr,this.width*Fn,this.height*dr);for(const ar of ir(this,Ct).split(`
`)){const pr=document.createElement("div");pr.append(ar?document.createTextNode(ar):document.createElement("br")),this.editorDiv.append(pr)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(zt,qt){const nn=super.deserialize(zt,qt);return Ur(nn,Pt,zt.fontSize),Ur(nn,wt,et.Util.makeHexColor(...zt.color)),Ur(nn,Ct,zt.value),nn}serialize(){if(this.isEmpty())return null;const zt=Wt._internalPadding*this.parent.scaleFactor,qt=this.getRect(zt,zt),nn=lt.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:et.AnnotationEditorType.FREETEXT,color:nn,fontSize:ir(this,Pt),value:ir(this,Ct),pageIndex:this.parent.pageIndex,rect:qt,rotation:this.rotation}}};let ht=Wt;dt=new WeakMap,ft=new WeakMap,vt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakSet,cu=function(zt){const qt=Fn=>{this.editorDiv.style.fontSize=`calc(${Fn}px * var(--scale-factor))`,this.translate(0,-(Fn-ir(this,Pt))*this.parent.scaleFactor),Ur(this,Pt,Fn),Fr(this,Dt,Rl).call(this)},nn=ir(this,Pt);this.parent.addCommands({cmd:()=>{qt(zt)},undo:()=>{qt(nn)},mustExec:!0,type:et.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},St=new WeakSet,uu=function(zt){const qt=ir(this,wt);this.parent.addCommands({cmd:()=>{Ur(this,wt,zt),this.editorDiv.style.color=zt},undo:()=>{Ur(this,wt,qt),this.editorDiv.style.color=qt},mustExec:!0,type:et.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nt=new WeakSet,hu=function(){const zt=this.editorDiv.getElementsByTagName("div");if(zt.length===0)return this.editorDiv.innerText;const qt=[];for(let nn=0,Fn=zt.length;nn<Fn;nn++){const ar=zt[nn].firstChild;(ar==null?void 0:ar.nodeName)==="#text"?qt.push(ar.data):qt.push("")}return qt.join(`
`)},Dt=new WeakSet,Rl=function(){const[zt,qt]=this.parent.viewportBaseDimensions,nn=this.div.getBoundingClientRect();this.width=nn.width/zt,this.height=nn.height/qt},Qr(ht,"_freeTextDefaultContent",""),Qr(ht,"_l10nPromise"),Qr(ht,"_internalPadding",0),Qr(ht,"_defaultColor",null),Qr(ht,"_defaultFontSize",10),Qr(ht,"_keyboardManager",new at.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Wt.prototype.commitOrRemove]])),Qr(ht,"_type","freetext"),s.FreeTextEditor=ht},(o,s,a)=>{var vt,wt,Ct,xt,Pt,Rt,_t,St,bt,Nt,kt,Dt,jt,Wt,Yt,du,zt,fu,nn,mu,dr,wu,pr,Dl,cr,bu,wr,ku,Sr,_d,Kt,lo,mn,Pl,rr,Ao,fr,To,Ht,go,Zt,Ol,$n,Io,Er,Ll,br,_f,Ar,ep,Nr,tp,Ir,Fl,Qt,Lo,Ut,mo,gr,Ul;Object.defineProperty(s,"__esModule",{value:!0}),s.InkEditor=void 0,Object.defineProperty(s,"fitCurve",{enumerable:!0,get:function(){return lt.fitCurve}});var et=a(1),at=a(6),lt=a(25),ht=a(7);const dt=16,xr=class extends at.AnnotationEditor{constructor(Cr){super({...Cr,name:"inkEditor"});Pr(this,Yt);Pr(this,zt);Pr(this,nn);Pr(this,dr);Pr(this,pr);Pr(this,cr);Pr(this,wr);Pr(this,Sr);Pr(this,Kt);Pr(this,mn);Pr(this,rr);Pr(this,fr);Pr(this,Ht);Pr(this,Zt);Pr(this,$n);Pr(this,br);Pr(this,Ar);Pr(this,Nr);Pr(this,Ir);Pr(this,Qt);Pr(this,Ut);Pr(this,gr);Pr(this,vt,0);Pr(this,wt,0);Pr(this,Ct,0);Pr(this,xt,this.canvasPointermove.bind(this));Pr(this,Pt,this.canvasPointerleave.bind(this));Pr(this,Rt,this.canvasPointerup.bind(this));Pr(this,_t,this.canvasPointerdown.bind(this));Pr(this,St,!1);Pr(this,bt,!1);Pr(this,Nt,null);Pr(this,kt,null);Pr(this,Dt,0);Pr(this,jt,0);Pr(this,Wt,null);this.color=Cr.color||null,this.thickness=Cr.thickness||null,this.opacity=Cr.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(Cr){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Or=>[Or,Cr.get(Or)]))}static updateDefaultParams(Cr,Or){switch(Cr){case et.AnnotationEditorParamsType.INK_THICKNESS:xr._defaultThickness=Or;break;case et.AnnotationEditorParamsType.INK_COLOR:xr._defaultColor=Or;break;case et.AnnotationEditorParamsType.INK_OPACITY:xr._defaultOpacity=Or/100;break}}updateParams(Cr,Or){switch(Cr){case et.AnnotationEditorParamsType.INK_THICKNESS:Fr(this,Yt,du).call(this,Or);break;case et.AnnotationEditorParamsType.INK_COLOR:Fr(this,zt,fu).call(this,Or);break;case et.AnnotationEditorParamsType.INK_OPACITY:Fr(this,nn,mu).call(this,Or);break}}static get defaultPropertiesToUpdate(){return[[et.AnnotationEditorParamsType.INK_THICKNESS,xr._defaultThickness],[et.AnnotationEditorParamsType.INK_COLOR,xr._defaultColor||at.AnnotationEditor._defaultLineColor],[et.AnnotationEditorParamsType.INK_OPACITY,Math.round(xr._defaultOpacity*100)]]}get propertiesToUpdate(){return[[et.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||xr._defaultThickness],[et.AnnotationEditorParamsType.INK_COLOR,this.color||xr._defaultColor||at.AnnotationEditor._defaultLineColor],[et.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??xr._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Fr(this,rr,Ao).call(this),Fr(this,fr,To).call(this)),this.isAttachedToDOM||(this.parent.add(this),Fr(this,Ht,go).call(this)),Fr(this,Ut,mo).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,ir(this,kt).disconnect(),Ur(this,kt,null),super.remove())}enableEditMode(){ir(this,St)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",ir(this,_t)),this.canvas.addEventListener("pointerup",ir(this,Rt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",ir(this,_t)),this.canvas.removeEventListener("pointerup",ir(this,Rt)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){ir(this,St)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ur(this,St,!0),this.div.classList.add("disabled"),Fr(this,Ut,mo).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(Cr){super.focusin(Cr),this.enableEditMode()}canvasPointerdown(Cr){Cr.button!==0||!this.isInEditMode()||ir(this,St)||(this.setInForeground(),Cr.type!=="mouse"&&this.div.focus(),Cr.stopPropagation(),this.canvas.addEventListener("pointerleave",ir(this,Pt)),this.canvas.addEventListener("pointermove",ir(this,xt)),Fr(this,cr,bu).call(this,Cr.offsetX,Cr.offsetY))}canvasPointermove(Cr){Cr.stopPropagation(),Fr(this,wr,ku).call(this,Cr.offsetX,Cr.offsetY)}canvasPointerup(Cr){Cr.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(Cr.stopPropagation(),Fr(this,mn,Pl).call(this,Cr),this.setInBackground())}canvasPointerleave(Cr){Fr(this,mn,Pl).call(this,Cr),this.setInBackground()}render(){if(this.div)return this.div;let Cr,Or;this.width&&(Cr=this.x,Or=this.y),super.render(),xr._l10nPromise.get("editor_ink_aria_label").then(jr=>{var Vr;return(Vr=this.div)==null?void 0:Vr.setAttribute("aria-label",jr)});const[_r,yr,vr,Mr]=Fr(this,dr,wu).call(this);if(this.setAt(_r,yr,0,0),this.setDims(vr,Mr),Fr(this,rr,Ao).call(this),this.width){const[jr,Vr]=this.parent.viewportBaseDimensions;this.setAt(Cr*jr,Or*Vr,this.width*jr,this.height*Vr),Ur(this,bt,!0),Fr(this,Ht,go).call(this),this.setDims(this.width*jr,this.height*Vr),Fr(this,Kt,lo).call(this),Fr(this,gr,Ul).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Fr(this,fr,To).call(this),this.div}setDimensions(Cr,Or){const _r=Math.round(Cr),yr=Math.round(Or);if(ir(this,Dt)===_r&&ir(this,jt)===yr)return;Ur(this,Dt,_r),Ur(this,jt,yr),this.canvas.style.visibility="hidden",ir(this,vt)&&Math.abs(ir(this,vt)-Cr/Or)>.01&&(Or=Math.ceil(Cr/ir(this,vt)),this.setDims(Cr,Or));const[vr,Mr]=this.parent.viewportBaseDimensions;this.width=Cr/vr,this.height=Or/Mr,ir(this,St)&&Fr(this,Zt,Ol).call(this,Cr,Or),Fr(this,Ht,go).call(this),Fr(this,Kt,lo).call(this),this.canvas.style.visibility="visible"}static deserialize(Cr,Or){var Jr,Yr;const _r=super.deserialize(Cr,Or);_r.thickness=Cr.thickness,_r.color=et.Util.makeHexColor(...Cr.color),_r.opacity=Cr.opacity;const[yr,vr]=Or.pageDimensions,Mr=_r.width*yr,jr=_r.height*vr,Vr=Or.scaleFactor,Wr=Cr.thickness/2;Ur(_r,vt,Mr/jr),Ur(_r,St,!0),Ur(_r,Dt,Math.round(Mr)),Ur(_r,jt,Math.round(jr));for(const{bezier:qr}of Cr.paths){const Xs=[];_r.paths.push(Xs);let Zr=Vr*(qr[0]-Wr),no=Vr*(jr-qr[1]-Wr);for(let eo=2,io=qr.length;eo<io;eo+=6){const uo=Vr*(qr[eo]-Wr),ho=Vr*(jr-qr[eo+1]-Wr),ao=Vr*(qr[eo+2]-Wr),to=Vr*(jr-qr[eo+3]-Wr),oo=Vr*(qr[eo+4]-Wr),po=Vr*(jr-qr[eo+5]-Wr);Xs.push([[Zr,no],[uo,ho],[ao,to],[oo,po]]),Zr=oo,no=po}const Kr=Fr(this,Er,Ll).call(this,Xs);_r.bezierPath2D.push(Kr)}const Gr=Fr(Jr=_r,Ir,Fl).call(Jr);return Ur(_r,Ct,Math.max(dt,Gr[2]-Gr[0])),Ur(_r,wt,Math.max(dt,Gr[3]-Gr[1])),Fr(Yr=_r,Zt,Ol).call(Yr,Mr,jr),_r}serialize(){if(this.isEmpty())return null;const Cr=this.getRect(0,0),Or=this.rotation%180===0?Cr[3]-Cr[1]:Cr[2]-Cr[0],_r=at.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:et.AnnotationEditorType.INK,color:_r,thickness:this.thickness,opacity:this.opacity,paths:Fr(this,br,_f).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Or),pageIndex:this.parent.pageIndex,rect:Cr,rotation:this.rotation}}};let ft=xr;vt=new WeakMap,wt=new WeakMap,Ct=new WeakMap,xt=new WeakMap,Pt=new WeakMap,Rt=new WeakMap,_t=new WeakMap,St=new WeakMap,bt=new WeakMap,Nt=new WeakMap,kt=new WeakMap,Dt=new WeakMap,jt=new WeakMap,Wt=new WeakMap,Yt=new WeakSet,du=function(Cr){const Or=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=Cr,Fr(this,Ut,mo).call(this)},undo:()=>{this.thickness=Or,Fr(this,Ut,mo).call(this)},mustExec:!0,type:et.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},zt=new WeakSet,fu=function(Cr){const Or=this.color;this.parent.addCommands({cmd:()=>{this.color=Cr,Fr(this,Kt,lo).call(this)},undo:()=>{this.color=Or,Fr(this,Kt,lo).call(this)},mustExec:!0,type:et.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},nn=new WeakSet,mu=function(Cr){Cr/=100;const Or=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=Cr,Fr(this,Kt,lo).call(this)},undo:()=>{this.opacity=Or,Fr(this,Kt,lo).call(this)},mustExec:!0,type:et.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},dr=new WeakSet,wu=function(){const{width:Cr,height:Or,rotation:_r}=this.parent.viewport;switch(_r){case 90:return[0,Cr,Cr,Or];case 180:return[Cr,Or,Cr,Or];case 270:return[Or,0,Cr,Or];default:return[0,0,Cr,Or]}},pr=new WeakSet,Dl=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,ht.opacityToHex)(this.opacity)}`},cr=new WeakSet,bu=function(Cr,Or){this.isEditing=!0,ir(this,bt)||(Ur(this,bt,!0),Fr(this,Ht,go).call(this),this.thickness||(this.thickness=xr._defaultThickness),this.color||(this.color=xr._defaultColor||at.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=xr._defaultOpacity)),this.currentPath.push([Cr,Or]),Ur(this,Nt,null),Fr(this,pr,Dl).call(this),this.ctx.beginPath(),this.ctx.moveTo(Cr,Or),Ur(this,Wt,()=>{ir(this,Wt)&&(ir(this,Nt)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):Fr(this,Kt,lo).call(this),this.ctx.lineTo(...ir(this,Nt)),Ur(this,Nt,null),this.ctx.stroke()),window.requestAnimationFrame(ir(this,Wt)))}),window.requestAnimationFrame(ir(this,Wt))},wr=new WeakSet,ku=function(Cr,Or){const[_r,yr]=this.currentPath.at(-1);Cr===_r&&Or===yr||(this.currentPath.push([Cr,Or]),Ur(this,Nt,[Cr,Or]))},Sr=new WeakSet,_d=function(Cr,Or){var Wr;this.ctx.closePath(),Ur(this,Wt,null),Cr=Math.min(Math.max(Cr,0),this.canvas.width),Or=Math.min(Math.max(Or,0),this.canvas.height);const[_r,yr]=this.currentPath.at(-1);(Cr!==_r||Or!==yr)&&this.currentPath.push([Cr,Or]);let vr;if(this.currentPath.length!==1)vr=(0,lt.fitCurve)(this.currentPath,30,null);else{const Gr=[Cr,Or];vr=[[Gr,Gr.slice(),Gr.slice(),Gr]]}const Mr=Fr(Wr=xr,Er,Ll).call(Wr,vr);this.currentPath.length=0;const jr=()=>{this.paths.push(vr),this.bezierPath2D.push(Mr),this.rebuild()},Vr=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Fr(this,rr,Ao).call(this),Fr(this,fr,To).call(this)),Fr(this,Ut,mo).call(this))};this.parent.addCommands({cmd:jr,undo:Vr,mustExec:!0})},Kt=new WeakSet,lo=function(){if(this.isEmpty()){Fr(this,$n,Io).call(this);return}Fr(this,pr,Dl).call(this);const{canvas:Cr,ctx:Or}=this;Or.setTransform(1,0,0,1,0,0),Or.clearRect(0,0,Cr.width,Cr.height),Fr(this,$n,Io).call(this);for(const _r of this.bezierPath2D)Or.stroke(_r)},mn=new WeakSet,Pl=function(Cr){Fr(this,Sr,_d).call(this,Cr.offsetX,Cr.offsetY),this.canvas.removeEventListener("pointerleave",ir(this,Pt)),this.canvas.removeEventListener("pointermove",ir(this,xt)),this.parent.addToAnnotationStorage(this)},rr=new WeakSet,Ao=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",xr._l10nPromise.get("editor_ink_canvas_aria_label").then(Cr=>{var Or;return(Or=this.canvas)==null?void 0:Or.setAttribute("aria-label",Cr)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},fr=new WeakSet,To=function(){Ur(this,kt,new ResizeObserver(Cr=>{const Or=Cr[0].contentRect;Or.width&&Or.height&&this.setDimensions(Or.width,Or.height)})),ir(this,kt).observe(this.div)},Ht=new WeakSet,go=function(){if(!ir(this,bt))return;const[Cr,Or]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*Cr),this.canvas.height=Math.ceil(this.height*Or),Fr(this,$n,Io).call(this)},Zt=new WeakSet,Ol=function(Cr,Or){const _r=Fr(this,Qt,Lo).call(this),yr=(Cr-_r)/ir(this,Ct),vr=(Or-_r)/ir(this,wt);this.scaleFactor=Math.min(yr,vr)},$n=new WeakSet,Io=function(){const Cr=Fr(this,Qt,Lo).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Cr,this.translationY*this.scaleFactor+Cr)},Er=new WeakSet,Ll=function(Cr){const Or=new Path2D;for(let _r=0,yr=Cr.length;_r<yr;_r++){const[vr,Mr,jr,Vr]=Cr[_r];_r===0&&Or.moveTo(...vr),Or.bezierCurveTo(Mr[0],Mr[1],jr[0],jr[1],Vr[0],Vr[1])}return Or},br=new WeakSet,_f=function(Cr,Or,_r,yr){const Mr=[],jr=this.thickness/2;let Vr,Wr;for(const Gr of this.paths){Vr=[],Wr=[];for(let Jr=0,Yr=Gr.length;Jr<Yr;Jr++){const[qr,Xs,Zr,no]=Gr[Jr],Kr=Cr*(qr[0]+Or)+jr,eo=yr-Cr*(qr[1]+_r)-jr,io=Cr*(Xs[0]+Or)+jr,uo=yr-Cr*(Xs[1]+_r)-jr,ho=Cr*(Zr[0]+Or)+jr,ao=yr-Cr*(Zr[1]+_r)-jr,to=Cr*(no[0]+Or)+jr,oo=yr-Cr*(no[1]+_r)-jr;Jr===0&&(Vr.push(Kr,eo),Wr.push(Kr,eo)),Vr.push(io,uo,ho,ao,to,oo),Fr(this,Ar,ep).call(this,Kr,eo,io,uo,ho,ao,to,oo,4,Wr)}Mr.push({bezier:Vr,points:Wr})}return Mr},Ar=new WeakSet,ep=function(Cr,Or,_r,yr,vr,Mr,jr,Vr,Wr,Gr){if(Fr(this,Nr,tp).call(this,Cr,Or,_r,yr,vr,Mr,jr,Vr)){Gr.push(jr,Vr);return}for(let Jr=1;Jr<Wr-1;Jr++){const Yr=Jr/Wr,qr=1-Yr;let Xs=Yr*Cr+qr*_r,Zr=Yr*Or+qr*yr,no=Yr*_r+qr*vr,Kr=Yr*yr+qr*Mr;const eo=Yr*vr+qr*jr,io=Yr*Mr+qr*Vr;Xs=Yr*Xs+qr*no,Zr=Yr*Zr+qr*Kr,no=Yr*no+qr*eo,Kr=Yr*Kr+qr*io,Xs=Yr*Xs+qr*no,Zr=Yr*Zr+qr*Kr,Gr.push(Xs,Zr)}Gr.push(jr,Vr)},Nr=new WeakSet,tp=function(Cr,Or,_r,yr,vr,Mr,jr,Vr){const Gr=(3*_r-2*Cr-jr)**2,Jr=(3*yr-2*Or-Vr)**2,Yr=(3*vr-Cr-2*jr)**2,qr=(3*Mr-Or-2*Vr)**2;return Math.max(Gr,Yr)+Math.max(Jr,qr)<=10},Ir=new WeakSet,Fl=function(){let Cr=1/0,Or=-1/0,_r=1/0,yr=-1/0;for(const vr of this.paths)for(const[Mr,jr,Vr,Wr]of vr){const Gr=et.Util.bezierBoundingBox(...Mr,...jr,...Vr,...Wr);Cr=Math.min(Cr,Gr[0]),_r=Math.min(_r,Gr[1]),Or=Math.max(Or,Gr[2]),yr=Math.max(yr,Gr[3])}return[Cr,_r,Or,yr]},Qt=new WeakSet,Lo=function(){return ir(this,St)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ut=new WeakSet,mo=function(Cr=!1){if(this.isEmpty())return;if(!ir(this,St)){Fr(this,Kt,lo).call(this);return}const Or=Fr(this,Ir,Fl).call(this),_r=Fr(this,Qt,Lo).call(this);Ur(this,Ct,Math.max(dt,Or[2]-Or[0])),Ur(this,wt,Math.max(dt,Or[3]-Or[1]));const yr=Math.ceil(_r+ir(this,Ct)*this.scaleFactor),vr=Math.ceil(_r+ir(this,wt)*this.scaleFactor),[Mr,jr]=this.parent.viewportBaseDimensions;this.width=yr/Mr,this.height=vr/jr,Ur(this,vt,yr/vr),Fr(this,gr,Ul).call(this);const Vr=this.translationX,Wr=this.translationY;this.translationX=-Or[0],this.translationY=-Or[1],Fr(this,Ht,go).call(this),Fr(this,Kt,lo).call(this),Ur(this,Dt,yr),Ur(this,jt,vr),this.setDims(yr,vr);const Gr=Cr?_r/this.scaleFactor/2:0;this.translate(Vr-this.translationX-Gr,Wr-this.translationY-Gr)},gr=new WeakSet,Ul=function(){const{style:Cr}=this.div;ir(this,vt)>=1?(Cr.minHeight=`${dt}px`,Cr.minWidth=`${Math.round(ir(this,vt)*dt)}px`):(Cr.minWidth=`${dt}px`,Cr.minHeight=`${Math.round(dt/ir(this,vt))}px`)},Pr(ft,Er),Qr(ft,"_defaultColor",null),Qr(ft,"_defaultOpacity",1),Qr(ft,"_defaultThickness",1),Qr(ft,"_l10nPromise"),Qr(ft,"_type","ink"),s.InkEditor=ft},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.fitCurve=void 0;const et=a(26);s.fitCurve=et},o=>{function s(Rt,_t,St){if(!Array.isArray(Rt))throw new TypeError("First argument should be an array");if(Rt.forEach(Dt=>{if(!Array.isArray(Dt)||Dt.some(jt=>typeof jt!="number")||Dt.length!==Rt[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),Rt=Rt.filter((Dt,jt)=>jt===0||!Dt.every((Wt,Yt)=>Wt===Rt[jt-1][Yt])),Rt.length<2)return[];const bt=Rt.length,Nt=Ct(Rt[1],Rt[0]),kt=Ct(Rt[bt-2],Rt[bt-1]);return a(Rt,Nt,kt,_t,St)}function a(Rt,_t,St,bt,Nt){var Dt,jt,Wt,Yt,Bt,zt,qt,nn,Fn,dr,ar,pr,mr;if(Rt.length===2)return pr=xt.vectorLen(xt.subtract(Rt[0],Rt[1]))/3,Dt=[Rt[0],xt.addArrays(Rt[0],xt.mulItems(_t,pr)),xt.addArrays(Rt[1],xt.mulItems(St,pr)),Rt[1]],[Dt];if(jt=dt(Rt),[Dt,Yt,zt]=et(Rt,jt,jt,_t,St,Nt),Yt===0||Yt<bt)return[Dt];if(Yt<bt*bt)for(Wt=jt,Bt=Yt,qt=zt,mr=0;mr<20;mr++){if(Wt=lt(Dt,Rt,Wt),[Dt,Yt,zt]=et(Rt,jt,Wt,_t,St,Nt),Yt<bt)return[Dt];if(zt===qt){let cr=Yt/Bt;if(cr>.9999&&cr<1.0001)break}Bt=Yt,qt=zt}return ar=[],nn=xt.subtract(Rt[zt-1],Rt[zt+1]),nn.every(cr=>cr===0)&&(nn=xt.subtract(Rt[zt-1],Rt[zt]),[nn[0],nn[1]]=[-nn[1],nn[0]]),Fn=xt.normalize(nn),dr=xt.mulItems(Fn,-1),ar=ar.concat(a(Rt.slice(0,zt+1),_t,Fn,bt,Nt)),ar=ar.concat(a(Rt.slice(zt),dr,St,bt,Nt)),ar}function et(Rt,_t,St,bt,Nt,kt){var Dt,jt,Wt;return Dt=at(Rt,St,bt,Nt),[jt,Wt]=ft(Rt,Dt,_t),kt&&kt({bez:Dt,points:Rt,params:_t,maxErr:jt,maxPoint:Wt}),[Dt,jt,Wt]}function at(Rt,_t,St,bt){var Nt,kt,Dt,jt,Wt,Yt,Bt,zt,qt,nn,Fn,dr,ar,pr,mr,cr,sr,wr=Rt[0],$r=Rt[Rt.length-1];for(Nt=[wr,null,null,$r],kt=xt.zeros_Xx2x2(_t.length),ar=0,pr=_t.length;ar<pr;ar++)cr=_t[ar],sr=1-cr,Dt=kt[ar],Dt[0]=xt.mulItems(St,3*cr*(sr*sr)),Dt[1]=xt.mulItems(bt,3*sr*(cr*cr));for(jt=[[0,0],[0,0]],Wt=[0,0],ar=0,pr=Rt.length;ar<pr;ar++)cr=_t[ar],Dt=kt[ar],jt[0][0]+=xt.dot(Dt[0],Dt[0]),jt[0][1]+=xt.dot(Dt[0],Dt[1]),jt[1][0]+=xt.dot(Dt[0],Dt[1]),jt[1][1]+=xt.dot(Dt[1],Dt[1]),mr=xt.subtract(Rt[ar],Pt.q([wr,wr,$r,$r],cr)),Wt[0]+=xt.dot(Dt[0],mr),Wt[1]+=xt.dot(Dt[1],mr);return Yt=jt[0][0]*jt[1][1]-jt[1][0]*jt[0][1],Bt=jt[0][0]*Wt[1]-jt[1][0]*Wt[0],zt=Wt[0]*jt[1][1]-Wt[1]*jt[0][1],qt=Yt===0?0:zt/Yt,nn=Yt===0?0:Bt/Yt,dr=xt.vectorLen(xt.subtract(wr,$r)),Fn=1e-6*dr,qt<Fn||nn<Fn?(Nt[1]=xt.addArrays(wr,xt.mulItems(St,dr/3)),Nt[2]=xt.addArrays($r,xt.mulItems(bt,dr/3))):(Nt[1]=xt.addArrays(wr,xt.mulItems(St,qt)),Nt[2]=xt.addArrays($r,xt.mulItems(bt,nn))),Nt}function lt(Rt,_t,St){return St.map((bt,Nt)=>ht(Rt,_t[Nt],bt))}function ht(Rt,_t,St){var bt=xt.subtract(Pt.q(Rt,St),_t),Nt=Pt.qprime(Rt,St),kt=xt.mulMatrix(bt,Nt),Dt=xt.sum(xt.squareItems(Nt))+2*xt.mulMatrix(bt,Pt.qprimeprime(Rt,St));return Dt===0?St:St-kt/Dt}function dt(Rt){var _t=[],St,bt,Nt;return Rt.forEach((kt,Dt)=>{St=Dt?bt+xt.vectorLen(xt.subtract(kt,Nt)):0,_t.push(St),bt=St,Nt=kt}),_t=_t.map(kt=>kt/bt),_t}function ft(Rt,_t,St){var bt,Nt,kt,Dt,jt,Wt,Yt,Bt;Nt=0,kt=Math.floor(Rt.length/2);const zt=vt(_t,10);for(jt=0,Wt=Rt.length;jt<Wt;jt++)Yt=Rt[jt],Bt=wt(_t,St[jt],zt,10),Dt=xt.subtract(Pt.q(_t,Bt),Yt),bt=Dt[0]*Dt[0]+Dt[1]*Dt[1],bt>Nt&&(Nt=bt,kt=jt);return[Nt,kt]}var vt=function(Rt,_t){for(var St,bt=[0],Nt=Rt[0],kt=0,Dt=1;Dt<=_t;Dt++)St=Pt.q(Rt,Dt/_t),kt+=xt.vectorLen(xt.subtract(St,Nt)),bt.push(kt),Nt=St;return bt=bt.map(jt=>jt/kt),bt};function wt(Rt,_t,St,bt){if(_t<0)return 0;if(_t>1)return 1;for(var Nt,kt,Dt,jt,Wt,Yt=1;Yt<=bt;Yt++)if(_t<=St[Yt]){jt=(Yt-1)/bt,Dt=Yt/bt,kt=St[Yt-1],Nt=St[Yt],Wt=(_t-kt)/(Nt-kt)*(Dt-jt)+jt;break}return Wt}function Ct(Rt,_t){return xt.normalize(xt.subtract(Rt,_t))}class xt{static zeros_Xx2x2(_t){for(var St=[];_t--;)St.push([0,0]);return St}static mulItems(_t,St){return _t.map(bt=>bt*St)}static mulMatrix(_t,St){return _t.reduce((bt,Nt,kt)=>bt+Nt*St[kt],0)}static subtract(_t,St){return _t.map((bt,Nt)=>bt-St[Nt])}static addArrays(_t,St){return _t.map((bt,Nt)=>bt+St[Nt])}static addItems(_t,St){return _t.map(bt=>bt+St)}static sum(_t){return _t.reduce((St,bt)=>St+bt)}static dot(_t,St){return xt.mulMatrix(_t,St)}static vectorLen(_t){return Math.hypot(..._t)}static divItems(_t,St){return _t.map(bt=>bt/St)}static squareItems(_t){return _t.map(St=>St*St)}static normalize(_t){return this.divItems(_t,this.vectorLen(_t))}}class Pt{static q(_t,St){var bt=1-St,Nt=xt.mulItems(_t[0],bt*bt*bt),kt=xt.mulItems(_t[1],3*bt*bt*St),Dt=xt.mulItems(_t[2],3*bt*St*St),jt=xt.mulItems(_t[3],St*St*St);return xt.addArrays(xt.addArrays(Nt,kt),xt.addArrays(Dt,jt))}static qprime(_t,St){var bt=1-St,Nt=xt.mulItems(xt.subtract(_t[1],_t[0]),3*bt*bt),kt=xt.mulItems(xt.subtract(_t[2],_t[1]),6*bt*St),Dt=xt.mulItems(xt.subtract(_t[3],_t[2]),3*St*St);return xt.addArrays(xt.addArrays(Nt,kt),Dt)}static qprimeprime(_t,St){return xt.addArrays(xt.mulItems(xt.addArrays(xt.subtract(_t[2],xt.mulItems(_t[1],2)),_t[0]),6*(1-St)),xt.mulItems(xt.addArrays(xt.subtract(_t[3],xt.mulItems(_t[2],2)),_t[1]),6*St))}}o.exports=s,o.exports.fitCubic=a,o.exports.createTangent=Ct},(o,s,a)=>{var Kt,Vl,mn,Hl,rr,Kl;Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayer=void 0;var et=a(1),at=a(8),lt=a(5),ht=a(28),dt=a(29);const ft=1e3,vt=9,wt=new WeakSet;function Ct(ur){return{width:ur[2]-ur[0],height:ur[3]-ur[1]}}class xt{static create(Ht){switch(Ht.data.annotationType){case et.AnnotationType.LINK:return new Rt(Ht);case et.AnnotationType.TEXT:return new _t(Ht);case et.AnnotationType.WIDGET:switch(Ht.data.fieldType){case"Tx":return new bt(Ht);case"Btn":return Ht.data.radioButton?new kt(Ht):Ht.data.checkBox?new Nt(Ht):new Dt(Ht);case"Ch":return new jt(Ht)}return new St(Ht);case et.AnnotationType.POPUP:return new Wt(Ht);case et.AnnotationType.FREETEXT:return new Bt(Ht);case et.AnnotationType.LINE:return new zt(Ht);case et.AnnotationType.SQUARE:return new qt(Ht);case et.AnnotationType.CIRCLE:return new nn(Ht);case et.AnnotationType.POLYLINE:return new Fn(Ht);case et.AnnotationType.CARET:return new ar(Ht);case et.AnnotationType.INK:return new pr(Ht);case et.AnnotationType.POLYGON:return new dr(Ht);case et.AnnotationType.HIGHLIGHT:return new mr(Ht);case et.AnnotationType.UNDERLINE:return new cr(Ht);case et.AnnotationType.SQUIGGLY:return new sr(Ht);case et.AnnotationType.STRIKEOUT:return new wr(Ht);case et.AnnotationType.STAMP:return new $r(Ht);case et.AnnotationType.FILEATTACHMENT:return new Sr(Ht);default:return new Pt(Ht)}}}class Pt{constructor(Ht,{isRenderable:Xt=!1,ignoreBorder:Zt=!1,createQuadrilaterals:tn=!1}={}){this.isRenderable=Xt,this.data=Ht.data,this.layer=Ht.layer,this.page=Ht.page,this.viewport=Ht.viewport,this.linkService=Ht.linkService,this.downloadManager=Ht.downloadManager,this.imageResourcesPath=Ht.imageResourcesPath,this.renderForms=Ht.renderForms,this.svgFactory=Ht.svgFactory,this.annotationStorage=Ht.annotationStorage,this.enableScripting=Ht.enableScripting,this.hasJSActions=Ht.hasJSActions,this._fieldObjects=Ht.fieldObjects,this._mouseState=Ht.mouseState,Xt&&(this.container=this._createContainer(Zt)),tn&&(this.quadrilaterals=this._createQuadrilaterals(Zt))}_createContainer(Ht=!1){const Xt=this.data,Zt=this.page,tn=this.viewport,$n=document.createElement("section"),{width:lr,height:Er}=Ct(Xt.rect),[Dr,br,kr,Ar]=tn.viewBox,Rr=kr-Dr,Nr=Ar-br;$n.setAttribute("data-annotation-id",Xt.id);const Mn=et.Util.normalizeRect([Xt.rect[0],Zt.view[3]-Xt.rect[1]+Zt.view[1],Xt.rect[2],Zt.view[3]-Xt.rect[3]+Zt.view[1]]);if(!Ht&&Xt.borderStyle.width>0){$n.style.borderWidth=`${Xt.borderStyle.width}px`;const zr=Xt.borderStyle.horizontalCornerRadius,Qt=Xt.borderStyle.verticalCornerRadius;if(zr>0||Qt>0){const Ut=`calc(${zr}px * var(--scale-factor)) / calc(${Qt}px * var(--scale-factor))`;$n.style.borderRadius=Ut}else if(this instanceof kt){const Ut=`calc(${lr}px * var(--scale-factor)) / calc(${Er}px * var(--scale-factor))`;$n.style.borderRadius=Ut}switch(Xt.borderStyle.style){case et.AnnotationBorderStyleType.SOLID:$n.style.borderStyle="solid";break;case et.AnnotationBorderStyleType.DASHED:$n.style.borderStyle="dashed";break;case et.AnnotationBorderStyleType.BEVELED:(0,et.warn)("Unimplemented border style: beveled");break;case et.AnnotationBorderStyleType.INSET:(0,et.warn)("Unimplemented border style: inset");break;case et.AnnotationBorderStyleType.UNDERLINE:$n.style.borderBottomStyle="solid";break}const Lt=Xt.borderColor||null;Lt?$n.style.borderColor=et.Util.makeHexColor(Lt[0]|0,Lt[1]|0,Lt[2]|0):$n.style.borderWidth=0}$n.style.left=`${100*(Mn[0]-Dr)/Rr}%`,$n.style.top=`${100*(Mn[1]-br)/Nr}%`;const{rotation:Ir}=Xt;return Xt.hasOwnCanvas||Ir===0?($n.style.width=`${100*lr/Rr}%`,$n.style.height=`${100*Er/Nr}%`):this.setRotation(Ir,$n),$n}setRotation(Ht,Xt=this.container){const[Zt,tn,$n,lr]=this.viewport.viewBox,Er=$n-Zt,Dr=lr-tn,{width:br,height:kr}=Ct(this.data.rect);let Ar,Rr;Ht%180===0?(Ar=100*br/Er,Rr=100*kr/Dr):(Ar=100*kr/Er,Rr=100*br/Dr),Xt.style.width=`${Ar}%`,Xt.style.height=`${Rr}%`,Xt.setAttribute("data-main-rotation",(360-Ht)%360)}get _commonActions(){const Ht=(Xt,Zt,tn)=>{const $n=tn.detail[Xt];tn.target.style[Zt]=ht.ColorConverters[`${$n[0]}_HTML`]($n.slice(1))};return(0,et.shadow)(this,"_commonActions",{display:Xt=>{const Zt=Xt.detail.display%2===1;this.container.style.visibility=Zt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Zt,print:Xt.detail.display===0||Xt.detail.display===3})},print:Xt=>{this.annotationStorage.setValue(this.data.id,{print:Xt.detail.print})},hidden:Xt=>{this.container.style.visibility=Xt.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:Xt.detail.hidden})},focus:Xt=>{setTimeout(()=>Xt.target.focus({preventScroll:!1}),0)},userName:Xt=>{Xt.target.title=Xt.detail.userName},readonly:Xt=>{Xt.detail.readonly?Xt.target.setAttribute("readonly",""):Xt.target.removeAttribute("readonly")},required:Xt=>{this._setRequired(Xt.target,Xt.detail.required)},bgColor:Xt=>{Ht("bgColor","backgroundColor",Xt)},fillColor:Xt=>{Ht("fillColor","backgroundColor",Xt)},fgColor:Xt=>{Ht("fgColor","color",Xt)},textColor:Xt=>{Ht("textColor","color",Xt)},borderColor:Xt=>{Ht("borderColor","borderColor",Xt)},strokeColor:Xt=>{Ht("strokeColor","borderColor",Xt)},rotation:Xt=>{const Zt=Xt.detail.rotation;this.setRotation(Zt),this.annotationStorage.setValue(this.data.id,{rotation:Zt})}})}_dispatchEventFromSandbox(Ht,Xt){const Zt=this._commonActions;for(const tn of Object.keys(Xt.detail)){const $n=Ht[tn]||Zt[tn];$n&&$n(Xt)}}_setDefaultPropertiesFromJS(Ht){if(!this.enableScripting)return;const Xt=this.annotationStorage.getRawValue(this.data.id);if(!Xt)return;const Zt=this._commonActions;for(const[tn,$n]of Object.entries(Xt)){const lr=Zt[tn];if(lr){const Er={detail:{[tn]:$n},target:Ht};lr(Er),delete Xt[tn]}}}_createQuadrilaterals(Ht=!1){if(!this.data.quadPoints)return null;const Xt=[],Zt=this.data.rect;for(const tn of this.data.quadPoints)this.data.rect=[tn[2].x,tn[2].y,tn[1].x,tn[1].y],Xt.push(this._createContainer(Ht));return this.data.rect=Zt,Xt}_createPopup(Ht,Xt){let Zt=this.container;this.quadrilaterals&&(Ht=Ht||this.quadrilaterals,Zt=this.quadrilaterals[0]),Ht||(Ht=document.createElement("div"),Ht.className="popupTriggerArea",Zt.append(Ht));const $n=new Yt({container:Zt,trigger:Ht,color:Xt.color,titleObj:Xt.titleObj,modificationDate:Xt.modificationDate,contentsObj:Xt.contentsObj,richText:Xt.richText,hideWrapper:!0}).render();$n.style.left="100%",Zt.append($n)}_renderQuadrilaterals(Ht){for(const Xt of this.quadrilaterals)Xt.className=Ht;return this.quadrilaterals}render(){(0,et.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Ht,Xt=null){const Zt=[];if(this._fieldObjects){const tn=this._fieldObjects[Ht];if(tn)for(const{page:$n,id:lr,exportValues:Er}of tn){if($n===-1||lr===Xt)continue;const Dr=typeof Er=="string"?Er:null,br=document.querySelector(`[data-element-id="${lr}"]`);if(br&&!wt.has(br)){(0,et.warn)(`_getElementsByName - element not allowed: ${lr}`);continue}Zt.push({id:lr,exportValue:Dr,domElement:br})}return Zt}for(const tn of document.getElementsByName(Ht)){const{id:$n,exportValue:lr}=tn;$n!==Xt&&wt.has(tn)&&Zt.push({id:$n,exportValue:lr,domElement:tn})}return Zt}static get platform(){const Ht=typeof navigator<"u"?navigator.platform:"";return(0,et.shadow)(this,"platform",{isWin:Ht.includes("Win"),isMac:Ht.includes("Mac")})}}class Rt extends Pt{constructor(Ht,Xt=null){super(Ht,{isRenderable:!0,ignoreBorder:!!(Xt!=null&&Xt.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=Ht.data.isTooltipOnly}render(){const{data:Ht,linkService:Xt}=this,Zt=document.createElement("a");Zt.setAttribute("data-element-id",Ht.id);let tn=!1;return Ht.url?(Xt.addLinkAttributes(Zt,Ht.url,Ht.newWindow),tn=!0):Ht.action?(this._bindNamedAction(Zt,Ht.action),tn=!0):Ht.dest?(this._bindLink(Zt,Ht.dest),tn=!0):(Ht.actions&&(Ht.actions.Action||Ht.actions["Mouse Up"]||Ht.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Zt,Ht),tn=!0),Ht.resetForm?(this._bindResetFormAction(Zt,Ht.resetForm),tn=!0):this.isTooltipOnly&&!tn&&(this._bindLink(Zt,""),tn=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(($n,lr)=>{const Er=lr===0?Zt:Zt.cloneNode();return $n.append(Er),$n}):(this.container.className="linkAnnotation",tn&&this.container.append(Zt),this.container)}_bindLink(Ht,Xt){Ht.href=this.linkService.getDestinationHash(Xt),Ht.onclick=()=>(Xt&&this.linkService.goToDestination(Xt),!1),(Xt||Xt==="")&&(Ht.className="internalLink")}_bindNamedAction(Ht,Xt){Ht.href=this.linkService.getAnchorUrl(""),Ht.onclick=()=>(this.linkService.executeNamedAction(Xt),!1),Ht.className="internalLink"}_bindJSAction(Ht,Xt){Ht.href=this.linkService.getAnchorUrl("");const Zt=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const tn of Object.keys(Xt.actions)){const $n=Zt.get(tn);$n&&(Ht[$n]=()=>{var lr;return(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt.id,name:tn}}),!1})}Ht.onclick||(Ht.onclick=()=>!1),Ht.className="internalLink"}_bindResetFormAction(Ht,Xt){const Zt=Ht.onclick;if(Zt||(Ht.href=this.linkService.getAnchorUrl("")),Ht.className="internalLink",!this._fieldObjects){(0,et.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Zt||(Ht.onclick=()=>!1);return}Ht.onclick=()=>{var kr;Zt&&Zt();const{fields:tn,refs:$n,include:lr}=Xt,Er=[];if(tn.length!==0||$n.length!==0){const Ar=new Set($n);for(const Rr of tn){const Nr=this._fieldObjects[Rr]||[];for(const{id:Mn}of Nr)Ar.add(Mn)}for(const Rr of Object.values(this._fieldObjects))for(const Nr of Rr)Ar.has(Nr.id)===lr&&Er.push(Nr)}else for(const Ar of Object.values(this._fieldObjects))Er.push(...Ar);const Dr=this.annotationStorage,br=[];for(const Ar of Er){const{id:Rr}=Ar;switch(br.push(Rr),Ar.type){case"text":{const Mn=Ar.defaultValue||"";Dr.setValue(Rr,{value:Mn});break}case"checkbox":case"radiobutton":{const Mn=Ar.defaultValue===Ar.exportValues;Dr.setValue(Rr,{value:Mn});break}case"combobox":case"listbox":{const Mn=Ar.defaultValue||"";Dr.setValue(Rr,{value:Mn});break}default:continue}const Nr=document.querySelector(`[data-element-id="${Rr}"]`);if(Nr){if(!wt.has(Nr)){(0,et.warn)(`_bindResetFormAction - element not allowed: ${Rr}`);continue}}else continue;Nr.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((kr=this.linkService.eventBus)==null||kr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:br,name:"ResetForm"}})),!1}}}class _t extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt})}render(){this.container.className="textAnnotation";const Ht=document.createElement("img");return Ht.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Ht.alt="[{{type}} Annotation]",Ht.dataset.l10nId="text_annotation_type",Ht.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(Ht,this.data),this.container.append(Ht),this.container}}class St extends Pt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(Ht){const{isWin:Xt,isMac:Zt}=Pt.platform;return Xt&&Ht.ctrlKey||Zt&&Ht.metaKey}_setEventListener(Ht,Xt,Zt,tn){Xt.includes("mouse")?Ht.addEventListener(Xt,$n=>{var lr;(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Zt,value:tn($n),shift:$n.shiftKey,modifier:this._getKeyModifier($n)}})}):Ht.addEventListener(Xt,$n=>{var lr;(lr=this.linkService.eventBus)==null||lr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Zt,value:tn($n)}})})}_setEventListeners(Ht,Xt,Zt){var tn;for(const[$n,lr]of Xt)(lr==="Action"||(tn=this.data.actions)!=null&&tn[lr])&&this._setEventListener(Ht,$n,lr,Zt)}_setBackgroundColor(Ht){const Xt=this.data.backgroundColor||null;Ht.style.backgroundColor=Xt===null?"transparent":et.Util.makeHexColor(Xt[0],Xt[1],Xt[2])}_setTextStyle(Ht){const Xt=["left","center","right"],{fontColor:Zt}=this.data.defaultAppearanceData,tn=this.data.defaultAppearanceData.fontSize||vt,$n=Ht.style;let lr;if(this.data.multiLine){const Er=Math.abs(this.data.rect[3]-this.data.rect[1]),Dr=Math.round(Er/(et.LINE_FACTOR*tn))||1,br=Er/Dr;lr=Math.min(tn,Math.round(br/et.LINE_FACTOR))}else{const Er=Math.abs(this.data.rect[3]-this.data.rect[1]);lr=Math.min(tn,Math.round(Er/et.LINE_FACTOR))}$n.fontSize=`calc(${lr}px * var(--scale-factor))`,$n.color=et.Util.makeHexColor(Zt[0],Zt[1],Zt[2]),this.data.textAlignment!==null&&($n.textAlign=Xt[this.data.textAlignment])}_setRequired(Ht,Xt){Xt?Ht.setAttribute("required",!0):Ht.removeAttribute("required"),Ht.setAttribute("aria-required",Xt)}}class bt extends St{constructor(Ht){const Xt=Ht.renderForms||!Ht.data.hasAppearance&&!!Ht.data.fieldValue;super(Ht,{isRenderable:Xt})}setPropertyOnSiblings(Ht,Xt,Zt,tn){const $n=this.annotationStorage;for(const lr of this._getElementsByName(Ht.name,Ht.id))lr.domElement&&(lr.domElement[Xt]=Zt),$n.setValue(lr.id,{[tn]:Zt})}render(){var tn;const Ht=this.annotationStorage,Xt=this.data.id;this.container.className="textWidgetAnnotation";let Zt=null;if(this.renderForms){const $n=Ht.getValue(Xt,{value:this.data.fieldValue});let lr=$n.formattedValue||$n.value||"";const Er=Ht.getValue(Xt,{charLimit:this.data.maxLen}).charLimit;Er&&lr.length>Er&&(lr=lr.slice(0,Er));const Dr={userValue:lr,formattedValue:null,valueOnFocus:""};this.data.multiLine?(Zt=document.createElement("textarea"),Zt.textContent=lr,this.data.doNotScroll&&(Zt.style.overflowY="hidden")):(Zt=document.createElement("input"),Zt.type="text",Zt.setAttribute("value",lr),this.data.doNotScroll&&(Zt.style.overflowX="hidden")),wt.add(Zt),Zt.setAttribute("data-element-id",Xt),Zt.disabled=this.data.readOnly,Zt.name=this.data.fieldName,Zt.tabIndex=ft,this._setRequired(Zt,this.data.required),Er&&(Zt.maxLength=Er),Zt.addEventListener("input",kr=>{Ht.setValue(Xt,{value:kr.target.value}),this.setPropertyOnSiblings(Zt,"value",kr.target.value,"value")}),Zt.addEventListener("resetform",kr=>{const Ar=this.data.defaultFieldValue??"";Zt.value=Dr.userValue=Ar,Dr.formattedValue=null});let br=kr=>{const{formattedValue:Ar}=Dr;Ar!=null&&(kr.target.value=Ar),kr.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Zt.addEventListener("focus",Ar=>{Dr.userValue&&(Ar.target.value=Dr.userValue),Dr.valueOnFocus=Ar.target.value}),Zt.addEventListener("updatefromsandbox",Ar=>{const Rr={value(Nr){Dr.userValue=Nr.detail.value??"",Ht.setValue(Xt,{value:Dr.userValue.toString()}),Nr.target.value=Dr.userValue},formattedValue(Nr){const{formattedValue:Mn}=Nr.detail;Dr.formattedValue=Mn,Mn!=null&&Nr.target!==document.activeElement&&(Nr.target.value=Mn),Ht.setValue(Xt,{formattedValue:Mn})},selRange(Nr){Nr.target.setSelectionRange(...Nr.detail.selRange)},charLimit:Nr=>{var Qt;const{charLimit:Mn}=Nr.detail,{target:Ir}=Nr;if(Mn===0){Ir.removeAttribute("maxLength");return}Ir.setAttribute("maxLength",Mn);let zr=Dr.userValue;!zr||zr.length<=Mn||(zr=zr.slice(0,Mn),Ir.value=Dr.userValue=zr,Ht.setValue(Xt,{value:zr}),(Qt=this.linkService.eventBus)==null||Qt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt,name:"Keystroke",value:zr,willCommit:!0,commitKey:1,selStart:Ir.selectionStart,selEnd:Ir.selectionEnd}}))}};this._dispatchEventFromSandbox(Rr,Ar)}),Zt.addEventListener("keydown",Ar=>{var Mn;let Rr=-1;if(Ar.key==="Escape"?Rr=0:Ar.key==="Enter"?Rr=2:Ar.key==="Tab"&&(Rr=3),Rr===-1)return;const{value:Nr}=Ar.target;Dr.valueOnFocus!==Nr&&(Dr.userValue=Nr,(Mn=this.linkService.eventBus)==null||Mn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt,name:"Keystroke",value:Nr,willCommit:!0,commitKey:Rr,selStart:Ar.target.selectionStart,selEnd:Ar.target.selectionEnd}}))});const kr=br;br=null,Zt.addEventListener("blur",Ar=>{var Nr;const{value:Rr}=Ar.target;Dr.userValue=Rr,this._mouseState.isDown&&Dr.valueOnFocus!==Rr&&((Nr=this.linkService.eventBus)==null||Nr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt,name:"Keystroke",value:Rr,willCommit:!0,commitKey:1,selStart:Ar.target.selectionStart,selEnd:Ar.target.selectionEnd}})),kr(Ar)}),(tn=this.data.actions)!=null&&tn.Keystroke&&Zt.addEventListener("beforeinput",Ar=>{var Ut;const{data:Rr,target:Nr}=Ar,{value:Mn,selectionStart:Ir,selectionEnd:zr}=Nr;let Qt=Ir,Lt=zr;switch(Ar.inputType){case"deleteWordBackward":{const nr=Mn.substring(0,Ir).match(/\w*[^\w]*$/);nr&&(Qt-=nr[0].length);break}case"deleteWordForward":{const nr=Mn.substring(Ir).match(/^[^\w]*\w*/);nr&&(Lt+=nr[0].length);break}case"deleteContentBackward":Ir===zr&&(Qt-=1);break;case"deleteContentForward":Ir===zr&&(Lt+=1);break}Ar.preventDefault(),(Ut=this.linkService.eventBus)==null||Ut.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt,name:"Keystroke",value:Mn,change:Rr||"",willCommit:!1,selStart:Qt,selEnd:Lt}})}),this._setEventListeners(Zt,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ar=>Ar.target.value)}if(br&&Zt.addEventListener("blur",br),this.data.comb){const Ar=(this.data.rect[2]-this.data.rect[0])/Er;Zt.classList.add("comb"),Zt.style.letterSpacing=`calc(${Ar}px * var(--scale-factor) - 1ch)`}}else Zt=document.createElement("div"),Zt.textContent=this.data.fieldValue,Zt.style.verticalAlign="middle",Zt.style.display="table-cell";return this._setTextStyle(Zt),this._setBackgroundColor(Zt),this._setDefaultPropertiesFromJS(Zt),this.container.append(Zt),this.container}}class Nt extends St{constructor(Ht){super(Ht,{isRenderable:Ht.renderForms})}render(){const Ht=this.annotationStorage,Xt=this.data,Zt=Xt.id;let tn=Ht.getValue(Zt,{value:Xt.exportValue===Xt.fieldValue}).value;typeof tn=="string"&&(tn=tn!=="Off",Ht.setValue(Zt,{value:tn})),this.container.className="buttonWidgetAnnotation checkBox";const $n=document.createElement("input");return wt.add($n),$n.setAttribute("data-element-id",Zt),$n.disabled=Xt.readOnly,this._setRequired($n,this.data.required),$n.type="checkbox",$n.name=Xt.fieldName,tn&&$n.setAttribute("checked",!0),$n.setAttribute("exportValue",Xt.exportValue),$n.tabIndex=ft,$n.addEventListener("change",lr=>{const{name:Er,checked:Dr}=lr.target;for(const br of this._getElementsByName(Er,Zt)){const kr=Dr&&br.exportValue===Xt.exportValue;br.domElement&&(br.domElement.checked=kr),Ht.setValue(br.id,{value:kr})}Ht.setValue(Zt,{value:Dr})}),$n.addEventListener("resetform",lr=>{const Er=Xt.defaultFieldValue||"Off";lr.target.checked=Er===Xt.exportValue}),this.enableScripting&&this.hasJSActions&&($n.addEventListener("updatefromsandbox",lr=>{const Er={value(Dr){Dr.target.checked=Dr.detail.value!=="Off",Ht.setValue(Zt,{value:Dr.target.checked})}};this._dispatchEventFromSandbox(Er,lr)}),this._setEventListeners($n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],lr=>lr.target.checked)),this._setBackgroundColor($n),this._setDefaultPropertiesFromJS($n),this.container.append($n),this.container}}class kt extends St{constructor(Ht){super(Ht,{isRenderable:Ht.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const Ht=this.annotationStorage,Xt=this.data,Zt=Xt.id;let tn=Ht.getValue(Zt,{value:Xt.fieldValue===Xt.buttonValue}).value;typeof tn=="string"&&(tn=tn!==Xt.buttonValue,Ht.setValue(Zt,{value:tn}));const $n=document.createElement("input");if(wt.add($n),$n.setAttribute("data-element-id",Zt),$n.disabled=Xt.readOnly,this._setRequired($n,this.data.required),$n.type="radio",$n.name=Xt.fieldName,tn&&$n.setAttribute("checked",!0),$n.tabIndex=ft,$n.addEventListener("change",lr=>{const{name:Er,checked:Dr}=lr.target;for(const br of this._getElementsByName(Er,Zt))Ht.setValue(br.id,{value:!1});Ht.setValue(Zt,{value:Dr})}),$n.addEventListener("resetform",lr=>{const Er=Xt.defaultFieldValue;lr.target.checked=Er!=null&&Er===Xt.buttonValue}),this.enableScripting&&this.hasJSActions){const lr=Xt.buttonValue;$n.addEventListener("updatefromsandbox",Er=>{const Dr={value:br=>{const kr=lr===br.detail.value;for(const Ar of this._getElementsByName(br.target.name)){const Rr=kr&&Ar.id===Zt;Ar.domElement&&(Ar.domElement.checked=Rr),Ht.setValue(Ar.id,{value:Rr})}}};this._dispatchEventFromSandbox(Dr,Er)}),this._setEventListeners($n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Er=>Er.target.checked)}return this._setBackgroundColor($n),this._setDefaultPropertiesFromJS($n),this.container.append($n),this.container}}class Dt extends Rt{constructor(Ht){super(Ht,{ignoreBorder:Ht.data.hasAppearance})}render(){const Ht=super.render();Ht.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(Ht.title=this.data.alternativeText);const Xt=Ht.lastChild;return this.enableScripting&&this.hasJSActions&&Xt&&(this._setDefaultPropertiesFromJS(Xt),Xt.addEventListener("updatefromsandbox",Zt=>{this._dispatchEventFromSandbox({},Zt)})),Ht}}class jt extends St{constructor(Ht){super(Ht,{isRenderable:Ht.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const Ht=this.annotationStorage,Xt=this.data.id,Zt=Ht.getValue(Xt,{value:this.data.fieldValue}),tn=document.createElement("select");wt.add(tn),tn.setAttribute("data-element-id",Xt),tn.disabled=this.data.readOnly,this._setRequired(tn,this.data.required),tn.name=this.data.fieldName,tn.tabIndex=ft;let $n=this.data.combo&&this.data.options.length>0;this.data.combo||(tn.size=this.data.options.length,this.data.multiSelect&&(tn.multiple=!0)),tn.addEventListener("resetform",br=>{const kr=this.data.defaultFieldValue;for(const Ar of tn.options)Ar.selected=Ar.value===kr});for(const br of this.data.options){const kr=document.createElement("option");kr.textContent=br.displayValue,kr.value=br.exportValue,Zt.value.includes(br.exportValue)&&(kr.setAttribute("selected",!0),$n=!1),tn.append(kr)}let lr=null;if($n){const br=document.createElement("option");br.value=" ",br.setAttribute("hidden",!0),br.setAttribute("selected",!0),tn.prepend(br),lr=()=>{br.remove(),tn.removeEventListener("input",lr),lr=null},tn.addEventListener("input",lr)}const Er=(br,kr)=>{const Ar=kr?"value":"textContent",Rr=br.target.options;return br.target.multiple?Array.prototype.filter.call(Rr,Nr=>Nr.selected).map(Nr=>Nr[Ar]):Rr.selectedIndex===-1?null:Rr[Rr.selectedIndex][Ar]},Dr=br=>{const kr=br.target.options;return Array.prototype.map.call(kr,Ar=>({displayValue:Ar.textContent,exportValue:Ar.value}))};return this.enableScripting&&this.hasJSActions?(tn.addEventListener("updatefromsandbox",br=>{const kr={value(Ar){lr==null||lr();const Rr=Ar.detail.value,Nr=new Set(Array.isArray(Rr)?Rr:[Rr]);for(const Mn of tn.options)Mn.selected=Nr.has(Mn.value);Ht.setValue(Xt,{value:Er(Ar,!0)})},multipleSelection(Ar){tn.multiple=!0},remove(Ar){const Rr=tn.options,Nr=Ar.detail.remove;Rr[Nr].selected=!1,tn.remove(Nr),Rr.length>0&&Array.prototype.findIndex.call(Rr,Ir=>Ir.selected)===-1&&(Rr[0].selected=!0),Ht.setValue(Xt,{value:Er(Ar,!0),items:Dr(Ar)})},clear(Ar){for(;tn.length!==0;)tn.remove(0);Ht.setValue(Xt,{value:null,items:[]})},insert(Ar){const{index:Rr,displayValue:Nr,exportValue:Mn}=Ar.detail.insert,Ir=tn.children[Rr],zr=document.createElement("option");zr.textContent=Nr,zr.value=Mn,Ir?Ir.before(zr):tn.append(zr),Ht.setValue(Xt,{value:Er(Ar,!0),items:Dr(Ar)})},items(Ar){const{items:Rr}=Ar.detail;for(;tn.length!==0;)tn.remove(0);for(const Nr of Rr){const{displayValue:Mn,exportValue:Ir}=Nr,zr=document.createElement("option");zr.textContent=Mn,zr.value=Ir,tn.append(zr)}tn.options.length>0&&(tn.options[0].selected=!0),Ht.setValue(Xt,{value:Er(Ar,!0),items:Dr(Ar)})},indices(Ar){const Rr=new Set(Ar.detail.indices);for(const Nr of Ar.target.options)Nr.selected=Rr.has(Nr.index);Ht.setValue(Xt,{value:Er(Ar,!0)})},editable(Ar){Ar.target.disabled=!Ar.detail.editable}};this._dispatchEventFromSandbox(kr,br)}),tn.addEventListener("input",br=>{var Rr;const kr=Er(br,!0),Ar=Er(br,!1);Ht.setValue(Xt,{value:kr}),(Rr=this.linkService.eventBus)==null||Rr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Xt,name:"Keystroke",value:Ar,changeEx:kr,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(tn,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],br=>br.target.checked)):tn.addEventListener("input",function(br){Ht.setValue(Xt,{value:Er(br,!0)})}),this.data.combo&&this._setTextStyle(tn),this._setBackgroundColor(tn),this._setDefaultPropertiesFromJS(tn),this.container.append(tn),this.container}}class Wt extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!((Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt})}render(){const Ht=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",Ht.includes(this.data.parentType))return this.container;const Xt=`[data-annotation-id="${this.data.parentId}"]`,Zt=this.layer.querySelectorAll(Xt);if(Zt.length===0)return this.container;const tn=new Yt({container:this.container,trigger:Array.from(Zt),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),$n=this.page,lr=et.Util.normalizeRect([this.data.parentRect[0],$n.view[3]-this.data.parentRect[1]+$n.view[1],this.data.parentRect[2],$n.view[3]-this.data.parentRect[3]+$n.view[1]]),Er=lr[0]+this.data.parentRect[2]-this.data.parentRect[0],Dr=lr[1],[br,kr,Ar,Rr]=this.viewport.viewBox,Nr=Ar-br,Mn=Rr-kr;return this.container.style.left=`${100*(Er-br)/Nr}%`,this.container.style.top=`${100*(Dr-kr)/Mn}%`,this.container.append(tn.render()),this.container}}class Yt{constructor(Ht){this.container=Ht.container,this.trigger=Ht.trigger,this.color=Ht.color,this.titleObj=Ht.titleObj,this.modificationDate=Ht.modificationDate,this.contentsObj=Ht.contentsObj,this.richText=Ht.richText,this.hideWrapper=Ht.hideWrapper||!1,this.pinned=!1}render(){var Er,Dr;const Xt=document.createElement("div");Xt.className="popupWrapper",this.hideElement=this.hideWrapper?Xt:this.container,this.hideElement.hidden=!0;const Zt=document.createElement("div");Zt.className="popup";const tn=this.color;if(tn){const br=.7*(255-tn[0])+tn[0],kr=.7*(255-tn[1])+tn[1],Ar=.7*(255-tn[2])+tn[2];Zt.style.backgroundColor=et.Util.makeHexColor(br|0,kr|0,Ar|0)}const $n=document.createElement("h1");$n.dir=this.titleObj.dir,$n.textContent=this.titleObj.str,Zt.append($n);const lr=at.PDFDateString.toDateObject(this.modificationDate);if(lr){const br=document.createElement("span");br.className="popupDate",br.textContent="{{date}}, {{time}}",br.dataset.l10nId="annotation_date_string",br.dataset.l10nArgs=JSON.stringify({date:lr.toLocaleDateString(),time:lr.toLocaleTimeString()}),Zt.append(br)}if((Er=this.richText)!=null&&Er.str&&(!((Dr=this.contentsObj)!=null&&Dr.str)||this.contentsObj.str===this.richText.str))dt.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:Zt}),Zt.lastChild.className="richText popupContent";else{const br=this._formatContents(this.contentsObj);Zt.append(br)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const br of this.trigger)br.addEventListener("click",this._toggle.bind(this)),br.addEventListener("mouseover",this._show.bind(this,!1)),br.addEventListener("mouseout",this._hide.bind(this,!1));return Zt.addEventListener("click",this._hide.bind(this,!0)),Xt.append(Zt),Xt}_formatContents({str:Ht,dir:Xt}){const Zt=document.createElement("p");Zt.className="popupContent",Zt.dir=Xt;const tn=Ht.split(/(?:\r\n?|\n)/);for(let $n=0,lr=tn.length;$n<lr;++$n){const Er=tn[$n];Zt.append(document.createTextNode(Er)),$n<lr-1&&Zt.append(document.createElement("br"))}return Zt}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(Ht=!1){Ht&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(Ht=!0){Ht&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class Bt extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0}),this.textContent=Ht.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const Ht=document.createElement("div");Ht.className="annotationTextContent",Ht.setAttribute("role","comment");for(const Xt of this.textContent){const Zt=document.createElement("span");Zt.textContent=Xt,Ht.append(Zt)}this.container.append(Ht)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class zt extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const Ht=this.data,{width:Xt,height:Zt}=Ct(Ht.rect),tn=this.svgFactory.create(Xt,Zt,!0),$n=this.svgFactory.createElement("svg:line");return $n.setAttribute("x1",Ht.rect[2]-Ht.lineCoordinates[0]),$n.setAttribute("y1",Ht.rect[3]-Ht.lineCoordinates[1]),$n.setAttribute("x2",Ht.rect[2]-Ht.lineCoordinates[2]),$n.setAttribute("y2",Ht.rect[3]-Ht.lineCoordinates[3]),$n.setAttribute("stroke-width",Ht.borderStyle.width||1),$n.setAttribute("stroke","transparent"),$n.setAttribute("fill","transparent"),tn.append($n),this.container.append(tn),this._createPopup($n,Ht),this.container}}class qt extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const Ht=this.data,{width:Xt,height:Zt}=Ct(Ht.rect),tn=this.svgFactory.create(Xt,Zt,!0),$n=Ht.borderStyle.width,lr=this.svgFactory.createElement("svg:rect");return lr.setAttribute("x",$n/2),lr.setAttribute("y",$n/2),lr.setAttribute("width",Xt-$n),lr.setAttribute("height",Zt-$n),lr.setAttribute("stroke-width",$n||1),lr.setAttribute("stroke","transparent"),lr.setAttribute("fill","transparent"),tn.append(lr),this.container.append(tn),this._createPopup(lr,Ht),this.container}}class nn extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const Ht=this.data,{width:Xt,height:Zt}=Ct(Ht.rect),tn=this.svgFactory.create(Xt,Zt,!0),$n=Ht.borderStyle.width,lr=this.svgFactory.createElement("svg:ellipse");return lr.setAttribute("cx",Xt/2),lr.setAttribute("cy",Zt/2),lr.setAttribute("rx",Xt/2-$n/2),lr.setAttribute("ry",Zt/2-$n/2),lr.setAttribute("stroke-width",$n||1),lr.setAttribute("stroke","transparent"),lr.setAttribute("fill","transparent"),tn.append(lr),this.container.append(tn),this._createPopup(lr,Ht),this.container}}class Fn extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Ht=this.data,{width:Xt,height:Zt}=Ct(Ht.rect),tn=this.svgFactory.create(Xt,Zt,!0);let $n=[];for(const Er of Ht.vertices){const Dr=Er.x-Ht.rect[0],br=Ht.rect[3]-Er.y;$n.push(Dr+","+br)}$n=$n.join(" ");const lr=this.svgFactory.createElement(this.svgElementName);return lr.setAttribute("points",$n),lr.setAttribute("stroke-width",Ht.borderStyle.width||1),lr.setAttribute("stroke","transparent"),lr.setAttribute("fill","transparent"),tn.append(lr),this.container.append(tn),this._createPopup(lr,Ht),this.container}}class dr extends Fn{constructor(Ht){super(Ht),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ar extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class pr extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const Ht=this.data,{width:Xt,height:Zt}=Ct(Ht.rect),tn=this.svgFactory.create(Xt,Zt,!0);for(const $n of Ht.inkLists){let lr=[];for(const Dr of $n){const br=Dr.x-Ht.rect[0],kr=Ht.rect[3]-Dr.y;lr.push(`${br},${kr}`)}lr=lr.join(" ");const Er=this.svgFactory.createElement(this.svgElementName);Er.setAttribute("points",lr),Er.setAttribute("stroke-width",Ht.borderStyle.width||1),Er.setAttribute("stroke","transparent"),Er.setAttribute("fill","transparent"),this._createPopup(Er,Ht),tn.append(Er)}return this.container.append(tn),this.container}}class mr extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class cr extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class sr extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class wr extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class $r extends Pt{constructor(Ht){var Zt,tn,$n;const Xt=!!(Ht.data.hasPopup||(Zt=Ht.data.titleObj)!=null&&Zt.str||(tn=Ht.data.contentsObj)!=null&&tn.str||($n=Ht.data.richText)!=null&&$n.str);super(Ht,{isRenderable:Xt,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Sr extends Pt{constructor(Ht){var tn;super(Ht,{isRenderable:!0});const{filename:Xt,content:Zt}=this.data.file;this.filename=(0,at.getFilenameFromUrl)(Xt),this.content=Zt,(tn=this.linkService.eventBus)==null||tn.dispatch("fileattachmentannotation",{source:this,filename:Xt,content:Zt})}render(){var Xt,Zt;this.container.className="fileAttachmentAnnotation";const Ht=document.createElement("div");return Ht.className="popupTriggerArea",Ht.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((Xt=this.data.titleObj)!=null&&Xt.str||(Zt=this.data.contentsObj)!=null&&Zt.str||this.data.richText)&&this._createPopup(Ht,this.data),this.container.append(Ht),this.container}_download(){var Ht;(Ht=this.downloadManager)==null||Ht.openOrDownloadData(this.container,this.content,this.filename)}}const fr=class{static render(Ht){var Er,Dr;const{annotations:Xt,div:Zt,viewport:tn,accessibilityManager:$n}=Ht;Fr(this,mn,Hl).call(this,Zt,tn);let lr=0;for(const br of Xt){if(br.annotationType!==et.AnnotationType.POPUP){const{width:Ar,height:Rr}=Ct(br.rect);if(Ar<=0||Rr<=0)continue}const kr=xt.create({data:br,layer:Zt,page:Ht.page,viewport:tn,linkService:Ht.linkService,downloadManager:Ht.downloadManager,imageResourcesPath:Ht.imageResourcesPath||"",renderForms:Ht.renderForms!==!1,svgFactory:new at.DOMSVGFactory,annotationStorage:Ht.annotationStorage||new lt.AnnotationStorage,enableScripting:Ht.enableScripting,hasJSActions:Ht.hasJSActions,fieldObjects:Ht.fieldObjects,mouseState:Ht.mouseState||{isDown:!1}});if(kr.isRenderable){const Ar=kr.render();if(br.hidden&&(Ar.style.visibility="hidden"),Array.isArray(Ar))for(const Rr of Ar)Rr.style.zIndex=lr++,Fr(Er=fr,Kt,Vl).call(Er,Rr,br.id,Zt,$n);else Ar.style.zIndex=lr++,kr instanceof Wt?Zt.prepend(Ar):Fr(Dr=fr,Kt,Vl).call(Dr,Ar,br.id,Zt,$n)}}Fr(this,rr,Kl).call(this,Zt,Ht.annotationCanvasMap)}static update(Ht){const{annotationCanvasMap:Xt,div:Zt,viewport:tn}=Ht;Fr(this,mn,Hl).call(this,Zt,tn),Fr(this,rr,Kl).call(this,Zt,Xt),Zt.hidden=!1}};let en=fr;Kt=new WeakSet,Vl=function(Ht,Xt,Zt,tn){const $n=Ht.firstChild||Ht;$n.id=`${at.AnnotationPrefix}${Xt}`,Zt.append(Ht),tn==null||tn.moveElementInDOM(Zt,Ht,$n,!1)},mn=new WeakSet,Hl=function(Ht,{width:Xt,height:Zt,rotation:tn}){const{style:$n}=Ht,lr=tn%180!==0,Er=Math.floor(Xt)+"px",Dr=Math.floor(Zt)+"px";$n.width=lr?Dr:Er,$n.height=lr?Er:Dr,Ht.setAttribute("data-main-rotation",tn)},rr=new WeakSet,Kl=function(Ht,Xt){if(Xt){for(const[Zt,tn]of Xt){const $n=Ht.querySelector(`[data-annotation-id="${Zt}"]`);if(!$n)continue;const{firstChild:lr}=$n;lr?lr.nodeName==="CANVAS"?lr.replaceWith(tn):lr.before(tn):$n.append(tn)}Xt.clear()}},Pr(en,Kt),Pr(en,mn),Pr(en,rr),s.AnnotationLayer=en},(o,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.ColorConverters=void 0;function a(at){return Math.floor(Math.max(0,Math.min(1,at))*255).toString(16).padStart(2,"0")}class et{static CMYK_G([lt,ht,dt,ft]){return["G",1-Math.min(1,.3*lt+.59*dt+.11*ht+ft)]}static G_CMYK([lt]){return["CMYK",0,0,0,1-lt]}static G_RGB([lt]){return["RGB",lt,lt,lt]}static G_HTML([lt]){const ht=a(lt);return`#${ht}${ht}${ht}`}static RGB_G([lt,ht,dt]){return["G",.3*lt+.59*ht+.11*dt]}static RGB_HTML([lt,ht,dt]){const ft=a(lt),vt=a(ht),wt=a(dt);return`#${ft}${vt}${wt}`}static T_HTML(){return"#00000000"}static CMYK_RGB([lt,ht,dt,ft]){return["RGB",1-Math.min(1,lt+ft),1-Math.min(1,dt+ft),1-Math.min(1,ht+ft)]}static CMYK_HTML(lt){const ht=this.CMYK_RGB(lt).slice(1);return this.RGB_HTML(ht)}static RGB_CMYK([lt,ht,dt]){const ft=1-lt,vt=1-ht,wt=1-dt,Ct=Math.min(ft,vt,wt);return["CMYK",ft,vt,wt,Ct]}}s.ColorConverters=et},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayer=void 0;var et=a(20);class at{static setupStorage(ht,dt,ft,vt,wt){const Ct=vt.getValue(dt,{value:null});switch(ft.name){case"textarea":if(Ct.value!==null&&(ht.textContent=Ct.value),wt==="print")break;ht.addEventListener("input",xt=>{vt.setValue(dt,{value:xt.target.value})});break;case"input":if(ft.attributes.type==="radio"||ft.attributes.type==="checkbox"){if(Ct.value===ft.attributes.xfaOn?ht.setAttribute("checked",!0):Ct.value===ft.attributes.xfaOff&&ht.removeAttribute("checked"),wt==="print")break;ht.addEventListener("change",xt=>{vt.setValue(dt,{value:xt.target.checked?xt.target.getAttribute("xfaOn"):xt.target.getAttribute("xfaOff")})})}else{if(Ct.value!==null&&ht.setAttribute("value",Ct.value),wt==="print")break;ht.addEventListener("input",xt=>{vt.setValue(dt,{value:xt.target.value})})}break;case"select":if(Ct.value!==null)for(const xt of ft.children)xt.attributes.value===Ct.value&&(xt.attributes.selected=!0);ht.addEventListener("input",xt=>{const Pt=xt.target.options,Rt=Pt.selectedIndex===-1?"":Pt[Pt.selectedIndex].value;vt.setValue(dt,{value:Rt})});break}}static setAttributes({html:ht,element:dt,storage:ft=null,intent:vt,linkService:wt}){const{attributes:Ct}=dt,xt=ht instanceof HTMLAnchorElement;Ct.type==="radio"&&(Ct.name=`${Ct.name}-${vt}`);for(const[Pt,Rt]of Object.entries(Ct))if(Rt!=null)switch(Pt){case"class":Rt.length&&ht.setAttribute(Pt,Rt.join(" "));break;case"dataId":break;case"id":ht.setAttribute("data-element-id",Rt);break;case"style":Object.assign(ht.style,Rt);break;case"textContent":ht.textContent=Rt;break;default:(!xt||Pt!=="href"&&Pt!=="newWindow")&&ht.setAttribute(Pt,Rt)}xt&&wt.addLinkAttributes(ht,Ct.href,Ct.newWindow),ft&&Ct.dataId&&this.setupStorage(ht,Ct.dataId,dt,ft)}static render(ht){var _t;const dt=ht.annotationStorage,ft=ht.linkService,vt=ht.xfaHtml,wt=ht.intent||"display",Ct=document.createElement(vt.name);vt.attributes&&this.setAttributes({html:Ct,element:vt,intent:wt,linkService:ft});const xt=[[vt,-1,Ct]],Pt=ht.div;if(Pt.append(Ct),ht.viewport){const St=`matrix(${ht.viewport.transform.join(",")})`;Pt.style.transform=St}wt!=="richText"&&Pt.setAttribute("class","xfaLayer xfaFont");const Rt=[];for(;xt.length>0;){const[St,bt,Nt]=xt.at(-1);if(bt+1===St.children.length){xt.pop();continue}const kt=St.children[++xt.at(-1)[1]];if(kt===null)continue;const{name:Dt}=kt;if(Dt==="#text"){const Wt=document.createTextNode(kt.value);Rt.push(Wt),Nt.append(Wt);continue}let jt;if((_t=kt==null?void 0:kt.attributes)!=null&&_t.xmlns?jt=document.createElementNS(kt.attributes.xmlns,Dt):jt=document.createElement(Dt),Nt.append(jt),kt.attributes&&this.setAttributes({html:jt,element:kt,storage:dt,intent:wt,linkService:ft}),kt.children&&kt.children.length>0)xt.push([kt,-1,jt]);else if(kt.value){const Wt=document.createTextNode(kt.value);et.XfaText.shouldBuildText(Dt)&&Rt.push(Wt),jt.append(Wt)}}for(const St of Pt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))St.setAttribute("readOnly",!0);return{textDivs:Rt}}static update(ht){const dt=`matrix(${ht.viewport.transform.join(",")})`;ht.div.style.transform=dt,ht.div.hidden=!1}}s.XfaLayer=at},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerRenderTask=void 0,s.renderTextLayer=Nt;var et=a(1),at=a(8);const lt=1e5,ht=30,dt=.8,ft=new Map,vt=/^\s+$/g;function wt(kt,Dt){const jt=ft.get(kt);if(jt)return jt;Dt.save(),Dt.font=`${ht}px ${kt}`;const Wt=Dt.measureText("");let Yt=Wt.fontBoundingBoxAscent,Bt=Math.abs(Wt.fontBoundingBoxDescent);if(Yt){Dt.restore();const qt=Yt/(Yt+Bt);return ft.set(kt,qt),qt}Dt.strokeStyle="red",Dt.clearRect(0,0,ht,ht),Dt.strokeText("g",0,0);let zt=Dt.getImageData(0,0,ht,ht).data;Bt=0;for(let qt=zt.length-1-3;qt>=0;qt-=4)if(zt[qt]>0){Bt=Math.ceil(qt/4/ht);break}Dt.clearRect(0,0,ht,ht),Dt.strokeText("A",0,ht),zt=Dt.getImageData(0,0,ht,ht).data,Yt=0;for(let qt=0,nn=zt.length;qt<nn;qt+=4)if(zt[qt]>0){Yt=ht-Math.floor(qt/4/ht);break}if(Dt.restore(),Yt){const qt=Yt/(Yt+Bt);return ft.set(kt,qt),qt}return ft.set(kt,dt),dt}function Ct(kt,Dt,jt,Wt){const Yt=document.createElement("span"),Bt=kt._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:Dt.str!=="",hasEOL:Dt.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:Dt.str!=="",hasEOL:Dt.hasEOL,fontSize:0};kt._textDivs.push(Yt);const zt=et.Util.transform(kt._viewport.transform,Dt.transform);let qt=Math.atan2(zt[1],zt[0]);const nn=jt[Dt.fontName];nn.vertical&&(qt+=Math.PI/2);const Fn=Math.hypot(zt[2],zt[3]),dr=Fn*wt(nn.fontFamily,Wt);let ar,pr;qt===0?(ar=zt[4],pr=zt[5]-dr):(ar=zt[4]+dr*Math.sin(qt),pr=zt[5]-dr*Math.cos(qt)),Yt.style.left=`${ar}px`,Yt.style.top=`${pr}px`,Yt.style.fontSize=`${Fn}px`,Yt.style.fontFamily=nn.fontFamily,Bt.fontSize=Fn,Yt.setAttribute("role","presentation"),Yt.textContent=Dt.str,Yt.dir=Dt.dir,kt._fontInspectorEnabled&&(Yt.dataset.fontName=Dt.fontName),qt!==0&&(Bt.angle=qt*(180/Math.PI));let mr=!1;if(Dt.str.length>1||kt._enhanceTextSelection&&vt.test(Dt.str))mr=!0;else if(Dt.str!==" "&&Dt.transform[0]!==Dt.transform[3]){const cr=Math.abs(Dt.transform[0]),sr=Math.abs(Dt.transform[3]);cr!==sr&&Math.max(cr,sr)/Math.min(cr,sr)>1.5&&(mr=!0)}if(mr&&(nn.vertical?Bt.canvasWidth=Dt.height*kt._viewport.scale:Bt.canvasWidth=Dt.width*kt._viewport.scale),kt._textDivProperties.set(Yt,Bt),kt._textContentStream&&kt._layoutText(Yt),kt._enhanceTextSelection&&Bt.hasText){let cr=1,sr=0;qt!==0&&(cr=Math.cos(qt),sr=Math.sin(qt));const wr=(nn.vertical?Dt.height:Dt.width)*kt._viewport.scale,$r=Fn;let Sr,en;qt!==0?(Sr=[cr,sr,-sr,cr,ar,pr],en=et.Util.getAxialAlignedBoundingBox([0,0,wr,$r],Sr)):en=[ar,pr,ar+wr,pr+$r],kt._bounds.push({left:en[0],top:en[1],right:en[2],bottom:en[3],div:Yt,size:[wr,$r],m:Sr})}}function xt(kt){if(kt._canceled)return;const Dt=kt._textDivs,jt=kt._capability,Wt=Dt.length;if(Wt>lt){kt._renderingDone=!0,jt.resolve();return}if(!kt._textContentStream)for(let Yt=0;Yt<Wt;Yt++)kt._layoutText(Dt[Yt]);kt._renderingDone=!0,jt.resolve()}function Pt(kt,Dt,jt){let Wt=0;for(let Yt=0;Yt<jt;Yt++){const Bt=kt[Dt++];Bt>0&&(Wt=Wt?Math.min(Bt,Wt):Bt)}return Wt}function Rt(kt){const Dt=kt._bounds,jt=kt._viewport,Wt=_t(jt.width,jt.height,Dt);for(let Yt=0;Yt<Wt.length;Yt++){const Bt=Dt[Yt].div,zt=kt._textDivProperties.get(Bt);if(zt.angle===0){zt.paddingLeft=Dt[Yt].left-Wt[Yt].left,zt.paddingTop=Dt[Yt].top-Wt[Yt].top,zt.paddingRight=Wt[Yt].right-Dt[Yt].right,zt.paddingBottom=Wt[Yt].bottom-Dt[Yt].bottom,kt._textDivProperties.set(Bt,zt);continue}const qt=Wt[Yt],nn=Dt[Yt],Fn=nn.m,dr=Fn[0],ar=Fn[1],pr=[[0,0],[0,nn.size[1]],[nn.size[0],0],nn.size],mr=new Float64Array(64);for(let sr=0,wr=pr.length;sr<wr;sr++){const $r=et.Util.applyTransform(pr[sr],Fn);mr[sr+0]=dr&&(qt.left-$r[0])/dr,mr[sr+4]=ar&&(qt.top-$r[1])/ar,mr[sr+8]=dr&&(qt.right-$r[0])/dr,mr[sr+12]=ar&&(qt.bottom-$r[1])/ar,mr[sr+16]=ar&&(qt.left-$r[0])/-ar,mr[sr+20]=dr&&(qt.top-$r[1])/dr,mr[sr+24]=ar&&(qt.right-$r[0])/-ar,mr[sr+28]=dr&&(qt.bottom-$r[1])/dr,mr[sr+32]=dr&&(qt.left-$r[0])/-dr,mr[sr+36]=ar&&(qt.top-$r[1])/-ar,mr[sr+40]=dr&&(qt.right-$r[0])/-dr,mr[sr+44]=ar&&(qt.bottom-$r[1])/-ar,mr[sr+48]=ar&&(qt.left-$r[0])/ar,mr[sr+52]=dr&&(qt.top-$r[1])/-dr,mr[sr+56]=ar&&(qt.right-$r[0])/ar,mr[sr+60]=dr&&(qt.bottom-$r[1])/-dr}const cr=1+Math.min(Math.abs(dr),Math.abs(ar));zt.paddingLeft=Pt(mr,32,16)/cr,zt.paddingTop=Pt(mr,48,16)/cr,zt.paddingRight=Pt(mr,0,16)/cr,zt.paddingBottom=Pt(mr,16,16)/cr,kt._textDivProperties.set(Bt,zt)}}function _t(kt,Dt,jt){const Wt=jt.map(function(Bt,zt){return{x1:Bt.left,y1:Bt.top,x2:Bt.right,y2:Bt.bottom,index:zt,x1New:void 0,x2New:void 0}});St(kt,Wt);const Yt=new Array(jt.length);for(const Bt of Wt){const zt=Bt.index;Yt[zt]={left:Bt.x1New,top:0,right:Bt.x2New,bottom:0}}jt.map(function(Bt,zt){const qt=Yt[zt],nn=Wt[zt];nn.x1=Bt.top,nn.y1=kt-qt.right,nn.x2=Bt.bottom,nn.y2=kt-qt.left,nn.index=zt,nn.x1New=void 0,nn.x2New=void 0}),St(Dt,Wt);for(const Bt of Wt){const zt=Bt.index;Yt[zt].top=Bt.x1New,Yt[zt].bottom=Bt.x2New}return Yt}function St(kt,Dt){Dt.sort(function(Yt,Bt){return Yt.x1-Bt.x1||Yt.index-Bt.index});const Wt=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const Yt of Dt){let Bt=0;for(;Bt<Wt.length&&Wt[Bt].end<=Yt.y1;)Bt++;let zt=Wt.length-1;for(;zt>=0&&Wt[zt].start>=Yt.y2;)zt--;let qt,nn,Fn,dr,ar=-1/0;for(Fn=Bt;Fn<=zt;Fn++){qt=Wt[Fn],nn=qt.boundary;let cr;nn.x2>Yt.x1?cr=nn.index>Yt.index?nn.x1New:Yt.x1:nn.x2New===void 0?cr=(nn.x2+Yt.x1)/2:cr=nn.x2New,cr>ar&&(ar=cr)}for(Yt.x1New=ar,Fn=Bt;Fn<=zt;Fn++)qt=Wt[Fn],nn=qt.boundary,nn.x2New===void 0?nn.x2>Yt.x1?nn.index>Yt.index&&(nn.x2New=nn.x2):nn.x2New=ar:nn.x2New>ar&&(nn.x2New=Math.max(ar,nn.x2));const pr=[];let mr=null;for(Fn=Bt;Fn<=zt;Fn++){qt=Wt[Fn],nn=qt.boundary;const cr=nn.x2>Yt.x2?nn:Yt;mr===cr?pr.at(-1).end=qt.end:(pr.push({start:qt.start,end:qt.end,boundary:cr}),mr=cr)}for(Wt[Bt].start<Yt.y1&&(pr[0].start=Yt.y1,pr.unshift({start:Wt[Bt].start,end:Yt.y1,boundary:Wt[Bt].boundary})),Yt.y2<Wt[zt].end&&(pr.at(-1).end=Yt.y2,pr.push({start:Yt.y2,end:Wt[zt].end,boundary:Wt[zt].boundary})),Fn=Bt;Fn<=zt;Fn++){if(qt=Wt[Fn],nn=qt.boundary,nn.x2New!==void 0)continue;let cr=!1;for(dr=Bt-1;!cr&&dr>=0&&Wt[dr].start>=nn.y1;dr--)cr=Wt[dr].boundary===nn;for(dr=zt+1;!cr&&dr<Wt.length&&Wt[dr].end<=nn.y2;dr++)cr=Wt[dr].boundary===nn;for(dr=0;!cr&&dr<pr.length;dr++)cr=pr[dr].boundary===nn;cr||(nn.x2New=ar)}Array.prototype.splice.apply(Wt,[Bt,zt-Bt+1,...pr])}for(const Yt of Wt){const Bt=Yt.boundary;Bt.x2New===void 0&&(Bt.x2New=Math.max(kt,Bt.x2))}}class bt{constructor({textContent:Dt,textContentStream:jt,container:Wt,viewport:Yt,textDivs:Bt,textContentItemsStr:zt,enhanceTextSelection:qt}){var nn;qt&&(0,at.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=Dt,this._textContentStream=jt,this._container=Wt,this._document=Wt.ownerDocument,this._viewport=Yt,this._textDivs=Bt||[],this._textContentItemsStr=zt||[],this._enhanceTextSelection=!!qt,this._fontInspectorEnabled=!!((nn=globalThis.FontInspector)!=null&&nn.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,et.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new et.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(Dt,jt){for(let Wt=0,Yt=Dt.length;Wt<Yt;Wt++){if(Dt[Wt].str===void 0){if(Dt[Wt].type==="beginMarkedContentProps"||Dt[Wt].type==="beginMarkedContent"){const Bt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Dt[Wt].id!==null&&this._container.setAttribute("id",`${Dt[Wt].id}`),Bt.append(this._container)}else Dt[Wt].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Dt[Wt].str),Ct(this,Dt[Wt],jt,this._layoutTextCtx)}}_layoutText(Dt){const jt=this._textDivProperties.get(Dt);let Wt="";if(jt.canvasWidth!==0&&jt.hasText){const{fontFamily:Yt}=Dt.style,{fontSize:Bt}=jt;(Bt!==this._layoutTextLastFontSize||Yt!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${Bt*this._devicePixelRatio}px ${Yt}`,this._layoutTextLastFontSize=Bt,this._layoutTextLastFontFamily=Yt);const{width:zt}=this._layoutTextCtx.measureText(Dt.textContent);if(zt>0){const qt=this._devicePixelRatio*jt.canvasWidth/zt;this._enhanceTextSelection&&(jt.scale=qt),Wt=`scaleX(${qt})`}}if(jt.angle!==0&&(Wt=`rotate(${jt.angle}deg) ${Wt}`),Wt.length>0&&(this._enhanceTextSelection&&(jt.originalTransform=Wt),Dt.style.transform=Wt),jt.hasText&&this._container.append(Dt),jt.hasEOL){const Yt=document.createElement("br");Yt.setAttribute("role","presentation"),this._container.append(Yt)}}_render(Dt=0){const jt=(0,et.createPromiseCapability)();let Wt=Object.create(null);const Yt=this._document.createElement("canvas");if(Yt.height=Yt.width=ht,this._layoutTextCtx=Yt.getContext("2d",{alpha:!1}),this._textContent){const Bt=this._textContent.items,zt=this._textContent.styles;this._processItems(Bt,zt),jt.resolve()}else if(this._textContentStream){const Bt=()=>{this._reader.read().then(({value:zt,done:qt})=>{if(qt){jt.resolve();return}Object.assign(Wt,zt.styles),this._processItems(zt.items,Wt),Bt()},jt.reject)};this._reader=this._textContentStream.getReader(),Bt()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');jt.promise.then(()=>{Wt=null,Dt?this._renderTimer=setTimeout(()=>{xt(this),this._renderTimer=null},Dt):xt(this)},this._capability.reject)}expandTextDivs(Dt=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(Rt(this),this._bounds=null);const jt=[],Wt=[];for(let Yt=0,Bt=this._textDivs.length;Yt<Bt;Yt++){const zt=this._textDivs[Yt],qt=this._textDivProperties.get(zt);qt.hasText&&(Dt?(jt.length=0,Wt.length=0,qt.originalTransform&&jt.push(qt.originalTransform),qt.paddingTop>0?(Wt.push(`${qt.paddingTop}px`),jt.push(`translateY(${-qt.paddingTop}px)`)):Wt.push(0),qt.paddingRight>0?Wt.push(`${qt.paddingRight/qt.scale}px`):Wt.push(0),qt.paddingBottom>0?Wt.push(`${qt.paddingBottom}px`):Wt.push(0),qt.paddingLeft>0?(Wt.push(`${qt.paddingLeft/qt.scale}px`),jt.push(`translateX(${-qt.paddingLeft/qt.scale}px)`)):Wt.push(0),zt.style.padding=Wt.join(" "),jt.length&&(zt.style.transform=jt.join(" "))):(zt.style.padding=null,zt.style.transform=qt.originalTransform))}}}s.TextLayerRenderTask=bt;function Nt(kt){const Dt=new bt({textContent:kt.textContent,textContentStream:kt.textContentStream,container:kt.container,viewport:kt.viewport,textDivs:kt.textDivs,textContentItemsStr:kt.textContentItemsStr,enhanceTextSelection:kt.enhanceTextSelection});return Dt._render(kt.timeout),Dt}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SVGGraphics=void 0;var et=a(8),at=a(1),lt=a(3);let ht=class{constructor(){(0,at.unreachable)("Not implemented: SVGGraphics")}};s.SVGGraphics=ht;{let Nt=function(Bt){let zt=[];const qt=[];for(const nn of Bt){if(nn.fn==="save"){zt.push({fnId:92,fn:"group",items:[]}),qt.push(zt),zt=zt.at(-1).items;continue}nn.fn==="restore"?zt=qt.pop():zt.push(nn)}return zt},kt=function(Bt){if(Number.isInteger(Bt))return Bt.toString();const zt=Bt.toFixed(10);let qt=zt.length-1;if(zt[qt]!=="0")return zt;do qt--;while(zt[qt]==="0");return zt.substring(0,zt[qt]==="."?qt:qt+1)},Dt=function(Bt){if(Bt[4]===0&&Bt[5]===0){if(Bt[1]===0&&Bt[2]===0)return Bt[0]===1&&Bt[3]===1?"":`scale(${kt(Bt[0])} ${kt(Bt[3])})`;if(Bt[0]===Bt[3]&&Bt[1]===-Bt[2]){const zt=Math.acos(Bt[0])*180/Math.PI;return`rotate(${kt(zt)})`}}else if(Bt[0]===1&&Bt[1]===0&&Bt[2]===0&&Bt[3]===1)return`translate(${kt(Bt[4])} ${kt(Bt[5])})`;return`matrix(${kt(Bt[0])} ${kt(Bt[1])} ${kt(Bt[2])} ${kt(Bt[3])} ${kt(Bt[4])} ${kt(Bt[5])})`};var dt=Nt,ft=kt,vt=Dt;const wt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},Ct="http://www.w3.org/XML/1998/namespace",xt="http://www.w3.org/1999/xlink",Pt=["butt","round","square"],Rt=["miter","round","bevel"],_t=function(Bt,zt="",qt=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!qt)return URL.createObjectURL(new Blob([Bt],{type:zt}));const nn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Fn=`data:${zt};base64,`;for(let dr=0,ar=Bt.length;dr<ar;dr+=3){const pr=Bt[dr]&255,mr=Bt[dr+1]&255,cr=Bt[dr+2]&255,sr=pr>>2,wr=(pr&3)<<4|mr>>4,$r=dr+1<ar?(mr&15)<<2|cr>>6:64,Sr=dr+2<ar?cr&63:64;Fn+=nn[sr]+nn[wr]+nn[$r]+nn[Sr]}return Fn},St=function(){const Bt=new Uint8Array([137,80,78,71,13,10,26,10]),zt=12,qt=new Int32Array(256);for(let cr=0;cr<256;cr++){let sr=cr;for(let wr=0;wr<8;wr++)sr&1?sr=3988292384^sr>>1&2147483647:sr=sr>>1&2147483647;qt[cr]=sr}function nn(cr,sr,wr){let $r=-1;for(let Sr=sr;Sr<wr;Sr++){const en=($r^cr[Sr])&255,Kt=qt[en];$r=$r>>>8^Kt}return $r^-1}function Fn(cr,sr,wr,$r){let Sr=$r;const en=sr.length;wr[Sr]=en>>24&255,wr[Sr+1]=en>>16&255,wr[Sr+2]=en>>8&255,wr[Sr+3]=en&255,Sr+=4,wr[Sr]=cr.charCodeAt(0)&255,wr[Sr+1]=cr.charCodeAt(1)&255,wr[Sr+2]=cr.charCodeAt(2)&255,wr[Sr+3]=cr.charCodeAt(3)&255,Sr+=4,wr.set(sr,Sr),Sr+=sr.length;const Kt=nn(wr,$r+4,Sr);wr[Sr]=Kt>>24&255,wr[Sr+1]=Kt>>16&255,wr[Sr+2]=Kt>>8&255,wr[Sr+3]=Kt&255}function dr(cr,sr,wr){let $r=1,Sr=0;for(let en=sr;en<wr;++en)$r=($r+(cr[en]&255))%65521,Sr=(Sr+$r)%65521;return Sr<<16|$r}function ar(cr){if(!lt.isNodeJS)return pr(cr);try{let sr;parseInt(process.versions.node)>=8?sr=cr:sr=Buffer.from(cr);const wr=require$$5.deflateSync(sr,{level:9});return wr instanceof Uint8Array?wr:new Uint8Array(wr)}catch(sr){(0,at.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+sr)}return pr(cr)}function pr(cr){let sr=cr.length;const wr=65535,$r=Math.ceil(sr/wr),Sr=new Uint8Array(2+sr+$r*5+4);let en=0;Sr[en++]=120,Sr[en++]=156;let Kt=0;for(;sr>wr;)Sr[en++]=0,Sr[en++]=255,Sr[en++]=255,Sr[en++]=0,Sr[en++]=0,Sr.set(cr.subarray(Kt,Kt+wr),en),en+=wr,Kt+=wr,sr-=wr;Sr[en++]=1,Sr[en++]=sr&255,Sr[en++]=sr>>8&255,Sr[en++]=~sr&65535&255,Sr[en++]=(~sr&65535)>>8&255,Sr.set(cr.subarray(Kt),en),en+=cr.length-Kt;const Gt=dr(cr,0,cr.length);return Sr[en++]=Gt>>24&255,Sr[en++]=Gt>>16&255,Sr[en++]=Gt>>8&255,Sr[en++]=Gt&255,Sr}function mr(cr,sr,wr,$r){const Sr=cr.width,en=cr.height;let Kt,Gt,mn;const Jt=cr.data;switch(sr){case at.ImageKind.GRAYSCALE_1BPP:Gt=0,Kt=1,mn=Sr+7>>3;break;case at.ImageKind.RGB_24BPP:Gt=2,Kt=8,mn=Sr*3;break;case at.ImageKind.RGBA_32BPP:Gt=6,Kt=8,mn=Sr*4;break;default:throw new Error("invalid format")}const rr=new Uint8Array((1+mn)*en);let Tn=0,fr=0;for(let $n=0;$n<en;++$n)rr[Tn++]=0,rr.set(Jt.subarray(fr,fr+mn),Tn),fr+=mn,Tn+=mn;if(sr===at.ImageKind.GRAYSCALE_1BPP&&$r){Tn=0;for(let $n=0;$n<en;$n++){Tn++;for(let lr=0;lr<mn;lr++)rr[Tn++]^=255}}const ur=new Uint8Array([Sr>>24&255,Sr>>16&255,Sr>>8&255,Sr&255,en>>24&255,en>>16&255,en>>8&255,en&255,Kt,Gt,0,0,0]),Ht=ar(rr),Xt=Bt.length+zt*3+ur.length+Ht.length,Zt=new Uint8Array(Xt);let tn=0;return Zt.set(Bt,tn),tn+=Bt.length,Fn("IHDR",ur,Zt,tn),tn+=zt+ur.length,Fn("IDATA",Ht,Zt,tn),tn+=zt+Ht.length,Fn("IEND",new Uint8Array(0),Zt,tn),_t(Zt,"image/png",wr)}return function(sr,wr,$r){const Sr=sr.kind===void 0?at.ImageKind.GRAYSCALE_1BPP:sr.kind;return mr(sr,Sr,wr,$r)}}();class bt{constructor(){this.fontSizeScale=1,this.fontWeight=wt.fontWeight,this.fontSize=0,this.textMatrix=at.IDENTITY_MATRIX,this.fontMatrix=at.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=at.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=wt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(zt,qt){this.x=zt,this.y=qt}}let jt=0,Wt=0,Yt=0;s.SVGGraphics=ht=class{constructor(Bt,zt,qt=!1){(0,et.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new et.DOMSVGFactory,this.current=new bt,this.transformMatrix=at.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Bt,this.objs=zt,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!qt,this._operatorIdMapping=[];for(const nn in at.OPS)this._operatorIdMapping[at.OPS[nn]]=nn}save(){this.transformStack.push(this.transformMatrix);const Bt=this.current;this.extraStack.push(Bt),this.current=Bt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Bt){this.save(),this.executeOpTree(Bt),this.restore()}loadDependencies(Bt){const zt=Bt.fnArray,qt=Bt.argsArray;for(let nn=0,Fn=zt.length;nn<Fn;nn++)if(zt[nn]===at.OPS.dependency)for(const dr of qt[nn]){const ar=dr.startsWith("g_")?this.commonObjs:this.objs,pr=new Promise(mr=>{ar.get(dr,mr)});this.current.dependencies.push(pr)}return Promise.all(this.current.dependencies)}transform(Bt,zt,qt,nn,Fn,dr){const ar=[Bt,zt,qt,nn,Fn,dr];this.transformMatrix=at.Util.transform(this.transformMatrix,ar),this.tgrp=null}getSVG(Bt,zt){this.viewport=zt;const qt=this._initialize(zt);return this.loadDependencies(Bt).then(()=>(this.transformMatrix=at.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Bt)),qt))}convertOpList(Bt){const zt=this._operatorIdMapping,qt=Bt.argsArray,nn=Bt.fnArray,Fn=[];for(let dr=0,ar=nn.length;dr<ar;dr++){const pr=nn[dr];Fn.push({fnId:pr,fn:zt[pr],args:qt[dr]})}return Nt(Fn)}executeOpTree(Bt){for(const zt of Bt){const qt=zt.fn,nn=zt.fnId,Fn=zt.args;switch(nn|0){case at.OPS.beginText:this.beginText();break;case at.OPS.dependency:break;case at.OPS.setLeading:this.setLeading(Fn);break;case at.OPS.setLeadingMoveText:this.setLeadingMoveText(Fn[0],Fn[1]);break;case at.OPS.setFont:this.setFont(Fn);break;case at.OPS.showText:this.showText(Fn[0]);break;case at.OPS.showSpacedText:this.showText(Fn[0]);break;case at.OPS.endText:this.endText();break;case at.OPS.moveText:this.moveText(Fn[0],Fn[1]);break;case at.OPS.setCharSpacing:this.setCharSpacing(Fn[0]);break;case at.OPS.setWordSpacing:this.setWordSpacing(Fn[0]);break;case at.OPS.setHScale:this.setHScale(Fn[0]);break;case at.OPS.setTextMatrix:this.setTextMatrix(Fn[0],Fn[1],Fn[2],Fn[3],Fn[4],Fn[5]);break;case at.OPS.setTextRise:this.setTextRise(Fn[0]);break;case at.OPS.setTextRenderingMode:this.setTextRenderingMode(Fn[0]);break;case at.OPS.setLineWidth:this.setLineWidth(Fn[0]);break;case at.OPS.setLineJoin:this.setLineJoin(Fn[0]);break;case at.OPS.setLineCap:this.setLineCap(Fn[0]);break;case at.OPS.setMiterLimit:this.setMiterLimit(Fn[0]);break;case at.OPS.setFillRGBColor:this.setFillRGBColor(Fn[0],Fn[1],Fn[2]);break;case at.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Fn[0],Fn[1],Fn[2]);break;case at.OPS.setStrokeColorN:this.setStrokeColorN(Fn);break;case at.OPS.setFillColorN:this.setFillColorN(Fn);break;case at.OPS.shadingFill:this.shadingFill(Fn[0]);break;case at.OPS.setDash:this.setDash(Fn[0],Fn[1]);break;case at.OPS.setRenderingIntent:this.setRenderingIntent(Fn[0]);break;case at.OPS.setFlatness:this.setFlatness(Fn[0]);break;case at.OPS.setGState:this.setGState(Fn[0]);break;case at.OPS.fill:this.fill();break;case at.OPS.eoFill:this.eoFill();break;case at.OPS.stroke:this.stroke();break;case at.OPS.fillStroke:this.fillStroke();break;case at.OPS.eoFillStroke:this.eoFillStroke();break;case at.OPS.clip:this.clip("nonzero");break;case at.OPS.eoClip:this.clip("evenodd");break;case at.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case at.OPS.paintImageXObject:this.paintImageXObject(Fn[0]);break;case at.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Fn[0]);break;case at.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Fn[0]);break;case at.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Fn[0],Fn[1]);break;case at.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case at.OPS.closePath:this.closePath();break;case at.OPS.closeStroke:this.closeStroke();break;case at.OPS.closeFillStroke:this.closeFillStroke();break;case at.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case at.OPS.nextLine:this.nextLine();break;case at.OPS.transform:this.transform(Fn[0],Fn[1],Fn[2],Fn[3],Fn[4],Fn[5]);break;case at.OPS.constructPath:this.constructPath(Fn[0],Fn[1]);break;case at.OPS.endPath:this.endPath();break;case 92:this.group(zt.items);break;default:(0,at.warn)(`Unimplemented operator ${qt}`);break}}}setWordSpacing(Bt){this.current.wordSpacing=Bt}setCharSpacing(Bt){this.current.charSpacing=Bt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Bt,zt,qt,nn,Fn,dr){const ar=this.current;ar.textMatrix=ar.lineMatrix=[Bt,zt,qt,nn,Fn,dr],ar.textMatrixScale=Math.hypot(Bt,zt),ar.x=ar.lineX=0,ar.y=ar.lineY=0,ar.xcoords=[],ar.ycoords=[],ar.tspan=this.svgFactory.createElement("svg:tspan"),ar.tspan.setAttributeNS(null,"font-family",ar.fontFamily),ar.tspan.setAttributeNS(null,"font-size",`${kt(ar.fontSize)}px`),ar.tspan.setAttributeNS(null,"y",kt(-ar.y)),ar.txtElement=this.svgFactory.createElement("svg:text"),ar.txtElement.append(ar.tspan)}beginText(){const Bt=this.current;Bt.x=Bt.lineX=0,Bt.y=Bt.lineY=0,Bt.textMatrix=at.IDENTITY_MATRIX,Bt.lineMatrix=at.IDENTITY_MATRIX,Bt.textMatrixScale=1,Bt.tspan=this.svgFactory.createElement("svg:tspan"),Bt.txtElement=this.svgFactory.createElement("svg:text"),Bt.txtgrp=this.svgFactory.createElement("svg:g"),Bt.xcoords=[],Bt.ycoords=[]}moveText(Bt,zt){const qt=this.current;qt.x=qt.lineX+=Bt,qt.y=qt.lineY+=zt,qt.xcoords=[],qt.ycoords=[],qt.tspan=this.svgFactory.createElement("svg:tspan"),qt.tspan.setAttributeNS(null,"font-family",qt.fontFamily),qt.tspan.setAttributeNS(null,"font-size",`${kt(qt.fontSize)}px`),qt.tspan.setAttributeNS(null,"y",kt(-qt.y))}showText(Bt){const zt=this.current,qt=zt.font,nn=zt.fontSize;if(nn===0)return;const Fn=zt.fontSizeScale,dr=zt.charSpacing,ar=zt.wordSpacing,pr=zt.fontDirection,mr=zt.textHScale*pr,cr=qt.vertical,sr=cr?1:-1,wr=qt.defaultVMetrics,$r=nn*zt.fontMatrix[0];let Sr=0;for(const Gt of Bt){if(Gt===null){Sr+=pr*ar;continue}else if(typeof Gt=="number"){Sr+=sr*Gt*nn/1e3;continue}const mn=(Gt.isSpace?ar:0)+dr,Jt=Gt.fontChar;let rr,Tn,fr=Gt.width;if(cr){let Ht;const Xt=Gt.vmetric||wr;Ht=Gt.vmetric?Xt[1]:fr*.5,Ht=-Ht*$r;const Zt=Xt[2]*$r;fr=Xt?-Xt[0]:fr,rr=Ht/Fn,Tn=(Sr+Zt)/Fn}else rr=Sr/Fn,Tn=0;(Gt.isInFont||qt.missingFile)&&(zt.xcoords.push(zt.x+rr),cr&&zt.ycoords.push(-zt.y+Tn),zt.tspan.textContent+=Jt);let ur;cr?ur=fr*$r-mn*pr:ur=fr*$r+mn*pr,Sr+=ur}zt.tspan.setAttributeNS(null,"x",zt.xcoords.map(kt).join(" ")),cr?zt.tspan.setAttributeNS(null,"y",zt.ycoords.map(kt).join(" ")):zt.tspan.setAttributeNS(null,"y",kt(-zt.y)),cr?zt.y-=Sr:zt.x+=Sr*mr,zt.tspan.setAttributeNS(null,"font-family",zt.fontFamily),zt.tspan.setAttributeNS(null,"font-size",`${kt(zt.fontSize)}px`),zt.fontStyle!==wt.fontStyle&&zt.tspan.setAttributeNS(null,"font-style",zt.fontStyle),zt.fontWeight!==wt.fontWeight&&zt.tspan.setAttributeNS(null,"font-weight",zt.fontWeight);const en=zt.textRenderingMode&at.TextRenderingMode.FILL_STROKE_MASK;if(en===at.TextRenderingMode.FILL||en===at.TextRenderingMode.FILL_STROKE?(zt.fillColor!==wt.fillColor&&zt.tspan.setAttributeNS(null,"fill",zt.fillColor),zt.fillAlpha<1&&zt.tspan.setAttributeNS(null,"fill-opacity",zt.fillAlpha)):zt.textRenderingMode===at.TextRenderingMode.ADD_TO_PATH?zt.tspan.setAttributeNS(null,"fill","transparent"):zt.tspan.setAttributeNS(null,"fill","none"),en===at.TextRenderingMode.STROKE||en===at.TextRenderingMode.FILL_STROKE){const Gt=1/(zt.textMatrixScale||1);this._setStrokeAttributes(zt.tspan,Gt)}let Kt=zt.textMatrix;zt.textRise!==0&&(Kt=Kt.slice(),Kt[5]+=zt.textRise),zt.txtElement.setAttributeNS(null,"transform",`${Dt(Kt)} scale(${kt(mr)}, -1)`),zt.txtElement.setAttributeNS(Ct,"xml:space","preserve"),zt.txtElement.append(zt.tspan),zt.txtgrp.append(zt.txtElement),this._ensureTransformGroup().append(zt.txtElement)}setLeadingMoveText(Bt,zt){this.setLeading(-zt),this.moveText(Bt,zt)}addFontStyle(Bt){if(!Bt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const zt=_t(Bt.data,Bt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Bt.loadedName}"; src: url(${zt}); }
`}setFont(Bt){const zt=this.current,qt=this.commonObjs.get(Bt[0]);let nn=Bt[1];zt.font=qt,this.embedFonts&&!qt.missingFile&&!this.embeddedFonts[qt.loadedName]&&(this.addFontStyle(qt),this.embeddedFonts[qt.loadedName]=qt),zt.fontMatrix=qt.fontMatrix||at.FONT_IDENTITY_MATRIX;let Fn="normal";qt.black?Fn="900":qt.bold&&(Fn="bold");const dr=qt.italic?"italic":"normal";nn<0?(nn=-nn,zt.fontDirection=-1):zt.fontDirection=1,zt.fontSize=nn,zt.fontFamily=qt.loadedName,zt.fontWeight=Fn,zt.fontStyle=dr,zt.tspan=this.svgFactory.createElement("svg:tspan"),zt.tspan.setAttributeNS(null,"y",kt(-zt.y)),zt.xcoords=[],zt.ycoords=[]}endText(){var zt;const Bt=this.current;Bt.textRenderingMode&at.TextRenderingMode.ADD_TO_PATH_FLAG&&((zt=Bt.txtElement)!=null&&zt.hasChildNodes())&&(Bt.element=Bt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Bt){Bt>0&&(this.current.lineWidth=Bt)}setLineCap(Bt){this.current.lineCap=Pt[Bt]}setLineJoin(Bt){this.current.lineJoin=Rt[Bt]}setMiterLimit(Bt){this.current.miterLimit=Bt}setStrokeAlpha(Bt){this.current.strokeAlpha=Bt}setStrokeRGBColor(Bt,zt,qt){this.current.strokeColor=at.Util.makeHexColor(Bt,zt,qt)}setFillAlpha(Bt){this.current.fillAlpha=Bt}setFillRGBColor(Bt,zt,qt){this.current.fillColor=at.Util.makeHexColor(Bt,zt,qt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Bt){this.current.strokeColor=this._makeColorN_Pattern(Bt)}setFillColorN(Bt){this.current.fillColor=this._makeColorN_Pattern(Bt)}shadingFill(Bt){const zt=this.viewport.width,qt=this.viewport.height,nn=at.Util.inverseTransform(this.transformMatrix),Fn=at.Util.applyTransform([0,0],nn),dr=at.Util.applyTransform([0,qt],nn),ar=at.Util.applyTransform([zt,0],nn),pr=at.Util.applyTransform([zt,qt],nn),mr=Math.min(Fn[0],dr[0],ar[0],pr[0]),cr=Math.min(Fn[1],dr[1],ar[1],pr[1]),sr=Math.max(Fn[0],dr[0],ar[0],pr[0]),wr=Math.max(Fn[1],dr[1],ar[1],pr[1]),$r=this.svgFactory.createElement("svg:rect");$r.setAttributeNS(null,"x",mr),$r.setAttributeNS(null,"y",cr),$r.setAttributeNS(null,"width",sr-mr),$r.setAttributeNS(null,"height",wr-cr),$r.setAttributeNS(null,"fill",this._makeShadingPattern(Bt)),this.current.fillAlpha<1&&$r.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($r)}_makeColorN_Pattern(Bt){return Bt[0]==="TilingPattern"?this._makeTilingPattern(Bt):this._makeShadingPattern(Bt)}_makeTilingPattern(Bt){const zt=Bt[1],qt=Bt[2],nn=Bt[3]||at.IDENTITY_MATRIX,[Fn,dr,ar,pr]=Bt[4],mr=Bt[5],cr=Bt[6],sr=Bt[7],wr=`shading${Yt++}`,[$r,Sr,en,Kt]=at.Util.normalizeRect([...at.Util.applyTransform([Fn,dr],nn),...at.Util.applyTransform([ar,pr],nn)]),[Gt,mn]=at.Util.singularValueDecompose2dScale(nn),Jt=mr*Gt,rr=cr*mn,Tn=this.svgFactory.createElement("svg:pattern");Tn.setAttributeNS(null,"id",wr),Tn.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Tn.setAttributeNS(null,"width",Jt),Tn.setAttributeNS(null,"height",rr),Tn.setAttributeNS(null,"x",`${$r}`),Tn.setAttributeNS(null,"y",`${Sr}`);const fr=this.svg,ur=this.transformMatrix,Ht=this.current.fillColor,Xt=this.current.strokeColor,Zt=this.svgFactory.create(en-$r,Kt-Sr);if(this.svg=Zt,this.transformMatrix=nn,sr===2){const tn=at.Util.makeHexColor(...zt);this.current.fillColor=tn,this.current.strokeColor=tn}return this.executeOpTree(this.convertOpList(qt)),this.svg=fr,this.transformMatrix=ur,this.current.fillColor=Ht,this.current.strokeColor=Xt,Tn.append(Zt.childNodes[0]),this.defs.append(Tn),`url(#${wr})`}_makeShadingPattern(Bt){switch(typeof Bt=="string"&&(Bt=this.objs.get(Bt)),Bt[0]){case"RadialAxial":const zt=`shading${Yt++}`,qt=Bt[3];let nn;switch(Bt[1]){case"axial":const Fn=Bt[4],dr=Bt[5];nn=this.svgFactory.createElement("svg:linearGradient"),nn.setAttributeNS(null,"id",zt),nn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),nn.setAttributeNS(null,"x1",Fn[0]),nn.setAttributeNS(null,"y1",Fn[1]),nn.setAttributeNS(null,"x2",dr[0]),nn.setAttributeNS(null,"y2",dr[1]);break;case"radial":const ar=Bt[4],pr=Bt[5],mr=Bt[6],cr=Bt[7];nn=this.svgFactory.createElement("svg:radialGradient"),nn.setAttributeNS(null,"id",zt),nn.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),nn.setAttributeNS(null,"cx",pr[0]),nn.setAttributeNS(null,"cy",pr[1]),nn.setAttributeNS(null,"r",cr),nn.setAttributeNS(null,"fx",ar[0]),nn.setAttributeNS(null,"fy",ar[1]),nn.setAttributeNS(null,"fr",mr);break;default:throw new Error(`Unknown RadialAxial type: ${Bt[1]}`)}for(const Fn of qt){const dr=this.svgFactory.createElement("svg:stop");dr.setAttributeNS(null,"offset",Fn[0]),dr.setAttributeNS(null,"stop-color",Fn[1]),nn.append(dr)}return this.defs.append(nn),`url(#${zt})`;case"Mesh":return(0,at.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Bt[0]}`)}}setDash(Bt,zt){this.current.dashArray=Bt,this.current.dashPhase=zt}constructPath(Bt,zt){const qt=this.current;let nn=qt.x,Fn=qt.y,dr=[],ar=0;for(const pr of Bt)switch(pr|0){case at.OPS.rectangle:nn=zt[ar++],Fn=zt[ar++];const mr=zt[ar++],cr=zt[ar++],sr=nn+mr,wr=Fn+cr;dr.push("M",kt(nn),kt(Fn),"L",kt(sr),kt(Fn),"L",kt(sr),kt(wr),"L",kt(nn),kt(wr),"Z");break;case at.OPS.moveTo:nn=zt[ar++],Fn=zt[ar++],dr.push("M",kt(nn),kt(Fn));break;case at.OPS.lineTo:nn=zt[ar++],Fn=zt[ar++],dr.push("L",kt(nn),kt(Fn));break;case at.OPS.curveTo:nn=zt[ar+4],Fn=zt[ar+5],dr.push("C",kt(zt[ar]),kt(zt[ar+1]),kt(zt[ar+2]),kt(zt[ar+3]),kt(nn),kt(Fn)),ar+=6;break;case at.OPS.curveTo2:dr.push("C",kt(nn),kt(Fn),kt(zt[ar]),kt(zt[ar+1]),kt(zt[ar+2]),kt(zt[ar+3])),nn=zt[ar+2],Fn=zt[ar+3],ar+=4;break;case at.OPS.curveTo3:nn=zt[ar+2],Fn=zt[ar+3],dr.push("C",kt(zt[ar]),kt(zt[ar+1]),kt(nn),kt(Fn),kt(nn),kt(Fn)),ar+=4;break;case at.OPS.closePath:dr.push("Z");break}dr=dr.join(" "),qt.path&&Bt.length>0&&Bt[0]!==at.OPS.rectangle&&Bt[0]!==at.OPS.moveTo?dr=qt.path.getAttributeNS(null,"d")+dr:(qt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(qt.path)),qt.path.setAttributeNS(null,"d",dr),qt.path.setAttributeNS(null,"fill","none"),qt.element=qt.path,qt.setCurrentPoint(nn,Fn)}endPath(){const Bt=this.current;if(Bt.path=null,!this.pendingClip)return;if(!Bt.element){this.pendingClip=null;return}const zt=`clippath${jt++}`,qt=this.svgFactory.createElement("svg:clipPath");qt.setAttributeNS(null,"id",zt),qt.setAttributeNS(null,"transform",Dt(this.transformMatrix));const nn=Bt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?nn.setAttributeNS(null,"clip-rule","evenodd"):nn.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,qt.append(nn),this.defs.append(qt),Bt.activeClipUrl){Bt.clipGroup=null;for(const Fn of this.extraStack)Fn.clipGroup=null;qt.setAttributeNS(null,"clip-path",Bt.activeClipUrl)}Bt.activeClipUrl=`url(#${zt})`,this.tgrp=null}clip(Bt){this.pendingClip=Bt}closePath(){const Bt=this.current;if(Bt.path){const zt=`${Bt.path.getAttributeNS(null,"d")}Z`;Bt.path.setAttributeNS(null,"d",zt)}}setLeading(Bt){this.current.leading=-Bt}setTextRise(Bt){this.current.textRise=Bt}setTextRenderingMode(Bt){this.current.textRenderingMode=Bt}setHScale(Bt){this.current.textHScale=Bt/100}setRenderingIntent(Bt){}setFlatness(Bt){}setGState(Bt){for(const[zt,qt]of Bt)switch(zt){case"LW":this.setLineWidth(qt);break;case"LC":this.setLineCap(qt);break;case"LJ":this.setLineJoin(qt);break;case"ML":this.setMiterLimit(qt);break;case"D":this.setDash(qt[0],qt[1]);break;case"RI":this.setRenderingIntent(qt);break;case"FL":this.setFlatness(qt);break;case"Font":this.setFont(qt);break;case"CA":this.setStrokeAlpha(qt);break;case"ca":this.setFillAlpha(qt);break;default:(0,at.warn)(`Unimplemented graphic state operator ${zt}`);break}}fill(){const Bt=this.current;Bt.element&&(Bt.element.setAttributeNS(null,"fill",Bt.fillColor),Bt.element.setAttributeNS(null,"fill-opacity",Bt.fillAlpha),this.endPath())}stroke(){const Bt=this.current;Bt.element&&(this._setStrokeAttributes(Bt.element),Bt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Bt,zt=1){const qt=this.current;let nn=qt.dashArray;zt!==1&&nn.length>0&&(nn=nn.map(function(Fn){return zt*Fn})),Bt.setAttributeNS(null,"stroke",qt.strokeColor),Bt.setAttributeNS(null,"stroke-opacity",qt.strokeAlpha),Bt.setAttributeNS(null,"stroke-miterlimit",kt(qt.miterLimit)),Bt.setAttributeNS(null,"stroke-linecap",qt.lineCap),Bt.setAttributeNS(null,"stroke-linejoin",qt.lineJoin),Bt.setAttributeNS(null,"stroke-width",kt(zt*qt.lineWidth)+"px"),Bt.setAttributeNS(null,"stroke-dasharray",nn.map(kt).join(" ")),Bt.setAttributeNS(null,"stroke-dashoffset",kt(zt*qt.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Bt=this.svgFactory.createElement("svg:rect");Bt.setAttributeNS(null,"x","0"),Bt.setAttributeNS(null,"y","0"),Bt.setAttributeNS(null,"width","1px"),Bt.setAttributeNS(null,"height","1px"),Bt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Bt)}paintImageXObject(Bt){const zt=Bt.startsWith("g_")?this.commonObjs.get(Bt):this.objs.get(Bt);if(!zt){(0,at.warn)(`Dependent image with object ID ${Bt} is not ready yet`);return}this.paintInlineImageXObject(zt)}paintInlineImageXObject(Bt,zt){const qt=Bt.width,nn=Bt.height,Fn=St(Bt,this.forceDataSchema,!!zt),dr=this.svgFactory.createElement("svg:rect");dr.setAttributeNS(null,"x","0"),dr.setAttributeNS(null,"y","0"),dr.setAttributeNS(null,"width",kt(qt)),dr.setAttributeNS(null,"height",kt(nn)),this.current.element=dr,this.clip("nonzero");const ar=this.svgFactory.createElement("svg:image");ar.setAttributeNS(xt,"xlink:href",Fn),ar.setAttributeNS(null,"x","0"),ar.setAttributeNS(null,"y",kt(-nn)),ar.setAttributeNS(null,"width",kt(qt)+"px"),ar.setAttributeNS(null,"height",kt(nn)+"px"),ar.setAttributeNS(null,"transform",`scale(${kt(1/qt)} ${kt(-1/nn)})`),zt?zt.append(ar):this._ensureTransformGroup().append(ar)}paintImageMaskXObject(Bt){const zt=this.current,qt=Bt.width,nn=Bt.height,Fn=zt.fillColor;zt.maskId=`mask${Wt++}`;const dr=this.svgFactory.createElement("svg:mask");dr.setAttributeNS(null,"id",zt.maskId);const ar=this.svgFactory.createElement("svg:rect");ar.setAttributeNS(null,"x","0"),ar.setAttributeNS(null,"y","0"),ar.setAttributeNS(null,"width",kt(qt)),ar.setAttributeNS(null,"height",kt(nn)),ar.setAttributeNS(null,"fill",Fn),ar.setAttributeNS(null,"mask",`url(#${zt.maskId})`),this.defs.append(dr),this._ensureTransformGroup().append(ar),this.paintInlineImageXObject(Bt,dr)}paintFormXObjectBegin(Bt,zt){if(Array.isArray(Bt)&&Bt.length===6&&this.transform(Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5]),zt){const qt=zt[2]-zt[0],nn=zt[3]-zt[1],Fn=this.svgFactory.createElement("svg:rect");Fn.setAttributeNS(null,"x",zt[0]),Fn.setAttributeNS(null,"y",zt[1]),Fn.setAttributeNS(null,"width",kt(qt)),Fn.setAttributeNS(null,"height",kt(nn)),this.current.element=Fn,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Bt){const zt=this.svgFactory.create(Bt.width,Bt.height),qt=this.svgFactory.createElement("svg:defs");zt.append(qt),this.defs=qt;const nn=this.svgFactory.createElement("svg:g");return nn.setAttributeNS(null,"transform",Dt(Bt.transform)),zt.append(nn),this.svg=nn,zt}_ensureClipGroup(){if(!this.current.clipGroup){const Bt=this.svgFactory.createElement("svg:g");Bt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Bt),this.current.clipGroup=Bt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",Dt(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNodeStream=void 0;var et=a(1),at=a(33);const lt=require$$5,ht=require$$5,dt=require$$5,ft=require$$5,vt=/^file:\/\/\/[a-zA-Z]:\//;function wt(kt){const Dt=ft.parse(kt);return Dt.protocol==="file:"||Dt.host?Dt:/^[a-z]:[/\\]/i.test(kt)?ft.parse(`file:///${kt}`):(Dt.host||(Dt.protocol="file:"),Dt)}class Ct{constructor(Dt){this.source=Dt,this.url=wt(Dt.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Dt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Dt;return((Dt=this._fullRequestReader)==null?void 0:Dt._loaded)??0}getFullReader(){return(0,et.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new bt(this):new _t(this),this._fullRequestReader}getRangeReader(Dt,jt){if(jt<=this._progressiveDataLength)return null;const Wt=this.isFsUrl?new Nt(this,Dt,jt):new St(this,Dt,jt);return this._rangeRequestReaders.push(Wt),Wt}cancelAllRequests(Dt){this._fullRequestReader&&this._fullRequestReader.cancel(Dt);for(const jt of this._rangeRequestReaders.slice(0))jt.cancel(Dt)}}s.PDFNodeStream=Ct;class xt{constructor(Dt){this._url=Dt.url,this._done=!1,this._storedError=null,this.onProgress=null;const jt=Dt.source;this._contentLength=jt.length,this._loaded=0,this._filename=null,this._disableRange=jt.disableRange||!1,this._rangeChunkSize=jt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!jt.disableStream,this._isRangeSupported=!jt.disableRange,this._readableStream=null,this._readCapability=(0,et.createPromiseCapability)(),this._headersCapability=(0,et.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Dt=this._readableStream.read();return Dt===null?(this._readCapability=(0,et.createPromiseCapability)(),this.read()):(this._loaded+=Dt.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Dt).buffer,done:!1})}cancel(Dt){if(!this._readableStream){this._error(Dt);return}this._readableStream.destroy(Dt)}_error(Dt){this._storedError=Dt,this._readCapability.resolve()}_setReadableStream(Dt){this._readableStream=Dt,Dt.on("readable",()=>{this._readCapability.resolve()}),Dt.on("end",()=>{Dt.destroy(),this._done=!0,this._readCapability.resolve()}),Dt.on("error",jt=>{this._error(jt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new et.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Pt{constructor(Dt){this._url=Dt.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,et.createPromiseCapability)();const jt=Dt.source;this._isStreamingSupported=!jt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Dt=this._readableStream.read();return Dt===null?(this._readCapability=(0,et.createPromiseCapability)(),this.read()):(this._loaded+=Dt.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(Dt).buffer,done:!1})}cancel(Dt){if(!this._readableStream){this._error(Dt);return}this._readableStream.destroy(Dt)}_error(Dt){this._storedError=Dt,this._readCapability.resolve()}_setReadableStream(Dt){this._readableStream=Dt,Dt.on("readable",()=>{this._readCapability.resolve()}),Dt.on("end",()=>{Dt.destroy(),this._done=!0,this._readCapability.resolve()}),Dt.on("error",jt=>{this._error(jt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function Rt(kt,Dt){return{protocol:kt.protocol,auth:kt.auth,host:kt.hostname,port:kt.port,path:kt.path,method:"GET",headers:Dt}}class _t extends xt{constructor(Dt){super(Dt);const jt=Wt=>{if(Wt.statusCode===404){const qt=new et.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=qt,this._headersCapability.reject(qt);return}this._headersCapability.resolve(),this._setReadableStream(Wt);const Yt=qt=>this._readableStream.headers[qt.toLowerCase()],{allowRangeRequests:Bt,suggestedLength:zt}=(0,at.validateRangeRequestCapabilities)({getResponseHeader:Yt,isHttp:Dt.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Bt,this._contentLength=zt||this._contentLength,this._filename=(0,at.extractFilenameFromHeader)(Yt)};this._request=null,this._url.protocol==="http:"?this._request=ht.request(Rt(this._url,Dt.httpHeaders),jt):this._request=dt.request(Rt(this._url,Dt.httpHeaders),jt),this._request.on("error",Wt=>{this._storedError=Wt,this._headersCapability.reject(Wt)}),this._request.end()}}class St extends Pt{constructor(Dt,jt,Wt){super(Dt),this._httpHeaders={};for(const Bt in Dt.httpHeaders){const zt=Dt.httpHeaders[Bt];typeof zt>"u"||(this._httpHeaders[Bt]=zt)}this._httpHeaders.Range=`bytes=${jt}-${Wt-1}`;const Yt=Bt=>{if(Bt.statusCode===404){const zt=new et.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=zt;return}this._setReadableStream(Bt)};this._request=null,this._url.protocol==="http:"?this._request=ht.request(Rt(this._url,this._httpHeaders),Yt):this._request=dt.request(Rt(this._url,this._httpHeaders),Yt),this._request.on("error",Bt=>{this._storedError=Bt}),this._request.end()}}class bt extends xt{constructor(Dt){super(Dt);let jt=decodeURIComponent(this._url.path);vt.test(this._url.href)&&(jt=jt.replace(/^\//,"")),lt.lstat(jt,(Wt,Yt)=>{if(Wt){Wt.code==="ENOENT"&&(Wt=new et.MissingPDFException(`Missing PDF "${jt}".`)),this._storedError=Wt,this._headersCapability.reject(Wt);return}this._contentLength=Yt.size,this._setReadableStream(lt.createReadStream(jt)),this._headersCapability.resolve()})}}class Nt extends Pt{constructor(Dt,jt,Wt){super(Dt);let Yt=decodeURIComponent(this._url.path);vt.test(this._url.href)&&(Yt=Yt.replace(/^\//,"")),this._setReadableStream(lt.createReadStream(Yt,{start:jt,end:Wt-1}))}}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.createResponseStatusError=ft,s.extractFilenameFromHeader=dt,s.validateRangeRequestCapabilities=ht,s.validateResponseStatus=vt;var et=a(1),at=a(34),lt=a(8);function ht({getResponseHeader:wt,isHttp:Ct,rangeChunkSize:xt,disableRange:Pt}){const Rt={allowRangeRequests:!1,suggestedLength:void 0},_t=parseInt(wt("Content-Length"),10);return!Number.isInteger(_t)||(Rt.suggestedLength=_t,_t<=2*xt)||Pt||!Ct||wt("Accept-Ranges")!=="bytes"||(wt("Content-Encoding")||"identity")!=="identity"||(Rt.allowRangeRequests=!0),Rt}function dt(wt){const Ct=wt("Content-Disposition");if(Ct){let xt=(0,at.getFilenameFromContentDispositionHeader)(Ct);if(xt.includes("%"))try{xt=decodeURIComponent(xt)}catch{}if((0,lt.isPdfFile)(xt))return xt}return null}function ft(wt,Ct){return wt===404||wt===0&&Ct.startsWith("file:")?new et.MissingPDFException('Missing PDF "'+Ct+'".'):new et.UnexpectedResponseException(`Unexpected server response (${wt}) while retrieving PDF "${Ct}".`,wt)}function vt(wt){return wt===200||wt===206}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.getFilenameFromContentDispositionHeader=at;var et=a(1);function at(lt){let ht=!0,dt=ft("filename\\*","i").exec(lt);if(dt){dt=dt[1];let _t=xt(dt);return _t=unescape(_t),_t=Pt(_t),_t=Rt(_t),wt(_t)}if(dt=Ct(lt),dt){const _t=Rt(dt);return wt(_t)}if(dt=ft("filename","i").exec(lt),dt){dt=dt[1];let _t=xt(dt);return _t=Rt(_t),wt(_t)}function ft(_t,St){return new RegExp("(?:^|;)\\s*"+_t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',St)}function vt(_t,St){if(_t){if(!/^[\x00-\xFF]+$/.test(St))return St;try{const bt=new TextDecoder(_t,{fatal:!0}),Nt=(0,et.stringToBytes)(St);St=bt.decode(Nt),ht=!1}catch{}}return St}function wt(_t){return ht&&/[\x80-\xff]/.test(_t)&&(_t=vt("utf-8",_t),ht&&(_t=vt("iso-8859-1",_t))),_t}function Ct(_t){const St=[];let bt;const Nt=ft("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(bt=Nt.exec(_t))!==null;){let[,Dt,jt,Wt]=bt;if(Dt=parseInt(Dt,10),Dt in St){if(Dt===0)break;continue}St[Dt]=[jt,Wt]}const kt=[];for(let Dt=0;Dt<St.length&&Dt in St;++Dt){let[jt,Wt]=St[Dt];Wt=xt(Wt),jt&&(Wt=unescape(Wt),Dt===0&&(Wt=Pt(Wt))),kt.push(Wt)}return kt.join("")}function xt(_t){if(_t.startsWith('"')){const St=_t.slice(1).split('\\"');for(let bt=0;bt<St.length;++bt){const Nt=St[bt].indexOf('"');Nt!==-1&&(St[bt]=St[bt].slice(0,Nt),St.length=bt+1),St[bt]=St[bt].replace(/\\(.)/g,"$1")}_t=St.join('"')}return _t}function Pt(_t){const St=_t.indexOf("'");if(St===-1)return _t;const bt=_t.slice(0,St),kt=_t.slice(St+1).replace(/^[^']*'/,"");return vt(bt,kt)}function Rt(_t){return!_t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(_t)?_t:_t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(St,bt,Nt,kt){if(Nt==="q"||Nt==="Q")return kt=kt.replace(/_/g," "),kt=kt.replace(/=([0-9a-fA-F]{2})/g,function(Dt,jt){return String.fromCharCode(parseInt(jt,16))}),vt(bt,kt);try{kt=atob(kt)}catch{}return vt(bt,kt)})}return""}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFNetworkStream=void 0;var et=a(1),at=a(33);const lt=200,ht=206;function dt(xt){const Pt=xt.response;return typeof Pt!="string"?Pt:(0,et.stringToBytes)(Pt).buffer}class ft{constructor(Pt,Rt={}){this.url=Pt,this.isHttp=/^https?:/i.test(Pt),this.httpHeaders=this.isHttp&&Rt.httpHeaders||Object.create(null),this.withCredentials=Rt.withCredentials||!1,this.getXhr=Rt.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(Pt,Rt,_t){const St={begin:Pt,end:Rt};for(const bt in _t)St[bt]=_t[bt];return this.request(St)}requestFull(Pt){return this.request(Pt)}request(Pt){const Rt=this.getXhr(),_t=this.currXhrId++,St=this.pendingRequests[_t]={xhr:Rt};Rt.open("GET",this.url),Rt.withCredentials=this.withCredentials;for(const bt in this.httpHeaders){const Nt=this.httpHeaders[bt];typeof Nt>"u"||Rt.setRequestHeader(bt,Nt)}return this.isHttp&&"begin"in Pt&&"end"in Pt?(Rt.setRequestHeader("Range",`bytes=${Pt.begin}-${Pt.end-1}`),St.expectedStatus=ht):St.expectedStatus=lt,Rt.responseType="arraybuffer",Pt.onError&&(Rt.onerror=function(bt){Pt.onError(Rt.status)}),Rt.onreadystatechange=this.onStateChange.bind(this,_t),Rt.onprogress=this.onProgress.bind(this,_t),St.onHeadersReceived=Pt.onHeadersReceived,St.onDone=Pt.onDone,St.onError=Pt.onError,St.onProgress=Pt.onProgress,Rt.send(null),_t}onProgress(Pt,Rt){var St;const _t=this.pendingRequests[Pt];_t&&((St=_t.onProgress)==null||St.call(_t,Rt))}onStateChange(Pt,Rt){var Dt,jt,Wt;const _t=this.pendingRequests[Pt];if(!_t)return;const St=_t.xhr;if(St.readyState>=2&&_t.onHeadersReceived&&(_t.onHeadersReceived(),delete _t.onHeadersReceived),St.readyState!==4||!(Pt in this.pendingRequests))return;if(delete this.pendingRequests[Pt],St.status===0&&this.isHttp){(Dt=_t.onError)==null||Dt.call(_t,St.status);return}const bt=St.status||lt;if(!(bt===lt&&_t.expectedStatus===ht)&&bt!==_t.expectedStatus){(jt=_t.onError)==null||jt.call(_t,St.status);return}const kt=dt(St);if(bt===ht){const Yt=St.getResponseHeader("Content-Range"),Bt=/bytes (\d+)-(\d+)\/(\d+)/.exec(Yt);_t.onDone({begin:parseInt(Bt[1],10),chunk:kt})}else kt?_t.onDone({begin:0,chunk:kt}):(Wt=_t.onError)==null||Wt.call(_t,St.status)}getRequestXhr(Pt){return this.pendingRequests[Pt].xhr}isPendingRequest(Pt){return Pt in this.pendingRequests}abortRequest(Pt){const Rt=this.pendingRequests[Pt].xhr;delete this.pendingRequests[Pt],Rt.abort()}}class vt{constructor(Pt){this._source=Pt,this._manager=new ft(Pt.url,{httpHeaders:Pt.httpHeaders,withCredentials:Pt.withCredentials}),this._rangeChunkSize=Pt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(Pt){const Rt=this._rangeRequestReaders.indexOf(Pt);Rt>=0&&this._rangeRequestReaders.splice(Rt,1)}getFullReader(){return(0,et.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new wt(this._manager,this._source),this._fullRequestReader}getRangeReader(Pt,Rt){const _t=new Ct(this._manager,Pt,Rt);return _t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(_t),_t}cancelAllRequests(Pt){var Rt;(Rt=this._fullRequestReader)==null||Rt.cancel(Pt);for(const _t of this._rangeRequestReaders.slice(0))_t.cancel(Pt)}}s.PDFNetworkStream=vt;class wt{constructor(Pt,Rt){this._manager=Pt;const _t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Rt.url,this._fullRequestId=Pt.requestFull(_t),this._headersReceivedCapability=(0,et.createPromiseCapability)(),this._disableRange=Rt.disableRange||!1,this._contentLength=Rt.length,this._rangeChunkSize=Rt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const Pt=this._fullRequestId,Rt=this._manager.getRequestXhr(Pt),_t=Nt=>Rt.getResponseHeader(Nt),{allowRangeRequests:St,suggestedLength:bt}=(0,at.validateRangeRequestCapabilities)({getResponseHeader:_t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});St&&(this._isRangeSupported=!0),this._contentLength=bt||this._contentLength,this._filename=(0,at.extractFilenameFromHeader)(_t),this._isRangeSupported&&this._manager.abortRequest(Pt),this._headersReceivedCapability.resolve()}_onDone(Pt){if(Pt&&(this._requests.length>0?this._requests.shift().resolve({value:Pt.chunk,done:!1}):this._cachedChunks.push(Pt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Rt of this._requests)Rt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(Pt){this._storedError=(0,at.createResponseStatusError)(Pt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Rt of this._requests)Rt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(Pt){var Rt;(Rt=this.onProgress)==null||Rt.call(this,{loaded:Pt.loaded,total:Pt.lengthComputable?Pt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const Pt=(0,et.createPromiseCapability)();return this._requests.push(Pt),Pt.promise}cancel(Pt){this._done=!0,this._headersReceivedCapability.reject(Pt);for(const Rt of this._requests)Rt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Ct{constructor(Pt,Rt,_t){this._manager=Pt;const St={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Pt.url,this._requestId=Pt.requestRange(Rt,_t,St),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var Pt;(Pt=this.onClosed)==null||Pt.call(this,this)}_onDone(Pt){const Rt=Pt.chunk;this._requests.length>0?this._requests.shift().resolve({value:Rt,done:!1}):this._queuedChunk=Rt,this._done=!0;for(const _t of this._requests)_t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(Pt){this._storedError=(0,at.createResponseStatusError)(Pt,this._url);for(const Rt of this._requests)Rt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(Pt){var Rt;this.isStreamingSupported||(Rt=this.onProgress)==null||Rt.call(this,{loaded:Pt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Rt=this._queuedChunk;return this._queuedChunk=null,{value:Rt,done:!1}}if(this._done)return{value:void 0,done:!0};const Pt=(0,et.createPromiseCapability)();return this._requests.push(Pt),Pt.promise}cancel(Pt){this._done=!0;for(const Rt of this._requests)Rt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(o,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFetchStream=void 0;var et=a(1),at=a(33);function lt(wt,Ct,xt){return{method:"GET",headers:wt,signal:xt.signal,mode:"cors",credentials:Ct?"include":"same-origin",redirect:"follow"}}function ht(wt){const Ct=new Headers;for(const xt in wt){const Pt=wt[xt];typeof Pt>"u"||Ct.append(xt,Pt)}return Ct}class dt{constructor(Ct){this.source=Ct,this.isHttp=/^https?:/i.test(Ct.url),this.httpHeaders=this.isHttp&&Ct.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Ct;return((Ct=this._fullRequestReader)==null?void 0:Ct._loaded)??0}getFullReader(){return(0,et.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ft(this),this._fullRequestReader}getRangeReader(Ct,xt){if(xt<=this._progressiveDataLength)return null;const Pt=new vt(this,Ct,xt);return this._rangeRequestReaders.push(Pt),Pt}cancelAllRequests(Ct){this._fullRequestReader&&this._fullRequestReader.cancel(Ct);for(const xt of this._rangeRequestReaders.slice(0))xt.cancel(Ct)}}s.PDFFetchStream=dt;class ft{constructor(Ct){this._stream=Ct,this._reader=null,this._loaded=0,this._filename=null;const xt=Ct.source;this._withCredentials=xt.withCredentials||!1,this._contentLength=xt.length,this._headersCapability=(0,et.createPromiseCapability)(),this._disableRange=xt.disableRange||!1,this._rangeChunkSize=xt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!xt.disableStream,this._isRangeSupported=!xt.disableRange,this._headers=ht(this._stream.httpHeaders);const Pt=xt.url;fetch(Pt,lt(this._headers,this._withCredentials,this._abortController)).then(Rt=>{if(!(0,at.validateResponseStatus)(Rt.status))throw(0,at.createResponseStatusError)(Rt.status,Pt);this._reader=Rt.body.getReader(),this._headersCapability.resolve();const _t=Nt=>Rt.headers.get(Nt),{allowRangeRequests:St,suggestedLength:bt}=(0,at.validateRangeRequestCapabilities)({getResponseHeader:_t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=St,this._contentLength=bt||this._contentLength,this._filename=(0,at.extractFilenameFromHeader)(_t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new et.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:Ct,done:xt}=await this._reader.read();return xt?{value:Ct,done:xt}:(this._loaded+=Ct.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Ct).buffer,done:!1})}cancel(Ct){this._reader&&this._reader.cancel(Ct),this._abortController.abort()}}class vt{constructor(Ct,xt,Pt){this._stream=Ct,this._reader=null,this._loaded=0;const Rt=Ct.source;this._withCredentials=Rt.withCredentials||!1,this._readCapability=(0,et.createPromiseCapability)(),this._isStreamingSupported=!Rt.disableStream,this._abortController=new AbortController,this._headers=ht(this._stream.httpHeaders),this._headers.append("Range",`bytes=${xt}-${Pt-1}`);const _t=Rt.url;fetch(_t,lt(this._headers,this._withCredentials,this._abortController)).then(St=>{if(!(0,at.validateResponseStatus)(St.status))throw(0,at.createResponseStatusError)(St.status,_t);this._readCapability.resolve(),this._reader=St.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:Ct,done:xt}=await this._reader.read();return xt?{value:Ct,done:xt}:(this._loaded+=Ct.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(Ct).buffer,done:!1})}cancel(Ct){this._reader&&this._reader.cancel(Ct),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(o){var s=__webpack_module_cache__[o];if(s!==void 0)return s.exports;var a=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](a,a.exports,__w_pdfjs_require__),a.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return at.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return s.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return s.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return lt.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return ht.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return s.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return s.CMapCompressionType}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return dt.GlobalWorkerOptions}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return s.InvalidPDFException}}),Object.defineProperty(o,"LoopbackPort",{enumerable:!0,get:function(){return a.LoopbackPort}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return s.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return s.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return a.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return et.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return a.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return s.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return s.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return et.PixelsPerInch}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return et.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return wt.SVGGraphics}}),Object.defineProperty(o,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return s.UNSUPPORTED_FEATURES}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return s.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return s.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return s.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return Ct.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return a.build}}),Object.defineProperty(o,"createPromiseCapability",{enumerable:!0,get:function(){return s.createPromiseCapability}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return s.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return a.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return et.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return et.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return et.getXfaPageViewport}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return et.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return et.loadScript}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return vt.renderTextLayer}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return s.shadow}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return a.version}});var s=__w_pdfjs_require__(1),a=__w_pdfjs_require__(4),et=__w_pdfjs_require__(8),at=__w_pdfjs_require__(22),lt=__w_pdfjs_require__(7),ht=__w_pdfjs_require__(27),dt=__w_pdfjs_require__(15),ft=__w_pdfjs_require__(3),vt=__w_pdfjs_require__(30),wt=__w_pdfjs_require__(31),Ct=__w_pdfjs_require__(29);if(ft.isNodeJS){const{PDFNodeStream:xt}=__w_pdfjs_require__(32);(0,a.setPDFNetworkStreamFactory)(Pt=>new xt(Pt))}else{const{PDFNetworkStream:xt}=__w_pdfjs_require__(35),{PDFFetchStream:Pt}=__w_pdfjs_require__(36);(0,a.setPDFNetworkStreamFactory)(Rt=>(0,et.isValidFetchUrl)(Rt.url)?new Pt(Rt):new xt(Rt))}})(),__webpack_exports__})())})(pdf);function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var et in a)Object.prototype.hasOwnProperty.call(a,et)&&(o[et]=a[et])}return o},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(o,s){if(o==null)return{};var a={},et=Object.keys(o),at,lt;for(lt=0;lt<et.length;lt++)at=et[lt],!(s.indexOf(at)>=0)&&(a[at]=o[at]);return a}function _objectWithoutProperties(o,s){if(o==null)return{};var a=_objectWithoutPropertiesLoose(o,s),et,at;if(Object.getOwnPropertySymbols){var lt=Object.getOwnPropertySymbols(o);for(at=0;at<lt.length;at++)et=lt[at],!(s.indexOf(et)>=0)&&Object.prototype.propertyIsEnumerable.call(o,et)&&(a[et]=o[et])}return a}function _typeof(o){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_typeof(o)}function _classCallCheck(o,s){if(!(o instanceof s))throw new TypeError("Cannot call a class as a function")}function _toPrimitive(o,s){if(_typeof(o)!=="object"||o===null)return o;var a=o[Symbol.toPrimitive];if(a!==void 0){var et=a.call(o,s||"default");if(_typeof(et)!=="object")return et;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(o)}function _toPropertyKey(o){var s=_toPrimitive(o,"string");return _typeof(s)==="symbol"?s:String(s)}function _defineProperties(o,s){for(var a=0;a<s.length;a++){var et=s[a];et.enumerable=et.enumerable||!1,et.configurable=!0,"value"in et&&(et.writable=!0),Object.defineProperty(o,_toPropertyKey(et.key),et)}}function _createClass(o,s,a){return s&&_defineProperties(o.prototype,s),a&&_defineProperties(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o}function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _setPrototypeOf(o,s){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(et,at){return et.__proto__=at,et},_setPrototypeOf(o,s)}function _inherits(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(s&&s.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),s&&_setPrototypeOf(o,s)}function _possibleConstructorReturn(o,s){if(s&&(_typeof(s)==="object"||typeof s=="function"))return s;if(s!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(o)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(o)}function _defineProperty(o,s,a){return s=_toPropertyKey(s),s in o?Object.defineProperty(o,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[s]=a,o}var propTypesExports={},propTypes={get exports(){return propTypesExports},set exports(o){propTypesExports=o}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(et,at,lt,ht,dt,ft){if(ft!==ReactPropTypesSecret){var vt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw vt.name="Invariant Violation",vt}}o.isRequired=o;function s(){return o}var a={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:s,element:o,elementType:o,instanceOf:s,node:o,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return a.PropTypes=a,a};propTypes.exports=factoryWithThrowingShims();var __spreadArray=globalThis&&globalThis.__spreadArray||function(o,s,a){if(a||arguments.length===2)for(var et=0,at=s.length,lt;et<at;et++)(lt||!(et in s))&&(lt||(lt=Array.prototype.slice.call(s,0,et)),lt[et]=s[et]);return o.concat(lt||Array.prototype.slice.call(s))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],focusEvents=["onFocus","onBlur"],formEvents=["onChange","onInput","onInvalid","onReset","onSubmit"],genericEvents=["onError","onLoad"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],uiEvents=["onScroll"],wheelEvents=["onWheel"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],imageEvents=["onLoad","onError"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),keyboardEvents,!0),focusEvents,!0),formEvents,!0),genericEvents,!0),mouseEvents,!0),pointerEvents,!0),selectionEvents,!0),touchEvents,!0),uiEvents,!0),wheelEvents,!0),mediaEvents,!0),imageEvents,!0),animationEvents,!0),transitionEvents,!0),otherEvents,!0);function makeEventProps(o,s){var a={};return allEvents.forEach(function(et){var at=o[et];if(at){if(!s){a[et]=at;return}a[et]=function(lt){return at(lt,s(et))}}}),a}function makeCancellablePromise(o){var s=!1,a=new Promise(function(et,at){o.then(function(lt){return!s&&et(lt)}).catch(function(lt){return!s&&at(lt)})});return{promise:a,cancel:function(){s=!0}}}var isProduction$1=!0,prefix="Invariant failed";function invariant(o,s){if(!o){if(isProduction$1)throw new Error(prefix);var a=typeof s=="function"?s():s,et=a?"".concat(prefix,": ").concat(a):prefix;throw new Error(et)}}var isProduction=!0;function warning(o,s){if(!isProduction){if(o)return;var a="Warning: "+s;typeof console<"u"&&console.warn(a);try{throw Error(a)}catch{}}}const DocumentContext=reactExports.createContext(null);function Message(o){var s=o.children,a=o.type;return React.createElement("div",{className:"react-pdf__message react-pdf__message--".concat(a)},s)}Message.propTypes={children:propTypesExports.node,type:propTypesExports.oneOf(["error","loading","no-data"]).isRequired};var DEFAULT_LINK_REL="noopener noreferrer nofollow",LinkService=function(){function o(){_classCallCheck(this,o),this.externalLinkTarget=null,this.externalLinkRel=null}return _createClass(o,[{key:"setDocument",value:function(a){this.pdfDocument=a}},{key:"setViewer",value:function(a){this.pdfViewer=a}},{key:"setExternalLinkRel",value:function(a){this.externalLinkRel=a}},{key:"setExternalLinkTarget",value:function(a){this.externalLinkTarget=a}},{key:"setHistory",value:function(){}},{key:"pagesCount",get:function(){return this.pdfDocument?this.pdfDocument.numPages:0}},{key:"page",get:function(){return this.pdfViewer.currentPageNumber},set:function(a){this.pdfViewer.currentPageNumber=a}},{key:"rotation",get:function(){return 0},set:function(a){}},{key:"goToDestination",value:function(a){var et=this;new Promise(function(at){typeof a=="string"?et.pdfDocument.getDestination(a).then(at):Array.isArray(a)?at(a):a.then(at)}).then(function(at){invariant(Array.isArray(at),'"'.concat(at,'" is not a valid destination array.'));var lt=at[0];new Promise(function(ht){lt instanceof Object?et.pdfDocument.getPageIndex(lt).then(function(dt){ht(dt)}).catch(function(){invariant(!1,'"'.concat(lt,'" is not a valid page reference.'))}):typeof lt=="number"?ht(lt):invariant(!1,'"'.concat(lt,'" is not a valid destination reference.'))}).then(function(ht){var dt=ht+1;invariant(dt>=1&&dt<=et.pagesCount,'"'.concat(dt,'" is not a valid page number.')),et.pdfViewer.scrollPageIntoView({dest:a,pageIndex:ht,pageNumber:dt})})})}},{key:"navigateTo",value:function(a){this.goToDestination(a)}},{key:"goToPage",value:function(){}},{key:"addLinkAttributes",value:function(a,et,at){a.href=et,a.rel=this.externalLinkRel||DEFAULT_LINK_REL,a.target=at?"_blank":this.externalLinkTarget||""}},{key:"getDestinationHash",value:function(){return"#"}},{key:"getAnchorUrl",value:function(){return"#"}},{key:"setHash",value:function(){}},{key:"executeNamedAction",value:function(){}},{key:"cachePageRef",value:function(){}},{key:"isPageVisible",value:function(){return!0}},{key:"isPageCached",value:function(){return!0}}]),o}(),PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function _arrayWithHoles(o){if(Array.isArray(o))return o}function _iterableToArrayLimit(o,s){var a=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(a!=null){var et,at,lt,ht,dt=[],ft=!0,vt=!1;try{if(lt=(a=a.call(o)).next,s===0){if(Object(a)!==a)return;ft=!1}else for(;!(ft=(et=lt.call(a)).done)&&(dt.push(et.value),dt.length!==s);ft=!0);}catch(wt){vt=!0,at=wt}finally{try{if(!ft&&a.return!=null&&(ht=a.return(),Object(ht)!==ht))return}finally{if(vt)throw at}}return dt}}function _arrayLikeToArray(o,s){(s==null||s>o.length)&&(s=o.length);for(var a=0,et=new Array(s);a<s;a++)et[a]=o[a];return et}function _unsupportedIterableToArray(o,s){if(o){if(typeof o=="string")return _arrayLikeToArray(o,s);var a=Object.prototype.toString.call(o).slice(8,-1);if(a==="Object"&&o.constructor&&(a=o.constructor.name),a==="Map"||a==="Set")return Array.from(o);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _arrayLikeToArray(o,s)}}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray(o,s){return _arrayWithHoles(o)||_iterableToArrayLimit(o,s)||_unsupportedIterableToArray(o,s)||_nonIterableRest()}var isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(o){return typeof o<"u"}function isProvided(o){return isDefined(o)&&o!==null}function isString(o){return typeof o=="string"}function isArrayBuffer(o){return o instanceof ArrayBuffer}function isBlob(o){return invariant(isBrowser,"isBlob can only be used in a browser environment"),o instanceof Blob}function isFile$1(o){return invariant(isBrowser,"isFile can only be used in a browser environment"),o instanceof File}function isDataURI(o){return isString(o)&&/^data:/.test(o)}function dataURItoByteString(o){invariant(isDataURI(o),"Invalid data URI.");var s=o.split(","),a=_slicedToArray(s,2),et=a[0],at=a[1],lt=et.split(";");return lt.indexOf("base64")!==-1?atob(at):unescape(at)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}var allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning(!isLocalFileSystem,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function displayWorkerWarning(){warning(!isLocalFileSystem,"Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ".concat(allowFileAccessFromFilesTip))}function cancelRunningTask(o){o&&o.cancel&&o.cancel()}function makePageCallback(o,s){return Object.defineProperty(o,"width",{get:function(){return this.view[2]*s},configurable:!0}),Object.defineProperty(o,"height",{get:function(){return this.view[3]*s},configurable:!0}),Object.defineProperty(o,"originalWidth",{get:function(){return this.view[2]},configurable:!0}),Object.defineProperty(o,"originalHeight",{get:function(){return this.view[3]},configurable:!0}),o}function isCancelException(o){return o.name==="RenderingCancelledException"}function loadFromFile(o){return new Promise(function(s,a){var et=new FileReader;return et.onload=function(){return s(new Uint8Array(et.result))},et.onerror=function(at){switch(at.target.error.code){case at.target.error.NOT_FOUND_ERR:return a(new Error("Error while reading a file: File not found."));case at.target.error.NOT_READABLE_ERR:return a(new Error("Error while reading a file: File not readable."));case at.target.error.SECURITY_ERR:return a(new Error("Error while reading a file: Security error."));case at.target.error.ABORT_ERR:return a(new Error("Error while reading a file: Aborted."));default:return a(new Error("Error while reading a file."))}},et.readAsArrayBuffer(o),null})}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _iterableToArray(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}var eventProps=function(){var o={};return[].concat(_toConsumableArray(mouseEvents),_toConsumableArray(touchEvents),_toConsumableArray(keyboardEvents)).forEach(function(s){o[s]=propTypesExports.func}),o}(),fileTypes=[propTypesExports.string,propTypesExports.instanceOf(ArrayBuffer),propTypesExports.shape({data:propTypesExports.oneOfType([propTypesExports.object,propTypesExports.string]),httpHeaders:propTypesExports.object,range:propTypesExports.object,url:propTypesExports.string,withCredentials:propTypesExports.bool})];typeof File<"u"&&fileTypes.push(propTypesExports.instanceOf(File));typeof Blob<"u"&&fileTypes.push(propTypesExports.instanceOf(Blob));var isClassName=propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.string)]),isFile=propTypesExports.oneOfType(fileTypes),isLinkService=propTypesExports.instanceOf(LinkService);propTypesExports.oneOf(["_self","_blank","_parent","_top"]);var isPage=propTypesExports.shape({commonObjs:propTypesExports.shape({}).isRequired,getAnnotations:propTypesExports.func.isRequired,getTextContent:propTypesExports.func.isRequired,getViewport:propTypesExports.func.isRequired,render:propTypesExports.func.isRequired}),isPageIndex=function o(s,a,et){var at=s[a],lt=s.pageNumber,ht=s.pdf;if(!isDefined(ht))return null;if(isDefined(at)){if(typeof at!="number")return new Error("`".concat(a,"` of type `").concat(_typeof(at),"` supplied to `").concat(et,"`, expected `number`."));if(at<0)return new Error("Expected `".concat(a,"` to be greater or equal to 0."));var dt=ht.numPages;if(at+1>dt)return new Error("Expected `".concat(a,"` to be less or equal to ").concat(dt-1,"."))}else if(!isDefined(lt))return new Error("`".concat(a,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(et,"`."));return null},isPageNumber=function o(s,a,et){var at=s[a],lt=s.pageIndex,ht=s.pdf;if(!isDefined(ht))return null;if(isDefined(at)){if(typeof at!="number")return new Error("`".concat(a,"` of type `").concat(_typeof(at),"` supplied to `").concat(et,"`, expected `number`."));if(at<1)return new Error("Expected `".concat(a,"` to be greater or equal to 1."));var dt=ht.numPages;if(at>dt)return new Error("Expected `".concat(a,"` to be less or equal to ").concat(dt,"."))}else if(!isDefined(lt))return new Error("`".concat(a,"` not supplied. Either pageIndex or pageNumber must be supplied to `").concat(et,"`."));return null},isPdf=propTypesExports.oneOfType([propTypesExports.shape({getDestination:propTypesExports.func.isRequired,getOutline:propTypesExports.func.isRequired,getPage:propTypesExports.func.isRequired,numPages:propTypesExports.number.isRequired}),propTypesExports.bool]),isRef=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.shape({current:propTypesExports.any})]),isRenderMode=propTypesExports.oneOf(["canvas","none","svg"]),isRotate=propTypesExports.oneOf([0,90,180,270]),_excluded=["url"];function ownKeys$3(o,s){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(o);s&&(et=et.filter(function(at){return Object.getOwnPropertyDescriptor(o,at).enumerable})),a.push.apply(a,et)}return a}function _objectSpread$3(o){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$3(Object(a),!0).forEach(function(et){_defineProperty(o,et,a[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys$3(Object(a)).forEach(function(et){Object.defineProperty(o,et,Object.getOwnPropertyDescriptor(a,et))})}return o}function _createSuper$5(o){var s=_isNativeReflectConstruct$5();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct$5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PDFDataRangeTransport=pdfExports.PDFDataRangeTransport,Document=function(o){_inherits(a,o);var s=_createSuper$5(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"state",{pdf:null}),_defineProperty(_assertThisInitialized(et),"viewer",{scrollPageIntoView:function(ft){var vt=ft.dest,wt=ft.pageIndex,Ct=ft.pageNumber,xt=et.props.onItemClick;if(xt){xt({dest:vt,pageIndex:wt,pageNumber:Ct});return}var Pt=et.pages[wt];if(Pt){Pt.scrollIntoView();return}warning(!1,"An internal link leading to page ".concat(Ct," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}}),_defineProperty(_assertThisInitialized(et),"linkService",new LinkService),_defineProperty(_assertThisInitialized(et),"loadDocument",function(){cancelRunningTask(et.runningTask),et.loadingTask&&et.loadingTask.destroy();var dt=makeCancellablePromise(et.findDocumentSource());et.runningTask=dt,dt.promise.then(function(ft){if(et.onSourceSuccess(),!!ft){et.setState(function(Rt){return Rt.pdf?{pdf:null}:null});var vt=et.props,wt=vt.options,Ct=vt.onLoadProgress,xt=vt.onPassword,Pt=pdfExports.getDocument(_objectSpread$3(_objectSpread$3({},ft),wt));Pt.onPassword=xt,Ct&&(Pt.onProgress=Ct),et.loadingTask=Pt,Pt.promise.then(function(Rt){et.setState(function(_t){return _t.pdf&&_t.pdf.fingerprint===Rt.fingerprint?null:{pdf:Rt}},et.onLoadSuccess)}).catch(function(Rt){et.onLoadError(Rt)})}}).catch(function(ft){et.onSourceError(ft)})}),_defineProperty(_assertThisInitialized(et),"setupLinkService",function(){var dt=et.props,ft=dt.externalLinkRel,vt=dt.externalLinkTarget;et.linkService.setViewer(et.viewer),et.linkService.setExternalLinkRel(ft),et.linkService.setExternalLinkTarget(vt)}),_defineProperty(_assertThisInitialized(et),"onSourceSuccess",function(){var dt=et.props.onSourceSuccess;dt&&dt()}),_defineProperty(_assertThisInitialized(et),"onSourceError",function(dt){warning(dt);var ft=et.props.onSourceError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"onLoadSuccess",function(){var dt=et.props.onLoadSuccess,ft=et.state.pdf;dt&&dt(ft),et.pages=new Array(ft.numPages),et.linkService.setDocument(ft)}),_defineProperty(_assertThisInitialized(et),"onLoadError",function(dt){et.setState({pdf:!1}),warning(dt);var ft=et.props.onLoadError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"findDocumentSource",function(){return new Promise(function(dt){var ft=et.props.file;if(ft||dt(null),typeof ft=="string"){if(isDataURI(ft)){var vt=dataURItoByteString(ft);dt({data:vt})}displayCORSWarning(),dt({url:ft})}if(ft instanceof PDFDataRangeTransport&&dt({range:ft}),isArrayBuffer(ft)&&dt({data:ft}),isBrowser&&(isBlob(ft)||isFile$1(ft))){loadFromFile(ft).then(function(Pt){dt({data:Pt})});return}if(invariant(_typeof(ft)==="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(ft.url||ft.data||ft.range,"Invalid parameter object: need either .data, .range or .url"),typeof ft.url=="string"){if(isDataURI(ft.url)){var wt=ft.url,Ct=_objectWithoutProperties(ft,_excluded),xt=dataURItoByteString(wt);dt(_objectSpread$3({data:xt},Ct))}displayCORSWarning()}dt(ft)})}),_defineProperty(_assertThisInitialized(et),"registerPage",function(dt,ft){et.pages[dt]=ft}),_defineProperty(_assertThisInitialized(et),"unregisterPage",function(dt){delete et.pages[dt]}),et}return _createClass(a,[{key:"componentDidMount",value:function(){this.loadDocument(),this.setupLinkService()}},{key:"componentDidUpdate",value:function(at){var lt=this.props.file;lt!==at.file&&this.loadDocument()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask),this.loadingTask&&this.loadingTask.destroy()}},{key:"childContext",get:function(){var at=this.linkService,lt=this.registerPage,ht=this.unregisterPage,dt=this.props,ft=dt.imageResourcesPath,vt=dt.renderMode,wt=dt.rotate,Ct=this.state.pdf;return{imageResourcesPath:ft,linkService:at,pdf:Ct,registerPage:lt,renderMode:vt,rotate:wt,unregisterPage:ht}}},{key:"eventProps",get:function(){var at=this;return makeEventProps(this.props,function(){return at.state.pdf})}},{key:"renderChildren",value:function(){var at=this.props.children;return React.createElement(DocumentContext.Provider,{value:this.childContext},at)}},{key:"renderContent",value:function(){var at=this.props.file,lt=this.state.pdf;if(!at){var ht=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof ht=="function"?ht():ht)}if(lt===null){var dt=this.props.loading;return React.createElement(Message,{type:"loading"},typeof dt=="function"?dt():dt)}if(lt===!1){var ft=this.props.error;return React.createElement(Message,{type:"error"},typeof ft=="function"?ft():ft)}return this.renderChildren()}},{key:"render",value:function(){var at=this.props,lt=at.className,ht=at.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Document",lt),ref:ht},this.eventProps),this.renderContent())}}]),a}(reactExports.PureComponent);Document.defaultProps={error:"Failed to load PDF file.",loading:"Loading PDF",noData:"No PDF file specified.",onPassword:function o(s,a){switch(a){case PasswordResponses.NEED_PASSWORD:{var et=prompt("Enter the password to open this PDF file.");s(et);break}case PasswordResponses.INCORRECT_PASSWORD:{var at=prompt("Invalid password. Please try again.");s(at);break}}}};var isFunctionOrNode$1=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.node]);Document.propTypes=_objectSpread$3(_objectSpread$3({},eventProps),{},{children:propTypesExports.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:propTypesExports.string,externalLinkTarget:propTypesExports.string,file:isFile,imageResourcesPath:propTypesExports.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:propTypesExports.func,onLoadError:propTypesExports.func,onLoadProgress:propTypesExports.func,onLoadSuccess:propTypesExports.func,onPassword:propTypesExports.func,onSourceError:propTypesExports.func,onSourceSuccess:propTypesExports.func,rotate:propTypesExports.number});var isDestination=propTypesExports.oneOfType([propTypesExports.string,propTypesExports.arrayOf(propTypesExports.any)]);propTypesExports.shape({dest:isDestination,items:propTypesExports.arrayOf(propTypesExports.shape({dest:isDestination,title:propTypesExports.string})),title:propTypesExports.string}).isRequired,propTypesExports.func,isPdf.isRequired;function ownKeys$2(o,s){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(o);s&&(et=et.filter(function(at){return Object.getOwnPropertyDescriptor(o,at).enumerable})),a.push.apply(a,et)}return a}function _objectSpread$2(o){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$2(Object(a),!0).forEach(function(et){_defineProperty(o,et,a[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys$2(Object(a)).forEach(function(et){Object.defineProperty(o,et,Object.getOwnPropertyDescriptor(a,et))})}return o}_objectSpread$2({className:isClassName,inputRef:isRef,onItemClick:propTypesExports.func,onLoadError:propTypesExports.func,onLoadSuccess:propTypesExports.func,pdf:isPdf},eventProps);function mergeRefs(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=o.filter(Boolean);if(a.length<=1){var et=a[0];return et||null}return function(lt){a.forEach(function(ht){typeof ht=="function"?ht(lt):ht&&(ht.current=lt)})}}const PageContext=reactExports.createContext(null);function _createSuper$4(o){var s=_isNativeReflectConstruct$4();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ANNOTATION_MODE=pdfExports.AnnotationMode,PageCanvasInternal=function(o){_inherits(a,o);var s=_createSuper$4(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"canvasElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(et),"onRenderSuccess",function(){et.renderer=null;var dt=et.props,ft=dt.onRenderSuccess,vt=dt.page,wt=dt.scale;ft&&ft(makePageCallback(vt,wt))}),_defineProperty(_assertThisInitialized(et),"onRenderError",function(dt){if(!isCancelException(dt)){warning(dt);var ft=et.props.onRenderError;ft&&ft(dt)}}),_defineProperty(_assertThisInitialized(et),"drawPageOnCanvas",function(){var dt=et.canvasElement.current;if(!dt)return null;var ft=_assertThisInitialized(et),vt=ft.renderViewport,wt=ft.viewport,Ct=et.props,xt=Ct.canvasBackground,Pt=Ct.page,Rt=Ct.renderForms;dt.width=vt.width,dt.height=vt.height,dt.style.width="".concat(Math.floor(wt.width),"px"),dt.style.height="".concat(Math.floor(wt.height),"px");var _t={annotationMode:Rt?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,get canvasContext(){return dt.getContext("2d",{alpha:!1})},viewport:vt};xt&&(_t.background=xt),et.cancelRenderingTask();var St=Pt.render(_t);return et.renderer=St,St.promise.then(et.onRenderSuccess).catch(et.onRenderError)}),et}return _createClass(a,[{key:"componentDidMount",value:function(){this.drawPageOnCanvas()}},{key:"componentDidUpdate",value:function(at){var lt=this.props,ht=lt.canvasBackground,dt=lt.devicePixelRatio,ft=lt.page,vt=lt.renderForms;(ht!==at.canvasBackground||dt!==at.devicePixelRatio||vt!==at.renderForms)&&(ft.cleanup(),this.drawPageOnCanvas())}},{key:"componentWillUnmount",value:function(){this.cancelRenderingTask();var at=this.canvasElement.current;at&&(at.width=0,at.height=0)}},{key:"cancelRenderingTask",value:function(){this.renderer&&(this.renderer.cancel(),this.renderer=null)}},{key:"devicePixelRatio",get:function(){var at=this.props.devicePixelRatio;return at||getDevicePixelRatio()}},{key:"renderViewport",get:function(){var at=this.devicePixelRatio,lt=this.props,ht=lt.page,dt=lt.rotate,ft=lt.scale;return ht.getViewport({scale:ft*at,rotation:dt})}},{key:"viewport",get:function(){var at=this.props,lt=at.page,ht=at.rotate,dt=at.scale;return lt.getViewport({scale:dt,rotation:ht})}},{key:"render",value:function(){var at=this.props.canvasRef;return React.createElement("canvas",{className:"react-pdf__Page__canvas",dir:"ltr",ref:mergeRefs(at,this.canvasElement),style:{display:"block",userSelect:"none"}})}}]),a}(reactExports.PureComponent);PageCanvasInternal.propTypes={canvasBackground:propTypesExports.string,canvasRef:isRef,devicePixelRatio:propTypesExports.number,onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,page:isPage.isRequired,renderForms:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number.isRequired};function PageCanvas(o){return React.createElement(PageContext.Consumer,null,function(s){return React.createElement(PageCanvasInternal,_extends({},s,o))})}function _createSuper$3(o){var s=_isNativeReflectConstruct$3();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PageSVGInternal=function(o){_inherits(a,o);var s=_createSuper$3(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"state",{svg:null}),_defineProperty(_assertThisInitialized(et),"onRenderSuccess",function(){et.renderer=null;var dt=et.props,ft=dt.onRenderSuccess,vt=dt.page,wt=dt.scale;ft&&ft(makePageCallback(vt,wt))}),_defineProperty(_assertThisInitialized(et),"onRenderError",function(dt){if(!isCancelException(dt)){warning(dt);var ft=et.props.onRenderError;ft&&ft(dt)}}),_defineProperty(_assertThisInitialized(et),"renderSVG",function(){var dt=et.props.page;return et.renderer=dt.getOperatorList(),et.renderer.then(function(ft){var vt=new pdfExports.SVGGraphics(dt.commonObjs,dt.objs);et.renderer=vt.getSVG(ft,et.viewport).then(function(wt){et.setState({svg:wt},et.onRenderSuccess)}).catch(et.onRenderError)}).catch(et.onRenderError)}),_defineProperty(_assertThisInitialized(et),"drawPageOnContainer",function(dt){var ft=et.state.svg;if(!(!dt||!ft)){dt.firstElementChild||dt.appendChild(ft);var vt=et.viewport,wt=vt.width,Ct=vt.height;ft.setAttribute("width",wt),ft.setAttribute("height",Ct)}}),et}return _createClass(a,[{key:"componentDidMount",value:function(){this.renderSVG()}},{key:"viewport",get:function(){var at=this.props,lt=at.page,ht=at.rotate,dt=at.scale;return lt.getViewport({scale:dt,rotation:ht})}},{key:"render",value:function(){var at=this,lt=this.viewport,ht=lt.width,dt=lt.height;return React.createElement("div",{className:"react-pdf__Page__svg",ref:function(vt){return at.drawPageOnContainer(vt)},style:{display:"block",backgroundColor:"white",overflow:"hidden",width:ht,height:dt,userSelect:"none"}})}}]),a}(reactExports.PureComponent);PageSVGInternal.propTypes={onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,page:isPage.isRequired,rotate:isRotate,scale:propTypesExports.number.isRequired};function PageSVG(o){return React.createElement(PageContext.Consumer,null,function(s){return React.createElement(PageSVGInternal,_extends({},s,o))})}function ownKeys$1(o,s){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(o);s&&(et=et.filter(function(at){return Object.getOwnPropertyDescriptor(o,at).enumerable})),a.push.apply(a,et)}return a}function _objectSpread$1(o){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys$1(Object(a),!0).forEach(function(et){_defineProperty(o,et,a[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys$1(Object(a)).forEach(function(et){Object.defineProperty(o,et,Object.getOwnPropertyDescriptor(a,et))})}return o}function _createSuper$2(o){var s=_isNativeReflectConstruct$2();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var TextLayerInternal=function(o){_inherits(a,o);var s=_createSuper$2(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"state",{textContent:null}),_defineProperty(_assertThisInitialized(et),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(et),"endElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(et),"loadTextContent",function(){var dt=et.props.page,ft=makeCancellablePromise(dt.getTextContent());et.runningTask=ft,ft.promise.then(function(vt){et.setState({textContent:vt},et.onLoadSuccess)}).catch(function(vt){et.onLoadError(vt)})}),_defineProperty(_assertThisInitialized(et),"onLoadSuccess",function(){var dt=et.props.onGetTextSuccess,ft=et.state.textContent;dt&&dt(ft)}),_defineProperty(_assertThisInitialized(et),"onLoadError",function(dt){et.setState({textItems:!1}),warning(dt);var ft=et.props.onGetTextError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"onRenderSuccess",function(){var dt=et.props.onRenderTextLayerSuccess;dt&&dt()}),_defineProperty(_assertThisInitialized(et),"onRenderError",function(dt){warning(dt);var ft=et.props.onRenderTextLayerError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"onMouseDown",function(){var dt=et.endElement.current;dt&&dt.classList.add("active")}),_defineProperty(_assertThisInitialized(et),"onMouseUp",function(){var dt=et.endElement.current;dt&&dt.classList.remove("active")}),et}return _createClass(a,[{key:"componentDidMount",value:function(){var at=this.props.page;invariant(at,"Attempted to load page text content, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),this.loadTextContent()}},{key:"componentDidUpdate",value:function(at){var lt=this.props.page;at.page&&lt!==at.page&&this.loadTextContent()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var at=this.props,lt=at.page,ht=at.rotate,dt=at.scale;return lt.getViewport({scale:dt,rotation:ht})}},{key:"unrotatedViewport",get:function(){var at=this.props,lt=at.page,ht=at.scale;return lt.getViewport({scale:ht})}},{key:"rotate",get:function(){var at=this.props,lt=at.page,ht=at.rotate;return ht-lt.rotate}},{key:"renderTextLayer",value:function(){var at=this,lt=this.state.textContent;if(!lt)return null;var ht=this.layerElement.current,dt=this.viewport,ft=this.props,vt=ft.customTextRenderer,wt=ft.pageIndex,Ct=ft.pageNumber;cancelRunningTask(this.runningTask),ht.innerHTML="";var xt={container:ht,textContent:lt,viewport:dt},Pt=pdfExports.renderTextLayer(xt);this.runningTask=Pt,Pt.promise.then(function(){var Rt=document.createElement("div");if(Rt.className="endOfContent",ht.append(Rt),at.endElement.current=Rt,vt){var _t=0;lt.items.forEach(function(St,bt){var Nt=at.layerElement.current.children[_t],kt=vt(_objectSpread$1({pageIndex:wt,pageNumber:Ct,itemIndex:bt},St));Nt.innerHTML=kt,_t+=St.str&&St.hasEOL?2:1})}at.onRenderSuccess()}).catch(function(Rt){at.onRenderError(Rt)})}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__textContent textLayer",onMouseUp:this.onMouseUp,onMouseDown:this.onMouseDown,ref:this.layerElement},this.renderTextLayer())}}]),a}(reactExports.PureComponent);TextLayerInternal.propTypes={customTextRenderer:propTypesExports.func,onGetTextError:propTypesExports.func,onGetTextSuccess:propTypesExports.func,onRenderTextLayerError:propTypesExports.func,onRenderTextLayerSuccess:propTypesExports.func,page:isPage.isRequired,pageIndex:propTypesExports.number.isRequired,pageNumber:propTypesExports.number.isRequired,rotate:isRotate,scale:propTypesExports.number};function TextLayer(o){return React.createElement(PageContext.Consumer,null,function(s){return React.createElement(TextLayerInternal,_extends({},s,o))})}function _createSuper$1(o){var s=_isNativeReflectConstruct$1();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var AnnotationLayerInternal=function(o){_inherits(a,o);var s=_createSuper$1(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"state",{annotations:null}),_defineProperty(_assertThisInitialized(et),"layerElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(et),"loadAnnotations",function(){var dt=et.props.page,ft=makeCancellablePromise(dt.getAnnotations());et.runningTask=ft,ft.promise.then(function(vt){et.setState({annotations:vt},et.onLoadSuccess)}).catch(function(vt){et.onLoadError(vt)})}),_defineProperty(_assertThisInitialized(et),"onLoadSuccess",function(){var dt=et.props.onGetAnnotationsSuccess,ft=et.state.annotations;dt&&dt(ft)}),_defineProperty(_assertThisInitialized(et),"onLoadError",function(dt){et.setState({annotations:!1}),warning(dt);var ft=et.props.onGetAnnotationsError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"onRenderSuccess",function(){var dt=et.props.onRenderAnnotationLayerSuccess;dt&&dt()}),_defineProperty(_assertThisInitialized(et),"onRenderError",function(dt){warning(dt);var ft=et.props.onRenderAnnotationLayerError;ft&&ft(dt)}),et}return _createClass(a,[{key:"componentDidMount",value:function(){var at=this.props.page;invariant(at,"Attempted to load page annotations, but no page was specified."),warning(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),this.loadAnnotations()}},{key:"componentDidUpdate",value:function(at){var lt=this.props,ht=lt.page,dt=lt.renderForms;(at.page&&ht!==at.page||dt!==at.renderForms)&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){cancelRunningTask(this.runningTask)}},{key:"viewport",get:function(){var at=this.props,lt=at.page,ht=at.rotate,dt=at.scale;return lt.getViewport({scale:dt,rotation:ht})}},{key:"renderAnnotationLayer",value:function(){var at=this.state.annotations;if(at){var lt=this.props,ht=lt.imageResourcesPath,dt=lt.linkService,ft=lt.page,vt=lt.renderForms,wt=this.viewport.clone({dontFlip:!0}),Ct={annotations:at,div:this.layerElement.current,imageResourcesPath:ht,linkService:dt,page:ft,renderForms:vt,viewport:wt};this.layerElement.current.innerHTML="";try{pdfExports.AnnotationLayer.render(Ct),this.onRenderSuccess()}catch(xt){this.onRenderError(xt)}}}},{key:"render",value:function(){return React.createElement("div",{className:"react-pdf__Page__annotations annotationLayer",ref:this.layerElement},this.renderAnnotationLayer())}}]),a}(reactExports.PureComponent);AnnotationLayerInternal.propTypes={imageResourcesPath:propTypesExports.string,linkService:isLinkService.isRequired,onGetAnnotationsError:propTypesExports.func,onGetAnnotationsSuccess:propTypesExports.func,onRenderAnnotationLayerError:propTypesExports.func,onRenderAnnotationLayerSuccess:propTypesExports.func,page:isPage,renderForms:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number};var AnnotationLayer=function o(s){return React.createElement(DocumentContext.Consumer,null,function(a){return React.createElement(PageContext.Consumer,null,function(et){return React.createElement(AnnotationLayerInternal,_extends({},a,et,s))})})};function ownKeys(o,s){var a=Object.keys(o);if(Object.getOwnPropertySymbols){var et=Object.getOwnPropertySymbols(o);s&&(et=et.filter(function(at){return Object.getOwnPropertyDescriptor(o,at).enumerable})),a.push.apply(a,et)}return a}function _objectSpread(o){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?ownKeys(Object(a),!0).forEach(function(et){_defineProperty(o,et,a[et])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(et){Object.defineProperty(o,et,Object.getOwnPropertyDescriptor(a,et))})}return o}function _createSuper(o){var s=_isNativeReflectConstruct();return function(){var et=_getPrototypeOf(o),at;if(s){var lt=_getPrototypeOf(this).constructor;at=Reflect.construct(et,arguments,lt)}else at=et.apply(this,arguments);return _possibleConstructorReturn(this,at)}}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var defaultScale=1,PageInternal=function(o){_inherits(a,o);var s=_createSuper(a);function a(){var et;_classCallCheck(this,a);for(var at=arguments.length,lt=new Array(at),ht=0;ht<at;ht++)lt[ht]=arguments[ht];return et=s.call.apply(s,[this].concat(lt)),_defineProperty(_assertThisInitialized(et),"state",{page:null}),_defineProperty(_assertThisInitialized(et),"pageElement",reactExports.createRef()),_defineProperty(_assertThisInitialized(et),"onLoadSuccess",function(){var dt=et.props,ft=dt.onLoadSuccess,vt=dt.registerPage,wt=et.state.page;ft&&ft(makePageCallback(wt,et.scale)),vt&&vt(et.pageIndex,et.pageElement.current)}),_defineProperty(_assertThisInitialized(et),"onLoadError",function(dt){et.setState({page:!1}),warning(dt);var ft=et.props.onLoadError;ft&&ft(dt)}),_defineProperty(_assertThisInitialized(et),"loadPage",function(){var dt=et.props.pdf,ft=et.getPageNumber();if(ft){et.setState(function(wt){return wt.page?{page:null}:null});var vt=makeCancellablePromise(dt.getPage(ft));et.runningTask=vt,vt.promise.then(function(wt){et.setState({page:wt},et.onLoadSuccess)}).catch(function(wt){et.onLoadError(wt)})}}),et}return _createClass(a,[{key:"componentDidMount",value:function(){var at=this.props.pdf;invariant(at,"Attempted to load a page, but no document was specified."),this.loadPage()}},{key:"componentDidUpdate",value:function(at){var lt=this.props.pdf;if(at.pdf&&lt!==at.pdf||this.getPageNumber()!==this.getPageNumber(at)){var ht=this.props.unregisterPage;ht&&ht(this.getPageIndex(at)),this.loadPage()}}},{key:"componentWillUnmount",value:function(){var at=this.props.unregisterPage;at&&at(this.pageIndex),cancelRunningTask(this.runningTask)}},{key:"childContext",get:function(){var at=this.pageIndex,lt=this.pageNumber,ht=this.state.page;if(!ht)return{};var dt=this.props,ft=dt.canvasBackground,vt=dt.customTextRenderer,wt=dt.devicePixelRatio,Ct=dt.onGetAnnotationsError,xt=dt.onGetAnnotationsSuccess,Pt=dt.onGetTextError,Rt=dt.onGetTextSuccess,_t=dt.onRenderAnnotationLayerError,St=dt.onRenderAnnotationLayerSuccess,bt=dt.onRenderError,Nt=dt.onRenderSuccess,kt=dt.onRenderTextLayerError,Dt=dt.onRenderTextLayerSuccess,jt=dt.renderForms,Wt=dt.renderInteractiveForms;return{canvasBackground:ft,customTextRenderer:vt,devicePixelRatio:wt,onGetAnnotationsError:Ct,onGetAnnotationsSuccess:xt,onGetTextError:Pt,onGetTextSuccess:Rt,onRenderAnnotationLayerError:_t,onRenderAnnotationLayerSuccess:St,onRenderError:bt,onRenderSuccess:Nt,onRenderTextLayerError:kt,onRenderTextLayerSuccess:Dt,page:ht,pageIndex:at,pageNumber:lt,renderForms:jt??Wt,rotate:this.rotate,scale:this.scale}}},{key:"getPageIndex",value:function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(at.pageNumber)?at.pageNumber-1:isProvided(at.pageIndex)?at.pageIndex:null}},{key:"getPageNumber",value:function(){var at=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return isProvided(at.pageNumber)?at.pageNumber:isProvided(at.pageIndex)?at.pageIndex+1:null}},{key:"pageIndex",get:function(){return this.getPageIndex()}},{key:"pageNumber",get:function(){return this.getPageNumber()}},{key:"rotate",get:function(){var at=this.props.rotate;if(isProvided(at))return at;var lt=this.state.page;return lt?lt.rotate:null}},{key:"scale",get:function(){var at=this.state.page;if(!at)return null;var lt=this.props,ht=lt.scale,dt=lt.width,ft=lt.height,vt=this.rotate,wt=1,Ct=ht===null?defaultScale:ht;if(dt||ft){var xt=at.getViewport({scale:1,rotation:vt});wt=dt?dt/xt.width:ft/xt.height}return Ct*wt}},{key:"eventProps",get:function(){var at=this;return makeEventProps(this.props,function(){var lt=at.state.page;return lt&&makePageCallback(lt,at.scale)})}},{key:"pageKey",get:function(){return"".concat(this.pageIndex,"@").concat(this.scale,"/").concat(this.rotate)}},{key:"pageKeyNoScale",get:function(){return"".concat(this.pageIndex,"/").concat(this.rotate)}},{key:"renderMainLayer",value:function(){var at=this.props,lt=at.canvasRef,ht=at.renderMode;switch(ht){case"none":return null;case"svg":return React.createElement(PageSVG,{key:"".concat(this.pageKeyNoScale,"_svg")});case"canvas":default:return React.createElement(PageCanvas,{key:"".concat(this.pageKey,"_canvas"),canvasRef:lt})}}},{key:"renderTextLayer",value:function(){var at=this.props.renderTextLayer;return at?React.createElement(TextLayer,{key:"".concat(this.pageKey,"_text")}):null}},{key:"renderAnnotationLayer",value:function(){var at=this.props.renderAnnotationLayer;return at?React.createElement(AnnotationLayer,{key:"".concat(this.pageKey,"_annotations")}):null}},{key:"renderChildren",value:function(){var at=this.props.children;return React.createElement(PageContext.Provider,{value:this.childContext},this.renderMainLayer(),this.renderTextLayer(),this.renderAnnotationLayer(),at)}},{key:"renderContent",value:function(){var at=this.pageNumber,lt=this.props.pdf,ht=this.state.page;if(!at){var dt=this.props.noData;return React.createElement(Message,{type:"no-data"},typeof dt=="function"?dt():dt)}if(lt===null||ht===null){var ft=this.props.loading;return React.createElement(Message,{type:"loading"},typeof ft=="function"?ft():ft)}if(lt===!1||ht===!1){var vt=this.props.error;return React.createElement(Message,{type:"error"},typeof vt=="function"?vt():vt)}return this.renderChildren()}},{key:"render",value:function(){var at=this.pageNumber,lt=this.props,ht=lt.className,dt=lt.inputRef;return React.createElement("div",_extends({className:clsx("react-pdf__Page",ht),"data-page-number":at,ref:mergeRefs(dt,this.pageElement),style:{position:"relative",minWidth:"min-content",minHeight:"min-content"}},this.eventProps),this.renderContent())}}]),a}(reactExports.PureComponent);PageInternal.defaultProps={error:"Failed to load the page.",loading:"Loading page",noData:"No page specified.",renderAnnotationLayer:!0,renderMode:"canvas",renderTextLayer:!0,scale:defaultScale};var isFunctionOrNode=propTypesExports.oneOfType([propTypesExports.func,propTypesExports.node]);PageInternal.propTypes=_objectSpread(_objectSpread({},eventProps),{},{canvasBackground:propTypesExports.string,children:propTypesExports.node,className:isClassName,customTextRenderer:propTypesExports.func,devicePixelRatio:propTypesExports.number,error:isFunctionOrNode,height:propTypesExports.number,imageResourcesPath:propTypesExports.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:propTypesExports.func,onGetTextSuccess:propTypesExports.func,onLoadError:propTypesExports.func,onLoadSuccess:propTypesExports.func,onRenderError:propTypesExports.func,onRenderSuccess:propTypesExports.func,onRenderTextLayerError:propTypesExports.func,onRenderTextLayerSuccess:propTypesExports.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,registerPage:propTypesExports.func,renderAnnotationLayer:propTypesExports.bool,renderForms:propTypesExports.bool,renderInteractiveForms:propTypesExports.bool,renderMode:isRenderMode,renderTextLayer:propTypesExports.bool,rotate:isRotate,scale:propTypesExports.number,unregisterPage:propTypesExports.func,width:propTypesExports.number});function Page(o,s){return React.createElement(DocumentContext.Consumer,null,function(a){return React.createElement(PageInternal,_extends({ref:s},a,o))})}const Page$1=React.forwardRef(Page);displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfExports.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfExports.version}/pdf.worker.js`;const PdfView=({blob:o})=>{const[s,a]=reactExports.useState(null),et=URL.createObjectURL(o);function at({numPages:lt}){a(lt)}return jsxs("div",{children:[jsx(Document,{file:et,onLoadSuccess:at,children:Array.from(new Array(s),(lt,ht)=>jsx(Page$1,{pageNumber:ht+1},`page_${ht+1}`))}),s&&jsxs("p",{children:["Number of pages: ",s]})]})},BlobViewer=({blob:o})=>{const[s,a]=reactExports.useState(null);return React.useEffect(()=>{const et=URL.createObjectURL(o);return a(et),()=>URL.revokeObjectURL(et)},[o]),s?o.type.startsWith("image/")?jsx("img",{src:s,alt:"blob"}):o.type.startsWith("video/")?jsx("img",{src:s,alt:"blob"}):o.type.startsWith("application/pdf")?jsx(PdfView,{blob:o}):jsxs("div",{children:["Unsupported blob type: ",o.type]}):jsx("div",{children:"Loading..."})},Modal=({setOpenModal:o,cidInfo:s})=>{const[a,et]=reactExports.useState(!1),[at,lt]=reactExports.useState(""),{retrieveFile:ht}=reactExports.useContext(Web3Context);return reactExports.useEffect(()=>{async function dt(){try{et(!0);const ft=await ht(s.cid,s.name);lt(ft),et(!1)}catch(ft){et(!1),Q$1.error(ft)}}dt()},[]),jsx("div",{className:"modalBackground",style:{alignItems:at&&at.type.startsWith("application/pdf")?"flex-start":"center"},children:a?jsx(HashLoader,{color:"#76d636",loading:a,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"}):jsx(Fragment,{children:jsxs("div",{className:"modalContainer",children:[jsx("div",{className:"titleCloseBtn",children:jsx("button",{onClick:()=>{o(!1)},children:"X"})}),jsx("div",{className:"title",children:jsx("h1",{children:s.name})}),jsx("div",{className:"body",children:at&&jsx(BlobViewer,{blob:at})})]})})})},Home=()=>{const[o,s]=reactExports.useState(!1),[a,et]=reactExports.useState([]),[at,lt]=reactExports.useState(!1),[ht,dt]=reactExports.useState({}),[ft,vt]=reactExports.useState(!1),{email:wt}=useParams(),Ct=useNavigate(),{currentUser:xt}=reactExports.useContext(AuthContext);return reactExports.useEffect(()=>{async function Pt(){try{const _t=await Jl(rh(db,"userSetting",wt));if(_t.exists()){if(_t.data().access.includes(xt.email))return vt(!0),!0;Q$1.error("Access denied"),Ct("/")}else Q$1.error("URL doesn't exist"),Ct("/")}catch{return!1}}async function Rt(){try{s(!0);let _t=!1;wt&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(wt)?_t=await Pt():(Q$1.error("URL does't exist"),Ct("/")));const bt=_t?wt:xt.email,Nt=await Jl(rh(db,"userSetting",bt));if(Nt.exists()){const kt=Nt.data().cids,Dt=[],jt=dl(sh(db,"cidMetaData"),_l("cid","in",kt));(await tf(jt)).forEach(Yt=>{Dt.push(Yt.data())}),Dt.sort((Yt,Bt)=>new Date(Bt.metaData.testDate)-new Date(Yt.metaData.testDate)),et(Dt),s(!1)}else console.log("No record")}catch(_t){s(!1),Q$1.error(_t)}}Rt()},[wt]),jsxs(Fragment,{children:[jsx(Wrapper$4,{children:o?jsx("div",{className:"loader",children:jsx(HashLoader,{color:"#76d636",loading:o,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"})}):jsx(Fragment,{children:a.length==0?jsxs("div",{className:"empty",children:[jsx(MdAddCircle,{style:{fontSize:"100px"}}),jsx("h2",{children:jsx(Link,{to:"/new",children:"Add medical file >"})})]}):jsxs("div",{className:"main",children:[jsxs("h3",{className:"heading",children:[`${ft&&wt?wt:"Your"} medical History`," "]}),jsx("div",{className:"container",children:jsx("ul",{children:a.map(Pt=>jsxs("li",{children:[jsx("h3",{className:"title",children:Pt.metaData.diseaseName}),jsxs("div",{children:[jsxs("p",{children:[" Doctor name :- ",Pt.metaData.doctorName]}),jsxs("p",{children:[" Hospital name :- ",Pt.metaData.hospitalName]}),jsxs("p",{children:[" Medicine :- ",Pt.metaData.medicinePrescribed]}),jsxs("p",{children:[" Recovery date :- ",Pt.metaData.recoveryDate]})]}),jsx("a",{style:{cursor:"pointer"},onClick:()=>{dt({cid:Pt.cid,name:Pt.name}),lt(!0)},children:"See medical file >"}),jsx("span",{className:"circle"}),jsx("span",{className:"date",children:Pt.metaData.testDate})]},Pt.cid))})})]})})}),at&&jsx(Modal,{setOpenModal:lt,cidInfo:ht})]})},Logo="/assets/logo-e053ec26.png",Image1="/assets/carouselImg1-c89d63b0.png",Image2="/assets/carouselImg2-05a1fe19.png",Image3="/assets/carouselImg3-d9ae32c6.png",Carousel=()=>{const[o,s]=reactExports.useState(0),a=et=>{s(et)};return jsxs("div",{className:"carousel",children:[jsxs("div",{className:"images-wrapper",children:[jsx("img",{src:Image1,className:`image img-1 ${o===0?"show":""}`,alt:"image1"}),jsx("img",{src:Image2,className:`image img-2 ${o===1?"show":""}`,alt:"image2"}),jsx("img",{src:Image3,className:`image img-3 ${o===2?"show":""}`,alt:"image3"})]}),jsxs("div",{className:"text-slider",children:[jsx("div",{className:"text-wrap",children:jsxs("div",{className:"text-group",style:{transform:`translateY(${-o*2.2}rem)`},children:[jsx("h2",{children:"Universal Medical Record"}),jsx("h2",{children:"Track your full Medical Histroy"}),jsx("h2",{children:"HAPPY HEALTHY LIFE"})]})}),jsxs("div",{className:"bullets",children:[jsx("span",{className:`bullet ${o===0?"active":""}`,onClick:()=>a(0)}),jsx("span",{className:`bullet ${o===1?"active":""}`,onClick:()=>a(1)}),jsx("span",{className:`bullet ${o===2?"active":""}`,onClick:()=>a(2)})]})]})]})},Wrapper$3=styled.div`
  background: rgb(8, 8, 122);
  background: linear-gradient(
    54deg,
    rgba(8, 8, 122, 0.7400210084033614) 0%,
    rgba(8, 148, 245, 1) 48%,
    rgba(2, 158, 12, 1) 100%
  );
  main {
    width: 100%;
    min-height: 100dvh;
    overflow: hidden;
    // background-color: #ff8c6b;
    padding: 2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
  }

  .loader {
    width: 100dvw;
    height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .box {
    position: relative;
    width: 100%;
    max-width: 1020px;
    height: 640px;
    background-color: #fff;
    border-radius: 3.3rem;
    box-shadow: 0 60px 40px -30px rgba(0, 0, 0, 0.27);
  }

  .inner-box {
    position: absolute;
    width: calc(100% - 4.1rem);
    height: calc(100% - 4.1rem);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
  }

  .forms-wrap {
    position: absolute;
    height: 100%;
    width: 45%;
    top: 0;
    left: 0;
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    transition: 0.8s ease-in-out;
  }

  form {
    max-width: 260px;
    width: 100%;
    margin: 0 auto;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-evenly;
    grid-column: 1 / 2;
    grid-row: 1 / 2;
    transition: opacity 0.02s 0.4s;
  }

  form.sign-up-form {
    opacity: 0;
    pointer-events: none;
  }

  .logo {
    display: flex;
    align-items: center;
  }

  .logo img {
    width: 27px;
    margin-right: 0.3rem;
  }

  .logo h4 {
    font-size: 1.1rem;
    margin-top: -9px;
    letter-spacing: -0.5px;
    color: #151111;
  }

  .heading h2 {
    font-size: 2.1rem;
    font-weight: 600;
    color: #151111;
  }

  .heading h6 {
    color: #bababa;
    font-weight: 400;
    font-size: 0.75rem;
    display: inline;
  }

  .toggle {
    color: #151111;
    text-decoration: none;
    font-size: 0.75rem;
    font-weight: 500;
    transition: 0.3s;
  }

  .toggle:hover {
    color: #8371fd;
  }

  .input-wrap {
    position: relative;
    height: 37px;
    margin-bottom: 2rem;
  }

  .input-field {
    position: absolute;
    width: 100%;
    height: 100%;
    background: none;
    border: none;
    outline: none;
    border-bottom: 1px solid #bbb;
    padding: 0;
    font-size: 0.95rem;
    color: #151111;
    transition: 0.4s;
  }

  label {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    font-size: 0.95rem;
    color: #bbb;
    pointer-events: none;
    transition: 0.4s;
  }

  .input-field.active {
    border-bottom-color: #151111;
  }

  .input-field.active + label {
    font-size: 0.75rem;
    top: -2px;
  }

  .sign-btn {
    display: inline-block;
    width: 100%;
    height: 43px;
    // background-color: #151111;
    // color: #fff;
    background-color: #8371fd;

    // font-weight: 700;
    border: none;
    cursor: pointer;
    border-radius: 0.8rem;
    font-size: 0.8rem;
    margin-bottom: 2rem;
    transition: 0.3s;
  }

  .sign-btn:hover {
    background-color: #8371fd;
    transform: scale(1.1);
  }

  .text {
    color: #bbb;
    font-size: 0.7rem;
  }

  .text a {
    color: #bbb;
    transition: 0.3s;
  }

  .text a:hover {
    color: #8371fd;
  }

  main.sign-up-mode form.sign-in-form {
    opacity: 0;
    pointer-events: none;
  }

  main.sign-up-mode form.sign-up-form {
    opacity: 1;
    pointer-events: all;
  }

  main.sign-up-mode .forms-wrap {
    left: 55%;
  }

  main.sign-up-mode .carousel {
    left: 0%;
  }

  .carousel {
    position: absolute;
    height: 100%;
    width: 55%;
    left: 45%;
    top: 0;
    // background-color: #ffe0d2;
    background: rgb(8, 8, 122);
    background: linear-gradient(
      54deg,
      rgba(8, 8, 122, 0.7400210084033614) 0%,
      rgba(8, 148, 245, 1) 48%,
      rgba(2, 158, 12, 1) 100%
    );
    border-radius: 2rem;
    display: grid;
    grid-template-rows: auto 1fr;
    padding-bottom: 2rem;
    overflow: hidden;
    transition: 0.8s ease-in-out;
  }

  .images-wrapper {
    display: grid;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
  }

  .image {
    width: 100%;
    grid-column: 1/2;
    grid-row: 1/2;
    opacity: 0;
    transition: opacity 0.3s, transform 0.5s;
  }

  .img-1 {
    transform: translate(0, -50px);
  }

  .img-2 {
    transform: scale(0.4, 0.5);
  }

  .img-3 {
    transform: scale(0.3) rotate(-20deg);
  }

  .image.show {
    opacity: 1;
    transform: none;
  }

  .text-slider {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .text-wrap {
    max-height: 2.2rem;
    overflow: hidden;
    margin-bottom: 2.5rem;
  }

  .text-group {
    display: flex;
    flex-direction: column;
    text-align: center;
    transform: translateY(0);
    transition: 0.5s;
  }

  .text-group h2 {
    line-height: 2.2rem;
    font-weight: 600;
    font-size: 1.6rem;
  }

  .bullets {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .bullets span {
    display: block;
    width: 0.5rem;
    height: 0.5rem;
    background-color: #aaa;
    margin: 0 0.25rem;
    border-radius: 50%;
    cursor: pointer;
    transition: 0.3s;
  }

  .bullets span.active {
    width: 1.1rem;
    background-color: #151111;
    border-radius: 1rem;
  }

  @media (max-width: 850px) {
    .box {
      height: auto;
      max-width: 550px;
      overflow: hidden;
    }

    .inner-box {
      position: static;
      transform: none;
      width: revert;
      height: revert;
      padding: 2rem;
    }

    .forms-wrap {
      position: revert;
      width: 100%;
      height: auto;
    }

    form {
      max-width: revert;
      padding: 1.5rem 2.5rem 2rem;
      transition: transform 0.8s ease-in-out, opacity 0.45s linear;
    }

    .heading {
      margin: 2rem 0;
    }

    form.sign-up-form {
      transform: translateX(100%);
    }

    main.sign-up-mode form.sign-in-form {
      transform: translateX(-100%);
    }

    main.sign-up-mode form.sign-up-form {
      transform: translateX(0%);
    }

    .carousel {
      position: revert;
      height: auto;
      width: 100%;
      padding: 3rem 2rem;
      display: flex;
    }

    .images-wrapper {
      display: none;
    }

    .text-slider {
      width: 100%;
    }
  }

  @media (max-width: 530px) {
    main {
      padding: 1rem;
    }

    .box {
      border-radius: 2rem;
    }

    .inner-box {
      padding: 1rem;
    }

    .carousel {
      padding: 1.5rem 1rem;
      border-radius: 1.6rem;
    }

    .text-wrap {
      margin-bottom: 1rem;
    }

    .text-group h2 {
      font-size: 1.2rem;
    }

    form {
      padding: 1rem 2rem 1.5rem;
    }
  }
`;function AiFillFileAdd(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M480 580H372a8 8 0 0 0-8 8v48a8 8 0 0 0 8 8h108v108a8 8 0 0 0 8 8h48a8 8 0 0 0 8-8V644h108a8 8 0 0 0 8-8v-48a8 8 0 0 0-8-8H544V472a8 8 0 0 0-8-8h-48a8 8 0 0 0-8 8v108zm374.6-291.3c6 6 9.4 14.1 9.4 22.6V928c0 17.7-14.3 32-32 32H192c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32h424.7c8.5 0 16.7 3.4 22.7 9.4l215.2 215.3zM790.2 326L602 137.8V326h188.2z"}}]})(o)}function AiFillFileImage(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M854.6 288.7L639.4 73.4c-6-6-14.2-9.4-22.7-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.6-9.4-22.6zM400 402c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zm296 294H328c-6.7 0-10.4-7.7-6.3-12.9l99.8-127.2a8 8 0 0 1 12.6 0l41.1 52.4 77.8-99.2a8 8 0 0 1 12.6 0l136.5 174c4.3 5.2.5 12.9-6.1 12.9zm-94-370V137.8L790.2 326H602z"}}]})(o)}const Auth=()=>{const[o,s]=reactExports.useState(!1),[a,et]=reactExports.useState({email:"",password:""}),[at,lt]=reactExports.useState({name:"",email:"",password:"",file:null}),ht=useNavigate(),{currentUser:dt}=reactExports.useContext(AuthContext);reactExports.useEffect(()=>{dt&&ht("/")},[]);function ft(bt){bt.target.classList.add("active")}function vt(bt){bt.target.value==""&&bt.target.classList.remove("active")}const wt=reactExports.useRef(null),Ct=()=>{wt.current.classList.toggle("sign-up-mode")},xt=bt=>{et({...a,[bt.target.name]:bt.target.value})},Pt=bt=>{lt({...at,[bt.target.name]:bt.target.value})};return jsx(Wrapper$3,{children:o?jsx("div",{className:"loader",children:jsx(HashLoader,{color:"#76d636",loading:o,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"})}):jsx("main",{ref:wt,children:jsx("div",{className:"box",children:jsxs("div",{className:"inner-box",children:[jsxs("div",{className:"forms-wrap",children:[jsxs("form",{onSubmit:async bt=>{bt.preventDefault();const{email:Nt,password:kt}=a;try{s(!0);const{user:Dt}=await signInWithEmailAndPassword(auth,Nt,kt);s(!1),Q$1.success(`Welcome back ${Dt.displayName} `),ht("/")}catch(Dt){s(!1),Q$1.error(`Error authenticating user: ${Dt}`)}},autoComplete:"off",className:"sign-in-form",children:[jsxs("div",{className:"logo",children:[jsx("img",{src:Logo,alt:"Universal Medical Record"}),jsx("h4",{children:"Universal Medical Record"})]}),jsxs("div",{className:"heading",children:[jsx("h2",{children:"Welcome"}),jsx("h6",{children:"Not registred yet?"}),jsx("a",{href:"#",className:"toggle",onClick:Ct,children:"Sign up"})]}),jsxs("div",{className:"actual-form",children:[jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"email",name:"email",onChange:xt,className:"input-field",onFocus:ft,onBlur:vt,autoComplete:"off",required:!0}),jsx("label",{children:"Email"})]}),jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"password",minLength:8,name:"password",onChange:xt,onFocus:ft,onBlur:vt,className:"input-field",autoComplete:"off",required:!0}),jsx("label",{children:"Password"})]}),jsx("input",{type:"submit",defaultValue:"Sign In",className:"sign-btn"}),jsxs("p",{className:"text",children:["Forgotten your password or you login datails?",jsx("a",{href:"#",children:"Get help"})," signing in"]})]})]}),jsxs("form",{onSubmit:async bt=>{bt.preventDefault();const{name:Nt,email:kt,password:Dt,file:jt}=at;try{s(!0);const{user:Wt}=await createUserWithEmailAndPassword(auth,kt,Dt),Yt=ref(storage,kt),Bt=uploadBytesResumable(Yt,jt);Bt.on("state_changed",null,zt=>{console.error(zt)},()=>{getDownloadURL(Bt.snapshot.ref).then(async zt=>{await updateProfile(Wt,{displayName:Nt,photoURL:zt}),await sf(rh(db,"userInfo",kt),{email:kt,name:Nt,photoURL:zt}),await sf(rh(db,"userSetting",kt),{email:kt,notification:[],access:[],permission:[],cids:[]}),s(!1),Q$1.success(`Welcome ${Wt.displayName} . Update your profile`),ht("/account")}).catch(zt=>{s(!1),Q$1.error(`Error : ${zt}`)})})}catch(Wt){s(!1),Q$1.error(`Error : ${Wt}`)}},autoComplete:"off",className:"sign-up-form",children:[jsxs("div",{className:"logo",children:[jsx("img",{src:Logo,alt:"Universal Medical Record"}),jsx("h4",{children:"Universal Medical Record"})]}),jsxs("div",{className:"heading",children:[jsx("h2",{children:"Get Started"}),jsx("h6",{children:"Already have an account?"}),jsx("a",{href:"#",className:"toggle",onClick:Ct,children:"Sign in"})]}),jsxs("div",{className:"actual-form",children:[jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"text",minLength:3,name:"name",onChange:Pt,onFocus:ft,onBlur:vt,className:"input-field",autoComplete:"off",required:!0}),jsx("label",{children:"Name"})]}),jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"email",name:"email",onChange:Pt,onFocus:ft,onBlur:vt,className:"input-field",autoComplete:"off",required:!0}),jsx("label",{children:"Email"})]}),jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"password",minLength:8,name:"password",onChange:Pt,onFocus:ft,onBlur:vt,className:"input-field",autoComplete:"off",required:!0}),jsx("label",{children:"Password"})]}),jsxs("div",{className:"input-wrap",children:[jsx("input",{type:"file",id:"file",name:"file",style:{display:"none"},onChange:bt=>{lt({...at,[bt.target.name]:bt.target.files[0]})},required:!0}),jsxs("label",{htmlFor:"file",style:{pointerEvents:"auto",cursor:"pointer"},children:[jsx(AiFillFileImage,{}),jsx("span",{children:`${at.file?at.file.name:"Add a picture"}`})]})]}),jsx("input",{type:"submit",defaultValue:"Sign Up",className:"sign-btn"}),jsxs("p",{className:"text",children:["By signing up, I agree to the",jsx("a",{href:"#",children:"Terms of Services"})," and",jsx("a",{href:"#",children:"Privacy Policy"})]})]})]})]}),jsx(Carousel,{})]})})})})},Wrapper$2=styled.div`
  display: flex;
  // align-items: center;
  justify-content: center;
  margin-top: 10px;

  .container {
    position: relative;
    max-width: 900px;
    width: 100%;
    border-radius: 6px;
    padding: 30px;
    margin: 0 15px;
    background-color: #fff;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
  }

  .container header {
    position: relative;
    font-size: 20px;
    font-weight: 600;
    color: #333;
  }

  .container header::before {
    content: "";
    position: absolute;
    left: 0;
    bottom: -2px;
    height: 3px;
    width: 27px;
    border-radius: 8px;
    background-color: #4070f4;
  }
  .container form {
    position: relative;
    margin-top: 16px;
    min-height: 490px;
  }

  .container form .details {
    margin-top: 30px;
  }

  .container form .details.ID {
    margin-top: 10px;
  }
  .container form .title {
    display: block;
    margin-bottom: 8px;
    font-size: 16px;
    font-weight: 500;
    margin: 6px 0;
    color: #333;
  }

  .container form .fields {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  form .fields .input-field {
    display: flex;
    width: calc(100% / 3 - 15px);
    flex-direction: column;
    margin: 4px 0;
  }

  .input-field label {
    font-size: 12px;
    font-weight: 500;
    color: #2e2e2e;
  }

  .input-field input {
    outline: none;
    font-size: 14px;
    font-weight: 400;
    color: #333;
    border-radius: 5px;
    border: 1px solid #aaa;
    padding: 0 15px;
    height: 42px;
    margin: 8px 0;
  }

  .input-field input:is(:focus, :valid) {
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.13);
  }

  .input-field input[type="date"] {
    color: #707070;
  }

  .input-field input[type="date"]:valid {
    color: #333;
  }

  .container form button {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 45px;
    max-width: 200px;
    width: 100%;
    border: none;
    outline: none;
    color: #fff;
    border-radius: 5px;
    margin: 25px 0;
    background-color: #4070f4;
    transition: all 0.3s linear;
    cursor: pointer;
  }
  form button:hover {
    background-color: #265df2;
  }

  .gend {
    height: 42px;
  }

  @media (max-width: 700px) {
    flex-direction: column;
    align-items: center;

    form .fields .input-field {
      flex-direction: column;
      width: 100%;
    }
    .container form button {
      max-width: 100%;
    }
  }
`;function FaBars(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"}}]})(o)}function FaSignOutAlt(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(o)}function FaTimes(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}}]})(o)}function FaUserAlt(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"}}]})(o)}const UserInfo$1="",UserInfo=()=>{const{currentUser:o}=reactExports.useContext(AuthContext);return jsxs("div",{className:"userInfo",children:[jsx("img",{src:o.photoURL,alt:"user"}),jsx("h3",{children:o.displayName}),jsx("p",{children:o.email})]})},Account=()=>{const[o,s]=reactExports.useState(!1),[a,et]=reactExports.useState({dob:"",role:"patient",gender:"male",weight:"",height:"",bloodGroup:"",mobileNo:"",occupation:"",address:""}),{currentUser:at}=reactExports.useContext(AuthContext);reactExports.useEffect(()=>{async function dt(){try{s(!0);const ft=await Jl(rh(db,"userInfo",at.email));if(ft.exists()){const vt=ft.data();s(!1),et({...a,...vt})}}catch(ft){s(!1),Q$1.error(ft)}}dt()},[]);const lt=dt=>{et({...a,[dt.target.name]:dt.target.value})};return jsx(Wrapper$2,{children:o?jsx(HashLoader,{color:"#76d636",loading:o,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"}):jsxs(Fragment,{children:[jsx(UserInfo,{}),jsxs("div",{className:"container",children:[jsxs("header",{children:["Your information ",jsx(FaUserAlt,{})]}),jsx("form",{onSubmit:async dt=>{dt.preventDefault(),s(!0);const{dob:ft,role:vt,gender:wt,weight:Ct,height:xt,bloodGroup:Pt,mobileNo:Rt,occupation:_t,address:St}=a;try{await rf(rh(db,"userInfo",at.email),{dob:ft,role:vt,gender:wt,weight:Ct,height:xt,bloodGroup:Pt,mobileNo:Rt,occupation:_t,address:St}),s(!1),Q$1.success("Information updated successfully")}catch(bt){s(!1),Q$1.error(`Error : ${bt}`)}},children:jsxs("div",{className:"form first",children:[jsxs("div",{className:"details personal",children:[jsx("span",{className:"",title:"",children:"Personal Details"}),jsxs("div",{className:"fields",children:[jsxs("div",{className:"input-field",children:[jsx("label",{children:"Date of Birth"}),jsx("input",{type:"date",placeholder:"Enter birth date",name:"dob",value:a.dob,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{htmlFor:"role",children:"Select your role"}),jsxs("select",{className:"gend",name:"role",value:a.role,onChange:lt,children:[jsx("option",{value:"patient",children:"patient"}),jsx("option",{value:"doctor",children:"doctor"})]})]}),jsxs("div",{className:"input-field",children:[jsx("label",{htmlFor:"gender",children:"Select your gender"}),jsxs("select",{className:"gend",name:"gender",value:a.gender,onChange:lt,children:[jsx("option",{value:"male",children:"male"}),jsx("option",{value:"female",children:"female"}),jsx("option",{value:"other",children:"others"})]})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Weight"}),jsx("input",{type:"text",placeholder:"Enter your weight",name:"weight",value:a.weight,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Height"}),jsx("input",{type:"text",placeholder:"Enter your height",name:"height",value:a.height,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Blood group"}),jsx("input",{type:"text",placeholder:"Enter your Blood group",name:"bloodGroup",value:a.bloodGroup,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Mobile Number"}),jsx("input",{type:"text",minLength:10,placeholder:"Enter your mobile number",name:"mobileNo",value:a.mobileNo,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Occupation"}),jsx("input",{type:"text",placeholder:"Enter your occupation",name:"occupation",value:a.occupation,onChange:lt,required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Address"}),jsx("input",{type:"text",placeholder:"Enter your Address",name:"address",value:a.address,onChange:lt,required:!0})]})]})]}),jsx("button",{className:"nextbtn",type:"submit",children:jsx("span",{className:"btnText",children:"Update"})})]})})]})]})})},ReactToastify="",Navbar$1="";function RiNotification4Fill(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M20 18.667l.4.533a.5.5 0 0 1-.4.8H4a.5.5 0 0 1-.4-.8l.4-.533V10a8 8 0 1 1 16 0v8.667zM9.5 21h5a2.5 2.5 0 1 1-5 0z"}}]}]})(o)}function RiNotificationOffFill(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M18.586 20H4a.5.5 0 0 1-.4-.8l.4-.533V10c0-1.33.324-2.584.899-3.687L1.393 2.808l1.415-1.415 19.799 19.8-1.415 1.414L18.586 20zM20 15.786L7.559 3.345A8 8 0 0 1 20 10v5.786zM9.5 21h5a2.5 2.5 0 1 1-5 0z"}}]}]})(o)}function Navbar(){const o=reactExports.useRef(),s=()=>{o.current.classList.contains("responsive_nav")||o.current.classList.add("responsive_nav")},a=()=>{o.current.classList.contains("responsive_nav")&&o.current.classList.remove("responsive_nav")};return jsxs("div",{className:"navbarContainer",children:[jsxs("div",{children:[jsx("button",{id:"navOpenBtn",onClick:s,children:jsx(FaBars,{})}),jsx("div",{id:"navLogo",children:jsx("img",{src:Logo,alt:"logo"})})]}),jsxs("nav",{ref:o,children:[jsx(Link,{to:"/",onClick:a,children:"My History"}),jsx(Link,{to:"/new",onClick:a,children:"New"}),jsx(Link,{to:"/access",onClick:a,children:"Access"}),jsx(Link,{to:"/account",onClick:a,children:"Account"}),jsx("button",{id:"navCloseBtn",onClick:a,children:jsx(FaTimes,{})})]}),jsxs("div",{className:"navUtilityBtn",children:[jsx("button",{className:"navBtn",children:jsx(Link,{to:"/notifications",children:jsx(RiNotification4Fill,{})})}),jsx("button",{className:"navBtn",onClick:()=>{signOut(auth),Q$1.success("Logout successfully !")},children:jsx(FaSignOutAlt,{})})]})]})}const New=()=>{const[o,s]=reactExports.useState(!1),[a,et]=reactExports.useState({diseaseName:"",hospitalName:"",doctorName:"",testDate:"",medicinePrescribed:"",recoveryDate:"",medicalFile:null}),[at,lt]=reactExports.useState(!1),{diseaseName:ht,hospitalName:dt,doctorName:ft,testDate:vt,medicinePrescribed:wt,recoveryDate:Ct,medicalFile:xt}=a,{files:Pt,uploadFile:Rt,retrieveFile:_t}=reactExports.useContext(Web3Context),{currentUser:St}=reactExports.useContext(AuthContext),{email:bt}=useParams(),Nt=useNavigate();reactExports.useEffect(()=>{async function Wt(){try{console.log(bt,St.email);const Bt=await Jl(rh(db,"userSetting",bt));Bt.exists()?Bt.data().access.includes(St.email)?lt(!0):(Q$1.error("Access denied"),Nt("/")):(Q$1.error("URL doesn't exist"),Nt("/"))}catch(Bt){Q$1.error(Bt)}}bt&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(bt)?(s(!0),Wt(),s(!1)):(Q$1.error("URL does't exist"),Nt("/")))},[bt,at]);const kt=Wt=>{const{name:Yt,value:Bt}=Wt.target;et({...a,[Yt]:Bt})},Dt=Wt=>{et({...a,[Wt.target.name]:Wt.target.files})},jt=async Wt=>{Wt.preventDefault();try{s(!0);const Yt=await Rt(xt),Bt=bt&&at?bt:St.email;await rf(rh(db,"userSetting",Bt),{cids:Sf(Yt)}),await sf(rh(db,"cidMetaData",Yt),{cid:Yt,name:xt[0].name,metaData:{diseaseName:ht,hospitalName:dt,doctorName:ft,testDate:vt,medicinePrescribed:wt,recoveryDate:Ct}}),s(!1),Q$1.success("Successfully uploaded !"),et({diseaseName:"",hospitalName:"",doctorName:"",testDate:"",medicinePrescribed:"",recoveryDate:"",medicalFile:null})}catch(Yt){s(!1),Q$1.error(Yt)}};return jsx(Wrapper$2,{children:o?jsx(HashLoader,{color:"#76d636",loading:o,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"}):jsxs("div",{className:"container",children:[jsxs("header",{children:[jsxs("div",{children:["New Details ",jsx(AiFillFileAdd,{})]}),jsxs("span",{style:{textAlign:"center"},children:[console.log(bt,at),bt&&at?bt:St.email]})]}),jsx("form",{onSubmit:jt,children:jsxs("div",{className:"form first",children:[jsxs("div",{className:"details Disease",children:[jsx("span",{className:"",title:"",children:"Medical Details"}),jsx("br",{}),jsx("br",{}),jsxs("div",{className:"fields",children:[jsxs("div",{className:"input-field",children:[jsx("label",{children:"Disease Name"}),jsx("input",{type:"text",name:"diseaseName",value:ht,onChange:kt,placeholder:"Enter Disease name",required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Hospital Name"}),jsx("input",{type:"text",name:"hospitalName",value:dt,onChange:kt,placeholder:"Enter hospital name",required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Doctor Name"}),jsx("input",{type:"text",name:"doctorName",value:ft,onChange:kt,placeholder:"Enter Doctor Name",required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Test Date"}),jsx("input",{type:"date",name:"testDate",value:vt,onChange:kt,placeholder:"Enter test date",required:!0})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Recovery Date (only if recovered)"}),jsx("input",{type:"date",name:"recoveryDate",value:Ct,onChange:kt,placeholder:"Enter test date"})]}),jsxs("div",{className:"input-field",children:[jsx("label",{children:"Medicine Prescribed"}),jsx("input",{type:"text",name:"medicinePrescribed",value:wt,onChange:kt,placeholder:"Enter medicine prescribed",required:!0})]}),jsxs("div",{children:[jsx("label",{htmlFor:"medicalFile",children:`${xt?xt[0].name:"Add a medical file "}`}),jsx("input",{type:"file",id:"medicalFile",name:"medicalFile",accept:"image/*,application/pdf",style:{display:"none"},onChange:Dt,required:!0})]})]})]}),jsx("button",{className:"nextbtn",type:"submit",children:jsx("span",{className:"btnText",children:"Submit"})})]})})]})})},Search$1="";function BsSearch(o){return GenIcon({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"}}]})(o)}const Searchbar=()=>{const[o,s]=reactExports.useState(""),{currentUser:a}=reactExports.useContext(AuthContext);return jsx(Fragment,{children:jsx("div",{className:"search",children:jsxs("form",{className:"searchForm",onSubmit:async at=>{at.preventDefault();try{if(o===a.email){Q$1("It's your email address");return}(await Jl(rh(db,"userSetting",o))).exists()?(await rf(rh(db,"userSetting",o),{notification:Sf(a.email)}),Q$1.success("Access Request sent !")):Q$1.error("User doesn't exists")}catch(lt){Q$1.error(lt)}},children:[jsx("input",{type:"email",placeholder:"Find a user",onChange:at=>s(at.target.value),value:o,required:!0}),jsx("button",{type:"submit",children:jsx(BsSearch,{})})]})})})},Wrapper$1=styled.div`
  margin-top: 15px;
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  a {
    text-decoration: none;
    text-align: center;
  }

  .wrapper {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(12rem, 16rem));
    gap: 2rem;
    justify-content: center;
    margin-top: 15px;
  }
  .card {
    overflow: hidden;
    box-shadow: 0 2px 20px #e1e5ee;
    border-radius: 0.2rem;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    cursor: pointer;
    transition: transform 200ms ease-in;
  }
  .card__image {
    height: 7rem;
    width: 100%;
    object-fit: cover;
  }
  .card__title {
    padding: 1rem;
  }
  .card__description {
    padding: 0 1rem;
  }
  .card__btn {
    padding: 1rem;
    font-family: inherit;
    font-weight: bold;
    font-size: 1rem;
    margin: 1rem;
    border: 2px solid #d50000;
    background: transparent;
    color: #d50000;
    border-radius: 0.2rem;
    transition: background 200ms ease-in, color 200ms ease-in;
  }
  .card__btn.add {
    color: green;
    border-color: green;
    padding: 8px;
    margin: 6px 1rem;
  }

  .card:hover {
    transform: scale(1.02);
  }
  .card__btn:hover {
    background: #d50000;
    color: white;
  }
  .card__btn.add:hover {
    background: green;
  }
`,Search=()=>{const[o,s]=reactExports.useState(!1),[a,et]=reactExports.useState([]),[at,lt]=reactExports.useState([]),{currentUser:ht}=reactExports.useContext(AuthContext);reactExports.useEffect(()=>{async function ft(){try{s(!0);const vt=await Jl(rh(db,"userSetting",ht.email));if(vt.exists()){const wt=vt.data();et(wt.access),lt(wt.permission),s(!1)}else console.log("No record")}catch(vt){s(!1),Q$1.error(vt)}}ft()},[]);const dt=async ft=>{try{console.log(ft),await rf(rh(db,"userSetting",ht.email),{access:Df(ft)}),await rf(rh(db,"userSetting",ft),{permission:Df(ht.email)});const vt=a.filter(wt=>wt!==ft);et(vt),Q$1.success(`${ft} request accepted`)}catch(vt){Q$1.error(vt)}};return jsxs("div",{children:[jsx(Searchbar,{}),o?jsx("div",{className:"loader",style:{marginTop:"10px",display:"flex",alignItems:"center",justifyContent:"center"},children:jsx(HashLoader,{color:"#76d636",loading:o,cssOverride:"",size:100,"aria-label":"Loading Spinner","data-testid":"loader"})}):jsxs(Wrapper$1,{children:[at.length!=0&&jsxs(Fragment,{children:[jsx("h2",{style:{textAlign:"center"},children:"Permission list"}),jsx("div",{className:"wrapper",children:at.map(ft=>jsxs("div",{className:"card",children:[jsxs("div",{className:"card__body",children:[jsx(FaUserAlt,{className:"card__image",style:{color:"grey"}}),jsx("h2",{className:"card__title",children:ft})]}),jsx(Link,{to:`/history/${ft}/`,className:"card__btn add",children:"See medical history"}),jsx(Link,{to:`/new/${ft}/`,className:"card__btn add",children:"Add record"})]},ft))})]}),a.length!=0&&jsxs(Fragment,{children:[jsx("h2",{style:{textAlign:"center",marginTop:"10px"},children:"Access list"}),jsx("div",{className:"wrapper",children:a.map(ft=>jsxs("div",{className:"card",children:[jsxs("div",{className:"card__body",children:[jsx(FaUserAlt,{className:"card__image",style:{color:"grey"}}),jsx("h2",{className:"card__title",children:ft})]}),jsx("button",{className:"card__btn",onClick:()=>{dt(ft)},children:"Remove access"})]},ft))})]})]})]})},Wrapper1=styled.div`
  margin-top: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  color: #988e7b;

  .notificationCard {
    display: flex;
  }
`,Wrapper2=styled.div`
  margin-top: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;

  .notificationCard {
    display: flex;
    align-items: center;
    gap: 20px;
    flex: 1;
  }

  button {
    border: none;
    outline: none;
    background: transparent;
    cursor: pointer;
  }
`,Notification=()=>{const[o,s]=reactExports.useState([]),{currentUser:a}=reactExports.useContext(AuthContext);reactExports.useEffect(()=>{async function lt(){try{const ht=await Jl(rh(db,"userSetting",a.email));if(ht.exists()){const dt=ht.data().notification;dt.length!=0&&s(dt)}}catch(ht){Q$1.error(ht)}}lt()},[]);const et=async lt=>{try{await rf(rh(db,"userSetting",a.email),{notification:Df(lt),access:Sf(lt)}),await rf(rh(db,"userSetting",lt),{permission:Sf(a.email)});const ht=o.filter(dt=>dt!==lt);s(ht),Q$1.success(`${lt} request accepted`)}catch(ht){Q$1.error(ht)}},at=async lt=>{try{await rf(rh(db,"userSetting",a.email),{notification:Df(lt)});const ht=o.filter(dt=>dt!==lt);s(ht),Q$1.success(`${lt} request rejected`)}catch(ht){Q$1.error(ht)}};return jsx(Wrapper2,{children:jsx(Wrapper$1,{children:o.length===0?jsxs(Wrapper1,{children:[jsx(RiNotificationOffFill,{style:{fontSize:"100px"}}),jsx("h2",{children:"No notification"})]}):jsxs(Fragment,{children:[jsx("h1",{children:"Access requests"}),o.map(lt=>jsxs("div",{className:"card",style:{marginTop:"20px",padding:"10px 0"},children:[jsxs("div",{className:"card__body",children:[jsx(FaUserAlt,{className:"card__image",style:{color:"grey"}}),jsx("h2",{className:"card__title",children:lt})]}),jsxs("div",{className:"buttons",style:{display:"flex",justifyContent:"space-around",alignItems:"center"},children:[jsx("button",{className:"notificationAccept",onClick:()=>et(lt),style:{fontSize:"32px"},children:""}),jsx("button",{className:"notificationReject",onClick:()=>at(lt),style:{fontSize:"32px"},children:""})]})]},lt))]})})})};function TbError404(o){return GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M3 7v4a1 1 0 0 0 1 1h3"}},{tag:"path",attr:{d:"M7 7v10"}},{tag:"path",attr:{d:"M10 8v8a1 1 0 0 0 1 1h2a1 1 0 0 0 1 -1v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1z"}},{tag:"path",attr:{d:"M17 7v4a1 1 0 0 0 1 1h3"}},{tag:"path",attr:{d:"M21 7v10"}}]})(o)}const Wrapper=styled.div`
  div {
    width: 100dvw;
    height: 100dvh;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    background: linear-gradient(
      54deg,
      rgba(8, 8, 122, 0.74) 0%,
      rgb(8, 148, 245) 48%,
      rgb(2, 158, 12) 100%
    );
  }

  .notFound {
    color: white;
    text-align: center;
  }

  p,
  a {
    font-size: 30px;
  }
  a {
    text-decoration: none;
    color: white;
    cursor: pointer;
    border: 1px solid black;
    padding: 1rem;
    background: white;
    color: black;
    border-radius: 10px;
  }
`,PageNotFound=()=>jsx(Wrapper,{children:jsx("div",{children:jsxs("div",{className:"notFound",children:[jsx(TbError404,{style:{fontSize:"300px"}}),jsx(Link,{to:"/",children:"Home "})]})})});function App(){const{currentUser:o}=reactExports.useContext(AuthContext),s=({children:a})=>o?a:jsx(Navigate,{to:"/auth"});return jsxs("div",{className:"App",children:[jsxs(BrowserRouter,{children:[o&&jsx(Navbar,{}),jsxs(Routes,{children:[jsx(Route,{index:!0,element:jsx(s,{children:jsx(Home,{})})}),jsx(Route,{path:"/auth",element:jsx(Auth,{})}),jsx(Route,{path:"/new",element:jsx(s,{children:jsx(New,{})})}),jsx(Route,{path:"/account",element:jsx(s,{children:jsx(Account,{})})}),jsx(Route,{path:"/notifications",element:jsx(s,{children:jsx(Notification,{})})}),jsx(Route,{path:"/access",element:jsx(s,{children:jsx(Search,{})})}),jsx(Route,{path:"/new/:email/",element:jsx(s,{children:jsx(New,{})})}),jsx(Route,{path:"/history/:email/",element:jsx(s,{children:jsx(Home,{})})}),jsx(Route,{path:"*",element:jsx(PageNotFound,{})})]})]}),jsx(k$3,{position:"top-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]})}client.createRoot(document.getElementById("root")).render(jsx(AuthContextProvider,{children:jsx(Web3ContextProvider,{children:jsx(React.StrictMode,{children:jsx(App,{})})})}));
